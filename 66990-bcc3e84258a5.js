"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[66990],{15838:(e,t,a)=>{a.d(t,{Cd:()=>c,E5:()=>l,Im:()=>o,nW:()=>s});var n=a(11083),r=a(94416);let i="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME","turbo.error":"TURBO.ERROR",ui:"UI",hard:"HARD"};function l(){window.performance.clearResourceTimings(),window.performance.mark(i)}function c(e){(0,n.i)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function o(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=s[(0,r.di)()],a=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:a}})),(0,n.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:a,initiator:(0,r.Pv)()||"rails"}})}},23470:(e,t,a)=>{a.d(t,{F:()=>c});var n,r=a(74848),i=a(5524),s=a(96540),l=a(51220);function c({items:e,itemHeight:t,style:a,renderItem:n,makeKey:i,ariaControls:c,shouldUseActionList:h=!1,className:u,containerRole:f="none"}){let m=(0,s.useRef)(null),g=(0,l.Te)({count:e.length,getScrollElement:(0,s.useCallback)(()=>m.current,[]),estimateSize:(0,s.useCallback)(()=>t,[t])});return(0,r.jsx)(o,{ref:m,style:a,virtualizer:g,id:c,shouldUseActionList:h,className:u,children:g.getVirtualItems().map((t,a)=>(0,r.jsx)(d,{containerRole:f,virtualRow:t,children:n(e[t.index],a)},i(e[t.index])))})}let o=s.forwardRef(function({children:e,style:t,virtualizer:a,id:n,shouldUseActionList:s,className:l},c){return(0,r.jsx)("div",{ref:c,style:t,id:n,className:l,children:s?(0,r.jsx)(i.l,{id:n,role:"menu",style:{height:a.getTotalSize(),width:"100%",position:"relative"},selectionVariant:"single",children:e}):(0,r.jsx)("ul",{role:"menu",style:{height:a.getTotalSize(),width:"100%",position:"relative"},id:n,children:e})})});function d({children:e,containerRole:t="none",virtualRow:a}){return(0,r.jsx)("li",{role:t,style:{position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`},children:e})}try{c.displayName||(c.displayName="FixedSizeVirtualList")}catch{}try{(n=VirtualListContainerInner).displayName||(n.displayName="VirtualListContainerInner")}catch{}try{d.displayName||(d.displayName="ItemContainer")}catch{}},38077:(e,t,a)=>{a.d(t,{z:()=>r});var n=a(74848);function r({text:e,search:t,hideOverflow:a=!1,overflowWidth:r=0}){let i=(function(e,t){if(!t)return[e];let a=e.toLowerCase().split(t.toLowerCase());if(a.length<2)return[e];let n=0,r=[];for(let i of a)r.push(e.substring(n,n+i.length)),n+=i.length,r.push(e.substring(n,n+t.length)),n+=t.length;return r})(e,t).map((e,t)=>t%2==1?(0,n.jsx)("strong",{className:"color-fg-default",children:e},t):e),s=r?`${r}px`:void 0;return(0,n.jsx)("div",{style:{maxWidth:s,overflow:a?"hidden":"visible",color:t.length?"fg.muted":"fg.default"},className:"HighlightedText-module__HighlightedText--XiJMv",children:i})}try{r.displayName||(r.displayName="HighlightedText")}catch{}},41245:(e,t,a)=>{a.d(t,{A:()=>n});let n=(e,t)=>{let a=new URL(e,window.location.origin),n=new URL(t,window.location.origin);return n.href.includes("#")&&a.host===n.host&&a.pathname===n.pathname&&a.search===n.search}},65432:(e,t,a)=>{a.d(t,{Bu:()=>m,SC:()=>o,Ti:()=>u,iS:()=>d,k5:()=>c,o4:()=>h,rZ:()=>f});var n=a(82591),r=a(73900),i=a(15838),s=a(94416);let l=0;function c(){l=0,document.dispatchEvent(new Event(n.z.INITIAL)),(0,s.xT)()}function o(e){(0,s.LM)()||(document.dispatchEvent(new Event(n.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,s.Vy)(e),(0,s.ZW)(),(0,s.HK)(),(0,i.E5)())}function d(e={}){p(e)&&(l+=1,document.dispatchEvent(new r.ni((0,s.di)(),l)),u(e))}function h(e={}){if(!p(e))return;l=0;let t=(0,s.my)()||s.BW;document.dispatchEvent(new r.Kq((0,s.di)(),t)),g(),(0,i.Cd)(t),(0,s.xT)()}function u(e={}){if(!p(e))return;let t=(0,s.di)();g(),document.dispatchEvent(new r.RQ(t)),(0,s.Ff)(),(0,s.JA)(t)}function f(e={}){p(e)&&((0,i.Im)(),document.dispatchEvent(new Event(n.z.RENDER)))}function m(){document.dispatchEvent(new Event(n.z.FRAME_UPDATE))}function g(){document.dispatchEvent(new Event(n.z.PROGRESS_BAR.END))}function p({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,s.LM)()&&(0===t.length||t.includes((0,s.di)()))&&(!e||!(0,s.gc)())}},66990:(e,t,a)=>{a.d(t,{aH:()=>el,PI:()=>ei,Qe:()=>es,JJ:()=>er});var n=a(74848),r=a(21373),i=a(72511),s=a(10436),l=a(25407),c=a(38621),o=a(81960),d=a(26108),h=a(5524),u=a(99511),f=a(69726),m=a(96540),g=a(71315),p=a(54571),y=a(29e3),x=a(40961);function S({isOpen:e,onDismiss:t,onConfirm:a}){let[i]=(0,p.I)(()=>document.body,null,[g.XC?.body]);return i?(0,x.createPortal)((0,n.jsxs)(y.A,{isOpen:e,onDismiss:t,children:[(0,n.jsx)(y.A.Header,{children:"Create branch"}),(0,n.jsxs)("div",{className:"p-3",children:[(0,n.jsx)("span",{children:"A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?"}),(0,n.jsxs)("div",{className:"CheckTagNameDialog-module__DialogFooterButtons--HNAWb",children:[(0,n.jsx)(r.Q,{onClick:t,children:"Cancel"}),(0,n.jsx)(r.Q,{variant:"danger",onClick:a,className:"ml-2",children:"Create"})]})]})]}),document.body):null}try{S.displayName||(S.displayName="CheckTagNameDialog")}catch{}var b=a(86877),v=a(15220),R=a(96379),C=a(70170);function T({onDismiss:e,onCreate:t,initialTagName:a,tagValidationUrl:r}){let[i,s]=(0,m.useState)(a),l=(0,m.useRef)(!1),c=(0,m.useRef)(null),o=i?.trim(),{state:d,message:h,validateTag:f}=function(e){let[t,a]=(0,m.useState)("empty"),[n,r]=(0,m.useState)(""),i=(0,m.useRef)(""),s=(0,m.useCallback)(async t=>{if(i.current=t,!t){a("empty"),r("Tag cannot be blank");return}a("loading");let n=new URL(e,window.location.origin),s=new URLSearchParams(n.search.slice(1));s.append("tag_name",t),n.search=s.toString();try{let e=await (0,R.DI)(n.toString(),{headers:{Accept:"application/json"}});if(t!==i.current)return;if(!e.ok){a("invalid"),r("Unable to validate tag name. Please try again.");return}let s=(await e.json()).status;a(s||"empty"),r(function(e,t){switch(e){case"branch_exists":case"pending":case"valid":return`${t} will be created on publish`;case"duplicate":return`${t} is used by another release`;case"empty":return"Tag cannot be blank";case"immutable":return`${t} is used by an immutable release and cannot be reused`;case"invalid":return"Contains invalid characters. Use safe special characters ., -, or _ instead";default:return""}}(s||"empty",t))}catch{if(t!==i.current)return;a("invalid"),r("Unable to validate tag name. Please try again.")}},[e]);return{state:t,message:n,validateTag:(0,m.useMemo)(()=>(0,C.s)(s,500),[s])}}(r),g="loading"===d,p="empty"===d&&l.current,y="invalid"===d||"immutable"===d||"duplicate"===d||p,x=!g&&h&&("valid"===d||"pending"===d||"branch_exists"===d||y);(0,m.useEffect)(()=>{a?.trim()&&f(a.trim())},[]);let S=(0,m.useCallback)(e=>{let t=e.target.value;s(t),l.current=!0,f(t.trim())},[f]),T=(0,m.useCallback)(()=>{o&&(t(o),e())},[o,t,e]),N=(0,m.useCallback)(e=>{e.preventDefault(),g||y||T()},[T,g,y]);return(0,n.jsx)(v.l,{onClose:e,title:"Create new tag",width:"medium",className:"CreateTagDialog-module__Dialog--a69Xp",initialFocusRef:c,footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:"Create",onClick:T,disabled:g||y,type:"submit"}],children:(0,n.jsx)("form",{onSubmit:N,children:(0,n.jsxs)(b.A,{required:!0,children:[(0,n.jsx)(b.A.Label,{children:"Tag"}),(0,n.jsx)(u.A,{ref:c,value:i,onChange:S,"aria-label":"Tag name",block:!0,loading:g}),x&&(0,n.jsx)(b.A.Validation,{variant:y?"error":"success",children:h}),"branch_exists"===d&&(0,n.jsx)(b.A.Caption,{children:"Creating a tag with the same name as a branch can cause ambiguity when selecting refs"})]})})})}try{T.displayName||(T.displayName="CreateTagDialog")}catch{}async function N(e,t){let a=new FormData;a.set("value",t);let n=await (0,R.DI)(e,{method:"POST",body:a,headers:{Accept:"application/json"}});return!!n.ok&&!!await n.text()}async function _(e,t,a){let n=new FormData;n.set("name",t),n.set("branch",a);let r=await (0,R.DI)(e,{method:"POST",body:n,headers:{Accept:"application/json"}});if(r.ok)return{success:!0,name:(await r.json()).name};try{let{error:e}=await r.json();if(e)return{success:!1,error:e};throw Error("Unknown response from create branch API")}catch{return{success:!1,error:"Something went wrong."}}}var j=a(31604),E=a(11683),w=a(34164);function k(e){let{ariaDescribedBy:t,ariaLabelledBy:a,ariaLabel:i,hotKey:s,onOpenChange:l,size:o,displayCommitish:d,variant:h,refType:u,children:f,preventClosing:g,inputRef:p,overlayOpen:y,onOverlayChange:x,focusTrapEnabled:S=!0,buttonClassName:b,buttonText:v,persistButtonText:R=!0,buttonPrefix:C,showIcon:T=!0,allowResizing:N,useFocusZone:_,disabled:k,anchoredOverlayProps:A,renderAnchor:I}=e,L=(0,m.useId)(),O=`-${e.idEnding||L}`,F=`ref-picker${O}`,D=(0,m.useCallback)(e=>{x(e),l?.(e)},[l,x]),P=(0,m.useMemo)(()=>S?{initialFocusRef:p}:{initialFocusRef:p,disabled:!0},[S,p]);return(0,n.jsx)(j.T,{open:y,overlayProps:{role:"dialog",width:"medium","aria-label":"branch"===u?"Select a branch":"Select a tag"},onOpen:()=>D(!0),onClose:()=>!g&&D(!1),renderAnchor:e=>{let l,f;return I?I({...e,"aria-labelledby":a,disabled:k}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Q,{...e,"data-hotkey":s,disabled:k,size:o,variant:h,style:{minWidth:N?0:void 0},trailingVisual:c.TriangleDownIcon,"aria-describedby":t,"aria-labelledby":a,"aria-label":a?void 0:i??`${d} ${u}`,"data-testid":"anchor-button",id:F,className:(0,w.$)(b,"RefSelectorAnchoredOverlay-module__RefSelectorOverlayBtn--D34zl"),children:(0,n.jsxs)("div",{className:"RefSelectorAnchoredOverlay-module__RefSelectorOverlayContainer--mCbv8",children:[T&&(0,n.jsx)("div",{className:"RefSelectorAnchoredOverlay-module__RefSelectorOverlayHeader--D4cnZ",children:"tag"===u?(0,n.jsx)(c.TagIcon,{size:"small"}):(0,n.jsx)(c.GitBranchIcon,{size:"small"})}),(0,n.jsx)("div",{style:{maxWidth:N?void 0:125},className:(0,w.$)("ref-selector-button-text-container","RefSelectorAnchoredOverlay-module__RefSelectorBtnTextContainer--yO402"),children:(0,n.jsxs)("span",{className:"RefSelectorAnchoredOverlay-module__RefSelectorText--bxVhQ",children:["\xa0",(l=d.length>0,f=v&&R?v:l?d:v||"",C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"fgColor-muted",children:[C,":"]}),(0,n.jsxs)("span",{children:[" ",f]})]}):f)]})})]})}),(0,n.jsx)("button",{hidden:!0,"data-testid":"ref-selector-hotkey-button","data-hotkey":s,onClick:()=>D(!0),"data-hotkey-scope":"read-only-cursor-text-area",disabled:k})]})},focusTrapSettings:P,focusZoneSettings:_?{bindKeys:E.z0.ArrowAll|E.z0.Tab}:{disabled:!0},...A,children:(0,n.jsx)("div",{"data-testid":"overlay-content","aria-labelledby":F,id:"selectPanel",style:{height:"100%"},children:f})})}try{k.displayName||(k.displayName="RefSelectorAnchoredOverlay")}catch{}var A=a(12683);function I({text:e,onClick:t,href:a,sx:r}){let i=!!a,s=(0,n.jsx)(A.az,{sx:{...r},children:e}),l={sx:{minWidth:0}};return i?(0,n.jsx)(h.l.LinkItem,{role:"link",href:a,onClick:()=>t?.(),...l,children:s}):(0,n.jsx)(h.l.Item,{role:"button",onSelect:()=>t?.(),...l,children:s})}try{I.displayName||(I.displayName="RefSelectorFooter")}catch{}var L=a(23470),O=a(26607),F=a(38077),D=a(96459);let P=m.memo(function({isCurrent:e,isDefault:t,href:a,gitRef:r,filterText:i,ariaPosInSet:s,ariaSetSize:l,onSelect:c,onClick:o,shouldSetAsDiv:d=!1,isPendingTag:u=!1}){let f=(0,n.jsx)(z,{gitRef:r,isDefault:t,isCurrent:e,filterText:i,isPendingTag:u}),m={"aria-posinset":d?void 0:s,"aria-setsize":d?void 0:l,"aria-checked":e,sx:{minWidth:0},onSelect:()=>{c?.(r),a&&g(a,{reloadDocument:!0})},onClick:()=>{o?.(r),a&&g(a,{reloadDocument:!0})}},g=(0,D.Z)();return d?(0,n.jsxs)(h.l.Item,{role:"menuitemradio",as:"div",...m,children:[f,u&&(0,n.jsx)(h.l.TrailingVisual,{className:"fg-muted mr-1",children:"Created on publish"})]}):(0,n.jsxs)(h.l.Item,{role:"menuitemradio",...m,children:[f,u&&(0,n.jsx)(h.l.TrailingVisual,{className:"fg-muted mr-1",children:"Created on publish"})]})}),z=m.memo(function({isCurrent:e,isDefault:t,gitRef:a,filterText:r,showLeadingVisual:i=!0}){return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{style:{display:"flex",minWidth:0,alignItems:"flex-end"},children:[i&&(0,n.jsx)(c.CheckIcon,{"aria-hidden":!0,"data-icon-visibility":e?"visible":"hidden",className:"RefItem-module__ItemIcon--uDlDK"}),(0,n.jsx)(F.z,{hideOverflow:!0,search:r,text:a},a)]}),t&&(0,n.jsx)(O.A,{children:"default"})]})});try{P.displayName||(P.displayName="RefItem")}catch{}try{z.displayName||(z.displayName="RefItemContent")}catch{}function V(e){return e.refs.length>20?(0,n.jsx)($,{...e}):(0,n.jsx)(B,{...e})}function B({refs:e,defaultBranch:t,currentCommitish:a,getHref:r,filterText:i,onSelectItem:s,ariaControls:l,pendingTag:c}){return(0,n.jsx)("ul",{style:{maxHeight:330,height:"100%",overflowY:"auto",padding:"var(--base-size-8)"},id:l,children:e.map(l=>(0,n.jsx)(P,{href:r?.(l),isCurrent:a===l,isDefault:t===l,filterText:i,gitRef:l,onSelect:s,onClick:s,ariaPosInSet:e.indexOf(l)+1,ariaSetSize:e.length,isPendingTag:c===l},l))})}function $({refs:e,defaultBranch:t,currentCommitish:a,getHref:r,filterText:i,onSelectItem:s,ariaControls:l,pendingTag:c}){return(0,n.jsx)(L.F,{ariaControls:l,items:e,itemHeight:32,style:{maxHeight:330,height:"100%",overflowY:"auto",padding:"var(--base-size-8)"},containerRole:"group",makeKey:e=>e,renderItem:l=>(0,n.jsx)(P,{shouldSetAsDiv:!0,href:r?.(l),isCurrent:a===l,isDefault:t===l,filterText:i,gitRef:l,onSelect:s,onClick:s,ariaPosInSet:e.indexOf(l)+1,ariaSetSize:e.length,isPendingTag:c===l},l),className:"RefsList-module__FixedSizeVirtualList--sfJlf"})}try{V.displayName||(V.displayName="RefsList")}catch{}try{B.displayName||(B.displayName="FullRefsList")}catch{}try{$.displayName||($.displayName="VirtualRefsList")}catch{}var K=a(69655);function H(e,t,a,n,r){return new K.d("branch"===n?K._.Branch:K._.Tag,r,(0,l.SHX)({owner:t,repo:a,action:"refs"}),e,`${t}/${a}`)}function U(e,t){let a=e.fetchFailed?"failed":e.isLoading?"loading":"loaded";return{status:a,refs:e.currentSearchResult,showCreateAction:t&&e.searchTerm.length>0&&!e.exactMatchFound,searchIndex:e}}function W(e){let t=(0,m.useRef)(void 0);return t.current||(t.current=e()),t}var M=a(4559);let G="RefSelectorV1-module__RefActionText--b19i0",Q="RefSelectorV1-module__Divider--fKdqp";function Z(e){let{ariaDescribedBy:t,ariaLabelledBy:a,ariaLabel:r,cacheKey:i,owner:s,repo:c,canCreate:o,canCreateTag:d=!1,types:h,hotKey:u,onOpenChange:f,size:g,variant:p,getHref:y,onBeforeCreate:x,onRefTypeChanged:b,currentCommitish:v,onCreateError:R,onSelectItem:C,closeOnSelect:j,selectedRefType:E,customFooterItemProps:w,buttonClassName:A,buttonText:I,persistButtonText:L,buttonPrefix:O,showIcon:F,allowResizing:D,idEnding:P,useFocusZone:z,disabled:V,anchoredOverlayProps:B,renderAnchor:$,actionListDescription:K}=e,[M,G]=(0,m.useState)(""),Q=(0,m.useRef)(null),Z=(0,m.useRef)(null),q="tree"===E?v.slice(0,7):v,[J,Y]=(0,m.useState)(!1),[ee,et]=(0,m.useState)(!0),[ea,en]=(0,m.useState)(!1),[ei,es]=(0,m.useState)(!1),[el,ec]=(0,m.useState)(null),[eo,ed]=(0,m.useState)(("tree"===E?"branch":E)??(h??er)[0]),eh=(0,m.useId)(),eu=function(e,t,a,n,r,i){let[s,l]=(0,m.useState)({status:"uninitialized",refs:[],showCreateAction:!1,searchIndex:null}),c=(0,m.useRef)({render:()=>{l(U(d.current,i))}}),o=(0,m.useRef)({render:()=>{l(U(h.current,i))}}),d=W(()=>H(e,t,a,"branch",c.current)),h=W(()=>H(e,t,a,"tag",o.current));return(0,m.useEffect)(()=>{let r=`${t}/${a}`;d.current.nameWithOwner!==r&&(d.current=H(e,t,a,"branch",c.current)),h.current.nameWithOwner!==r&&(h.current=H(e,t,a,"tag",o.current)),async function(){let e="branch"===n?d.current:h.current;e.render(),await e.fetchData(),e.search(""),e.render()}()},[e,t,a,n,d,h]),(0,m.useEffect)(()=>{let e="branch"===n?d.current:h.current;e.search(r),e.render()},[r,n,d,h]),s}(i,s,c,eo,M,o),ef=(0,l.SHX)({owner:s,repo:c,action:"branches"}),em=(0,l.FeW)({owner:s,repo:c}),eg=(0,l.BUl)({owner:s,repo:c}),ep=(0,m.useCallback)(async()=>{x?.(M);let e=await _(ef,M,v);e.success?y&&(eu.searchIndex?.clearLocalStorage(),window.location.href=y(e.name)):R?.(e.error)},[x,M,ef,v,y,R,eu.searchIndex]),ey=(0,m.useCallback)(async()=>{if(await N(em,M)){en(!0),et(!1);return}en(!1),et(!1),ep()},[em,M,ep,en]),ex=(0,m.useCallback)(e=>{ed(e),b?.(e)},[ed,b]);function eS(){Y(!1)}let eb=(0,m.useCallback)((e,t)=>{C?.(e,t),eS()},[C]),ev=(0,m.useCallback)(()=>{"tag"===eo?(eb(M,"tag"),eS()):ey()},[eo,M,eb,ey]),eR=(0,m.useCallback)(e=>{eu.refs.includes(e)||ec(e),G(""),eb(e,"tag"),es(!1)},[eb,ec,G,eu.refs]),eC=(0,m.useCallback)(()=>{es(!0),eS()},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{ariaDescribedBy:K?eh:t,ariaLabelledBy:a,ariaLabel:r,refType:eo,displayCommitish:q,focusTrapEnabled:ee,preventClosing:ea,size:g,variant:p,onOpenChange:f,hotKey:u,inputRef:Q,overlayOpen:J,onOverlayChange:Y,buttonClassName:A,buttonText:I,persistButtonText:L,buttonPrefix:O,showIcon:F,allowResizing:D,idEnding:P,useFocusZone:z,disabled:V,anchoredOverlayProps:B,renderAnchor:$,children:(0,n.jsx)(X,{filterText:M,displayCommitish:q,onFilterChange:G,refType:eo,onRefTypeChange:ex,refsState:eu,onCreateError:e.onCreateError,showTagWarningDialog:ea,setShowTagWarningDialog:en,onCreateRef:ev,inputRef:Q,createButtonRef:Z,onSelectItem:eb,closeOnSelect:j,closeRefSelector:eS,customFooterItemProps:w,...e,selectedRefType:eo,onOpenCreateTagDialog:eC,pendingTag:el,canCreateTag:d,descriptionId:eh})}),ea&&(0,n.jsx)(S,{isOpen:ea,onDismiss:()=>{en(!1),Z.current?.focus()},onConfirm:ep}),ei&&(0,n.jsx)(T,{onDismiss:()=>es(!1),onCreate:eR,initialTagName:M,tagValidationUrl:eg})]})}function X({canCreate:e,currentCommitish:t,displayCommitish:a,defaultBranch:i,filterText:s,getHref:l,hideShowAll:u,onSelectItem:f,closeOnSelect:g,closeRefSelector:p,onFilterChange:y,onRefTypeChange:x,owner:S,selectedRefType:b,refsState:v,refType:R,repo:C,types:T,onCreateRef:N,inputRef:_,createButtonRef:j,customFooterItemProps:E,viewAllJustify:k,actionListHeadingText:A,actionListDescription:L,onOpenCreateTagDialog:O,pendingTag:F,canCreateTag:D,descriptionId:P}){var z;let{refs:B,showCreateAction:$,status:K}=v,H=(0,m.useMemo)(()=>"tag"===R&&F&&!B.includes(F)?[F,...B]:B,[B,F,R]);return(0,m.useEffect)(()=>{let{single:e,plural:t}={branch:{single:"branch",plural:"branches"},tag:{single:"tag",plural:"tags"}}[R],a=`${H.length} ${1===H.length?e:t} found`,n=setTimeout(()=>{(0,M.i)(a)},1e3);return()=>clearTimeout(n)},[H,R]),(0,n.jsxs)("div",{className:"py-2",style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,n.jsxs)("div",{className:"RefSelectorV1-module__RefSelectorContainer--DFuLg",children:[(0,n.jsxs)("div",{className:"RefSelectorV1-module__RefSelectorInnerContainer--pH_Dn",children:[(0,n.jsx)(o.A,{as:"h2",className:"RefSelectorV1-module__RefSelectorHeading--FSd2d",children:A??((z=T??er).includes("branch")&&z.includes("tag")?"Switch branches/tags":z.includes("branch")?"Switch branches":z.includes("tag")?"Switch tags":void 0)}),(0,n.jsx)(d.K,{tooltipDirection:"w","aria-label":"Cancel",variant:"invisible",icon:c.XIcon,onClick:p,className:"RefSelectorV1-module__RefSelectorCloseButton--x91Lr"})]}),L&&(0,n.jsx)("p",{id:P,className:"color-fg-muted f5",style:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"8px"},children:L}),(0,n.jsx)(q,{defaultText:s,refType:R,canCreate:e,onFilterChange:y,ref:_})]}),(0,n.jsxs)("div",{style:{paddingBottom:$&&0===H.length?0:2,flex:1,minHeight:0},children:[(T??er).length>1&&(0,n.jsx)("div",{className:"px-2 pb-2",children:(0,n.jsx)(es,{refType:R,onRefTypeChanged:x,className:"RefSelectorV1-module__RefTypeTabs--slHyr"})}),"loading"===K||"uninitialized"===K?(0,n.jsx)(Y,{refType:R}):"failed"===K?(0,n.jsx)(el,{refType:R}):0!==H.length||$&&"tag"!==R?(0,n.jsx)(V,{ariaControls:"branch"===R?"branches":"tags",filterText:s,refs:H,defaultBranch:"branch"===R?i:"",currentCommitish:R===b?t:"",getHref:l,onSelectItem:e=>{f?.(e,R),g&&p()},pendingTag:F}):(0,n.jsx)(ee,{})]}),(0,n.jsxs)(h.l,{className:"p-0",children:[$&&(0,n.jsxs)(n.Fragment,{children:["branch"===R&&B.length>0&&(0,n.jsx)(h.l.Divider,{className:(0,w.$)("d-block mt-0",Q)}),(0,n.jsx)(ea,{displayCommitish:a,newRefName:s,onCreateRef:N,createButtonRef:j,refType:R})]}),(!u||E)&&(0,n.jsx)(h.l.Divider,{className:(0,w.$)(`d-block ${$?"mt-2":"mt-0"}`,Q)}),!u&&(0,n.jsx)(et,{justify:k,refType:R,owner:S,repo:C,onClick:p}),E&&(0,n.jsx)(I,{...E,onClick:function(){E?.onClick?.(),p()}})]}),"tag"===R&&D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.l.Divider,{className:(0,w.$)("d-block mt-0",Q)}),(0,n.jsx)("div",{className:"px-2",children:(0,n.jsx)(r.Q,{onClick:O,block:!0,children:"Create new tag"})})]})]})}let q=(0,m.forwardRef)(J);function J({refType:e,canCreate:t,onFilterChange:a,defaultText:r},i){return(0,n.jsx)("div",{className:"RefSelectorV1-module__RefSelectorFilterContainer--nzwdI",children:(0,n.jsx)(u.A,{"aria-label":"tag"===e?"Filter tags":"Filter branches",leadingVisual:c.SearchIcon,value:r,placeholder:"tag"===e?t?"Search or create a new tag":"Search":t?"Find or create a branch...":"Find a branch...",ref:i,onInput:e=>{let t=e.target;t instanceof HTMLInputElement&&a(t.value)},className:"RefSelectorV1-module__RefSelectorInput--Myj_6"})})}function Y({refType:e}){return(0,n.jsx)("div",{className:"RefSelectorV1-module__LoadingContainer--B9AR4",children:(0,n.jsx)(f.A,{size:"medium","aria-label":`Loading ${"branch"===e?"branches":"tags"}...`})})}function ee(){return(0,n.jsx)("div",{className:"RefSelectorV1-module__ZeroStateText--ZRhw5",children:"Nothing to show"})}function et({refType:e,owner:t,repo:a,onClick:r,justify:i="start"}){let s="branch"===e?"branches":"tags";return(0,n.jsx)(h.l.LinkItem,{role:"link",href:(0,l.SHX)({owner:t,repo:a,action:s}),onClick:r,className:"RefSelectorV1-module__ViewAllRefsActionLink--riztS",children:(0,n.jsxs)("div",{style:{justifyContent:i},className:"RefSelectorV1-module__ViewAllRefsActionText--T80I4",children:["View all ",s]})})}function ea({displayCommitish:e,newRefName:t,onCreateRef:a,createButtonRef:r,refType:i}){return"tag"===i?null:(0,n.jsxs)(h.l.Item,{role:"button",onSelect:a,ref:r,children:[(0,n.jsx)(c.GitBranchIcon,{className:"RefSelectorV1-module__BranchOcticon--Fpshx"}),(0,n.jsx)("span",{children:"Create branch\xa0"}),(0,n.jsx)("span",{className:G,children:t}),(0,n.jsx)("span",{children:"\xa0from\xa0"}),(0,n.jsx)("span",{className:G,children:e})]})}try{Z.displayName||(Z.displayName="RefSelectorV1")}catch{}try{X.displayName||(X.displayName="RefSelectorActionList")}catch{}try{q.displayName||(q.displayName="RefTextFilter")}catch{}try{J.displayName||(J.displayName="RefTextFilterWithRef")}catch{}try{Y.displayName||(Y.displayName="Loading")}catch{}try{ee.displayName||(ee.displayName="RefsZeroState")}catch{}try{et.displayName||(et.displayName="ViewAllRefsAction")}catch{}try{ea.displayName||(ea.displayName="CreateRefAction")}catch{}let en="RefSelector-module__RefSelectorTabLink--WGX7u",er=["branch","tag"];function ei(e){return(0,n.jsx)(Z,{...e})}function es({refType:e,onRefTypeChanged:t,sx:a,className:i}){return(0,n.jsxs)(s.jl,{sx:{...a},"aria-label":"Ref type",className:(0,w.$)("RefSelector-module__RefSelectorTabs--nkSFr",i),children:[(0,n.jsx)(s.jl.Link,{as:r.Q,id:"branch-button","aria-controls":"branches",selected:"branch"===e,onClick:()=>t("branch"),className:en,children:"Branches"}),(0,n.jsx)(s.jl.Link,{as:r.Q,id:"tag-button","aria-controls":"tags",selected:"tag"===e,onClick:()=>t("tag"),className:en,children:"Tags"})]})}function el({refType:e}){return(0,n.jsxs)(i.A,{variant:"danger",children:["Could not load ","branch"===e?"branches":"tags"]})}try{ei.displayName||(ei.displayName="RefSelector")}catch{}try{es.displayName||(es.displayName="RefTypeTabs")}catch{}try{el.displayName||(el.displayName="LoadingFailed")}catch{}},69655:(e,t,a)=>{a.d(t,{_:()=>o,d:()=>SearchIndex});var n=a(50467),r=a(82075),i=a(11083);let{getItem:s,setItem:l,removeItem:c}=(0,r.A)("localStorage",{throwQuotaErrorsOnSet:!0}),o={Branch:"branch",Tag:"tag"};let SearchIndex=class SearchIndex{render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;let e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(e){if(this.emitStats(e),!e.ok){this.fetchFailed=!0;return}let t=e.clone(),a=await e.json();this.knownItems=a.refs,this.cacheKey=a.cacheKey,this.flushToLocalStorage(await t.text())}emitStats(e){if(!e.ok)return void(0,i.i)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);switch(e.status){case 200:(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break;case 304:(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break;default:(0,i.i)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(e){let t;if(this.searchTerm=e,""===e){this.currentSearchResult=this.knownItems;return}let a=[],n=[];for(let r of(this.exactMatchFound=!1,this.knownItems))if(!((t=r.indexOf(e))<0)){if(0===t){e===r?(n.unshift(r),this.exactMatchFound=!0):n.push(r);continue}a.push(r)}this.currentSearchResult=[...n,...a]}bootstrapFromLocalStorage(){let e=s(this.localStorageKey);if(!e)return!1;let t=JSON.parse(e);return t.cacheKey===this.cacheKey&&"refs"in t?(this.knownItems=t.refs,this.isLoading=!1,(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0):(c(this.localStorageKey),!1)}async flushToLocalStorage(e){try{l(this.localStorageKey,e)}catch(t){if(t.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,i.i)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{l(this.localStorageKey,e)}catch(e){e.message.toLowerCase().includes("quota")&&(0,i.i)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw t}}clearSiblingLocalStorage(){for(let e of Object.keys(localStorage))e.startsWith(SearchIndex.LocalStoragePrefix)&&c(e)}clearLocalStorage(){c(this.localStorageKey)}get localStorageKey(){return`${SearchIndex.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}constructor(e,t,a,r,i){(0,n._)(this,"refType",void 0),(0,n._)(this,"selector",void 0),(0,n._)(this,"knownItems",[]),(0,n._)(this,"currentSearchResult",[]),(0,n._)(this,"exactMatchFound",!1),(0,n._)(this,"searchTerm",""),(0,n._)(this,"refEndpoint",void 0),(0,n._)(this,"cacheKey",void 0),(0,n._)(this,"nameWithOwner",void 0),(0,n._)(this,"isLoading",!0),(0,n._)(this,"fetchInProgress",!1),(0,n._)(this,"fetchFailed",!1),this.refType=e,this.selector=t,this.refEndpoint=a,this.cacheKey=r,this.nameWithOwner=i}};(0,n._)(SearchIndex,"LocalStoragePrefix","ref-selector")},73900:(e,t,a)=>{a.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var n=a(50467),r=a(82591);let i=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,n._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,r.z.SUCCESS),(0,n._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,r.z.ERROR),(0,n._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,n._)(this,"payload",void 0),(0,n._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},82591:(e,t,a)=>{a.d(t,{z:()=>n});let n=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},96459:(e,t,a)=>{a.d(t,{Z:()=>o,o:()=>d});var n=a(96540),r=a(61526),i=a(41245),s=a(65432),l=a(58578),c=a(24518);let o=()=>{let{routes:e}=n.useContext(c.k),t=(0,r.Zp)();return n.useCallback((c,o={})=>{let d=(0,r.o1)(c).pathname;if(!(0,r.ue)(e,d)||o.reloadDocument){let e="string"==typeof c?c:(0,r.AO)(c);o.preventTurbo?window.location.href=e:(async()=>{let{softNavigate:t}=await Promise.all([a.e(7332),a.e(54563)]).then(a.bind(a,54563));t(e)})()}else{(0,i.A)(location.href,c.toString())||(0,s.SC)("react");let{preventAutofocus:e,...a}=o;(0,n.startTransition)(()=>{t(c,e?{...a,state:{[l.V]:!0,...a.state}}:a)})}},[t,e])},d=()=>{let[e]=(0,r.ok)(),t=o(),{pathname:a}=(0,r.zy)(),i=n.useCallback((n,i={})=>{t({pathname:a,search:(0,r.PI)("function"==typeof n?n(e):n).toString()},i)},[e,t,a]);return[e,i]}}}]);
//# sourceMappingURL=66990-e8f13ed84f1d.js.map