"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[12362,57923,97174],{2970:(e,t,a)=>{a.d(t,{c:()=>S});var n=a(74848),r=a(73189),i=a(34164),l=a(96540),s=a(75986),o=a(18377),c=a(24347),d=a(35220),u=a(9214);let m=(0,l.createContext)({actionsOpen:!1,setActionsOpen:r.l}),h=({children:e})=>{let[t,a]=(0,l.useState)(!1),r=(0,l.useMemo)(()=>({actionsOpen:t,setActionsOpen:a}),[t]);return(0,n.jsx)(m.Provider,{value:r,children:e})};h.displayName="ListItemActionsProvider";try{m.displayName||(m.displayName="ActionsContext")}catch{}var p=a(29622),f=a(77177),g=a(29731);function y({style:e,className:t,children:a}){return(0,n.jsx)("div",{className:(0,i.$)("MetadataContainer-module__container--nU0s9",t),style:e,...(0,g.G)("list-view-item-metadata"),children:a})}try{y.displayName||(y.displayName="ListItemMetadataContainer")}catch{}var v=a(49744),x=a(60257),_=a(27603),C=a(74501);let b=(0,l.forwardRef)(({children:e,isActive:t=!1,title:a,metadata:r,secondaryActions:m,style:h,className:g,metadataContainerStyle:b,metadataContainerClassName:S,as:w,...j},I)=>{let{idPrefix:N}=(0,s.If)(),{isSelectable:E}=(0,c.v)(),{variant:A}=(0,d.e)(),{anyItemsWithActionBar:T,hasResizableActionsWithActionBar:R}=(0,o.Z)(),k=(0,l.useId)(),{isSelected:L,onSelect:M}=(0,x.r)(),{status:P}=(0,_.x)(),{title:O,titleAction:F,headingRef:D}=(0,C.J)(),{description:$}=(0,f.L)(),{hasNewActivity:B}=(0,v.I)(),{alignment:W}=(0,p.m)(),U=(0,l.useRef)(null);(0,l.useEffect)(()=>{"function"==typeof I?I(U.current):I&&(I.current=U.current)},[I]),(0,l.useEffect)(()=>{U.current&&t&&document.activeElement?.tagName==="BODY"&&U.current.focus()});let V=(0,l.useCallback)(e=>{switch(e.key){case"Enter":if(F){let t=document.activeElement,a=U.current===t,n=D.current&&(D.current===t||D.current.contains(t));(a||n)&&F(e)}break;case" ":if(!E||U?.current!==document.activeElement)break;e.preventDefault(),M(!L);break;case"Escape":U?.current?.focus()}},[F,E,M,L,D]),q=(0,l.useCallback)(()=>{let e=L?"Selected":"",t=B?"New activity":"",a=!!m,n=Array.isArray(r)&&r.length>0||r&&!Array.isArray(r),i="";(n||a)&&(i="More information available below");let l=[O,P].filter(e=>e.trim()).join(": ");try{l=l.replace(/(?<!\.)\.+$/,"")}catch{for(;l.endsWith(".");)l=l.substring(0,l.length-1)}let s=[e,l,$,t,i].filter(e=>e.trim()).join(". ");return s.endsWith(".")?s:`${s}.`},[m,r,L,B,O,P,$]);return(0,n.jsxs)(w||"li",{ref:U,id:`${N}-list-view-node-${k}`,className:(0,i.$)("ListItem-module__listItem--k4eMk",L&&"ListItem-module__selected--WTEJT","compact"===A&&"ListItem-module__compact--f4FSR","center"===W&&"ListItem-module__centerAligned--PWSgp",T&&R&&"ListItem-module__hasActionBar--t14sR",g),tabIndex:-1,"aria-label":q(),style:h,onKeyDown:V,...j,children:[a,e,Array.isArray(r)&&r.length>0?(0,n.jsx)(y,{style:b,className:S,children:r.map((e,t)=>(0,n.jsx)(l.Fragment,{children:e},t))}):!!(r&&!Array.isArray(r))&&(0,n.jsx)(y,{style:b,className:S,children:r}),m??(T&&(0,n.jsx)(u.L,{}))]})});b.displayName="ListItemBase";let S=(0,l.forwardRef)(({children:e,isSelected:t=!1,onSelect:a=r.l,alignment:i,...s},o)=>{let{setSelectedCount:d}=(0,c.v)(),u=(0,l.useRef)(t);u.current=t,(0,l.useEffect)(()=>{d(e=>t?e+1:Math.max(0,e-1))},[t,d]),(0,l.useEffect)(()=>()=>{u.current&&d(e=>Math.max(0,e-1))},[d]);let m=(0,l.useMemo)(()=>({isSelected:t,onSelect:a}),[t,a]);return(0,n.jsx)(h,{children:(0,n.jsx)(C.y,{children:(0,n.jsx)(x.W,{value:m,children:(0,n.jsx)(v.t,{children:(0,n.jsx)(f.O,{children:(0,n.jsx)(_.u,{children:(0,n.jsx)(p.F,{alignment:i,children:(0,n.jsx)(b,{...s,ref:o,children:e})})})})})})})})});S.displayName="ListItem"},6224:(e,t,a)=>{a.d(t,{A:()=>n});let n={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},6236:(e,t,a)=>{a.d(t,{E:()=>m});var n=a(74848),r=a(77430),i=a(29731),l=a(96379),s=a(26607),o=a(94236),c=a(86877),d=a(5524),u=a(96540);function m({onSelect:e,repoId:t}){let a,m,h,[p,f]=(0,u.useState)([]),[g,y]=(0,u.useState)(!1),[v,x]=(0,u.useState)(void 0),_=(0,u.useCallback)(t=>{x(t),e(t)},[e]),C=(0,u.useCallback)(()=>{f([]),y(!0)},[]);return(0,u.useEffect)(()=>{(async()=>{try{let e=t?`/github-copilot/chat/custom_copilots_owners?repo_id=${t}`:"/github-copilot/chat/custom_copilots_owners",a=await (0,l.lS)(e),n=await a.json(),r=n?.owners;if(!a.ok||!r)return void C();f(r),r[0]&&_(r[0])}catch{C()}})()},[C,_,t]),(0,n.jsx)("div",{className:"mt-2 mb-1",children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Label,{required:!0,children:"Owner"}),(0,n.jsxs)(o.W,{children:[(a=v?.name||"Choose an owner",m=v?(0,n.jsx)(r.r,{src:v.avatarUrl},v.avatarUrl):void 0,(0,n.jsx)(o.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-describedby":"owner-caption",leadingVisual:m,children:a})),(0,n.jsx)(o.W.Overlay,{width:"large",maxHeight:"large",className:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",children:(0,n.jsx)(d.l,{children:(0,n.jsx)(d.l.Group,{className:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",children:(0,n.jsxs)(d.l,{selectionVariant:"single",children:[p&&p.map(e=>{let{name:t,avatarUrl:a,displayName:i}=e;return(0,n.jsxs)(d.l.Item,{selected:t===v?.name,onSelect:()=>_(e),className:"SpacesOwnerDropdown-module__ownerListItem--YrBcd",children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(r.r,{src:a})}),t,(0,n.jsx)(d.l.Description,{children:i})]},t)}),!p.length&&!g&&(0,n.jsx)(d.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),g&&(0,n.jsx)(d.l.Item,{disabled:!0,className:"SpacesOwnerDropdown-module__errorListItem--eq64y",children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,n.jsx)(c.A.Caption,{id:"owner-caption",children:(h=e=>(0,n.jsxs)("span",{className:"sr-only",children:["Space owner. Required. Selected owner: @",e.displayName,"."]}),v?"User"===v.type?(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink flex-items-center",children:[h(v),(0,n.jsx)(s.A,{className:"mr-1",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-user-caption"),children:"Only you will be able to see this space."})]}):(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink",children:[h(v),(0,n.jsx)(s.A,{className:"SpacesOwnerDropdown-module__orgLabel--W_FiN",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-org-caption"),children:"Only visible to you and organization admins. You can share it later."})]}):(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"sr-only",children:"Space owner. Required."})," Where we will store your space."]}))})]})})}try{m.displayName||(m.displayName="SpacesOwnerDropdown")}catch{}},7730:(e,t,a)=>{a.d(t,{g:()=>i});var n=a(21728),r=a(96540);function i(e){let t,a=(0,n.c)(2),[i,l]=(0,r.useState)(!1);return a[0]!==e?(t=()=>{let t=e.current,a=t?.lastElementChild;if(!a)return;let n=new IntersectionObserver(e=>{let[t]=e;return l(t?.isIntersecting??!0)},{root:t,threshold:1});return n.observe(a),()=>n.disconnect()},a[0]=e,a[1]=t):t=a[1],(0,r.useEffect)(t),i}},9214:(e,t,a)=>{a.d(t,{L:()=>c});var n=a(74848),r=a(91230),i=a(29731),l=a(34164),s=a(96540),o=a(18377);let c=({anchorIcon:e,style:t,className:a,label:c="list item action bar",...d})=>{let{setAnyItemsWithActionBar:u,setHasResizableActionsWithActionBar:m}=(0,o.Z)();return(0,s.useEffect)(()=>u(!0),[u]),(0,s.useEffect)(()=>{d.actions&&m(!0)},[d.actions,m]),(0,n.jsx)("div",{className:(0,l.$)("ActionBar-module__container--8I2RB",d.actions&&"ActionBar-module__hasActions--HH0uB",a),style:t,...(0,i.G)("list-view-item-action-bar-container"),children:(0,n.jsx)(r.E7,{...d,label:c,variant:"menu",overflowMenuToggleProps:e?{icon:e}:void 0})})};try{c.displayName||(c.displayName="ListItemActionBar")}catch{}},14521:(e,t,a)=>{a.d(t,{G:()=>c});var n=a(21728),r=a(79802),i=a(96540),l=a(2635),s=a(23657),o=a(72303);function c(){let e,t=(0,n.c)(1),a=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,o.W)(e),n=(0,r.O)(t);return(0,s.Ym)(a.current,n)?a.current:(a.current=n,n)},t[0]=e):e=t[0];let c=(0,l.pn)(e);return(0,s.iI)()||c}},16378:(e,t,a)=>{a.d(t,{O:()=>i,_:()=>l});var n=a(47970),r=a(99054);function i(e){let t=new Set;return(0,n.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function l(e){return r.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,a)=>{a.d(t,{C:()=>l});var n=a(25536),r=a(14521),i=a(96540);function l(){let e=(0,r.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:a,selectedThreadId:l}=(0,n.O)(),s=!!l||!!e;(0,i.useEffect)(()=>{a(e||void 0)},[e,a]);let o=t||e,c=(0,i.useCallback)(e=>{s||a({id:e.id,owner:e.owner})},[a,s]),d=(0,i.useCallback)(()=>{s||a(void 0)},[a,s]);return{activeCopilotSpaceId:o,readOnly:s,handleSpaceSelect:c,clearSpaceSelection:d}}},17925:(e,t,a)=>{a.d(t,{V:()=>r,x:()=>i});var n=a(35247);function r(e,t){if(0===t.length||!n.W.chatInputCommands)return null;let a=RegExp(`^\\/(${t.join("|")})(?:\\s|$)`,"i"),r=e.match(a);return r&&r[1]?r[1].toLowerCase():null}function i(e,t){return!!t&&e.trim().toLowerCase()===`/${t.toLowerCase()}`}},18377:(e,t,a)=>{a.d(t,{Z:()=>o,w:()=>s});var n=a(74848),r=a(73189),i=a(96540);let l=(0,i.createContext)({anyItemsWithActionBar:!1,setAnyItemsWithActionBar:r.l,hasResizableActionsWithActionBar:!1,setHasResizableActionsWithActionBar:r.l}),s=({children:e})=>{let[t,a]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),o=(0,i.useMemo)(()=>({anyItemsWithActionBar:t,setAnyItemsWithActionBar:a,hasResizableActionsWithActionBar:r,setHasResizableActionsWithActionBar:s}),[t,r]);return(0,n.jsx)(l.Provider,{value:o,children:e})};s.displayName="ListViewItemsProvider";let o=()=>(0,i.useContext)(l);try{l.displayName||(l.displayName="ItemsContext")}catch{}},24347:(e,t,a)=>{a.d(t,{W:()=>d,v:()=>u});var n=a(74848),r=a(73189),i=a(96540),l=a(50205);let s="list item",o="list items",c=(0,i.createContext)({selectedCount:0,setSelectedCount:r.l,countOnPage:0,isSelectAllChecked:!1,anyItemsSelected:!1,singularUnits:s,pluralUnits:o,isSelectable:l.eX,hasDragHandle:l.os}),d=({children:e,countOnPage:t=0,singularUnits:a=s,pluralUnits:r=o,totalCount:d,selectedCount:u=0,isSelectable:m=l.eX,hasDragHandle:h=l.os}={singularUnits:s,pluralUnits:o,selectedCount:0,countOnPage:0,isSelectable:l.eX,hasDragHandle:l.os})=>{let[p,f]=(0,i.useState)(u);(0,i.useEffect)(()=>f(u),[u]);let g=p>0&&p>=t,y=p>0,v=(0,i.useMemo)(()=>({totalCount:d,countOnPage:t,selectedCount:p,setSelectedCount:f,isSelectAllChecked:g,anyItemsSelected:y,singularUnits:a,pluralUnits:r,isSelectable:m,hasDragHandle:h}),[d,t,p,f,g,y,a,r,m,h]);return(0,n.jsx)(c.Provider,{value:v,children:e})};d.displayName="ListViewSelectionProvider";let u=()=>(0,i.useContext)(c);try{c.displayName||(c.displayName="SelectionContext")}catch{}},26408:(e,t,a)=>{a.d(t,{U:()=>d});var n=a(81171),r=a(82490),i=a(96540),l=a(18312),s=a(2635),o=a(33592),c=a(23657);function d(e,t,a,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:v}=(0,s.Pk)(),x=(0,o.b)(),[_,C]=(0,i.useState)([]),[b,S]=(0,i.useState)(!y&&"initial"),w=(0,i.useRef)(void 0),j=(0,l.useRelayEnvironment)(),I=m&&""!==m.trim();if(p&&!y&&!e&&!I){let e=u(p||[]),{ownerLogin:t,name:a}=v??{};v&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${a}`)&&e.splice(0,0,{databaseId:v.id,isInOrganization:"Organization"===v.ownerType,name:v.name,nwo:`${v.ownerLogin}/${v.name}`,ownerLogin:v.ownerLogin,ownerAvatarUrl:`/${v.ownerLogin}.png?s=40`}),setTimeout(()=>x.setTopRepositoryTopics(e),10),S(!1),f(void 0)}let N=(0,i.useCallback)(async()=>{try{let e=await (0,n.St)(j,{first:a,owner:I?m:void 0});f(e)}catch{}finally{S(!1)}},[I,m,j,f,a]);return((0,i.useEffect)(()=>{t&&!I&&N()},[N,I,t,m]),(0,i.useEffect)(()=>{let t=async e=>{S(!0);let{repositories:t}=await (0,n.vO)(j,{query:I?(0,c.rl)(m,e,h):(0,r.J)(e,{includeForks:h}),onStart:e=>{w.current?.unsubscribe(),w.current=e}});C(t.length?u(t):[]),S(!1)};e||I?t(e):y&&C(y)},[e,I,m,j,y,h]),(0,i.useEffect)(()=>{x.setTopRepositoryTopics(void 0)},[x,m]),!y||e||I)?{repositories:_,loading:b,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:a,name:n,databaseId:r})=>({databaseId:r??0,isInOrganization:a,name:n,nwo:`${e}/${n}`,ownerLogin:e,ownerAvatarUrl:t}))}},27603:(e,t,a)=>{a.d(t,{u:()=>l,x:()=>s});var n=a(74848),r=a(96540);let i=(0,r.createContext)(void 0),l=({children:e})=>{let[t,a]=(0,r.useState)(""),l=(0,r.useMemo)(()=>({status:t,setStatus:a}),[t]);return(0,n.jsx)(i.Provider,{value:l,children:e})};l.displayName="ListItemStatusProvider";let s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useListItemStatus must be used with StatusProvider.");return e};try{i.displayName||(i.displayName="StatusContext")}catch{}},27844:(e,t,a)=>{a.d(t,{W:()=>s});var n=a(74848),r=a(21728),i=a(77430),l=a(5524);function s(e){let t,a,s,o,c=(0,r.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(a=(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=a):a=c[5],c[6]!==h?(s=h&&(0,n.jsx)(l.l.TrailingVisual,{children:h}),c[6]=h,c[7]=s):s=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==a||c[12]!==s?(o=(0,n.jsxs)(l.l.Item,{onSelect:t,selected:m,children:[a,g,s]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=a,c[12]=s,c[13]=o):o=c[13],o}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},29622:(e,t,a)=>{a.d(t,{F:()=>l,m:()=>s});var n=a(74848),r=a(96540);let i=(0,r.createContext)({alignment:"top"}),l=({alignment:e,children:t})=>{let a=(0,r.useMemo)(()=>({alignment:e??"top"}),[e]);return(0,n.jsx)(i.Provider,{value:a,children:t})};l.displayName="ListItemAlignmentProvider";let s=()=>(0,r.useContext)(i);try{i.displayName||(i.displayName="AlignmentContext")}catch{}},31971:(e,t,a)=>{a.d(t,{M:()=>n});function n(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},33544:(e,t,a)=>{a.d(t,{x:()=>f});var n=a(74848),r=a(38621),i=a(84268),l=a(94236),s=a(5524),o=a(12683),c=a(61526),d=a(96540),u=a(11083),m=a(62227),h=a(34164),p=a(69599);function f({className:e,portalContainerName:t,protectedOrgs:a,maxVisibleOrgNames:l=3,redirectURI:s,useFullWidthStyle:f,forceWrap:v,sx:x}){let _=(0,c.zy)(),C=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{(0,p.G7)("record_sso_banner_metrics")&&!C.current&&a&&a.length>0&&((0,u.i)({incrementKey:(0,p.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),C.current=!0)},[a]),!a||0===a.length)return null;let b=Math.max(0,a.length-l),S=1===a.length||b>0?(0,n.jsx)("b",{children:a.slice(0,l).join(", ")}):(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:a.slice(0,a.length-1).join(", ")}),a.length>2&&","," and ",(0,n.jsx)("b",{children:a[a.length-1]})]});return(0,n.jsx)(o.az,{sx:x,className:e,"data-testid":"sso-banner",children:(0,n.jsx)("div",{className:m.A.Box,children:(0,n.jsx)("section",{"aria-label":"Single sign-on information",children:(0,n.jsx)(o.Hx,{sx:{borderRadius:2*!f,borderWidth:f?"1px 0":1},className:m.A.Flash,children:1===a.length?(0,n.jsxs)("div",{children:[(0,n.jsx)(r.ShieldLockIcon,{className:m.A.ShieldLockIcon}),(0,n.jsx)(i.A,{inline:!0,href:`/orgs/${a[0]}/sso?return_to=${y({location:_,redirectURI:s})}`,children:"Single sign-on"})," ","to see results in the ",(0,n.jsx)("b",{children:a[0]})," organization."]}):(0,n.jsxs)("div",{className:m.A.Box_1,children:[(0,n.jsx)(r.ShieldLockIcon,{className:m.A.Octicon}),(0,n.jsxs)("div",{className:(0,h.$)(m.A.Box_2,v&&m.A.ForceWrap),children:[(0,n.jsxs)("p",{className:m.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===b&&"the ",l>0&&(0,n.jsxs)(n.Fragment,{children:[S," "]}),b>0&&(0,n.jsxs)(n.Fragment,{children:[l>0&&"and ",b," other"," "]}),a.length>1&&1!==b?"organizations":"organization","."]}),(0,n.jsx)("p",{className:m.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,n.jsx)("div",{style:{flexShrink:0},children:(0,n.jsx)(g,{portalContainerName:t,protectedOrgs:a,redirectURI:s})})]})]})})})})})}function g({portalContainerName:e,protectedOrgs:t,redirectURI:a}){let r=(0,c.zy)();return(0,n.jsxs)(l.W,{children:[(0,n.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,n.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,n.jsx)(s.l,{children:t.map(e=>(0,n.jsx)(s.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${y({location:r,redirectURI:a})}`},children:e},`org-${e}`))})})]})}function y({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{f.displayName||(f.displayName="SingleSignOnBanner")}catch{}try{g.displayName||(g.displayName="SingleSignOnButton")}catch{}},35220:(e,t,a)=>{a.d(t,{H:()=>o,e:()=>c});var n=a(74848),r=a(73189),i=a(96540),l=a(50205);let s=(0,i.createContext)(void 0),o=({children:e,variant:t=l.tp,setVariant:a=r.l})=>{let o=(0,i.useMemo)(()=>({variant:t,setVariant:a}),[a,t]);return(0,n.jsx)(s.Provider,{value:o,children:e})};o.displayName="ListViewVariantProvider";let c=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useListViewVariant must be used with VariantProvider.");return e};try{s.displayName||(s.displayName="VariantContext")}catch{}},35673:(e,t,a)=>{a.d(t,{UJ:()=>g,E5:()=>c,Dq:()=>d,f1:()=>u,cB:()=>m,zc:()=>h,Cb:()=>p,hl:()=>f});var n=a(74848),r=a(21728),i=a(56149),l=a(94236),s=a(34164),o=a(96540);let c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatTopicPickerPortalRoot",m=()=>{let e,t,a,l=(0,r.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,"copilotChatPortalRoot")},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:s,className:"PortalContainerUtils-module__chatPortalContainer--Otmle"}),l[2]=a):a=l[2],a},h=e=>{let t,a,l,d,u=(0,r.c)(6),{className:m}=e,h=(0,o.useRef)(null);return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,i.cw)(h.current,c)},a=[],u[0]=t,u[1]=a):(t=u[0],a=u[1]),(0,o.useEffect)(t,a),u[2]!==m?(l=(0,s.$)("PortalContainerUtils-module__menuPortalContainer--D7AeL",m),u[2]=m,u[3]=l):l=u[3],u[4]!==l?(d=(0,n.jsx)("div",{ref:h,className:l}),u[4]=l,u[5]=d):d=u[5],d},p=()=>{let e,t,a,l=(0,r.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,d)},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:s}),l[2]=a):a=l[2],a},f=()=>{let e,t,a,l=(0,r.c)(3),s=(0,o.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(s.current,u)},t=[],l[0]=e,l[1]=t):(e=l[0],t=l[1]),(0,o.useEffect)(e,t),l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:s}),l[2]=a):a=l[2],a},g=e=>{let t,a,i,s,d,u,m=(0,r.c)(10);m[0]!==e?({children:t,portalContainerName:i,...a}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=i):(t=m[1],a=m[2],i=m[3]);let[h,p]=(0,o.useState)(y);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>p(!0),d=[],m[4]=s,m[5]=d):(s=m[4],d=m[5]),(0,o.useEffect)(s,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==a||m[8]!==f?(u=(0,n.jsx)(l.W.Overlay,{...a,portalContainerName:f,children:t}),m[6]=t,m[7]=a,m[8]=f,m[9]=u):u=m[9],u};try{m.displayName||(m.displayName="ChatPortalContainer")}catch{}try{h.displayName||(h.displayName="MenuPortalContainer")}catch{}try{p.displayName||(p.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{g.displayName||(g.displayName="ActionMenuOverlay")}catch{}function y(){return"undefined"!=typeof document}},36038:(e,t,a)=>{a.d(t,{V:()=>t2});var n=a(74848),r=a(21728),i=a(25641),l=a(35247),s=a(76872),o=a(84646),c=a(2635),d=a(79802),u=a(17485),m=a(53419),h=a(82595),p=a(96540),f=a(34164);let g=(0,p.forwardRef)((e,t)=>{let a,i,l,s,o,c,d,u,m,h,p,g,y,v,x,_,C=(0,r.c)(33);if(C[0]!==e){let{icon:t,isSelected:n,onClick:r,hasMenu:m,isMenuOpen:h,selectedItemLabel:p,children:f,...g}=e;l=t,c=r,d=p,a=f,o=void 0!==n&&n,i=void 0!==m&&m,s=void 0!==h&&h,u=Object.keys(g).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=g[t]),e),{}),C[0]=e,C[1]=a,C[2]=i,C[3]=l,C[4]=s,C[5]=o,C[6]=c,C[7]=d,C[8]=u}else a=C[1],i=C[2],l=C[3],s=C[4],o=C[5],c=C[6],d=C[7],u=C[8];let b=u;C[9]!==i||C[10]!==s||C[11]!==o?(m=()=>i?{"aria-haspopup":"menu","aria-expanded":s}:{"aria-pressed":o},C[9]=i,C[10]=s,C[11]=o,C[12]=m):m=C[12];let S=m;C[13]!==S?(h=S(),C[13]=S,C[14]=h):h=C[14],C[15]!==b||C[16]!==h?(p={...b,...h},C[15]=b,C[16]=h,C[17]=p):p=C[17];let w=p,j=i&&d?d:a;C[18]!==c?(g=e=>{c&&c(e)},C[18]=c,C[19]=g):g=C[19];let I=g,N=o&&"ToggleButton-module__selected--fx0LM";return C[20]!==N?(y=(0,f.$)("ToggleButton-module__toggleButton--JlWKX",N),C[20]=N,C[21]=y):y=C[21],C[22]!==l?(v=!!l&&(0,n.jsx)("span",{className:"ToggleButton-module__icon--mJLXC",children:l}),C[22]=l,C[23]=v):v=C[23],C[24]!==j?(x=(0,n.jsx)("span",{className:"ToggleButton-module__textContent--xX6cl",children:j}),C[24]=j,C[25]=x):x=C[25],C[26]!==w||C[27]!==I||C[28]!==t||C[29]!==y||C[30]!==v||C[31]!==x?(_=(0,n.jsxs)("button",{ref:t,type:"button",className:y,onClick:I,...w,children:[v,x]}),C[26]=w,C[27]=I,C[28]=t,C[29]=y,C[30]=v,C[31]=x,C[32]=_):_=C[32],_});g.displayName="ToggleButton";var y=a(61526),v=a(94236),x=a(46251),_=a(69726),C=a(5524);function b(){let[e,t]=(0,p.useState)(!1),a=(0,y.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:f,activeCopilotSpaceId:b,readOnly:S}=(0,u.C)(),w=(0,p.useRef)(null),j=(0,p.useRef)(null),[I,N]=(0,p.useState)(!1),E=()=>{N(!0),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:A=[],isLoading:T}=function(){let{threads:e}=(0,c.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,d.O)(e)).filter(e=>null!==e),a=(0,o.jS)(!0),{data:n}=a;if(void 0===n)return a;let r=new Set,i=[...t.map(e=>n.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!r.has(t)&&(r.add(t),!0)}),...[...n].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!r.has(t)})].slice(0,5);return{...a,data:i}}(),{data:R=[],isLoading:k}=(0,o.jS)(!0),L=(0,o.BV)(),M=T||k;if((0,p.useEffect)(()=>{if(M&&e&&w.current)w.current.focus();else if(!M&&e&&j.current){let e=setTimeout(()=>{j.current?.focus()},0);return()=>clearTimeout(e)}},[M,e]),!L||S)return;let P=b?R.find(e=>e.id===b.id&&e.owner===b.owner):void 0,O=P?P.name:"Spaces",F="260px";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.W,{open:e,onOpenChange:e=>{l.W.spacesAsAttachmentsEnabled&&e&&(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),t(e)},children:[(0,n.jsx)(v.W.Anchor,{children:(0,n.jsx)(g,{icon:(0,n.jsx)(h.I,{icon:"spaces"}),isSelected:!!P,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:O,children:O})}),(0,n.jsx)(v.W.Overlay,{style:A.length>0?{width:F}:{},children:M?(0,n.jsxs)(x.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:F},children:[(0,n.jsx)("div",{ref:w,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,n.jsx)(_.A,{})]}):(0,n.jsx)(C.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:A.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(C.l.Group,{children:[(0,n.jsx)(C.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),A.map((e,a)=>{let i=!!b&&e.id===b.id&&e.owner===b.owner;return(0,n.jsx)(C.l.Item,{ref:0===a?j:void 0,role:"menuitemradio",onSelect:()=>{b&&e.id===b.id&&e.owner===b.owner?f():(r({id:e.id,owner:e.owner}),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:i,"aria-checked":i,children:(0,n.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,n.jsx)(C.l.Divider,{}),(0,n.jsx)(C.l.Item,{onSelect:()=>{a(i.VR),(0,m.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,n.jsx)(C.l.Divider,{}),(0,n.jsx)(C.l.Item,{onSelect:E,children:"Create a space"})]}):(0,n.jsx)(C.l.Item,{ref:j,onSelect:E,children:"Create your first space"})})})]}),I?(0,n.jsx)(s.D,{closeDialog:()=>{(0,m.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),N(!1)}}):null]})}try{b.displayName||(b.displayName="SpacesSelect")}catch{}var S=a(29731),w=a(83494),j=a(96459),I=a(8625),N=a(38621),E=a(52870),A=a(52070),T=a(21373),R=a(26108),k=a(94747),L=a(96379),M=a(7277),P=a(47970),O=a(33592),F=a(79216),D=a(97949);let $=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,B=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function W(e){let t=await (0,L.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new B;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function U(e){let{itemUrl:t}=e,a=await (0,L.lS)(`/copilot/chat-links?item_url=${t}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return await a.json()}var V=a(69093),q=a(88431),z=a(17925),G=a(79064),H=a(72303);let K=async(e,t,a,n,r,i)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let s=(({manager:e,chatState:t,availableCommands:a})=>{let n="assistive"===t.mode?[{label:"Delete chat",key:"delete",icon:N.TrashIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,H.W)(a);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:N.PencilIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let n=(0,H.W)(a);if(!n)throw Error("Thread not found");await e.renameThread(n,t),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:N.PlusIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&l.W.chatInputCommands)for(let t of a)t.execute&&n.push({key:t.key,action:async(a,n,r)=>await t.execute(a,n,r,e)});return n})({manager:a,chatState:t,availableCommands:r}).filter(t=>{let a=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase()===a});if(1!==s.length)return!1;let o=s[0],c=e.substring(o.key.length).trim();return i&&(i.selectedRepo||i.selectedBranch||i.selectedCustomAgent)&&(c=JSON.stringify({text:c,selectedRepo:i.selectedRepo,selectedBranch:i.selectedBranch,selectedCustomAgent:i.selectedCustomAgent})),(0,m.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:o.key}),await o.action(c,t,n)};var Q=a(46062),J=a(56708),X=a(61180);function Y(e,t,a){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=a.get("prompt");if(e)return e}}var Z=a(26239),ee=a(60905),et=a(76166),ea=a(72439),en=a(23657),er=a(72206),ei=a(5839);let el=()=>(0,n.jsx)("span",{role:"img","aria-label":"Starred",style:{color:"var(--button-star-iconColor)"},children:(0,n.jsx)(N.StarFillIcon,{})}),es=e=>`${e.owner}-${e.id}`;function eo({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:a,activeCopilotSpaceId:r,readOnly:l}){let s=(0,O.b)(),[c,d]=(0,p.useState)(!1),u=(0,p.useRef)(null),[h,f]=(0,p.useState)(""),[g,y]=(0,p.useState)(""),[v,x]=(0,p.useState)([]),[_,b]=(0,p.useState)(!1),[S,w]=(0,p.useState)(!1);(0,p.useEffect)(()=>{w(window.location.pathname.startsWith(i.Jz))},[]);let j=()=>{d(!1),e(!0),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},I=(0,p.useCallback)(e=>{r&&e.id===r.id&&e.owner===r.owner?a():(s.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),d(!1)},[r,a,s,t]),E=(0,p.useCallback)(async e=>{try{let t=new URLSearchParams({q:e}),a=await (0,L.lS)(`/github-copilot/chat/custom_copilots/search?${t.toString()}`);if(!a.ok)throw Error("Failed to fetch spaces");return await a.json()}catch{return[]}},[]);(0,p.useEffect)(()=>{let e=!1;return(async()=>{if(!c)return;b(!0);let t=await E(g);e||(x(t),b(!1))})(),()=>{e=!0}},[E,g,c]),(0,p.useEffect)(()=>()=>{u.current&&clearTimeout(u.current)},[]);let A=(0,o.BV)(),R=(0,p.useMemo)(()=>v.map(e=>({id:es(e),key:es(e),text:e.name.length>40?`${e.name.slice(0,40)}...`:e.name,description:e.owner,descriptionVariant:"inline",value:es(e),trailingVisual:e.starred?el:void 0})),[v]);if(!A||l)return null;let k=r?R.find(e=>e.id===es(r)):void 0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ei.X,{align:"end",title:"Select a space",subtitle:"Recent spaces",renderAnchor:e=>(0,n.jsxs)(C.l.Item,{as:"button",...e,children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.SpaceIcon,{})}),"Spaces\u2026",(0,n.jsx)(C.l.TrailingVisual,{children:(0,n.jsx)(N.ChevronRightIcon,{})})]}),open:c,onOpenChange:e=>{e&&(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),d(e)},loading:_,items:R,filterValue:h,onFilterChange:e=>{f(e),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{y(e)},350)},...{selected:k,onSelectedChange:e=>{let t=v.find(t=>es(t)===e?.id);t&&(I(t),G.Jt.setLastSelectedSpace(t))}},overlayProps:{height:"auto",width:"large",anchorSide:"outside-right"},message:0!==v.length||_?void 0:{title:"No spaces found",body:"You can create a new space to get started.",variant:"empty",action:(0,n.jsx)(T.Q,{variant:"default",size:"small",onClick:j,children:"Create a new space"})},secondaryAction:S&&v.length>0?(0,n.jsx)(ei.X.SecondaryActionButton,{onClick:j,children:"Create a space"}):void 0})})}try{el.displayName||(el.displayName="StarredIcon")}catch{}try{eo.displayName||(eo.displayName="SpacesSelectNew")}catch{}var ec=a(14521),ed=a(47789),eu=a(99054),em=a(77430);function eh(e){let t,a,i,l,s,o,c=(0,r.c)(24),{onSelectPanel:d,onSelectAgent:u}=e,{availableAgents:h,showLimit:p,disabled:f,loading:g}=(0,eu.JE)(),y=h&&h.length>0;if(g){let e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(C.l.Item,{disabled:!0,children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.AppsIcon,{})}),"Extensions\u2026"]}),c[0]=e):e=c[0],e}if(f){let e,t,a;return c[1]!==d?(e=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),d("agents-not-supported")},c[1]=d,c[2]=e):e=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.AppsIcon,{})}),c[3]=t):t=c[3],c[4]!==e?(a=(0,n.jsxs)(C.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[4]=e,c[5]=a):a=c[5],a}if(!y){let e,t,a;return c[6]!==d?(e=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),d("no-agents-available")},c[6]=d,c[7]=e):e=c[7],c[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.AppsIcon,{})}),c[8]=t):t=c[8],c[9]!==e?(a=(0,n.jsxs)(C.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[9]=e,c[10]=a):a=c[10],a}if(c[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(v.W.Anchor,{children:(0,n.jsxs)(C.l.Item,{onSelect:ef,children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.AppsIcon,{})}),"Extensions\u2026"]})}),c[11]=t):t=c[11],c[12]!==h||c[13]!==u||c[14]!==p){let e;c[16]!==u||c[17]!==p?(e=e=>(0,n.jsxs)(C.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),u(e)},children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(em.r,{src:e.avatarUrl})}),e.name,!p&&(0,n.jsxs)(C.l.Description,{variant:"inline",truncate:!0,children:[eu.Z3,e.slug]}),p&&(0,n.jsx)(C.l.Description,{variant:"block",children:"Start a new chat to use other extensions."})]},e.slug),c[16]=u,c[17]=p,c[18]=e):e=c[18],a=h.map(e),c[12]=h,c[13]=u,c[14]=p,c[15]=a}else a=c[15];return c[19]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(C.l.Divider,{}),c[19]=i):i=c[19],c[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.TelescopeIcon,{})}),c[20]=l):l=c[20],c[21]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)(C.l.LinkItem,{href:eu.bn,onClick:ep,children:[l,"Marketplace",(0,n.jsx)(C.l.TrailingVisual,{children:(0,n.jsx)(N.LinkExternalIcon,{})})]}),c[21]=s):s=c[21],c[22]!==a?(o=(0,n.jsxs)(v.W,{children:[t,(0,n.jsx)(v.W.Overlay,{width:"small",children:(0,n.jsxs)(C.l,{children:[a,i,s]})})]}),c[22]=a,c[23]=o):o=c[23],o}function ep(){(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ef(){(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{eh.displayName||(eh.displayName="AgentMenu")}catch{}var eg=a(84268),ey=a(15220);let ev="AgentsDialogs-module__dialogContentWrapper--v7abd",ex="AgentsDialogs-module__dialogTitle--tEo3x",e_="AgentsDialogs-module__dialogDescription--LPgKm";function eC(e){let t,a,i=(0,r.c)(4),{onClose:l,returnFocusRef:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},i[0]=t):t=i[0],i[1]!==l||i[2]!==s?(a=(0,n.jsx)(ey.l,{width:"large",title:"Extensions",position:t,onClose:l,returnFocusRef:s,renderBody:eb}),i[1]=l,i[2]=s,i[3]=a):a=i[3],a}function eb(){return(0,n.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",children:(0,n.jsxs)("div",{className:ev,children:[(0,n.jsx)(N.TelescopeIcon,{size:24}),(0,n.jsx)("h3",{className:ex,children:"Chat with your favorite tools and services"}),(0,n.jsx)("p",{className:e_,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,n.jsx)(T.Q,{as:"a",href:eu.bn,children:"Browse marketplace"}),(0,n.jsx)("div",{className:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",children:(0,n.jsx)(eg.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eS(e){let t,a,i,l=(0,r.c)(9),{onClose:s,returnFocusRef:d}=e,u=(0,O.b)(),m=(0,c.Pk)(),h=(0,o.BV)(),p=(0,Q.GF)(m.availableModels);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},l[0]=t):t=l[0],l[1]!==h||l[2]!==p||l[3]!==u?(a=()=>(0,n.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",children:(0,n.jsxs)("div",{className:ev,children:[(0,n.jsx)("div",{className:"AgentsDialogs-module__alertIconContainer--jNjdz",children:(0,n.jsx)(N.AlertIcon,{size:24})}),(0,n.jsxs)("h3",{className:ex,children:[h?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,n.jsxs)("p",{className:e_,children:["Switch back to the ",p.displayName," model or start a new chat"]}),(0,n.jsx)(T.Q,{onClick:()=>{u.selectThread(null),u.selectModel(p)},children:"New chat"})]})}),l[1]=h,l[2]=p,l[3]=u,l[4]=a):a=l[4],l[5]!==s||l[6]!==d||l[7]!==a?(i=(0,n.jsx)(ey.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:d,renderBody:a}),l[5]=s,l[6]=d,l[7]=a,l[8]=i):i=l[8],i}try{eC.displayName||(eC.displayName="NoAgentsAvailableDialog")}catch{}try{eS.displayName||(eS.displayName="AgentsNotSupportedDialog")}catch{}var ew=a(59788),ej=a(97564);function eI(e){let t,a,l,s=(0,r.c)(10),{isOpen:o,onClose:d,initialRepo:u,onRepoSelect:m}=e,h=(0,O.b)(),{findFileWorkerPath:f}=(0,c.Pk)(),g=(0,p.useRef)(null);s[0]!==h||s[1]!==d?(t=async e=>{if(0===e.length)return void d();let t=await (0,ej.V)(e[0].repositoryId);for(let a of e.map(e=>"github_folder"===e.type?(0,i.OC)(e.filePath,t):(0,i.Od)(e.filePath,t)))h.addReference(a,"references-menu");d()},s[0]=h,s[1]=d,s[2]=t):t=s[2];let y=t;return o?(s[3]===Symbol.for("react.memo_cache_sentinel")?(a=[],s[3]=a):a=s[3],s[4]!==f||s[5]!==y||s[6]!==u||s[7]!==d||s[8]!==m?(l=(0,n.jsx)(ew.Q,{formData:a,onCancel:d,onSaveFiles:y,findFileWorkerPath:f,attachmentButtonRef:g,initialRepo:u,onRepoSelect:m,allowFolderReferences:!0,maxFileCount:20}),s[4]=f,s[5]=y,s[6]=u,s[7]=d,s[8]=m,s[9]=l):l=s[9],l):null}try{eI.displayName||(eI.displayName="CopilotFilePicker")}catch{}var eN=a(35673),eE=a(71363);let eA=(0,p.memo)(({panel:e,onPanelChange:t,anchorRef:a,initialRepo:r,onRepoSelect:i,...o})=>{let d,h,f,g,y,{inputRef:x}=o,_=(0,O.b)(),b=(0,c.Pk)(),w=(0,ed.qw)(),{supportedAttachmentTypes:j,supportedReferenceTypes:I}=(d=null!==(0,ec.G)(),h=["upload"],d||h.push("repositories"),!d&&l.W.spacesAsAttachmentsEnabled&&h.push("copilot-spaces"),d||h.push("agents"),d||h.push("plugin-attachment-contribution"),{supportedAttachmentTypes:h,supportedReferenceTypes:d?["files"]:["files","folders"]}),{model:E}=(0,c.bP)("model"),A=l.W.previewFeaturesVisionGate&&b.hasCEorCBAccess&&!b.optedInToPreviewFeatures,T="immersive"===b.mode&&!!E.capabilities?.supports?.vision&&!A,R=(0,eu.kw)(o),k=(0,p.useRef)(null),{handleSpaceSelect:L,clearSpaceSelection:M,activeCopilotSpaceId:P,readOnly:F}=(0,u.C)(),[D,$]=(0,p.useState)(!1);return(0,n.jsxs)("div",{children:[j.includes("upload")&&(0,n.jsx)("input",{id:"image-uploader",...(0,S.G)("image-uploader"),hidden:!0,ref:k,type:"file",accept:[T?ee.s.getAllowedImageFileExtensions(E):"",ea.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,a]=ee.s.getAllowedFiles([...e.target.files],E),n=[];for(let e of(T?new ee.s(b,_).addImageAttachments(t,"menu"):n.push(...t),a))new ea.E(_).addAttachment(e);for(let e of n)(0,m.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,n.jsx)(v.W,{anchorRef:a,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,n.jsx)(v.W.Overlay,{width:"small",side:o.side??"outside-bottom",align:"start",portalContainerName:"assistive"===b.mode?eN.E5:void 0,children:(0,n.jsxs)(C.l,{children:[j.includes("repositories")&&(0,n.jsxs)(C.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:b.mode}),t("repositories")},children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.RepoIcon,{})}),"Repositories\u2026"]}),(0,n.jsxs)(C.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:b.mode}),t("multi-file-picker")},children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.FileCodeIcon,{})}),(f=I.includes("files"),g=I.includes("folders"),y=I.includes("symbols"),f&&g&&y?"Files, folders, and symbols":f&&g?"Files and folders":f&&y?"Files and symbols":g&&y?"Folders and symbols":f?"Files":g?"Folders":y?"Symbols":"References"),"\u2026"]}),j.includes("copilot-spaces")&&(0,n.jsx)(eo,{openCreateSpaceDialog:$,setPendingSpace:L,clearSpaceSelection:M,activeCopilotSpaceId:P,readOnly:F}),w.map(e=>{let a=e.attachmentMenuContribution;return a?(0,n.jsx)(a.MenuItemComponent,{onSelect:()=>t(a.attachmentType)},e.id):null}),j.includes("upload")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.l.Divider,{}),(0,n.jsxs)(C.l.Item,{onSelect:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:b.mode}),t(null),k.current?.click()},children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.UploadIcon,{})}),"Upload from computer"]})]}),j.includes("agents")&&!l.W.hideExtensionsInDotcomChat&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.l.Divider,{}),(0,n.jsx)(eh,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>R(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,n.jsx)(eI,{isOpen:!0,onClose:()=>t(null),initialRepo:r,onRepoSelect:i}),(0,n.jsx)(eE.F,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:x,cancelReturnFocusRef:a,onRepoSelect:i}),D&&(0,n.jsx)(s.D,{closeDialog:()=>$(!1),onSubmit:()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SPACE_CREATED",mode:"immersive"})}}),"no-agents-available"===e&&(0,n.jsx)(eC,{onClose:()=>t(null),returnFocusRef:a}),"agents-not-supported"===e&&(0,n.jsx)(eS,{onClose:()=>t(null),returnFocusRef:a}),j.includes("plugin-attachment-contribution")&&w.map(r=>r.attachmentMenuContribution&&r.attachmentMenuContribution.attachmentType===e?(0,n.jsx)(r.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),x.current?.focus()},onDismiss:()=>{t(null),a.current?.focus()}},r.id):null)]})});eA.displayName="AttachmentMenu";var eT=a(51112);let eR={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},ek=[{name:eR.agents,icon:N.AppsIcon,value:"agents",where:"start"},{name:eR.repositories,icon:N.RepoIcon,value:"repositories",where:"anywhere"},{name:eR.files,icon:N.FileIcon,value:"repositories:files",where:"anywhere"},{name:eR.issues,icon:N.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eR.pulls,icon:N.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eR.discussions,icon:N.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}];function eL(e){let t,a,i,l,s,o=(0,r.c)(12);return o[0]!==e?({agent:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t.avatarUrl?(i=(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(em.r,{src:t.avatarUrl})}),o[3]=t.avatarUrl,o[4]=i):i=o[4],o[5]!==t.slug?(l=(0,n.jsxs)(C.l.Description,{variant:"inline",truncate:!0,children:[eu.Z3,t.slug]}),o[5]=t.slug,o[6]=l):l=o[6],o[7]!==t.name||o[8]!==a||o[9]!==i||o[10]!==l?(s=(0,n.jsxs)(C.l.Item,{...a,children:[i,t.name,l]}),o[7]=t.name,o[8]=a,o[9]=i,o[10]=l,o[11]=s):s=o[11],s}try{eL.displayName||(eL.displayName="AgentSuggestion")}catch{}function eM(e){let t,a,i,l,s,o,c,d,u=(0,r.c)(20);u[0]!==e?({leadingVisual:t,...a}=e,u[0]=e,u[1]=t,u[2]=a):(t=u[1],a=u[2]);let m=(0,p.useId)(),h=(0,p.useId)();return u[3]!==h||u[4]!==m?(i=(0,f.$)(m,h),u[3]=h,u[4]=m,u[5]=i):i=u[5],u[6]!==t?(l=void 0!==t&&(0,n.jsx)(C.l.LeadingVisual,{children:t}),u[6]=t,u[7]=l):l=u[7],u[8]!==m||u[9]!==a.children?(s=(0,n.jsx)("span",{id:m,children:a.children}),u[8]=m,u[9]=a.children,u[10]=s):s=u[10],u[11]!==h?(o=(0,n.jsx)("span",{className:"d-none","aria-hidden":!0,id:h,children:"Opens in new tab."}),u[11]=h,u[12]=o):o=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(C.l.TrailingVisual,{children:(0,n.jsx)(N.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==a||u[15]!==i||u[16]!==l||u[17]!==s||u[18]!==o?(d=(0,n.jsxs)(C.l.Item,{...a,"aria-labelledby":i,children:[l,s,o,c]}),u[14]=a,u[15]=i,u[16]=l,u[17]=s,u[18]=o,u[19]=d):d=u[19],d}try{eM.displayName||(eM.displayName="LinkSuggestion")}catch{}function eP(e){return{value:`@${e.slug}`,render:t=>(0,n.jsx)(eL,{agent:e,...t})}}function eO(e){let t,a,i,l,s,o=(0,r.c)(9);return o[0]!==e?({leadingVisual:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t?(i=void 0!==t&&(0,n.jsx)(C.l.LeadingVisual,{children:t}),o[3]=t,o[4]=i):i=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(C.l.TrailingVisual,{children:(0,n.jsx)(N.ArrowRightIcon,{})}),o[5]=l):l=o[5],o[6]!==a||o[7]!==i?(s=(0,n.jsxs)(C.l.Item,{"aria-haspopup":!0,...a,children:[i,a.children,l]}),o[6]=a,o[7]=i,o[8]=s):s=o[8],s}try{eO.displayName||(eO.displayName="MultistepSuggestion")}catch{}function eF(e){let t,a,i,l,s=(0,r.c)(9);s[0]!==e?({category:a,...t}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]);let{name:o,icon:c}=a;return s[3]!==c?(i=(0,n.jsx)(c,{}),s[3]=c,s[4]=i):i=s[4],s[5]!==o||s[6]!==t||s[7]!==i?(l=(0,n.jsx)(eO,{leadingVisual:i,...t,children:o}),s[5]=o,s[6]=t,s[7]=i,s[8]=l):l=s[8],l}try{eF.displayName||(eF.displayName="CategorySuggestion")}catch{}var eD=a(69497);let e$="shared-module__asyncSuggestion--AXibl",eB="shared-module__stale--R4Im6";function eW(e){let t,a,i,l,s,o,c,d,u,m,h,p=(0,r.c)(25);p[0]!==e?({discussion:a,stale:l,className:t,...i}=e,p[0]=e,p[1]=t,p[2]=a,p[3]=i,p[4]=l):(t=p[1],a=p[2],i=p[3],l=p[4]);let g=l&&eB;return p[5]!==t||p[6]!==g?(s=(0,f.$)(e$,g,t),p[5]=t,p[6]=g,p[7]=s):s=p[7],p[8]!==a.state?(o="open"===a.state&&(0,n.jsx)(N.CommentDiscussionIcon,{className:"fgColor-open"}),p[8]=a.state,p[9]=o):o=p[9],p[10]!==a.state?(c="closed"===a.state&&(0,n.jsx)(N.DiscussionClosedIcon,{className:"fgColor-muted"}),p[10]=a.state,p[11]=c):c=p[11],p[12]!==o||p[13]!==c?(d=(0,n.jsxs)(C.l.LeadingVisual,{children:[o,c]}),p[12]=o,p[13]=c,p[14]=d):d=p[14],p[15]!==a.title?(u=(0,n.jsx)(eD.A,{title:a.title,maxWidth:350,children:a.title}),p[15]=a.title,p[16]=u):u=p[16],p[17]!==a.number?(m=(0,n.jsxs)(C.l.Description,{children:["#",a.number]}),p[17]=a.number,p[18]=m):m=p[18],p[19]!==i||p[20]!==s||p[21]!==d||p[22]!==u||p[23]!==m?(h=(0,n.jsxs)(C.l.Item,{...i,className:s,children:[d,u,m]}),p[19]=i,p[20]=s,p[21]=d,p[22]=u,p[23]=m,p[24]=h):h=p[24],h}try{eW.displayName||(eW.displayName="DiscussionSuggestion")}catch{}function eU(e){let t,a,i,l,s,o,c,d,u,m,h,p,g,y,v,x=(0,r.c)(35);if(x[0]!==e?({type:s,path:a,stale:l,className:t,...i}=e,x[0]=e,x[1]=t,x[2]=a,x[3]=i,x[4]=l,x[5]=s):(t=x[1],a=x[2],i=x[3],l=x[4],s=x[5]),x[6]!==t||x[7]!==a||x[8]!==i||x[9]!==l||x[10]!==s){let e=a.split("/"),r=e.pop();c=C.l.Item,m=i;let y=l&&eB;x[19]!==t||x[20]!==y?(h=(0,f.$)(e$,y,t),x[19]=t,x[20]=y,x[21]=h):h=x[21],x[22]!==s?(p=(0,n.jsx)(C.l.LeadingVisual,{children:"folder"===s?(0,n.jsx)(N.FileDirectoryFillIcon,{}):(0,n.jsx)(N.FileIcon,{})}),x[22]=s,x[23]=p):p=x[23],g=r,o=C.l.Description,d="inline",u=e.join("/"),x[6]=t,x[7]=a,x[8]=i,x[9]=l,x[10]=s,x[11]=o,x[12]=c,x[13]=d,x[14]=u,x[15]=m,x[16]=h,x[17]=p,x[18]=g}else o=x[11],c=x[12],d=x[13],u=x[14],m=x[15],h=x[16],p=x[17],g=x[18];return x[24]!==o||x[25]!==d||x[26]!==u?(y=(0,n.jsxs)(o,{variant:d,children:[u,"/"]}),x[24]=o,x[25]=d,x[26]=u,x[27]=y):y=x[27],x[28]!==c||x[29]!==m||x[30]!==h||x[31]!==p||x[32]!==g||x[33]!==y?(v=(0,n.jsxs)(c,{...m,className:h,children:[p,g,y]}),x[28]=c,x[29]=m,x[30]=h,x[31]=p,x[32]=g,x[33]=y,x[34]=v):v=x[34],v}try{eU.displayName||(eU.displayName="FileSuggestion")}catch{}function eV(e){let t,a,i,l,s,o,c,d,u,m,h,p,g=(0,r.c)(28);g[0]!==e?({issue:a,stale:l,className:t,...i}=e,g[0]=e,g[1]=t,g[2]=a,g[3]=i,g[4]=l):(t=g[1],a=g[2],i=g[3],l=g[4]);let y=l&&eB;return g[5]!==t||g[6]!==y?(s=(0,f.$)(e$,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==a.state?(o="draft"===a.state&&(0,n.jsx)(N.IssueDraftIcon,{className:"fgColor-draft"}),g[8]=a.state,g[9]=o):o=g[9],g[10]!==a.state?(c="open"===a.state&&(0,n.jsx)(N.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=a.state,g[11]=c):c=g[11],g[12]!==a.state?(d="closed"===a.state&&(0,n.jsx)(N.IssueClosedIcon,{className:"fgColor-done"}),g[12]=a.state,g[13]=d):d=g[13],g[14]!==o||g[15]!==c||g[16]!==d?(u=(0,n.jsxs)(C.l.LeadingVisual,{children:[o,c,d]}),g[14]=o,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==a.title?(m=(0,n.jsx)(eD.A,{title:a.title,maxWidth:350,children:a.title}),g[18]=a.title,g[19]=m):m=g[19],g[20]!==a.number?(h=(0,n.jsxs)(C.l.Description,{children:["#",a.number]}),g[20]=a.number,g[21]=h):h=g[21],g[22]!==i||g[23]!==s||g[24]!==u||g[25]!==m||g[26]!==h?(p=(0,n.jsxs)(C.l.Item,{...i,className:s,children:[u,m,h]}),g[22]=i,g[23]=s,g[24]=u,g[25]=m,g[26]=h,g[27]=p):p=g[27],p}try{eV.displayName||(eV.displayName="IssueSuggestion")}catch{}function eq(e){let t,a,i,l,s,o,c,d,u,m,h,p,g=(0,r.c)(28);g[0]!==e?({pullRequest:i,stale:l,className:t,...a}=e,g[0]=e,g[1]=t,g[2]=a,g[3]=i,g[4]=l):(t=g[1],a=g[2],i=g[3],l=g[4]);let y=l&&eB;return g[5]!==t||g[6]!==y?(s=(0,f.$)(e$,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==i.state?(o="draft"===i.state&&(0,n.jsx)(N.GitPullRequestDraftIcon,{className:"fgColor-draft"}),g[8]=i.state,g[9]=o):o=g[9],g[10]!==i.state?(c="open"===i.state&&(0,n.jsx)(N.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=i.state,g[11]=c):c=g[11],g[12]!==i.state?(d="closed"===i.state&&(0,n.jsx)(N.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=i.state,g[13]=d):d=g[13],g[14]!==o||g[15]!==c||g[16]!==d?(u=(0,n.jsxs)(C.l.LeadingVisual,{children:[o,c,d]}),g[14]=o,g[15]=c,g[16]=d,g[17]=u):u=g[17],g[18]!==i.title?(m=(0,n.jsx)(eD.A,{title:i.title,maxWidth:350,children:i.title}),g[18]=i.title,g[19]=m):m=g[19],g[20]!==i.number?(h=(0,n.jsxs)(C.l.Description,{children:["#",i.number]}),g[20]=i.number,g[21]=h):h=g[21],g[22]!==a||g[23]!==s||g[24]!==u||g[25]!==m||g[26]!==h?(p=(0,n.jsxs)(C.l.Item,{...a,className:s,children:[u,m,h]}),g[22]=a,g[23]=s,g[24]=u,g[25]=m,g[26]=h,g[27]=p):p=g[27],p}try{eq.displayName||(eq.displayName="PullRequestSuggestion")}catch{}function ez(e){let t,a,i,l,s,o,c,d,u=(0,r.c)(18);u[0]!==e?({repository:l,isMultistep:a,stale:s,className:t,...i}=e,u[0]=e,u[1]=t,u[2]=a,u[3]=i,u[4]=l,u[5]=s):(t=u[1],a=u[2],i=u[3],l=u[4],s=u[5]);let m=s&&eB;u[6]!==t||u[7]!==m?(o=(0,f.$)(e$,m,t),u[6]=t,u[7]=m,u[8]=o):o=u[8];let h=o;u[9]!==l.isInOrganization||u[10]!==l.ownerAvatarUrl?(c=l.ownerAvatarUrl?(0,n.jsx)(em.r,{src:l.ownerAvatarUrl,alt:"",size:16,square:l.isInOrganization}):(0,n.jsx)(N.RepoIcon,{}),u[9]=l.isInOrganization,u[10]=l.ownerAvatarUrl,u[11]=c):c=u[11];let p=c;return u[12]!==p||u[13]!==h||u[14]!==a||u[15]!==i||u[16]!==l.nwo?(d=a?(0,n.jsx)(eO,{...i,className:h,leadingVisual:p,children:l.nwo},l.nwo):(0,n.jsxs)(C.l.Item,{...i,className:h,children:[(0,n.jsx)(C.l.LeadingVisual,{children:p}),l.nwo]},l.nwo),u[12]=p,u[13]=h,u[14]=a,u[15]=i,u[16]=l.nwo,u[17]=d):d=u[17],d}try{ez.displayName||(ez.displayName="RepositorySuggestion")}catch{}function eG(e){return{value:null,key:e.value,render:t=>(0,n.jsx)(eF,{category:e,...t})}}function eH(e){return null!==e}var eK=a(84331);function eQ(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,n.jsxs)(C.l.Item,{...t,children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(e.icon,{})}),e.name,(0,n.jsx)(C.l.Description,{variant:"block",children:e.description})]})}}var eJ=a(97286);function eX(e){let t,a,n=(0,r.c)(3),[i,l]=(0,p.useState)(null);return(null===i&&null!==e||null!==i&&null===e)&&l(e),n[0]!==e?(t=()=>{let t=setTimeout(()=>l(e),200);return()=>clearTimeout(t)},a=[e],n[0]=e,n[1]=t,n[2]=a):(t=n[1],a=n[2]),(0,p.useEffect)(t,a),i}function eY(e){return e}async function eZ(e,t,a,n){return new Promise((r,i)=>{if(!window.Worker)return void setTimeout(()=>r(e.filter(e=>e.includes(t))));let l=new Worker(a);l.addEventListener("message",e=>r(e.data.list)),l.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),n.addEventListener("abort",()=>{l.terminate(),i(Error("Worker aborted"))}),l.postMessage({baseList:e,query:t})})}function e0(e){return e}function e1(e){return e}function e2(e){return e}var e5=a(26408);function e3(e){let t,a,i,l,s=(0,r.c)(9);return s[0]!==e?({org:t,...a}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]),s[3]!==t.avatarUrl?(i=(0,n.jsx)(em.r,{square:!0,src:t.avatarUrl}),s[3]=t.avatarUrl,s[4]=i):i=s[4],s[5]!==t.login||s[6]!==a||s[7]!==i?(l=(0,n.jsx)(eM,{leadingVisual:i,...a,children:t.login}),s[5]=t.login,s[6]=a,s[7]=i,s[8]=l):l=s[8],l}function e4(e){let t,a,i,l=(0,r.c)(7);return l[0]!==e?({orgs:t,...a}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]),l[3]!==t[0]?.login||l[4]!==t.length||l[5]!==a?(i=1===t.length?(0,n.jsxs)(eM,{leadingVisual:(0,n.jsx)(N.ShieldLockIcon,{}),...a,children:["Single sign-on to ",(0,n.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,n.jsx)(eO,{leadingVisual:(0,n.jsx)(N.ShieldLockIcon,{}),...a,children:"Single sign-on for more"}),l[3]=t[0]?.login,l[4]=t.length,l[5]=a,l[6]=i):i=l[6],i}try{e3.displayName||(e3.displayName="SSOOrgSuggestion")}catch{}try{e4.displayName||(e4.displayName="SSOPromptSuggestion")}catch{}let e7=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function e6(e){return{value:null,key:`open-link:${e7(e)}`,render:t=>(0,n.jsx)(e3,{org:e,...t})}}function e8(e){let t,a,i,s,o,d,u,h,f,g,y,v,x=(0,r.c)(32),{children:_,onSelectCommand:b,onSelectReference:S,onShowAgentsDialog:w,hideAutocomplete:j,availableCommands:I}=e,{mode:E}=(0,c.Pk)();x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],l.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),x[0]=t):t=x[0];let[A,T]=(0,p.useState)(e9);x[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>T(!0),i=[],x[1]=a,x[2]=i):(a=x[1],i=x[2]),(0,p.useEffect)(a,i);let[R,k]=(0,p.useState)(null);x[3]!==I||x[4]!==R?(s={query:R,availableCommands:I},x[3]=I,x[4]=R,x[5]=s):s=x[5];let{suggestions:L,stale:M}=function(e){let t=(0,r.c)(9),{query:a,availableCommands:i}=e,s=function(e,t){let a,n=(0,r.c)(5);e:{let r,i;if(!t){a=null;break e}n[0]!==e||n[1]!==t.filter?(r=""===t.filter.trim()?e:e.filter(e=>(0,eK.dt)(e.name,t.filter)>.5&&e.key!==t.filter.toLowerCase()),n[0]=e,n[1]=t.filter,n[2]=r):r=n[2];let l=r;n[3]!==l?(i=l.map(eQ),n[3]=l,n[4]=i):i=n[4],a=i}return a}(i,a?.category==="commands"?a:null),o=function(e){let t,a=(0,r.c)(3),{currentReferences:i}=(0,c.Pk)();e:{let r;if(!e){t=null;break e}if(a[0]!==i||a[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=i.map(e=>{let t=F.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,n.jsx)(ez,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...a})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,n.jsx)(eV,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,n.jsx)(eq,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,n.jsx)(eW,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...a})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:F.Q.stringify(t),render:a=>(0,n.jsx)(eU,{type:"folder"===t.reference.type?"folder":"file",path:e,...a})}}}return null}).filter(eH),c=(l.W.hideExtensionsInDotcomChat?ek.filter(e=>"agents"!==e.value):ek).filter(a=>a.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(a.where,e)).map(eG);if(c.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t,{...e}),(0,n.jsx)(C.l.Divider,{})]})}}r=o.concat(c),a[0]=i,a[1]=e,a[2]=r}else r=a[2];t=r}return t}(a?.category==="categories"?a:null),d=function(e){let t,a=(0,r.c)(4),{availableAgents:i,loading:l,showLimit:s,disabled:o}=(0,eu.JE)(null!==e);e:{let r;if(o||!e){t=null;break e}if(l&&!i){t="loading";break e}a[0]!==i||a[1]!==e||a[2]!==s?(r=i?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eP).concat({value:null,key:`open-link:${eu.bn}`,render:e=>(0,n.jsxs)(n.Fragment,{children:[i.length>0&&(0,n.jsx)(C.l.Divider,{}),(0,n.jsx)(eM,{leadingVisual:(0,n.jsx)(N.TelescopeIcon,{}),...e,inactiveText:s?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,a[0]=i,a[1]=e,a[2]=s,a[3]=r):r=a[3],t=r}return t}(a?.category==="agents"?a:null),u=function(e){let{currentReferences:t}=(0,c.Pk)(),a=eX(e),r=e!==a,{repositories:i,loading:l}=(0,e5.U)(a?.filter??"",null!==a),s=(0,p.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:o}=(0,c.Pk)();return{suggestions:(0,p.useMemo)(()=>{if(!a)return null;if("initial"===l)return"loading";let e=void 0!==a.nextCategory,t=i.toSorted((e,t)=>s.has(e.databaseId)&&!s.has(t.databaseId)?-1:s.has(t.databaseId)&&!s.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:F.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:a=>(0,n.jsx)(ez,{repository:t,isMultistep:e,stale:!!l||r,...a})}))??[];return o.length>0&&t.push({value:null,key:1===o.length?`open-link:${e7(o[0])}`:"sso-orgs",render:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.l.Divider,{}),(0,n.jsx)(e4,{orgs:o,...e})]})}),t},[i,l,a,s,o,r]),stale:!0===l}}(a?.category==="repositories"?a:null),m=function(e){let t,a,i,l,s,o=(0,r.c)(18),{service:c}=(0,O.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-issues",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e1},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eJ.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:F.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(eV,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="issues"?a:null),h=function(e){let t,a,i,l,s,o=(0,r.c)(18),{service:c}=(0,O.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-pulls",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e2},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eJ.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:F.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(eq,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="pulls"?a:null),f=function(e){let t,a,i,l,s,o=(0,r.c)(18),{service:c}=(0,O.b)(),d=eX(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-discussions",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:eY},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eJ.I)(i);e:{let e;if(!d){l=null;break e}if(f.isLoading){l="loading";break e}o[10]!==d||o[11]!==f.data||o[12]!==f.isPlaceholderData||o[13]!==u?(e=f.data?.map(e=>({value:F.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(eW,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=f.data,o[12]=f.isPlaceholderData,o[13]=u,o[14]=e):e=o[14],l=e}let g=l;return o[15]!==f.isPlaceholderData||o[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=s):s=o[17],s}(a?.category==="discussions"?a:null),g=function(e){var t;let a,i,l,s,o,d,u,m,h,p,f,g,y,v,x=(0,r.c)(23),_=(0,O.b)(),C=null!==e,b=e?.repository;x[0]!==b?(a=["copilot-repository",b],x[0]=b,x[1]=a):a=x[1],x[2]!==_||x[3]!==e?.repository?(i=async()=>{if(!e?.repository)return null;let t=await _.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},x[2]=_,x[3]=e?.repository,x[4]=i):i=x[4],x[5]!==C||x[6]!==a||x[7]!==i?(l={enabled:C,queryKey:a,queryFn:i,staleTime:3e5},x[5]=C,x[6]=a,x[7]=i,x[8]=l):l=x[8];let S=(0,eJ.I)(l),w=(t=S.data??null,g=(0,r.c)(11),y=(0,O.b)(),v=null!==t,!0!==g[0]||g[1]!==t?(h=["copilot-repository-files",t,!0],g[0]=!0,g[1]=t,g[2]=h):h=g[2],!0!==g[3]||g[4]!==y||g[5]!==t?(p=async()=>{if(!t)return{};let e=await y.service.listRepoFiles(t,!0);if(!e.ok)throw Error("Failed to fetch files for repository");return e.payload},g[3]=!0,g[4]=y,g[5]=t,g[6]=p):p=g[6],g[7]!==v||g[8]!==h||g[9]!==p?(f={enabled:v,queryKey:h,queryFn:p,staleTime:3e5},g[7]=v,g[8]=h,g[9]=p,g[10]=f):f=g[10],(0,eJ.I)(f));w.data?.directories,x[9]!==w.data?.directories?(s=w.data?.directories??[],x[9]=w.data?.directories,x[10]=s):s=x[10],x[11]!==s?(o=new Set(s),x[11]=s,x[12]=o):o=x[12];let j=o;x[13]!==w.data?(d=w.data?(w.data.paths??[]).concat(w.data.directories??[]):null,x[13]=w.data,x[14]=d):d=x[14];let I=function(e,t){let a,n,i,l=(0,r.c)(9),{findFileWorkerPath:s}=(0,c.Pk)();l[0]!==e||l[1]!==t||l[2]!==s?(a=["copilot-worker-filter",s,e,t],n=async a=>{let{signal:n}=a;return e?0===t.length?e:eZ(e,t,s,n):[]},l[0]=e,l[1]=t,l[2]=s,l[3]=a,l[4]=n):(a=l[3],n=l[4]);let o=null!==e;return l[5]!==a||l[6]!==n||l[7]!==o?(i={queryKey:a,queryFn:n,enabled:o,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:e0},l[5]=a,l[6]=n,l[7]=o,l[8]=i):i=l[8],(0,eJ.I)(i)}(d,e?.filter??"");e:{let t;if(!e){u=null;break e}if(S.isLoading||w.isLoading||I.isLoading){u="loading";break e}x[15]!==j||x[16]!==I.data||x[17]!==I.isPlaceholderData||x[18]!==e?(t=[...I.data?.slice(0,5).map(t=>({value:F.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,n.jsx)(eU,{...e,path:t,type:j.has(t)?"folder":"file",stale:I.isPlaceholderData})}))??[]],x[15]=j,x[16]=I.data,x[17]=I.isPlaceholderData,x[18]=e,x[19]=t):t=x[19];let a=t;u=a.length>0?a:null}let N=u;return x[20]!==S.isPlaceholderData||x[21]!==N?(m={suggestions:N,stale:S.isPlaceholderData},x[20]=S.isPlaceholderData,x[21]=N,x[22]=m):m=x[22],m}(a?.category==="files"?a:null),y=function(e){let t,a=(0,r.c)(5),{ssoOrganizations:n}=(0,c.Pk)();e:{let r;if(!e){t=null;break e}if(a[0]!==e||a[1]!==n){let t;a[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),a[3]=e,a[4]=t):t=a[4],r=n.filter(t).slice(0,10).map(e6),a[0]=e,a[1]=n,a[2]=r}else r=a[2];t=r}return t}(a?.category==="sso-orgs"?a:null);switch(a?.category){case"commands":{let e;return t[0]!==s?(e={suggestions:s,stale:!1},t[0]=s,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==o?(e={suggestions:o,stale:!1},t[3]=o,t[4]=e):e=t[4],e}case"repositories":return u;case"issues":return m;case"agents":{let e;return t[5]!==d?(e={suggestions:d,stale:!1},t[5]=d,t[6]=e):e=t[6],e}case"discussions":return f;case"pulls":return h;case"files":return g;case"sso-orgs":{let e;return t[7]!==y?(e={suggestions:y,stale:!1},t[7]=y,t[8]=e):e=t[8],e}}}(s);if(x[6]!==w||x[7]!==R?(o={query:R,onShowAgentsDialog:w},x[6]=w,x[7]=R,x[8]=o):o=x[8],!function(e){let t,a,n=(0,r.c)(12),{query:i,onShowAgentsDialog:l}=e,s=i?.category==="agents",{availableAgents:o,loading:c,disabled:d}=(0,eu.JE)(s);n[0]!==s||n[1]!==o?.length||n[2]!==d||n[3]!==c||n[4]!==l?(t=()=>{s&&!c&&(d?l("agents-not-supported"):o?.length||l("no-agents-available"))},n[0]=s,n[1]=o?.length,n[2]=d,n[3]=c,n[4]=l,n[5]=t):t=n[5],n[6]!==s||n[7]!==o||n[8]!==d||n[9]!==c||n[10]!==l?(a=[s,c,o,d,l],n[6]=s,n[7]=o,n[8]=d,n[9]=c,n[10]=l,n[11]=a):a=n[11],(0,p.useEffect)(t,a)}(o),!A||j){let e;return x[9]!==_?(e=(0,n.jsx)("div",{children:_}),x[9]=_,x[10]=e):e=x[10],e}x[11]!==E||x[12]!==b||x[13]!==S||x[14]!==R?(d=e=>{let{suggestion:t}=e,a="string"==typeof t?t:t.value;if((0,m.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:E,suggestion:a}),"object"==typeof t&&R?.category==="commands")return void b?.(t.key);let n=null!==a&&R?.category!=="agents"?F.Q.parse(a):void 0;if(n&&S(n),"object"!=typeof t||null!==t.value)return;let r=/^open-link:(.+)$/.exec(t.key);if(r){k(null),window.open(r[1],"_blank");return}switch(R?.category){case"categories":let i;i=t.key,ek.some(e=>e.value===i)&&k(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?k({category:"sso-orgs",filter:""}):R.nextCategory&&k({category:R.nextCategory,filter:"",repository:t.key})}},x[11]=E,x[12]=b,x[13]=S,x[14]=R,x[15]=d):d=x[15];let P=d;x[16]!==R?(u=e=>{let t=e.target;if("/"===e.trigger.triggerChar){(null===R&&1===t.selectionStart&&1===t.selectionEnd||R?.category==="commands")&&k({category:"commands",filter:e.query});return}k(a=>a?{...a,filter:e.query}:{category:"categories",filter:e.query,index:(t.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},x[16]=R,x[17]=u):u=x[17];let D=u;x[18]===Symbol.for("react.memo_cache_sentinel")?(h=()=>k(null),x[18]=h):h=x[18];let $=h;return x[19]!==R?(f=R&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eR[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eR[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eR[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(R)||void 0,x[19]=R,x[20]=f):f=x[20],x[21]!==_||x[22]!==P||x[23]!==D||x[24]!==L||x[25]!==f?(g=(0,n.jsx)(eT.a,{fullWidth:!0,suggestions:L,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:$,onShowSuggestions:D,onSelectSuggestion:P,suggestionsPlacement:"below",title:f,asMenu:!0,children:_}),x[21]=_,x[22]=P,x[23]=D,x[24]=L,x[25]=f,x[26]=g):g=x[26],x[27]!==M?(y=M&&(0,n.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),x[27]=M,x[28]=y):y=x[28],x[29]!==y||x[30]!==g?(v=(0,n.jsxs)(n.Fragment,{children:[g,y]}),x[29]=y,x[30]=g,x[31]=v):v=x[31],v}function e9(){return"undefined"!=typeof document}try{e8.displayName||(e8.displayName="ChatInputAutocomplete")}catch{}let te="ChatInput-module__container--qmP6j",tt="ChatInput-module__input--HalEQ",ta="ChatInput-module__containerDisabled--bIHy2",tn="ChatInput-module__toolbar--Kv3Gl",tr="ChatInput-module__containerSmall--NfPkF",ti="ChatInput-module__inputContainer--cpjba",tl="ChatInput-module__inputPreview--Fdwj0",ts="ChatInput-module__clicked--u0igo",to="ChatInput-module__attachments--Fv007",tc="ChatInput-module__attachmentButton--qtFf6",td="ChatInput-module__attachmentButtonText--fVuEs",tu="ChatInput-module__inputContainerNewConversation--FexlN",tm="ChatInput-module__inputDisabled--QQiex",th="ChatInput-module__toolbarNoModes--KJL2k",tp="ChatInput-module__extra--oQVm8",tf="ChatInput-module__CommandIconButton--lxm7H",tg="ChatInput-module__mode--dH9c4",ty="ChatInput-module__modeButton--y5Yp0",tv="ChatInput-module__modeSelectButton--rJ86j",tx="ChatInput-module__modeSelectorMobile--ZPCVa",t_="ChatInput-module__modeSelectorDesktop--SifXL",tC="ChatInput-module__actions--zbM52",tb="ChatInput-module__actionsMultiple--LHDC3",tS="ChatInput-module__toolbarButtons--YDoIY",tw="ChatInput-module__lighterSegmentedControl--uAdMt";var tj=a(16378),tI=a(6224);let tN=(0,p.forwardRef)(function(e,t){let a,l,s,o=(0,r.c)(8),{text:d,availableCommandKeys:u}=e;o[0]!==d?(a=(0,tj._)(d),o[0]=d,o[1]=a):a=o[1];let{availableAgents:m}=(0,eu.JE)(a),{currentReferences:h}=(0,c.Pk)(),f=(0,O.b)(),g=(0,M.l)().use(D.U,{references:h,agents:void 0===m?[]:m,commands:u}).parse(d),y=(0,tj.O)(g),v=(0,p.useRef)(y);(0,p.useEffect)(function(){for(let e of v.current)if(!y.has(e)){let t=h.find(t=>(0,i.Vb)(t)===e);t&&f.removeReference(t)}v.current=y}),o[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,S.G)("copilot-chat-input-textarea-preview"),o[2]=l):l=o[2];let x=g.children.map(tE);return o[3]!==t||o[4]!==l||o[5]!==tl||o[6]!==x?(s=(0,n.jsx)("div",{id:"copilot-chat-textarea-preview",...l,"aria-hidden":!0,className:tl,ref:t,role:"presentation",children:x}),o[3]=t,o[4]=l,o[5]=tl,o[6]=x,o[7]=s):s=o[7],s});try{tN.displayName||(tN.displayName="ChatInputPreview")}catch{}function tE(e,t){switch(e.type){case"text":return e.value;case"command":return(0,n.jsx)("span",{className:tI.A.command,...(0,S.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,n.jsx)("span",{className:tI.A.mention,...(0,S.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,n.jsx)("span",{className:tI.A.mention,children:e.value},t)}}var tA=a(11683),tT=a(45800),tR=a(25536),tk=a(7730),tL=a(57448),tM=a(1631),tP=a(15518);let tO=(0,p.memo)(e=>{let t,a,l,s,o,d,u,m,h,g,y,x,b,w,j,I,E,A=(0,r.c)(51),{className:k,isLoading:L,returnFocusRef:M,tokenSize:P,onSelectReference:F,getReferenceVersion:D,showConvertToFileText:$,onConvertToFile:B,onConvertToFileDismiss:W,hideAttachmentsMenu:U,onRemoveReference:V}=e,z=void 0===P?"medium":P,{currentReferences:G,implicitReferences:H}=(0,c.bP)("currentReferences","implicitReferences"),K=(0,O.b)(),Q=(0,p.useRef)(null),J=(0,tk.g)(Q),[X,Y]=(0,p.useState)(!1);A[0]!==G?(t=(0,i.rT)(G),A[0]=G,A[1]=t):t=A[1];let Z=t,{setSelectedCopilotSpaceId:ee}=(0,tR.O)(),et=(0,p.useRef)(null);A[2]===Symbol.for("react.memo_cache_sentinel")?(a={containerRef:et,focusableElementFilter:tD,bindKeys:tA.z0.ArrowHorizontal|tA.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},A[2]=a):a=A[2],A[3]!==Z?(l=[Z],A[3]=Z,A[4]=l):l=A[4],(0,tT.G)(a,l),A[5]===Symbol.for("react.memo_cache_sentinel")?(s=[],A[5]=s):s=A[5];let ea=(0,p.useRef)(s),en=(e,t)=>{let a=ea.current[t+1]??ea.current[t-1]??M.current;a?.focus(),V?.(e),(0,i.yA)(e)&&ee(void 0),K.removeReference(e)};A[6]!==K||A[7]!==M||A[8]!==Z||A[9]!==ee?(o=()=>{setTimeout(()=>M.current?.focus()),Z.filter(i.yA).length>0&&ee(void 0),K.clearCurrentReferences()},A[6]=K,A[7]=M,A[8]=Z,A[9]=ee,A[10]=o):o=A[10];let er=o,ei=(0,p.useRef)(Z);A[11]!==Z?(d=()=>{if(ei.current.length<Z.length){let e=Z.find(e=>!ei.current.find(t=>(0,i.x_)(t,e))),t=e?Z.indexOf(e):-1;ea?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}ei.current=Z},u=[Z],A[11]=Z,A[12]=d,A[13]=u):(d=A[12],u=A[13]),(0,q.N)(d,u),A[14]!==W?(m=()=>{W?.()},A[14]=W,A[15]=m):m=A[15];let el=m;A[16]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{Y(t$)},A[16]=h):h=A[16];let es=h,eo=function(e,t,a,n){let i,l,s,o,c,d=(0,r.c)(14),[u,m]=(0,p.useState)(!1);d[0]!==n||d[1]!==t?(i=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(n);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=n,d[1]=t,d[2]=i):i=d[2];let h=i;return d[3]!==h||d[4]!==e.length?(l=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(h);return()=>cancelAnimationFrame(t)},d[3]=h,d[4]=e.length,d[5]=l):l=d[5],d[6]!==h||d[7]!==e?(s=[e,h],d[6]=h,d[7]=e,d[8]=s):s=d[8],(0,p.useEffect)(l,s),d[9]!==h||d[10]!==a||d[11]!==e.length?(o=()=>{if(0===e.length||!a.current)return;let t=new ResizeObserver(()=>{h()});return t.observe(a.current),()=>{t.disconnect()}},c=[e.length,h,a],d[9]=h,d[10]=a,d[11]=e.length,d[12]=o,d[13]=c):(o=d[12],c=d[13]),(0,p.useEffect)(o,c),u}(Z,ea,et,`.${tP.A.name}`),ec=(0,p.useId)();A[17]!==el||A[18]!==$?(g=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),$&&el())},A[17]=el,A[18]=$,A[19]=g):g=A[19];let ed=g;if(0===Z.length&&!L&&!$)return null;A[20]!==k?(y=(0,f.$)(k,"ChatInputReferences-module__container--bNybl"),A[20]=k,A[21]=y):y=A[21];let eu=J&&"ChatInputReferences-module__scrolledToEnd--DONiv",em=L&&"ChatInputReferences-module__loading--kAJlw";A[22]!==eu||A[23]!==em?(x=(0,f.$)("ChatInputReferences-module__attachmentsList--mEJpJ",eu,em),A[22]=eu,A[23]=em,A[24]=x):x=A[24],A[25]!==ec||A[26]!==el||A[27]!==B||A[28]!==ed||A[29]!==$||A[30]!==z?(b=$&&(0,n.jsxs)("div",{className:"ChatInputReferences-module__convertToFileContainer--y1XOU",children:[(0,n.jsx)(T.Q,{onClick:B,leadingVisual:N.FileIcon,className:"ChatInputReferences-module__convertToFileButton--hnPn2","aria-describedby":ec,onKeyDown:ed,children:"Convert to file"}),(0,n.jsx)(tM.lh,{size:z,onRemove:el,descriptionId:ec})]}),A[25]=ec,A[26]=el,A[27]=B,A[28]=ed,A[29]=$,A[30]=z,A[31]=b):b=A[31];let eh=Z.map((e,t)=>"repository"===e.type?(0,n.jsx)(tF,{reference:e,ref:e=>{ea.current[t]=e},"data-index":t,size:z,fullWidth:X,onRemove:()=>en(e,t),onClick:F,getReferenceVersion:D},(0,i.Vb)(e)):(0,n.jsx)(tM.BR,{reference:e,ref:e=>{ea.current[t]=e},"data-index":t,size:z,fullWidth:X,onRemove:()=>en(e,t),onClick:F,getReferenceVersion:D,isImplicitReference:H.has(e)},(0,i.Vb)(e)));return A[32]!==L?(w=L&&(0,n.jsxs)("div",{className:"ChatInputReferences-module__functionLoading--Oimop",...(0,S.G)("loading-indicator"),children:[(0,n.jsx)(_.A,{size:"small"}),"Retrieving\u2026"]}),A[32]=L,A[33]=w):w=A[33],A[34]!==x||A[35]!==b||A[36]!==eh||A[37]!==w?(j=(0,n.jsxs)("div",{className:x,ref:Q,children:[b,eh,w]}),A[34]=x,A[35]=b,A[36]=eh,A[37]=w,A[38]=j):j=A[38],A[39]!==es||A[40]!==eo||A[41]!==U||A[42]!==er||A[43]!==Z.length||A[44]!==X||A[45]!==z?(I=Z.length>0&&!U&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ChatInputReferences-module__divider--k8d6S"}),(0,n.jsxs)(v.W,{children:[(0,n.jsx)(v.W.Anchor,{children:(0,n.jsx)(R.K,{icon:N.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:"ChatInputReferences-module__menuButton--IVLqN",size:z})}),(0,n.jsx)(v.W.Overlay,{width:"small",children:(0,n.jsxs)(C.l,{children:[eo&&(0,n.jsxs)(C.l.Item,{onSelect:es,children:[(0,n.jsx)(C.l.LeadingVisual,{children:X?(0,n.jsx)(N.EyeClosedIcon,{}):(0,n.jsx)(N.EyeIcon,{})}),X?"Hide full attachment names":"Show full attachment names"]}),(0,n.jsxs)(C.l.Item,{onSelect:er,children:[(0,n.jsx)(C.l.LeadingVisual,{children:(0,n.jsx)(N.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),A[39]=es,A[40]=eo,A[41]=U,A[42]=er,A[43]=Z.length,A[44]=X,A[45]=z,A[46]=I):I=A[46],A[47]!==y||A[48]!==j||A[49]!==I?(E=(0,n.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:y,ref:et,children:[j,I]}),A[47]=y,A[48]=j,A[49]=I,A[50]=E):E=A[50],E});tO.displayName="ChatInputReferences";let tF=(0,p.forwardRef)(function(e,t){let a,i,l,s=(0,r.c)(8),o=e.reference,d=(0,c.pn)(tB),u=`${o.ownerLogin}/${o.name}`,[m,h]=(0,tL.vn)(u),f=(0,p.useRef)(!1),g=m.code===tL.W5.Unindexed||m.docs===tL.W5.Unindexed;return s[0]!==d||s[1]!==g||s[2]!==h?(a=function(){!f.current&&g&&d&&(f.current=!0,h())},i=[d,g,h],s[0]=d,s[1]=g,s[2]=h,s[3]=a,s[4]=i):(a=s[3],i=s[4]),(0,p.useEffect)(a,i),s[5]!==e||s[6]!==t?(l=(0,n.jsx)(tM.BR,{...e,ref:t}),s[5]=e,s[6]=t,s[7]=l):l=s[7],l});try{tF.displayName||(tF.displayName="RepoReferenceToken")}catch{}try{tF.displayName||(tF.displayName="RepoReferenceToken")}catch{}function tD(e){return!e.hasAttribute("aria-hidden")}function t$(e){return!e}function tB(e){return e.model&&!e.model.hasLimitedCapabilities}var tW=a(81829);let tU=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,n.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tU.displayName||(tU.displayName="MCPIcon")}catch{}var tV=a(97793),tq=a(97665),tz=a(31604),tG=a(99511),tH=a(13436),tK=a(76720);let tQ=({anchorRef:e,open:t,onOpenChange:a})=>{let[r,i]=(0,p.useState)(!1),[s,o]=(0,p.useState)(""),[c,d]=(0,p.useState)(null),[u,m]=(0,p.useState)(()=>new Set),{service:h}=(0,O.b)(),f=(0,tq.jE)(),{data:g,isPending:y,isError:v}=(0,eJ.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>h.fetchMCPServers(),placeholderData:e=>e}),x=(0,p.useMemo)(()=>g||[],[g]),C=(0,p.useMemo)(()=>x.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[x,s]),b=e=>{m(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tz.T,{open:t,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,n.jsx)(n.Fragment,{}),width:"medium",children:(0,n.jsxs)("div",{className:"McpToolsManager-module__container--PHa2N",children:[(0,n.jsxs)("div",{className:"McpToolsManager-module__header--PXzkx",children:[(0,n.jsx)("div",{className:"McpToolsManager-module__headerTitle--CiuwN",children:"MCP tools"}),(0,n.jsx)(tG.A,{placeholder:"Search by provider",value:s,onChange:e=>o(e.target.value),className:"McpToolsManager-module__searchInput--v2pAX",leadingVisual:N.SearchIcon})]}),(0,n.jsx)("div",{className:"McpToolsManager-module__contentArea--aqxn4",children:y?(0,n.jsx)("div",{className:"McpToolsManager-module__loadingContainer--btAEV",children:(0,n.jsx)(_.A,{})}):v?(0,n.jsxs)(tK.E,{children:[(0,n.jsx)(tK.E.Visual,{children:"\u26A0\uFE0F"}),(0,n.jsx)(tK.E.Heading,{children:"Error loading tools"})]}):0===x.length?(0,n.jsxs)("div",{className:"McpToolsManager-module__emptyState--qpgwB",children:[(0,n.jsx)(N.ToolsIcon,{size:24}),(0,n.jsx)("div",{className:"McpToolsManager-module__emptyStateTitle--PLCEY",children:"You don't have any MCP tools configured"}),(0,n.jsx)("div",{className:"McpToolsManager-module__emptyStateDescription--x7TOI",children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,n.jsx)(tH.G,{"aria-label":"MCP server selection",children:C.map(e=>{let t;return(0,n.jsxs)(tH.G.Item,{id:e.id,onSelect:()=>{var t;d(t=e.id),b(t)},expanded:u.has(e.id),onExpandedChange:()=>b(e.id),current:c===e.id,"aria-selected":c===e.id,children:[(0,n.jsx)("span",{className:"McpToolsManager-module__serverName--au45P",children:e.name}),e.tools&&e.tools.length>0?(0,n.jsx)(tH.G.SubTree,{children:(t=e.tools).length>0&&"object"==typeof t[0]&&"name"in t[0]?e.tools.map(t=>{let a=`${e.id}-${t.name}`,r=c===a;return(0,n.jsx)(tH.G.Item,{id:a,current:r,"aria-selected":r,onSelect:()=>{!r&&l.W.mcpToolDescriptions?d(a):d(null)},children:l.W.mcpToolDescriptions?(0,n.jsxs)("div",{className:"McpToolsManager-module__toolItem--Eo5Ka",children:[(0,n.jsxs)("div",{className:"McpToolsManager-module__toolNameContainer--VKNAW",children:[r?(0,n.jsx)(N.DashIcon,{size:12}):(0,n.jsx)(N.PlusIcon,{size:12}),(0,n.jsx)("span",{className:"McpToolsManager-module__toolName--EL2OQ",children:t.name})]}),t.description&&r&&(0,n.jsx)("div",{className:"McpToolsManager-module__toolDescription--nn86Q",children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let a=`${e.id}-${t}`;return(0,n.jsx)(tH.G.Item,{id:a,onSelect:()=>d(a),current:c===a,"aria-selected":c===a,children:t},t)})}):null]},e.id)})})}),(0,n.jsx)("div",{className:"McpToolsManager-module__footer--UZmCo",children:(0,n.jsx)(T.Q,{variant:"default",leadingVisual:N.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,n.jsx)(tV.O,{isOpen:r,onClose:()=>{i(!1)},onServerAdded:()=>{f.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{tQ.displayName||(tQ.displayName="McpToolsManager")}catch{}let tJ=()=>{let e,t=(0,r.c)(2),[a,i]=(0,p.useState)(!1),l=(0,p.useRef)(null);return t[0]!==a?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.K,{ref:l,icon:tU,variant:"invisible","aria-label":"MCP tools",onClick:()=>i(!a)}),(0,n.jsx)(tQ,{anchorRef:l,open:a,onOpenChange:i})]}),t[0]=a,t[1]=e):e=t[1],e};try{tJ.displayName||(tJ.displayName="McpToolMenu")}catch{}var tX=a(12970),tY=a(11196);function tZ(){let e,t,a,i=(0,r.c)(8),l=(0,O.b)(),{usePlanningIntent:s,selectedThreadID:o}=(0,c.bP)("usePlanningIntent","selectedThreadID");i[0]!==l||i[1]!==s?(e=()=>l.setUsePlanningIntent(!s),i[0]=l,i[1]=s,i[2]=e):e=i[2];let d=e;if(o){let e;return i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(tY.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,n.jsx)(T.Q,{leadingVisual:N.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),i[3]=e):e=i[3],e}return i[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(N.TasklistIcon,{}),i[4]=t):t=i[4],i[5]!==d||i[6]!==s?(a=(0,n.jsx)(g,{icon:t,isSelected:s,onClick:d,children:"Plan"}),i[5]=d,i[6]=s,i[7]=a):a=i[7],a}try{tZ.displayName||(tZ.displayName="PlanningIntentToggle")}catch{}var t0=a(60777);let t1=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t2=e=>{let t,a,s,o,d,h,g,v,x,_,C,b,N,A,T,R,H,ei,el,es,eo,ec,ed,eu,em,eh,ep,ef,eg,ey,ev,ex,e_,eC,eb,eS,ew,ej,eI,eN,eE,eT,eR,ek=(0,r.c)(208),eL=(0,c.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:eM}=eL,eP=(0,er.tD)(),eO=(0,O.b)(),eF=eO.maxMessagesReached(),[eD,e$]=(0,p.useState)(null),eB="loading"===eL.slashCommandLoading.state,{safeSetTimeout:eW}=(0,E.A)(),{onSelectReference:eU,containerRef:eV,shouldClearTextOnSubmit:eq,slashCommandsEnabled:ez}=e,eG=void 0===eq||eq,eH=void 0!==ez&&ez,eK=(0,p.useRef)(null),eQ=(0,p.useRef)(""),eJ=(0,p.useRef)(!1),eX=(0,j.Z)(),{activeCopilotSpaceId:eY}=(0,u.C)();ek[0]!==e.activeModeName||ek[1]!==e.modes?(t=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],ek[0]=e.activeModeName,ek[1]=e.modes,ek[2]=t):t=ek[2];let eZ=t;ek[3]!==eO||ek[4]!==e.initialReference?(a=()=>{e.initialReference&&eO.addReference(e.initialReference,"page-file-reference")},s=[e.initialReference,eO],ek[3]=eO,ek[4]=e.initialReference,ek[5]=a,ek[6]=s):(a=ek[5],s=ek[6]),(0,p.useEffect)(a,s),ek[7]!==eD||ek[8]!==eL.mode?(o=e=>{eK.current=null,eQ.current="",eJ.current=!1,eD&&(e$(null),void 0!==e&&e&&(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eL.mode}))},ek[7]=eD,ek[8]=eL.mode,ek[9]=o):o=ek[9];let e0=o;ek[10]!==eH?(d={enabled:eH},ek[10]=eH,ek[11]=d):d=ek[11];let{availableCommands:e1,availableCommandKeys:e2}=(0,V.j)(d),e5=eL.isWaitingOnCopilot||eL.isWaitingOnAttachment||eB;ek[12]!==e1||ek[13]!==e0||ek[14]!==e.disableSavedUserMessage||ek[15]!==e.isInPortal||ek[16]!==e.onChatCommandChange||ek[17]!==e.onSubmit||ek[18]!==e.textAreaRef||ek[19]!==eG||ek[20]!==e5?(h={isLoading:e5,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:e0,onChatCommandChange:e.onChatCommandChange,disableSavedUserMessage:e.disableSavedUserMessage,isInPortal:e.isInPortal,shouldClearTextOnSubmit:eG,availableCommands:e1},ek[12]=e1,ek[13]=e0,ek[14]=e.disableSavedUserMessage,ek[15]=e.isInPortal,ek[16]=e.onChatCommandChange,ek[17]=e.onSubmit,ek[18]=e.textAreaRef,ek[19]=eG,ek[20]=e5,ek[21]=h):h=ek[21];let{typingHasStarted:e3,textAreaRef:e4,textareaPreviewRef:e7,textAreaPreviewContainerRef:e6,text:e9,setText:tn,isAgentTaskSubmitInProgress:tl,handleSubmit:ts,handleSubmitToNewThread:tc,handleScroll:td,handleChange:th,handleStop:tp,handleFocus:tf,command:tg,setLastUsedRepo:ty,selectedRepo:tv,setSelectedRepo:tx,selectedBranch:t_,setSelectedBranch:tC,selectedCustomAgent:tb,setSelectedCustomAgent:tS,initialRepoNWO:tw}=function(e){let t=(0,c.Pk)(),a=(0,O.b)(),n=(0,j.Z)(),{selectedThreadID:r,mode:i,autoSubmit:s,model:o}=t,{clearPastedFile:d,isLoading:u,onSubmit:h,onChatCommandChange:f,disableSavedUserMessage:g,isInPortal:v,shouldClearTextOnSubmit:x=!0,availableCommands:_=[]}=e,C=G.Jt.getSavedMessage(r),b=G.Jt.getSavedUserMessageOnError(r),{pathname:S}=(0,y.zy)(),[w,I]=(0,y.ok)(),[N,A]=(0,p.useState)(()=>{let e=Y(t.mode,S,w);return g?e??"":e??b??C??""}),[T,R]=(0,p.useState)(!1),[k,L]=(0,p.useState)(null),[M,P]=(0,p.useState)(!1),F=(0,p.useRef)(null),D=e.textAreaRef||F,$=(0,p.useRef)(null),B=(0,p.useRef)(null),W=(0,p.useRef)(0),U=(0,p.useRef)(null),V=(0,p.useRef)(()=>{}),H=(0,p.useRef)(!1),Z=(0,Q.GF)(t.availableModels),ee=(0,p.useRef)(r),{safeSetTimeout:et}=(0,E.A)(),ea=(0,p.useRef)(0),[en,er]=(0,X.T)(),[ei,el]=(0,p.useState)(void 0),es=t.currentReferences.find(e=>"repository"===e.type),eo=es?`${es.ownerLogin}/${es.name}`:`${en?.ownerLogin}/${en?.name}`,ec=(0,p.useCallback)(e=>{el(e)},[]),[ed,eu]=(0,p.useState)(void 0),[em,eh]=(0,p.useState)(void 0);(0,p.useEffect)(()=>{l.W.stableConversationView?r===ee.current?G.Jt.setSavedMessage(r,N):(A(G.Jt.getSavedMessage(r)||""),ee.current=r):G.Jt.setSavedMessage(r,N)},[r,N]),(0,q.N)(()=>{let e=0;!function t(){if(!D.current||!B.current||!$.current)return;if(e++,(v||"assistive"===i)&&0===D.current.scrollHeight&&e<10)return void et(t,1);if(0===N.length&&56===ea.current)return;D.current.style.height="0";let a=Math.max(D.current.scrollHeight,56),n=Math.min(a,300);$.current.style.height=`${a}px`,D.current.style.height=`${a}px`,B.current.style.height=`${n}px`,ea.current=n}()},[i,et,N,D,$,v]);let ep=(0,p.useCallback)(()=>{D?.current&&$?.current&&B?.current&&($.current.scrollTop=D.current.scrollTop,$.current.scrollLeft=D.current.scrollLeft)},[D]),ef=(0,p.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),eg=(0,p.useCallback)(async e=>{if(P(!1),G.Jt.clearSavedUserMessage(r),G.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!N.includes(`@${t.defaultRecipient}`)&&a.clearDefaultRecipient(),e?.preventDefault(),"task"===k&&ei?.id!=null){let e=await a.service.fetchRepo(ei.id);e.ok&&e.payload&&er(e.payload)}if(await K(N,t,a,n,_,"task"===k?{selectedRepo:ei,selectedBranch:ed,selectedCustomAgent:em}:{})){if("/new"===N.trim()&&G.Jt.setSavedMessageFast(r,null),x)A("");else{let e=N.substring(N.indexOf(" ")+1).trim();R(!0),A(`Creating ${e}...`)}return}if(!u){let e=N;if(!e){let[t,n]=a.tryInferMessage(ef);if(!t||!n)return;e=n}try{A("");let t=[];if("task"===k&&ei){let a={type:"task-request",description:e,repoOwner:ei.owner,repoName:ei.nameOnly,ref:ed||ei.defaultBranch,customAgent:em};t.push(a)}await h?.(e,t.length>0?t:void 0)}catch(t){if(R(!1),t instanceof J.q)return void A(e);throw t}}},[r,t,N,a,n,_,k,ei,ed,em,u,x,ef,h,er]),ey=(0,p.useCallback)(()=>a.sendMessageToNewThread(r,N,ef,t.context,Z),[a,r,t.context,ef,N,Z]);(0,p.useEffect)(()=>{(async()=>{let e=Y(i,S,w),t=new URLSearchParams(w),a=t.get("model"),n=!a||a===o.id;e&&n&&!H.current&&(t.delete("prompt"),t.delete("model"),(0,m.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),I(t,{replace:!0}),s&&(H.current=!0,await Promise.resolve(),await eg()))})()},[S,w,I,i,s,o,eg]);let ev=(0,p.useCallback)(e=>{P(!0),D?.current&&(A(e.target.value),d?.(),W.current=0,ep())},[ep,d,D]),ex=(0,p.useCallback)(async()=>{await a.stopStreaming(),null!=r&&(a.startThreadReload(),await new Promise(e=>{U.current=setTimeout(()=>e(r),6e3)}),V.current=await a.fetchMessages(r,!0,!0))},[a,r]);return(0,p.useEffect)(()=>{V.current&&(V.current(),V.current=()=>{})},[t.messages]),(0,p.useEffect)(()=>()=>{U.current&&(clearTimeout(U.current),U.current=null),a.cancelThreadReload(),V.current=()=>{}},[a]),(0,p.useEffect)(()=>{if(0===_.length&&!l.W.taskWithinChatThread)return;let e=(0,z.V)(N,_.map(e=>e.key));k!==e&&(L(e),f?.(e))},[N,k,f,_]),{typingHasStarted:M,textAreaRef:D,textareaPreviewRef:$,textAreaPreviewContainerRef:B,text:N,setText:A,isAgentTaskSubmitInProgress:T,command:k,setCommand:L,handleSubmit:eg,handleSubmitToNewThread:ey,handleScroll:ep,handleChange:ev,handleStop:ex,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},lastUsedRepo:en,setLastUsedRepo:er,selectedRepo:ei,setSelectedRepo:ec,selectedBranch:ed,setSelectedBranch:eu,selectedCustomAgent:em,setSelectedCustomAgent:eh,initialRepoNWO:eo}}(h),tj=e.disabled||tl||eF;ek[22]!==tn?(v=()=>({setText:tn}),g=[tn],ek[22]=tn,ek[23]=g,ek[24]=v):(g=ek[23],v=ek[24]),(0,p.useImperativeHandle)(e.chatInputRef,v,g),ek[25]!==th||ek[26]!==e4?(x={inputRef:e4,fallbackEventHandler:th},ek[25]=th,ek[26]=e4,ek[27]=x):x=ek[27];let tI=(0,I.H)(x);ek[28]!==tI||ek[29]!==e.figmaAuthUrl||ek[30]!==e4?(_={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:e4,emitChange:tI},ek[28]=tI,ek[29]=e.figmaAuthUrl,ek[30]=e4,ek[31]=_):_=ek[31];let{replaceUrlWithReferenceMention:tE}=function(e){let t,a,n,l,s,o,d,u,m,h,p,f,g=(0,r.c)(35),{figmaAuthUrl:y,textAreaRef:v,emitChange:x}=e,_=(0,O.b)(),{currentReferences:C}=(0,c.Pk)();g[0]!==x||g[1]!==v?(t=(e,t,a)=>{if(!v.current||e===t)return;let n=a?.[0]??0,r=v.current.value.slice(n,a?.[1]),i=r.indexOf(e);for(;i>-1;){let a=i+e.length;x(t,[i+n,a+n]),i=(r=r.replace(e,t)).indexOf(e)}},g[0]=x,g[1]=v,g[2]=t):t=g[2];let b=t;g[3]!==_?(a=e=>{let{itemUrl:t}=e,a=(0,i.Vc)(t);return _.addReference(a,"url-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),a},g[3]=_,g[4]=a):a=g[4],g[5]!==b||g[6]!==_?(n=(e,t,a)=>{let{parsedReferenceMention:n}=t;_.replaceReference(a,e);let r=F.Q.for(e);if(!r)return;let i=F.Q.stringify(n),l=F.Q.stringify(r);i!==l&&b(i,l)},l=(e,t,a)=>{let{itemUrl:n,parsedReferenceMention:r}=t;_.removeReference(a),b(F.Q.stringify(r),n)},g[5]=b,g[6]=_,g[7]=n,g[8]=l):(n=g[7],l=g[8]),g[9]!==_?(s=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[9]=_,g[10]=s):s=g[10],g[11]!==a||g[12]!==n||g[13]!==l||g[14]!==s?(o={mutationFn:U,onMutate:a,onSuccess:n,onError:l,onSettled:s},g[11]=a,g[12]=n,g[13]=l,g[14]=s,g[15]=o):o=g[15];let S=(0,k.n)(o);g[16]!==_?(d=e=>{let t=(0,i.Vc)(e);return _.addReference(t,"figma-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},u=(e,t,a)=>{_.replaceReference(a,e)},g[16]=_,g[17]=d,g[18]=u):(d=g[17],u=g[18]),g[19]!==y||g[20]!==_?(m=(e,t,a)=>{a&&y&&e instanceof B?_.replaceReference(a,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):_.removeReference(a)},g[19]=y,g[20]=_,g[21]=m):m=g[21],g[22]!==_?(h=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[22]=_,g[23]=h):h=g[23],g[24]!==h||g[25]!==d||g[26]!==u||g[27]!==m?(p={mutationFn:W,onMutate:d,onSuccess:u,onError:m,onSettled:h},g[24]=h,g[25]=d,g[26]=u,g[27]=m,g[28]=p):p=g[28];let w=(0,k.n)(p);return g[29]!==C||g[30]!==w||g[31]!==b||g[32]!==S||g[33]!==v?(f={replaceUrlWithReferenceMention:e=>{let t=v.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let a=F.Q.fromUrl(t);a&&(C.every(e=>!F.Q.refersTo(a,e))&&S.mutate({itemUrl:t,parsedReferenceMention:a}),b(t,F.Q.stringify(a),e));let n=$.exec(t);return n&&(w.mutate(t),b(t,n[1],e)),t}},g[29]=C,g[30]=w,g[31]=b,g[32]=S,g[33]=v,g[34]=f):f=g[34],f}(_),{isLoading:tA,addReferenceForMention:tT,addReferencesForMentions:tR}=function(){let e=(0,O.b)(),{currentReferences:t,mode:a}=(0,c.Pk)(),n=(0,k.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],n=await (0,L.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return(0,m.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:a,linkType:e.type}),await n.json()},onSuccess:t=>e.addReference(t,"chatInput")}),r=e=>{t.every(t=>!F.Q.refersTo(e,t))&&n.mutate(e)};return{isLoading:n.isPending,addReferenceForMention:r,addReferencesForMentions:e=>{let a=(0,M.l)().use(D.U,{references:t,agents:[],commands:[]}).parse(e),n=0;(0,P.YR)(a,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&n<20&&(n++,r(e.data.referenceMention))})}}}(),tk=(0,en.FQ)(),tL=eY&&tk;ek[32]!==tg||ek[33]!==e9?(C=(0,z.x)(e9,tg),ek[32]=tg,ek[33]=e9,ek[34]=C):C=ek[34];let tM=C,tP=eB||tA||eL.isWaitingOnAttachment||!!e.submitDisabled||"task"===tg&&!tv&&!t_||tl||tM,tF=0===e9.length;ek[35]!==tp||ek[36]!==eL.mode?(b=()=>{(0,m.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eL.mode}),tp()},ek[35]=tp,ek[36]=eL.mode,ek[37]=b):b=ek[37];let tD=b;ek[38]!==eY||ek[39]!==e0||ek[40]!==ts||ek[41]!==tk||ek[42]!==eD||ek[43]!==eL.mode||ek[44]!==eL.selectedThreadID||ek[45]!==tP?(N=()=>{if(tP)return;let e=eY?`${eY.owner}/${eY.id}`:"";(0,m.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eL.mode,selectedThreadId:eL.selectedThreadID,copilotSpace:e,fromSpaceUI:tk}),eD&&e0(!1),ts()},ek[38]=eY,ek[39]=e0,ek[40]=ts,ek[41]=tk,ek[42]=eD,ek[43]=eL.mode,ek[44]=eL.selectedThreadID,ek[45]=tP,ek[46]=N):N=ek[46];let t$=N;ek[47]!==tc||ek[48]!==tP?(A=()=>{tP||tc()},ek[47]=tc,ek[48]=tP,ek[49]=A):A=ek[49];let tB=A;ek[50]!==eO||ek[51]!==eL.messages?(T=()=>{let e=eL.messages.findLast(t7)?.id;e&&eO.startEditingMessage(e)},ek[50]=eO,ek[51]=eL.messages,ek[52]=T):T=ek[52];let tU=T;e:{if(eL.isWaitingOnCopilot){R="Copilot is responding\u2026";break e}if(eL.defaultRecipient){R=void 0;break e}if(eF){R="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}R=eZ.placeholder??"Ask anything"}let tV=R;eL.defaultRecipient&&""===e9&&!e3&&tn(`@${eL.defaultRecipient} `);let tq=(0,p.useRef)(null),[tz,tG]=(0,p.useState)(null),[tH,tK]=(0,p.useState)(null);ek[53]!==tG||ek[54]!==eL.mode?(H=()=>{(0,m.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eL.mode}),tG(t6)},ek[53]=tG,ek[54]=eL.mode,ek[55]=H):H=ek[55];let tQ=H;ek[56]!==eO||ek[57]!==eL.mode||ek[58]!==eL.skillOptions?.deepCodeSearch?(ei=()=>{(0,m.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eL.mode}),eO.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eL.skillOptions?.deepCodeSearch})},ek[56]=eO,ek[57]=eL.mode,ek[58]=eL.skillOptions?.deepCodeSearch,ek[59]=ei):ei=ek[59],eL.skillOptions?.deepCodeSearch;let tJ=ei,tX="immersive"===eL.mode&&!!eM.capabilities?.supports?.vision;ek[60]!==eP||ek[61]!==eO||ek[62]!==eM||ek[63]!==e.existingFileNames||ek[64]!==tX?(el=async(t,a,n,r)=>{let i=new ee.s(eP(),eO),l=new ea.E(eO,e.existingFileNames),s=[];[...t].some(t8)&&!eM.capabilities?.supports?.vision&&(eO.addAmbientError(`The ${eM.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,et.d)("vision_not_supported_for_model",{modelId:eM.id,uploadType:a}));let[o,c]=ee.s.getAllowedFiles([...t],eM);if(tX){let e=await i.addImageAttachments(o,a);e&&s.push(...e)}let d=[];for(let e of c)if(await ea.E.isAttachable(e)){let t=await l.addAttachment(e,n,r);t&&s.push(t)}else d.push(e.type);return tX&&d.length>0&&(0,et.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:a}),s},ek[60]=eP,ek[61]=eO,ek[62]=eM,ek[63]=e.existingFileNames,ek[64]=tX,ek[65]=el):el=ek[65];let tY=el;ek[66]!==e0||ek[67]!==tY||ek[68]!==eD||ek[69]!==tn||ek[70]!==eL.mode||ek[71]!==e9?(es=async()=>{if(!eD)return;let e=[eD],t=await tY(e,"paste",eK.current||void 0,eQ.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eD.text();tn(e9.replaceAll(e,`@${t[0].name}`)),e0(!1),(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eL.mode})}},ek[66]=e0,ek[67]=tY,ek[68]=eD,ek[69]=tn,ek[70]=eL.mode,ek[71]=e9,ek[72]=es):es=ek[72];let tZ=es;ek[73]!==e0?(eo=()=>{e0(!0)},ek[73]=e0,ek[74]=eo):eo=ek[74];let t2=eo;ek[75]!==eD||ek[76]!==eL.isWaitingOnAttachment||ek[77]!==eL.mode?(ec=()=>{!eD||eL.isWaitingOnAttachment||eJ.current||(eJ.current=!0,(0,m.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eL.mode}))},ed=[eD,eL.isWaitingOnAttachment,eL.mode],ek[75]=eD,ek[76]=eL.isWaitingOnAttachment,ek[77]=eL.mode,ek[78]=ec,ek[79]=ed):(ec=ek[78],ed=ek[79]),(0,p.useEffect)(ec,ed);let t3=(eZ.supportsReferenceAttachments??!0)&&"task"!==tg;ek[80]!==tR||ek[81]!==tY||ek[82]!==eO||ek[83]!==e.existingFileNames||ek[84]!==tE||ek[85]!==eW||ek[86]!==t3||ek[87]!==e4?(eu=t=>{let a=t.clipboardData;if(a?.items){let n=[];for(let t=0;t<a.items.length;t++){let r=a.items[t];if(r){if("file"===r.kind){let e=r.getAsFile();e&&n.push(e)}else if("string"===r.kind&&["text","text/plain"].includes(r.type)){let t=a.getData(r.type);if(t.length>1e3&&t.length<=ea.E.getAttachmentSizeLimit())eW(()=>{eJ.current=!1;let a=new File([t],"",{type:ea.x}),n=new ea.E(eO,e.existingFileNames);e$(a),eK.current=n.generateFileName(t,a.type).then(e=>eQ.current=e)},1);else if(t3){tR(t);let e=e4.current?.selectionStart??0;setTimeout(()=>tE([e,e+t.length]))}return}}}n.length>0&&(t.preventDefault(),tY(n,"paste"))}},ek[80]=tR,ek[81]=tY,ek[82]=eO,ek[83]=e.existingFileNames,ek[84]=tE,ek[85]=eW,ek[86]=t3,ek[87]=e4,ek[88]=eu):eu=ek[88];let t4=eu;ek[89]!==tY?(em=e=>{tY(e,"drag")},ek[89]=tY,ek[90]=em):em=ek[90];let t9=em;ek[91]!==ty?(eh=e=>{e&&ty(e),tK(e)},ek[91]=ty,ek[92]=eh):eh=ek[92];let ae=eh;ek[93]!==e1||ek[94]!==eX?(ep=e=>{let t=e1.find(t=>t.key===e);return t?.enabled?.()===!1&&!!t.disabledAction&&(t.disabledAction(eX),!0)},ek[93]=e1,ek[94]=eX,ek[95]=ep):ep=ek[95];let at=ep,aa=e.isStreaming||eL.isWaitingOnCopilot,an=!!eZ.supportsAttachments&&"task"!==tg,ar=w.tL,ai=aa?tD:void 0,al=tF?tU:void 0;ek[96]!==tQ||ek[97]!==t$||ek[98]!==tB||ek[99]!==tJ||ek[100]!==ai||ek[101]!==al?(ef={"github:cancel":ai,"copilot-chat:send-message":t$,"copilot-chat:send-message-new-conversation":tB,"copilot-chat:add-attachment":tQ,"copilot-chat:edit-last-message":al,"copilot-chat:deep-codesearch":tJ},ek[96]=tQ,ek[97]=t$,ek[98]=tB,ek[99]=tJ,ek[100]=ai,ek[101]=al,ek[102]=ef):ef=ek[102];let as=ef,ao=(0,f.$)(te,{[tr]:"small"===e.size,[ta]:tj},e.className);ek[103]===Symbol.for("react.memo_cache_sentinel")?(eg=(0,S.G)("copilot-chat-input-form"),ek[103]=eg):eg=ek[103],ek[104]!==tZ||ek[105]!==t2||ek[106]!==tA||ek[107]!==eU||ek[108]!==eD||ek[109]!==e.getReferenceVersion||ek[110]!==e.initialReference||ek[111]!==e.onRemoveReference||ek[112]!==e.size||ek[113]!==eL.isWaitingOnAttachment||ek[114]!==t3?(ey=t3&&(0,n.jsx)(tO,{className:to,returnFocusRef:tq,tokenSize:"small"===e.size?"small":"medium",isLoading:tA,onSelectReference:eU,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!eD&&!eL.isWaitingOnAttachment,onConvertToFile:tZ,onConvertToFileDismiss:t2,hideAttachmentsMenu:!!e.initialReference}),ek[104]=tZ,ek[105]=t2,ek[106]=tA,ek[107]=eU,ek[108]=eD,ek[109]=e.getReferenceVersion,ek[110]=e.initialReference,ek[111]=e.onRemoveReference,ek[112]=e.size,ek[113]=eL.isWaitingOnAttachment,ek[114]=t3,ek[115]=ey):ey=ek[115];let ac=w.tL;ek[116]!==e.isNewConversation?(ev=(0,f.$)(ti,{[tu]:e.isNewConversation}),ek[116]=e.isNewConversation,ek[117]=ev):ev=ek[117];let ad=!eZ.supportsAutocompletion,au=!e.disableAutoFocus,am=Z.wg,ah=(0,f.$)(tt,{[tm]:tj}),ap=eZ.textAreaAriaLabel||tV;ek[118]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,S.G)("copilot-chat-input-textarea"),ek[118]=ex):ex=ek[118],ek[119]!==tj||ek[120]!==th||ek[121]!==tf||ek[122]!==t4||ek[123]!==td||ek[124]!==tV||ek[125]!==au||ek[126]!==am||ek[127]!==ah||ek[128]!==ap||ek[129]!==e9||ek[130]!==e4?(e_=(0,n.jsx)("textarea",{autoFocus:au,id:am,className:ah,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":ap,"aria-multiline":"true",onPaste:t4,ref:e4,onScroll:td,onChange:th,onFocus:tf,placeholder:tV,value:e9,"data-react-autofocus":!0,disabled:tj,...ex}),ek[119]=tj,ek[120]=th,ek[121]=tf,ek[122]=t4,ek[123]=td,ek[124]=tV,ek[125]=au,ek[126]=am,ek[127]=ah,ek[128]=ap,ek[129]=e9,ek[130]=e4,ek[131]=e_):e_=ek[131],ek[132]!==e8||ek[133]!==tT||ek[134]!==e1||ek[135]!==at||ek[136]!==tG||ek[137]!==ad||ek[138]!==e_?(eC=(0,n.jsx)(e8,{onSelectReference:tT,onShowAgentsDialog:tG,onSelectCommand:at,hideAutocomplete:ad,availableCommands:e1,children:e_}),ek[132]=e8,ek[133]=tT,ek[134]=e1,ek[135]=at,ek[136]=tG,ek[137]=ad,ek[138]=e_,ek[139]=eC):eC=ek[139],ek[140]!==e2||ek[141]!==e9||ek[142]!==e7?(eb=(0,n.jsx)(tN,{text:e9,ref:e7,availableCommandKeys:e2}),ek[140]=e2,ek[141]=e9,ek[142]=e7,ek[143]=eb):eb=ek[143],ek[144]!==ac.LimitKeybindingScope||ek[145]!==t1||ek[146]!==ev||ek[147]!==eC||ek[148]!==eb||ek[149]!==e6?(eS=(0,n.jsxs)(ac.LimitKeybindingScope,{commandIds:t1,className:ev,ref:e6,children:[eC,eb]}),ek[144]=ac.LimitKeybindingScope,ek[145]=t1,ek[146]=ev,ek[147]=eC,ek[148]=eb,ek[149]=e6,ek[150]=eS):eS=ek[150];let af=eL.skillOptions?.deepCodeSearch;return ek[151]!==tg||ek[152]!==tw||ek[153]!==e.extraToolbar||ek[154]!==t_||ek[155]!==tb||ek[156]!==tv||ek[157]!==tC||ek[158]!==tS||ek[159]!==tx?(ew="task"===tg?(0,n.jsx)(t0.s,{selectedRepo:tv,selectedBranch:t_,selectedCustomAgent:tb,onRepoSelect:tx,onBranchSelect:tC,onCustomAgentSelect:tS,agentSelectionEnabled:l.W.sweAgentUseSubagents,initialRepoNWO:tw}):e.extraToolbar,ek[151]=tg,ek[152]=tw,ek[153]=e.extraToolbar,ek[154]=t_,ek[155]=tb,ek[156]=tv,ek[157]=tC,ek[158]=tS,ek[159]=tx,ek[160]=ew):ew=ek[160],ek[161]!==tQ||ek[162]!==tg||ek[163]!==eZ||ek[164]!==tj||ek[165]!==tl||ek[166]!==tL||ek[167]!==tM||ek[168]!==e.customModelPicker||ek[169]!==e.modes||ek[170]!==e.onNewThreadSelected||ek[171]!==e.showPlanningToggle||ek[172]!==eL.thirdPartyMcpAllowed||ek[173]!==aa||ek[174]!==tP||ek[175]!==an||ek[176]!==af||ek[177]!==ew?(ej=(0,n.jsx)(t5,{addAttachment:tQ,currentMode:eZ,attachmentButtonRef:tq,deepCodeSearch:af,modes:e.modes,stoppable:aa,submitDisabled:tP,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eL.thirdPartyMcpAllowed,supportsAttachments:an,disabled:tj,extraToolbar:ew,showPlanningToggle:e.showPlanningToggle,chatCommand:tg,isCopilotSpace:tL,isAgentTaskSubmitInProgress:tl,isIncompleteCommand:tM,customModelPicker:e.customModelPicker}),ek[161]=tQ,ek[162]=tg,ek[163]=eZ,ek[164]=tj,ek[165]=tl,ek[166]=tL,ek[167]=tM,ek[168]=e.customModelPicker,ek[169]=e.modes,ek[170]=e.onNewThreadSelected,ek[171]=e.showPlanningToggle,ek[172]=eL.thirdPartyMcpAllowed,ek[173]=aa,ek[174]=tP,ek[175]=an,ek[176]=af,ek[177]=ew,ek[178]=ej):ej=ek[178],ek[179]!==eV||ek[180]!==ao||ek[181]!==eg||ek[182]!==ey||ek[183]!==eS||ek[184]!==ej?(eI=(0,n.jsxs)("form",{className:ao,ref:eV,...eg,children:[ey,eS,ej]}),ek[179]=eV,ek[180]=ao,ek[181]=eg,ek[182]=ey,ek[183]=eS,ek[184]=ej,ek[185]=eI):eI=ek[185],ek[186]!==ar||ek[187]!==as||ek[188]!==eI?(eN=(0,n.jsx)(ar,{commands:as,children:eI}),ek[186]=ar,ek[187]=as,ek[188]=eI,ek[189]=eN):eN=ek[189],ek[190]!==tz||ek[191]!==th||ek[192]!==tH||ek[193]!==ae||ek[194]!==e.attachmentMenuSide||ek[195]!==tG||ek[196]!==e4?(eE=(0,n.jsx)(eA,{inputRef:e4,inputOnChange:th,anchorRef:tq,panel:tz,onPanelChange:tG,initialRepo:tH,onRepoSelect:ae,side:e.attachmentMenuSide}),ek[190]=tz,ek[191]=th,ek[192]=tH,ek[193]=ae,ek[194]=e.attachmentMenuSide,ek[195]=tG,ek[196]=e4,ek[197]=eE):eE=ek[197],ek[198]!==t9||ek[199]!==tL||ek[200]!==eL.attachmentProcessingType||ek[201]!==eL.isWaitingOnAttachment||ek[202]!==an?(eT=an&&!tL&&(0,n.jsx)(tW.A,{onFilesDrop:t9,isUploading:eL.isWaitingOnAttachment&&"file-upload"===eL.attachmentProcessingType}),ek[198]=t9,ek[199]=tL,ek[200]=eL.attachmentProcessingType,ek[201]=eL.isWaitingOnAttachment,ek[202]=an,ek[203]=eT):eT=ek[203],ek[204]!==eN||ek[205]!==eE||ek[206]!==eT?(eR=(0,n.jsxs)(n.Fragment,{children:[eN,eE,eT]}),ek[204]=eN,ek[205]=eE,ek[206]=eT,ek[207]=eR):eR=ek[207],eR},t5=(0,p.memo)(e=>{let{chatCommand:t,extraToolbar:a,currentMode:r,supportsAttachments:i,submitDisabled:s,isCopilotSpace:o,isAgentTaskSubmitInProgress:c=!1,isIncompleteCommand:d}=e,u=("task"!==t||l.W.codingAgentModelSelection)&&"loop"!==t&&"spark"!==t,m=!!(e.onNewThreadSelected&&r.supportsModelSwitching&&u);return(0,n.jsxs)("div",{className:(0,f.$)(tn,{[th]:1===e.modes.length}),children:[e.modes.length>1&&(0,n.jsxs)("div",{className:tg,children:[(0,n.jsx)("div",{className:tx,children:(0,n.jsxs)(v.W,{children:[(0,n.jsx)(v.W.Button,{className:tv,leadingVisual:r.icon,variant:"invisible",trailingAction:N.TriangleDownIcon,children:r.name}),(0,n.jsx)(v.W.Overlay,{width:"auto",children:(0,n.jsx)(C.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,n.jsxs)(C.l.Item,{selected:r.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,n.jsx)(C.l.LeadingVisual,{children:t.icon}),t.name]},t.name))})})]})}),(0,n.jsx)("div",{className:t_,children:(0,n.jsx)(A.I,{className:tw,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(e=>(0,n.jsx)(A.I.Button,{className:ty,selected:e.name===r.name,children:e.name},e.name))})})]}),(0,n.jsxs)("div",{className:tp,children:[i&&(0,n.jsx)(T.Q,{ref:e.attachmentButtonRef,leadingVisual:N.PlusIcon,variant:"invisible","aria-label":o?"Add files":"Add repositories, files, and spaces",className:tc,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,n.jsx)("span",{className:(0,f.$)(td,{"sr-only":"task"===t}),children:o?"Add files":"Add repositories, files, and spaces"})}),l.W.showDeepCodeSearchButton&&(0,n.jsx)(w.N5,{commandId:"copilot-chat:deep-codesearch",icon:N.RocketIcon,variant:"invisible",tooltipDirection:"s",className:(0,f.$)({[ts]:e.deepCodeSearch})}),a,!l.W.spacesAsAttachmentsEnabled&&r.supportsSpaces&&(0,n.jsx)(b,{}),l.W.planningAgent&&!l.W.chatInputCommands&&e.showPlanningToggle&&(0,n.jsx)(tZ,{})]}),(0,n.jsxs)("div",{className:(0,f.$)(tC,{[tb]:m}),children:[m&&(e.customModelPicker||(0,n.jsx)(tX.Yb,{onNewThreadSelected:e.onNewThreadSelected,disabled:e.disabled})),(0,n.jsxs)("div",{className:tS,children:[l.W.copilotThirdPartyMcp&&r.supportsMCP&&e.thirdPartyMcpAllowed&&u&&(0,n.jsx)(tJ,{}),e.stoppable?(0,n.jsx)(t4,{}):(0,n.jsx)(t3,{disabled:s,label:r.submitLabel,isAgentTaskSubmitInProgress:c,isIncompleteCommand:d})]})]})]})});function t3(e){let t,a,i=(0,r.c)(8),{disabled:l,label:s,isAgentTaskSubmitInProgress:o,isIncompleteCommand:c}=e,d=void 0!==o&&o;i[0]!==l||i[1]!==c||i[2]!==s?(t=()=>l?c?"Complete your slash command before sending":s||"Sending a message is unavailable":s||"Send now",i[0]=l,i[1]=c,i[2]=s,i[3]=t):t=i[3];let u=t;return i[4]!==l||i[5]!==u||i[6]!==d?(a=d?(0,n.jsx)("div",{className:"d-flex flex-items-center height-full mx-2",children:(0,n.jsx)(_.A,{size:"small"})}):l?(0,n.jsx)(R.K,{variant:"invisible",size:"medium",icon:N.PaperAirplaneIcon,"aria-label":u(),inactive:!0,"aria-disabled":!0}):(0,n.jsx)(w.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:N.PaperAirplaneIcon,"aria-label":u()}),i[4]=l,i[5]=u,i[6]=d,i[7]=a):a=i[7],a}function t4(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(w.N5,{...(0,S.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:N.SquareFillIcon,tooltipDirection:"s",className:tf}),t[0]=e):e=t[0],e}t5.displayName="ChatInputToolbar";try{t2.displayName||(t2.displayName="ChatInput")}catch{}try{t3.displayName||(t3.displayName="SubmitButton")}catch{}try{t4.displayName||(t4.displayName="StopButton")}catch{}function t7(e){return"user"===e.role}function t6(e){return"attachment-types"===e?null:"attachment-types"}function t8(e){return e.type.startsWith("image/")}},39176:(e,t,a)=>{a.d(t,{k:()=>n});function n(e){return function e(t,a){let n=t[a];return n?n.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,n={},r=new Set(a);for(let e of(n[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a),n[e]||(n[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a)}for(let e in n){let t=n[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=n[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in n){let t=n[e];t&&(t.totalCount=i(e))}return n}(e),"")}},44334:(e,t,a)=>{a.d(t,{T:()=>l});var n=a(96540),r=a(10422),i=a(38621);function l(e,t,a){if(t)return{icon:i.GitMergeQueueIcon,color:"var(--fgColor-attention)","data-testid":"icon-git-merge-queue"};if("queued"===a)return{icon:i.ClockIcon,color:"var(--fgColor-attention)","data-testid":"icon-clock"};if("open"===e){if("waiting_for_user"===a||"completed"===a)return{icon:i.CheckCircleFillIcon,color:"var(--fgColor-success)","data-testid":"icon-check-circle-fill"};if("failed"===a||"timed_out"===a)return{icon:i.StopIcon,color:"var(--fgColor-danger)","data-testid":"icon-stop"};if("in_progress"===a)return{icon:()=>(0,n.createElement)(r.gX,{animated:!0}),color:"attention.fg","data-testid":"icon-spinning-circle"};if("idle"===a)return{icon:i.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-dot"};if("cancelled"===a)return{icon:i.SkipIcon,color:"var(--fgColor-muted)","data-testid":"icon-skip"}}return"merged"===e?{icon:i.GitMergeIcon,color:"var(--fgColor-done)","data-testid":"icon-git-merge"}:"closed"===e?{icon:i.GitPullRequestClosedIcon,color:"var(--fgColor-danger)","data-testid":"icon-skip"}:{icon:i.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-idle"}}},44956:(e,t,a)=>{a.d(t,{m:()=>i});var n=a(74848),r=a(21373);function i({onSave:e,onCancel:t,saveButtonText:a,isLoading:i=!1,loadingAnnouncement:l="",disabled:s=!1}){return(0,n.jsxs)("div",{className:"SpaceDialogFooter-module__footerContainer--J2LGP",children:[(0,n.jsx)(r.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,n.jsx)(r.Q,{variant:"primary",loading:i,loadingAnnouncement:l,onClick:e,disabled:s,children:a})]})}try{i.displayName||(i.displayName="SpaceDialogFooter")}catch{}},47865:(e,t,a)=>{a.d(t,{Z:()=>u,c:()=>CreateJobError});var n=a(50467),r=a(21728),i=a(97665),l=a(94747),s=a(51120),o=a(55899),c=a(93654),d=a(53419);let CreateJobError=class CreateJobError extends Error{constructor(e){let t,a;switch(e&&"object"==typeof e&&"status"in e&&"number"==typeof e.status&&(t=e.status),t){case 0:a="Network error. Please check your connection and try again.";break;case 400:a="We couldn't start the task with the information provided. Please verify your input and try again.";break;case 401:a="You don't have permission to create a pull request in this repository.";break;case 402:a="You've run out of Copilot premium quota for automated changes.";break;case 403:a="The Coding Agent isn't available for this repository or organization.";break;case 404:a="We couldn't find the repository or resource needed to create the pull request. If this is a new repository, make sure it has at least one commit.";break;case 409:a="A pull request already exists for these branches.";break;case 422:a="A repository rule blocked automatic branch or PR creation.";break;default:a="An unexpected error occurred. Please try again."}super(a,{cause:e}),(0,n._)(this,"status",void 0),this.name="CreateJobError",this.status=t}};function u(e){let t,a,n,s,d,u,h,p=(0,r.c)(18),{onError:f}=e,g=(0,i.jE)();p[0]===Symbol.for("react.memo_cache_sentinel")?(t=["createTask"],p[0]=t):t=p[0],p[1]!==g?(a=async e=>{await g.cancelQueries({queryKey:c.ZL});let t=g.getQueryData(c.ZL)??[],a=function({clientGeneratedId:e,nwo:t,problemStatement:a,baseRef:n,eventType:r,customAgent:i}){return{resource_type:"pull",resource_id:-1,resource_global_id:"",session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:r,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:a,baseRef:n,custom_agent:i}}(e);return g.setQueryData(c.ZL,[a,...t]),{previousTasks:t}},p[1]=g,p[2]=a):a=p[2],p[3]!==f||p[4]!==g?(n=(e,t)=>{let a=(g.getQueryData(c.ZL)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);g.setQueryData(c.ZL,a),f?.(e,t)},p[3]=f,p[4]=g,p[5]=n):n=p[5],p[6]!==g?(s=()=>{g.invalidateQueries({queryKey:c.ZL})},p[6]=g,p[7]=s):s=p[7],p[8]!==a||p[9]!==n||p[10]!==s?(d={mutationKey:t,onMutate:a,mutationFn:m,onError:n,onSuccess:s},p[8]=a,p[9]=n,p[10]=s,p[11]=d):d=p[11];let y=(0,l.n)(d);p[12]!==y?(u=(e,t)=>{let a=t??(0,o.u)();y.mutate({...e,clientGeneratedId:a})},p[12]=y,p[13]=u):u=p[13];let v=u;return p[14]!==v||p[15]!==y.error||p[16]!==y.isPending?(h={createTask:v,isCreating:y.isPending,createError:y.error},p[14]=v,p[15]=y.error,p[16]=y.isPending,p[17]=h):h=p[17],h}async function m(e){(0,d.BI)("copilot.agent_session.job_creation_requested",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo});let t=await h({...e,title:e.title??e.problemStatement});if(!t.ok)throw(0,d.BI)("copilot.agent_session.job_creation_failed",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo,status:t.status,error:t.statusText}),Error(`Failed to create task: ${e.clientGeneratedId}`);let a=await t.json();return(0,d.BI)("copilot.agent_session.job_creation_completed",{event_identifiers:e.clientGeneratedId,event_type:e.eventType,nwo:e.nwo,session_id:a.session_id,job_id:a.job_id}),e.clientGeneratedId}async function h({clientGeneratedId:e,nwo:t,problemStatement:a,baseRef:n,eventType:r,eventContent:i,title:l,reference:o,customAgent:c,model:d}){let u=`/agents/swe/jobs/${t}`,m=o?`On ${o}, `:"";try{return await (0,s.I)({path:u,method:"POST",body:{problem_statement:m+a,pull_request:{...n&&{base_ref:`refs/heads/${n}`},...l&&{title:l}},event_identifiers:[e],event_type:r,event_content:i,custom_agent:c,model:d?.id}})}catch(e){if(e instanceof s.Y)throw new CreateJobError(e);throw e}}},49744:(e,t,a)=>{a.d(t,{I:()=>s,t:()=>l});var n=a(74848),r=a(96540);let i=(0,r.createContext)(void 0),l=({children:e})=>{let[t,a]=(0,r.useState)(!1),l=(0,r.useMemo)(()=>({hasNewActivity:t,setHasNewActivity:a}),[t]);return(0,n.jsx)(i.Provider,{value:l,children:e})};l.displayName="ListItemNewActivityProvider";let s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useListItemNewActivity must be used with NewActivityProvider.");return e};try{i.displayName||(i.displayName="NewActivityContext")}catch{}},50205:(e,t,a)=>{a.d(t,{Dy:()=>r,O1:()=>l,QL:()=>d,eX:()=>o,n1:()=>n,os:()=>c,tD:()=>i,tp:()=>s});let n=["h1","h2","h3","h4","h5","h6"],r=["list-view","list-view-metadata","listitem"],i="h2",l={"list-view":i,"list-view-metadata":"h3",listitem:"h3"},s="default",o=!1,c=!1,d="List view"},51563:(e,t,a)=>{a.d(t,{$:()=>d});var n=a(33592),r=a(23657),i=a(72011),l=a(97665),s=a(94747),o=a(96379),c=a(31971);let d=e=>{let t=(0,n.b)(),a=(0,l.jE)(),{mutateAsync:d,...u}=(0,s.n)({onSuccess:async()=>{a.invalidateQueries({queryKey:i.O6}),e&&await a.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async a=>{let n=e?(0,r.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:a.ownerId,owner_type:a.ownerType,name:a.name,icon_type:a.iconType,icon_color:a.iconColor,description:a.description,general_instructions:a.generalInstructions,resources_attributes:a.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:a.visibility,base_role:a.baseRole}},l=await (0,o.lS)(n,{method:e?"PUT":"POST",body:i}),s=await l.json();if(!l.ok)throw s.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s}});return{upsertCopilotSpace:d,...u}}},53687:(e,t,a)=>{a.d(t,{P:()=>s,e:()=>l});var n=a(74848),r=a(96540);let i=(0,r.createContext)({multiPageSelectionAllowed:!1}),l=({children:e,multiPageSelectionAllowed:t=!1})=>{let[a,l]=(0,r.useState)(t),s=(0,r.useMemo)(()=>({multiPageSelectionAllowed:a,setMultiPageSelectionAllowed:l}),[a]);return(0,n.jsx)(i.Provider,{value:s,children:e})};l.displayName="ListViewMultiPageSelectionProvider";let s=()=>(0,r.useContext)(i);try{i.displayName||(i.displayName="MultiPageSelectionContext")}catch{}},54114:(e,t,a)=>{a.d(t,{Rw:()=>T});var n=a(74848),r=a(6665),i=a(19189),l=a(25556),s=a(34535),o=a(96459),c=a(38621),d=a(13436),u=a(46720),m=a(69726),h=a(12683),p=a(10095),f=a(96540),g=a(96379),y=a(52870);function v(e,t,a){let n=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,s=`${e}/${l}`;if(a&&a.some(e=>e.path===s))continue;let o={items:[],data:{contentType:s===r?"file":"directory",name:l,path:s,isClientOnly:!0}};n.push(o)}return n}let x="FileTreePicker-module__checkbox--uY6AK",_="FileTreePicker-module__itemContainer--ShYuv";var C=a(53419);function b(e,t){let a=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":a.clear(),a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:a.size});break;case"SELECT_FILE":a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:a.size});break;case"DESELECT_FILE":a.delete(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:a.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length})}return a}function S({isActive:e,file:t,onItemSelected:a,getItemUrl:i,selectedItemRef:o,navigate:m,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:g,navigateOnClick:y,isSelected:v,singleSelect:C}){let{sendRepoClickEvent:b}=(0,r.T)(),S=f.useRef(null),w=(0,s.Z)({focusRowRef:S,mouseRowRef:S}),j="submodule"===t.data.contentType,I=p?.(t.data);(0,f.useEffect)(()=>{e&&S.current&&requestAnimationFrame(()=>{S.current?.scrollIntoView({block:"center"})})},[e]);let N=f.useCallback(e=>{j?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),b("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,j,m,y,a,b]);return h?.(),(0,n.jsxs)(d.G.Item,{ref:S,onSelect:N,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:g?g(t.data):j?(0,n.jsx)(c.FileSubmoduleIcon,{}):(0,n.jsx)(c.FileIcon,{})}),(0,n.jsxs)("div",{className:_,children:[!C&&(0,n.jsx)(u.A,{className:x,checked:v||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,n.jsx)("span",{ref:o,style:{color:j?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,n.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),w&&(0,n.jsx)(l.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:S,"aria-label":t.data.name,open:!0,direction:"ne"}),!!I?.screenReaderText&&(0,n.jsx)("span",{className:"sr-only",children:I.screenReaderText}),!!I?.trailingVisual&&(0,n.jsx)(d.G.TrailingVisual,{children:I.trailingVisual})]})}let w=f.memo(S),j=f.memo(u.A);function I({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:i,leadingPath:o,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:h,navigate:p,onRenderRow:C,getFileTrailingVisual:b,getFileIcon:S,navigateOnClick:w,selectedChildren:I,expandedPath:N,singleSelect:E}){let[T,k]=(0,f.useState)(i),{sendRepoClickEvent:L}=(0,r.T)(),M=f.useRef(null),P=f.useRef(null),O=(0,s.Z)({focusRowRef:P,mouseRowRef:M}),F=f.useMemo(()=>I?I.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`)):[],[I,t.data.path]),D=f.useMemo(()=>I?.includes(t.data.path)??!1,[I,t.data.path]),$=t.items.length>1e3,B=f.useMemo(()=>(function(e,t,a){if(a?.selectedSelf&&a?.isLarge)return"all";if(!t||0===t.length)return"none";let n=new Set(t);if(a?.isLarge&&n.has(e.data.path))return"all";let r=e=>{let t=new Set;for(let a of e.items)if("directory"===a.data.contentType)for(let e of r(a))t.add(e);else t.add(a.data.path);return t},i=r(e),l=Array.from(i).filter(e=>n.has(e)).length;return 0===l?"none":l===i.size?"all":"partial"})(t,F,{selectedSelf:D,isLarge:$}),[t,F,D,$]),[W,U,V,q,z,G,H]=function(e,t,a){let[n,r]=f.useState(e.items),[i,l]=f.useState(e.data.totalCount||0),[s,o]=f.useState(!1),[c,d]=f.useState(!1),{safeSetTimeout:u}=(0,y.A)();f.useEffect(()=>{r(e.items)},[e.items]),f.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let m=f.useCallback(()=>{d(!1)},[]),h=f.useCallback((e,t)=>{let a=e||[...n];r(a.slice(0,100)),u(()=>{r(a),void 0!==t&&l(t)},1)},[n,u]);return[f.useCallback(async n=>{let i=new Map;if(e.data.isClientOnly){if(n){let a=v(e.data.path,n);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?h(a,a.length):(r(a),l(a.length))}}else{let s=a(e.data);d(!1),o(!0);let c=Date.now(),u=await (0,g.lS)(`${s}?noancestors=1`);try{if(u.ok){let a=await u.json(),s=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,n){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=a.name.slice(0,a.name.lastIndexOf("/")),i=r.indexOf("/")>-1,l={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:r,hasSimplifiedPath:i},s={items:[t],data:l};return(n.set(l.path,s),i)?e(s,{...l},n):s}(t,e,i):t});if(n){let t=e.data.path,r=v(t,n,a.payload.tree.items);for(let e of(s.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=a.payload.tree.totalCount,s.length>100?h(s,a.payload.tree.totalCount):(r(s),l(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}o(!1)},[a,e,t,h]),h,n,s,c,m,i]}(t,()=>{},m),K=o?`${o}/`:"",Q=H-V.length;(0,f.useEffect)(()=>{a&&M.current&&requestAnimationFrame(()=>{M.current?.scrollIntoView({block:"center"})})},[a]);let J=f.useCallback(e=>{!e||T||q||z||!(t.items.length>100)||U(),e!==T&&k(e)},[T,q,z,t.items.length,U]),X=f.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&w?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(E?J(!T):(c?.(t.data,t),L("FILES_TREE.ITEM",{item_path:t.data.path}),w&&p(u?.(t.data)||"")),e.stopPropagation())},[t,u,T,p,w,c,J,L,E]);f.useEffect(()=>{i&&!T&&J?.(!0)},[i]),f.useEffect(()=>{0===t.items.length&&T?J?.(!1):!T&&t.autoExpand&&J?.(!0)},[t.items.length]);let Y=f.useCallback(e=>{h&&a&&h(e),M.current=e},[h,a]);if(1===t.items.length){let r=t.items[0];if(r&&"directory"===r.data.contentType)return(0,n.jsx)(A,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:K+t.data.name,inheritsActive:a,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:w,navigateOnClick:w,getFileTrailingVisual:b,getFileIcon:S,selectedChildren:F,expandedPath:N,singleSelect:E})}return C?.(),(0,n.jsxs)(d.G.Item,{ref:P,expanded:T,onExpandedChange:J,current:a,onSelect:X,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(d.G.DirectoryIcon,{})}),(0,n.jsxs)("div",{className:_,children:[!E&&(0,n.jsx)(j,{className:x,checked:"all"===B,indeterminate:"partial"===B,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===B?"true":void 0}),(0,n.jsxs)("span",{ref:Y,children:[K&&(0,n.jsx)("span",{children:K}),(0,n.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),O&&(0,n.jsx)(l.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:P,"aria-label":`${K}${t.data.name}`,open:!0,direction:"ne"}),(0,n.jsx)(d.G.SubTree,{state:q?"loading":z?"error":"done",children:z?(0,n.jsx)(d.G.ErrorDialog,{onRetry:W,onDismiss:G,children:"There was an error loading the folder contents."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{clientOnlyFilePaths:e,directoryItems:V,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:w,navigateOnClick:w,getFileTrailingVisual:b,getFileIcon:S,selectedChildren:F,expandedPath:N,singleSelect:E}),Q>0&&(0,n.jsx)(R,{message:`${Q} entries not shown`})]})})]})}let N=f.memo(I,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function E({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:r,onItemSelected:l,selectedItemRef:s,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:h,navigateOnClick:p,selectedChildren:g,expandedPath:y,singleSelect:v}){let x=(0,i.Z)(),_=(0,o.Z)(),C=f.useRef(_),b=f.useRef(l);f.useEffect(()=>{b.current=l,C.current=_},[l,_]);let S=f.useCallback((e,t)=>{b.current?.(e,t)},[]),j=f.useMemo(()=>t.map(t=>{let i=y===t.data.path,l=g?.includes(t.data.path),o=i||y.startsWith(`${t.data.path}/`),f=g?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`))||[];return"directory"===t.data.contentType?(0,n.jsx)(N,{clientOnlyFilePaths:e,isActive:r||i,isAncestorOfActive:o,onItemSelected:S,leadingPath:a,directory:t,getItemUrl:d,getFetchUrl:x.getItemUrl,selectedItemRef:o?s:void 0,navigate:_,onRenderRow:c,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:l,selectedChildren:f,expandedPath:y,singleSelect:v},t.data.name):(0,n.jsx)(w,{onItemSelected:S,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?s:void 0,navigate:_,navigateOnClick:p,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:l,singleSelect:v},t.data.name)}),[t,y,g,S,d,s,_,p,c,u,m,v,e,r,a,x.getItemUrl,h]);return(0,n.jsx)(n.Fragment,{children:j})}let A=f.memo(E);function T(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:r,loading:i,onRenderRow:l,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,onSelectionChange:p}=e,[g,y]=(0,f.useReducer)(b,new Set),v=e.selectedItems||g,x=(0,f.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of x(a))t.add(e);return Array.from(t)},[]),_=(0,f.useCallback)((t,a)=>{var n;let r=(n=!!e.singleSelect,n?{type:"SINGLE_SELECT_FILE",path:t}:a?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});p?p(b(v,r)):y(r)},[p,e.singleSelect,v]),C=(0,f.useCallback)((t,a)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,a=v.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};p?p(b(v,a)):y(a);return}let n=x(t),r=a?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};p?p(b(v,r)):y(r)},[x,p,v,e.allowFolderReferences]),S=(0,f.useCallback)((t,a)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&a.items.length>1e3)return void C(a,v.has(t.path));let n=x(a),r=n.filter(e=>v.has(e)),i=r.length>0,l=n.length===r.length;i&&!l?C(a,!0):C(a,l)}else _(t.path,v.has(t.path))},[x,C,_,v,e.allowFolderReferences]),w=(0,f.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,n.jsx)(h.az,{onMouseDown:w,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:"FileTreePicker-module__Box--RKQKr",children:i?(0,n.jsxs)("div",{className:"FileTreePicker-module__Box_1--usRNW",children:[(0,n.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,n.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,n.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,n.jsxs)(d.G,{"aria-label":"Files",children:[r&&(0,n.jsx)(R,{message:"Some files could not be loaded."}),(0,n.jsx)(A,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:S,selectedChildren:v?Array.from(v):[],selectedItemRef:e.selectedItemRef,onRenderRow:l,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function R({message:e}){return(0,n.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(p.A,{icon:c.AlertFillIcon,className:"FileTreePicker-module__Octicon--rINlU"})}),(0,n.jsx)("div",{className:"FileTreePicker-module__Box_2--yFodr",children:e||"Couldn't load."})]})}try{S.displayName||(S.displayName="WrappedFileTreeRow")}catch{}try{w.displayName||(w.displayName="FileTreeRow")}catch{}try{j.displayName||(j.displayName="MemoizedCheckbox")}catch{}try{I.displayName||(I.displayName="WrappedDirectoryTreeRow")}catch{}try{N.displayName||(N.displayName="DirectoryTreeRow")}catch{}try{E.displayName||(E.displayName="WrappedDirectoryContents")}catch{}try{A.displayName||(A.displayName="DirectoryContents")}catch{}try{T.displayName||(T.displayName="FileTreePicker")}catch{}try{R.displayName||(R.displayName="ErrorTreeRow")}catch{}},55899:(e,t,a)=>{a.d(t,{u:()=>n});function n(){return crypto.randomUUID()}},56708:(e,t,a)=>{a.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},56825:(e,t,a)=>{a.d(t,{m:()=>l});var n=a(96540),r=a(50205),i=a(61015);function l(e){let{titleHeaderTag:t,hasMetadataTitle:a}=(0,i.t)();return(0,n.useMemo)(()=>{let n=r.Dy.findIndex(t=>t===e),i=r.n1.indexOf(t)+(a?n:n-1);return i>r.n1.length-1?"h6":r.n1[i]||r.O1[e]},[t,a,e])}},57448:(e,t,a)=>{a.d(t,{Ld:()=>m,Tz:()=>p,W5:()=>d,cx:()=>u,vn:()=>h});var n=a(51987),r=a(97665),i=a(97286),l=a(94747),s=a(96379),o=a(96540),c=a(79064);a(2635),a(33592);let d={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},u=256,m=400;function h(e){var t,a;let n,s,c=(0,r.jE)(),u=(0,o.useCallback)(()=>Promise.resolve(c.invalidateQueries({queryKey:["repo-indexing-state",e]})),[c,e]),m=(0,i.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>f(e),placeholderData:{requestStatus:"unknown",code:d.Unknown,docs:d.Unknown},staleTime:1/0}),{mutate:h}=(0,l.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>g([e]),onSuccess:u}),p=m.data;return t=()=>void u(),a=1e4*(p.code===d.Indexing&&"indexing_error"!==p.requestStatus),n=(0,o.useRef)(void 0),s=(0,o.useRef)(t),(0,o.useEffect)(()=>{s.current=t},[t]),(0,o.useEffect)(()=>{if(a>0)return n.current=window.setInterval(()=>s.current(),a),()=>window.clearInterval(n.current)},[a]),[p,()=>h()]}function p(){let e=c.Jt.getPanelHeight(),t=c.Jt.getPanelWidth(),a=(0,o.useRef)(null),n=(0,o.useRef)(e),r=(0,o.useRef)(e),i=(0,o.useRef)(null),l=(0,o.useRef)(t),s=(0,o.useRef)(t),[d,h]=(0,o.useState)(e),[p,f]=(0,o.useState)(t),g=(0,o.useRef)(0);(0,o.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,u),window.innerHeight-g.current),v=e=>Math.min(Math.max(e,m),window.innerWidth-2*g.current),x=(0,o.useCallback)(e=>{if(null!==a.current){let t=a.current-e.clientY,i=y(n.current+t);h(i),r.current=i}if(null!==i.current){let t=i.current-e.clientX,a=v(l.current+t);f(a),s.current=a}},[]),_=(0,o.useCallback)(()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",_),null!==a.current&&(c.Jt.setPanelHeight(r.current),a.current=null),null!==i.current&&(c.Jt.setPanelWidth(s.current),i.current=null)},[x]),C=(0,o.useCallback)((e,t,r)=>{0===e.button&&(e.preventDefault(),r&&(a.current=e.clientY,n.current=d),t&&(i.current=e.clientX,l.current=p),window.addEventListener("mousemove",x),window.addEventListener("mouseup",_))},[d,p,x,_]),b=(0,o.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(d+4);h(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(d-4);h(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=v(p-4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=v(p+4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}},[d,p]);return{panelWidth:p,panelHeight:d,startResize:C,onResizerKeyDown:b}}async function f(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,n.kt)()}});if(!t.ok)return{requestStatus:"request_failed",code:d.Unknown,docs:d.Unknown};let a=await t.json();return{requestStatus:a.can_index,code:a.code_status,docs:a.docs_status}}async function g(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,s.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}},58612:(e,t,a)=>{a.d(t,{N:()=>s});var n=a(21728),r=a(40235),i=a(97286),l=a(70263);function s(e){let t,a,s,c=(0,n.c)(6),{onEvent:d,enableCreateEvents:u,enableUpdateEvents:m,enableLogUpdates:h,enabled:p}=e,f=(0,l.A)();c[0]!==f||c[1]!==d?(t=e=>{f()&&d(e)},c[0]=f,c[1]=d,c[2]=t):t=c[2];let g=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(a=["agent-session-alive-channels"],c[3]=a):a=c[3];let y=p??!1;c[4]!==y?(s={queryKey:a,queryFn:o,staleTime:1/0,enabled:y},c[4]=y,c[5]=s):s=c[5];let{data:v}=(0,i.I)(s);(0,r.x)(void 0===u||u?v?.viewerCopilotAgentCreatesChannel:void 0,g),(0,r.x)(void 0===m||m?v?.viewerCopilotAgentUpdatesChannel:void 0,g),(0,r.x)(void 0!==h&&h?v?.viewerCopilotAgentLogUpdatesChannel:void 0,g)}async function o(){let e=await fetch("/copilot/agent-sessions/alive-channels",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch Alive channels");let t=await e.json();return{viewerCopilotAgentCreatesChannel:t.creates_channel,viewerCopilotAgentUpdatesChannel:t.updates_channel,viewerCopilotAgentLogUpdatesChannel:t.log_updates_channel}}},59788:(e,t,a)=>{a.d(t,{Q:()=>el});var n=a(74848),r=a(26108),i=a(15220),l=a(46251),s=a(86877),o=a(21373),c=a(72511),d=a(38621),u=a(96540),m=a(97564),h=a(54030),p=a(39176),f=a(54114),g=a(71363),y=a(78314),v=a(31078),x=a(53552),_=a(64375),C=a(29731),b=a(6665),S=a(19189),w=a(7808),j=a(64642),I=a(65787),N=a(25407),E=a(66108),A=a(94195),T=a(96459),R=a(11683),k=a(45800),L=a(31604),M=a(12683),P=a(10095),O=a(91385),F=a(70170),D=a(37272),$=a(71315),B=a(34164);let W=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:a,ariaHasPopup:r,className:i,onBlur:l,onFocus:s,onKeyDown:o,onPreload:c,onSearch:m,query:h,searchPlaceholder:p,loading:f,sx:g},y)=>{let{sendRepoClickEvent:v}=(0,b.T)(),[x,_]=u.useState(h),C=u.useRef((0,F.s)(e=>m(e),250));u.useEffect(()=>{_(h)},[h]);let S=h?(0,n.jsx)(M.ks.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,n.jsx)(M.ks,{autoFocus:U(),className:(0,B.$)("d-flex",i),ref:y,value:x,onKeyDown:o,onChange:e=>{_(e.target.value),c(),C.current(e.target.value)},sx:g,"aria-label":p||"Go to file","aria-activedescendant":e,role:r?"combobox":void 0,"aria-controls":t,"aria-expanded":a,"aria-haspopup":r?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",loading:""!==h&&f,leadingVisual:d.SearchIcon,trailingAction:S,trailingVisual:S?void 0:()=>(0,n.jsx)(D.E,{children:(0,n.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),s?.(e)},onBlur:l,onClick:()=>v("FILE_TREE.SEARCH_BOX")})});function U(){return"1"===new URLSearchParams($.fV.search).get("search")}W.displayName="FilesSearchBox";let V={excludeDirectories:!1,excludeSeeAllResults:!1};function q({actionListSx:e,additionalResults:t,className:a,commitOid:r,config:i=V,findFileWorkerPath:l,getItemUrl:s,onRenderRow:o,onItemSelected:d,searchBoxRef:m,sx:p}){var f;let g,{excludeDirectories:_,excludeSeeAllResults:C}=i,{query:E,setQuery:P}=(0,v.JS)(),O=(0,y.t)(),F=u.useRef(null),D=m??F,[$,B]=u.useState(E.length>0),[q,z]=u.useState(!!E),{list:G,directories:H,loading:Q,error:J}=(0,h.o)(r,$,!!_),{path:X}=(0,x.eu)(),{getUrl:Y}=(0,S.Z)(),{queryText:Z,queryLine:ee}=(g=(f=(f=E).replaceAll(" ","")).indexOf(":"))>=0?{queryText:f.substring(0,g),queryLine:parseInt(f.substring(g+1),10)}:{queryText:f,queryLine:void 0},{matches:et,clearMatches:ea}=function(e,t,a,n){let[r,i]=u.useState(),l=u.useRef(""),s=u.useRef(null),{sendStats:o}=(0,b.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new w.z(a,j.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),l.current=e.query,e.startTime&&o("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[o,a]);return u.useEffect(()=>{if(n)return d(),function(){s.current?.terminate()}},[d,n]),u.useEffect(()=>{if(e.length&&t){c.current&&(s.current?.terminate(),d());let a=l.current&&t.startsWith(l.current);c.current=!0,s.current?.postMessage({baseList:a&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...G,...t??[]].sort(),[t,G]),Z,l,$),{sendRepoClickEvent:en}=(0,b.T)(),er=(0,T.Z)(),[ei,el]=u.useState(0),[es,eo]=u.useState(()=>U()),ec=u.useRef(null),ed=u.useRef(null),eu="file-results-list",{sendRepoKeyDownEvent:em}=(0,b.T)(),{screenSize:eh}=(0,A.lm)(),ep=i.enableOverlay??eh>=A.Gy.large,ef=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),z(!1)},[en,d]),eg=(e,t,a)=>s?s(e,t,a):Y({path:e,action:t?"tree":"blob",hash:a}),{containerRef:ey}=(0,k.G)({bindKeys:R.z0.ArrowVertical|R.z0.HomeAndEnd,focusInStrategy:"previous"},[Q,J]);u.useEffect(()=>{E||z(!1)},[E]),u.useEffect(()=>{document.activeElement!==D.current&&ep&&z(!1)},[X,D,ep]);let ev=et?.slice(0,20)||[],ex=et&&et.length>ev.length,e_=!i.disableNavigation,eC=ed.current?.getBoundingClientRect().width,eb=(0,n.jsx)(M.az,{sx:{maxHeight:ep?"180px":"100% !important",width:ep?eC:"100%"},className:"FileResultsList-module__Box--cUmDY",children:J?(0,n.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,n.jsxs)(M.lF,{ref:ey,sx:{p:ep?2:3,pr:3*!!ep,pt:ep?3:"2px !important",...e},role:"listbox",className:"FileResultsList-module__ActionList--kDNEZ",children:[!Q&&ev.map((e,t)=>{let a=H.includes(e),r=eg(e,a,ee?`L${ee}`:"");return(0,n.jsx)(K,{active:!1,index:t,focused:es&&ei===t,match:e,onRender:o,query:Z,onClick:ef,isDirectory:a,to:r,useOverlay:ep,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ev.length&&(0,n.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.az,{className:a,ref:ed,sx:p,children:(0,n.jsx)(W,{ariaActiveDescendant:(!ep&&E||ep&&q)&&es&&ei>-1?ex&&ei===ev.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:ep?q:void 0,ariaHasPopup:ep,ariaControls:ep?eu:void 0,ref:D,loading:Q,query:E,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:n,altKey:r,ctrlKey:i}=e;if(!a&&!n&&!r){if("Escape"===t)E?(em("FILE_TREE.CANCEL_SEARCH"),P(""),ea()):document.activeElement&&document.activeElement.blur();else if(!E)return;else if("Enter"===t){if(!C&&ex&&ei===ev.length)e_&&er((0,N.Y8Y)({owner:O.ownerLogin,repo:O.name,searchTerm:`path:${Z}`})),d?.();else if(ev[ei]){let e=ev[ei];e_&&er(eg(ev[ei],!1,ee?`L${ee}`:"")),z(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!C&&ex&&ei>=ev.length-1){if(el(ev.length),ec.current&&ey.current){let e=(0,I.U)(ey.current);(0,R.Rt)(ec.current,e,{behavior:"instant"})}}else el(Math.min(ei+1,ev.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){el(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>B(!0),onSearch:e=>{P(e),e?z(!0):(ea(),z(!1)),el(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(z(!1),eo(!1))},onFocus:()=>{E&&z(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:"FileResultsList-module__FilesSearchBox--KW9Zl"})}),ep&&ev.length>0&&(0,n.jsx)(L.T,{anchorRef:ed,open:ep&&q,renderAnchor:null,onClose:()=>{z(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:eu,role:"dialog"},children:eb}),!ep&&E&&eb]})}let z=({active:e,focused:t,index:a,match:r,query:i,to:l,isDirectory:s,onClick:o,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,O.Xq)(i,r);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,I.U)(m.current);(0,R.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${a}`,active:e,onSelect:(0,u.useCallback)(()=>{o?.(r)},[r,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},v=(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,n.jsx)(Q,{text:r,positionsList:p,LeadingIcon:s?G:H,className:"FileResultsList-module__HighlightMatch--Jy_cG"})})});return h?(0,n.jsx)(M.lF.Item,{...y,children:v},r):(0,n.jsx)(M.lF.LinkItem,{...y,ref:f,as:E.N,to:l,children:v},r)},G=()=>(0,n.jsx)(P.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:"FileResultsList-module__Octicon--PvMf4"}),H=()=>(0,n.jsx)(P.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),K=u.memo(z);function Q({className:e,text:t,positionsList:a,sx:r,LeadingIcon:i}){let l=[],s=0;for(let e of a){if(Number(e)!==e||e<s||e>t.length)continue;let a=t.slice(s,e);a&&l.push(J(a)),s=e+1,l.push((0,n.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return l.push(J(t.slice(s))),(0,n.jsx)(M.az,{className:e,sx:r,children:(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(i,{}),l]})})}function J(e){return e.replaceAll("/","/\u200B")}try{q.displayName||(q.displayName="FileResultsList")}catch{}try{z.displayName||(z.displayName="FileResultRow")}catch{}try{G.displayName||(G.displayName="DirectoryIcon")}catch{}try{H.displayName||(H.displayName="FileResultIcon")}catch{}try{K.displayName||(K.displayName="MemoizedFileResultRow")}catch{}try{Q.displayName||(Q.displayName="HighlightMatch")}catch{}var X=a(53419);let Y=new Set(Object.values(a(23967).r4).flatMap(e=>e.extensions??[])),Z=new Set([".png",".jpg",".jpeg",".gif",".bmp",".svg",".webp",".ico",".tiff",".tif"]);function ee(e,t,a){return{id:`${a.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,filePath:e,sha:a.defaultBranch,type:t}}function et(e,t,a,n,r,i){let l=Array.from(e).filter(e=>t.has(e)),s=Array.from(e).filter(e=>!t.has(e));if(!i)return s.map(e=>ee(e,"github_file",a));let o=[],c=new Set;for(let e of l){if(l.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=s.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){o.push(ee(e,"github_folder",a));continue}if(i&&t.length>=r)for(let n of(o.push(ee(e,"github_folder",a)),t))c.add(n);else for(let e of t)o.push(ee(e,"github_file",a)),c.add(e)}let d=s.filter(e=>!c.has(e));if(n&&i){let e=new Map;for(let t of d){let a=t.lastIndexOf("/"),n=a>0?t.substring(0,a):"";e.has(n)||e.set(n,[]),e.get(n)?.push(t)}for(let[t,n]of e)if(""===t)for(let e of n)o.push(ee(e,"github_file",a));else o.push(ee(t,"github_folder",a))}else for(let e of d)o.push(ee(e,"github_file",a));return o}function ea(e,t=30){return e.length<=t?e:`...${e.slice(-t)}`}function en({files:e,error:t}){if(0===e.length)return null;if(1===e.length&&e[0])return(0,n.jsxs)(n.Fragment,{children:[t?"This file can't be submitted: ":"This file was filtered out: "," ",(0,n.jsx)("strong",{children:ea(e[0])}),". Only supported file types are allowed."]});let a=e.slice(0,3),r=e.length-3;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:t?"These files can't be submitted: ":"These files were filtered out: "}),a.map((e,t)=>(0,n.jsxs)("span",{children:[t>0&&(0,n.jsx)("span",{children:", "}),(0,n.jsx)("strong",{children:ea(e)})]},e)),r>0&&(0,n.jsxs)("span",{children:[", and ",r," more"]}),(0,n.jsx)("span",{children:". Only supported file types are allowed."})]})}function er({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:r,expandedPath:i,resourceCounts:l,allowFolderReferences:s,maxFileCount:o,onRejectionMessage:c,onDisplayCountChange:d,onFilteredFilesChange:m}){let[g,y]=(0,u.useState)(()=>new Set),[v,x]=(0,u.useState)(()=>new Set),_=o??50,{list:C,directories:b,loading:S}=(0,h.o)(e.commitOID,!0),[w,j]=(0,u.useState)([]);(0,u.useEffect)(()=>{j((0,p.k)({paths:C,directories:b})),x(new Set(b))},[C,b,j,e.commitOID]),(0,u.useEffect)(()=>{let a=Array.from(g).filter(e=>!v.has(e)),n=Array.from(g).filter(e=>v.has(e));r?.(a.length);let i=!1;if(s&&a.length>0){let e=n.map(e=>`${e}/`),t=a.filter(t=>!e.some(e=>t.startsWith(e))),r=t.some(e=>e.includes("/"));i=t.length>_&&r}let l=et(g,v,e,i,_,s??!1);t(l),d&&d(l.length)},[g,v,e,t,r,d,s,_]);let I=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),N=(0,u.useCallback)(t=>{let a=Array.from(t).filter(e=>!g.has(e)),n=[],r=[];for(let e of a){let t=v.has(e);!function(e,t){if(t)return!0;let a=e.lastIndexOf("."),n=e.lastIndexOf("/");if(-1===a||a<n)return!0;let r=e.substring(a).toLowerCase();return Y.has(r)&&!Z.has(r)}(e,t)?n.push(e):r.push(e)}let i=new Set;for(let e of g)t.has(e)&&i.add(e);for(let e of r)i.add(e);if(n.length>0?m?.(n):i.size<=g.size&&m?.([]),i.size<=g.size){y(i),c?.(null);return}if(!s){let e=Array.from(i).filter(e=>!v.has(e)),t=l?l.maxResourceCount-l.currentResourceCount:_;if(e.length>t){let t=l?`${l.currentResourceCount+e.length} / ${l.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${_} files can be added at a time.`;c?.(t),y(i);return}c?.(null),y(i);return}let o=Array.from(i).filter(e=>!v.has(e)),d=Array.from(i).filter(e=>v.has(e)).map(e=>`${e}/`),u=o.filter(e=>!d.some(t=>e.startsWith(t))),h=u.some(e=>e.includes("/"));et(i,v,e,u.length>_&&h,_,s).length,y(i)},[g,_,v,s,c,e,l,m]);return(0,n.jsx)("div",{className:"MultiFilePicker-module__Box--gINxM",children:(0,n.jsx)(f.Rw,{rootItems:w,expandedPath:i,selectedItemRef:()=>{},setRootItems:j,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:g,onSelectionChange:N,loading:S||!1,fetchError:!!a,getItemUrl:I,allowFolderReferences:!!s,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ei({onClose:e}){return(0,n.jsx)(r.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function el({formData:e,onCancel:t,onSaveFiles:a,findFileWorkerPath:h,attachmentButtonRef:p,owner:f,resourceCounts:b,initialRepo:S,onRepoSelect:w,hideBackButton:j=!1,allowFolderReferences:I=!1,maxFileCount:N=50}){let[E,A]=(0,u.useState)({}),[T,R]=(0,u.useState)(null),[k,L]=(0,u.useState)(S||null),[M,P]=(0,u.useState)(!0),[O,F]=(0,u.useState)(e),[D,$]=(0,u.useState)(!1),[B,W]=(0,u.useState)(null),[U,V]=(0,u.useState)(""),[z,G]=(0,u.useState)(null),[H,K]=(0,u.useState)(0),[Q,J]=(0,u.useState)(0),[Y,Z]=(0,u.useState)([]),ee=(0,u.useRef)(!1),et=async e=>{let t;if(ee.current=!0,E[e]){L(t=E[e]),w?.(t);return}try{t=await (0,m.V)(e),A(a=>({...a,[e]:t})),L(t),w?.(t),P(!1)}catch(e){R(e instanceof Error?e.message:"An unknown error occurred")}ee.current=!1},ea=()=>{w?.(null),L(null),F([]),P(!0)},el=void 0!==b,es=(el?Q:H)>(el?b.maxResourceCount-b.currentResourceCount:N),eo=async()=>{$(!0);try{if(es)return;(0,X.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await a(O)}catch(t){let e={errorMessage:"An unknown error occurred",filePaths:[]};t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(t.base.startsWith("unsupported_file_type")&&"files"in t?e.filePaths=t.files:t.base.startsWith("The size of the space exceeds the current limit")?e.errorMessage="The size of the space exceeds the current limit":e.errorMessage=t.base),W(e)}finally{$(!1)}};(0,u.useEffect)(()=>{W(null)},[O]);let ec=es?el?`${b.currentResourceCount+Q} / ${b.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${N} items can be added at a time.`:z,ed=es||!!z;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.X,{selectionVariant:"instant",open:!k&&M,onOpenChange:e=>{ee.current||(P(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(F([]),(0,X.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await et(e))},cancelReturnFocusRef:p,submitReturnFocusRef:p,error:T??void 0,ownerDisplayLogin:f,includeForks:!0}),k&&(0,n.jsx)(i.l,{onClose:t,title:`Add files from ${k.ownerLogin}/${k.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,n.jsxs)(i.l.Header,{children:[(0,n.jsx)("div",{className:"MultiFilePicker-module__dialogHeader--CApsB",children:(0,n.jsx)(i.l.Title,{id:t,children:(0,n.jsxs)(l.B,{align:"center",direction:"horizontal",gap:"none",children:[!j&&(0,n.jsx)(l.B.Item,{children:(0,n.jsx)(r.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:ea,variant:"invisible"})}),(0,n.jsxs)(l.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",k.ownerLogin,"/",k.name]}),(0,n.jsx)(l.B.Item,{children:(0,n.jsx)(ei,{onClose:()=>e("close-button")})})]})})}),(0,n.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(v.Ck,{children:(0,n.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(_.$,{allShortcutsEnabled:!1,children:(0,n.jsx)(q,{commitOid:k.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&V(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,n.jsx)(i.l.Footer,{children:(0,n.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,n.jsx)("div",{className:"d-flex flex-items-center",children:ec&&(0,n.jsx)(s.A.Validation,{variant:"error",children:ec})}),(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,n.jsx)(o.Q,{onClick:t,children:"Cancel"}),(0,n.jsx)(o.Q,{...(0,C.G)("save-resource-button"),variant:"primary",onClick:eo,count:D?void 0:(el?Q:H)||void 0,loading:D,disabled:ed,children:"Add"})]})]})}),renderBody:()=>(0,n.jsxs)("div",{className:"d-flex flex-column",children:[T&&(0,n.jsx)("span",{children:T}),B&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"danger",children:B.filePaths.length>0?(0,n.jsx)(en,{files:B.filePaths,error:!0}):(0,n.jsx)("span",{children:B.errorMessage})})}),Y.length>0&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"warning",children:(0,n.jsx)(en,{files:Y})})}),(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(v.Ck,{children:(0,n.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(er,{expandedPath:U,currentRepo:k,localFormData:O,setLocalFormData:F,onFileCountChange:J,onDisplayCountChange:K,fetchError:T,resourceCounts:b,allowFolderReferences:I,maxFileCount:N,onRejectionMessage:G,onFilteredFilesChange:Z})})})})]}),className:"MultiFilePicker-module__Dialog--ls9MF"})]})}try{en.displayName||(en.displayName="FilteredFilesWarning")}catch{}try{er.displayName||(er.displayName="FilePickerForm")}catch{}try{ei.displayName||(ei.displayName="CloseButton")}catch{}try{el.displayName||(el.displayName="MultiFilePicker")}catch{}},60257:(e,t,a)=>{a.d(t,{W:()=>c,r:()=>d});var n=a(74848),r=a(4559),i=a(73189),l=a(96540),s=a(74501);let o=(0,l.createContext)({isSelected:!1,onSelect:i.l}),c=({children:e,value:{isSelected:t,onSelect:a}})=>{let{title:i}=(0,s.J)(),c=(0,l.useMemo)(()=>({isSelected:t,onSelect:e=>{(0,r.i)(e?`Selected. ${i}.`:`Unselected. ${i}.`),a(e)}}),[t,a,i]);return(0,n.jsx)(o.Provider,{value:c,children:e})};c.displayName="ListItemSelectionProvider";let d=()=>(0,l.useContext)(o);try{o.displayName||(o.displayName="SelectionContext")}catch{}},60284:(e,t,a)=>{a.d(t,{Q:()=>w});var n=a(74848),r=a(36038),i=a(60777),l=a(33592),s=a(61180),o=a(96540),c=a(38621),d=a(69599),u=a(61526),m=a(84078),h=a(94011),p=a(30459),f=a(47723);let g="MemberRequestBanner-module__requestBanner--O88Xw",y=o.memo(v);function v({repo:e,onRepoUpdate:t}){let[a,r]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),{sendClickAnalyticsEvent:s}=(0,p.S)(),c=e.owner,d=(0,o.useCallback)(e=>{s({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_new_task_banner;`})},[s]),u=(0,o.useCallback)(async()=>{if(c&&!a){r(!0),l(null);try{await (0,h.Rp)(c),await t(),d("request")}catch(e){l(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}}},[c,a,d,t]),y=(0,o.useCallback)(async()=>{if(c&&!a){r(!0),l(null);try{await (0,h.Hy)(c),await t()}catch(e){l(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}}},[c,a,t]),v=(0,o.useCallback)(async()=>{if(c&&!a){r(!0),l(null);try{await (0,h.pf)(c),await t(),d("org_enable")}catch(e){l(e instanceof Error?e.message:"An error occurred")}finally{r(!1)}}},[c,a,d,t]),x="",_="",C=()=>{};if(e.userCanRequestCca)x="Copilot coding agent access is disabled by your enterprise.",_=a?"Requesting...":"Request access",C=u;else if(e.userCanGrantEnterpriseCca)x="Copilot coding agent access is disabled.",_="See Copilot policies",C=()=>{d("enterprise_enable");let t=e.businessSlug||c;window.location.href=(0,f.Wt)(t)};else if(e.userCanGrantOrgCca)x="Copilot coding agent access is disabled.",_=a?"Enabling...":"Enable feature",C=v;else{if(!e.userHasRequestedCca)return null;x="Copilot coding agent access is disabled by your enterprise.",_=a?"Removing...":"Remove request",C=y}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.l,{className:g,variant:"warning",title:"Coding Agent Disabled",hideTitle:!0,description:x,primaryAction:(0,n.jsx)(m.l.PrimaryAction,{onClick:C,disabled:a,children:_})}),i&&(0,n.jsx)("div",{"aria-live":"assertive",children:(0,n.jsx)(m.l,{variant:"critical",title:"Error",hideTitle:!0,description:i,className:g})})]})}try{y.displayName||(y.displayName="MemberRequestBanner")}catch{}try{v.displayName||(v.displayName="MemberRequestBannerUnmemoized")}catch{}var x=a(73678),_=a(72259),C=a(25641),b=a(35247);function S({referenceRepo:e,reference:t}){return t.range?(0,C.XN)(t.path,t.range,e):(0,C.Od)(t.path,e)}function w({handleUserSubmit:e,initialRepo:t,initialReference:a,hideRepoSelector:m,isInPortal:h,textAreaRef:p,size:f="large"}){let g=(0,l.b)(),{models:v}=(0,_.h)(),w=(0,o.useRef)(void 0);(0,o.useEffect)(()=>{if(b.W.codingAgentModelSelection){let e=localStorage.getItem("AGENT_TASKS_SELECTED_MODEL");e&&(w.current=e)}},[]);let[j,I]=(0,s.T)(),[N,E]=(0,o.useState)(null),[A,T]=(0,o.useState)(!1),R=(0,d.G7)("swe_agent_member_requests_agent_panel"),[k,L]=(0,o.useState)(null),[M,P]=(0,o.useState)(""),[O,F]=(0,o.useState)(null),[D,$]=(0,o.useState)(a||null),[B]=(0,u.ok)(),W=B.get("branch"),U=(0,d.G7)("copilot_swe_agent_use_subagents"),V=t&&Object.keys(t).length>0,q=B.get("repo"),z="";V?z=`${t.ownerLogin}/${t.name}`:q?z=q:j&&(z=`${j.ownerLogin}/${j.name}`);let G=(0,o.useCallback)(async t=>{let a=k&&D?(0,C.z$)(S({referenceRepo:k,reference:D})):void 0;if(N?.id!=null){let e=await g.service.fetchRepo(N.id);e.ok&&e.payload&&I(e.payload)}let n=w.current;return e(t,N,M,O||"",a,n?v?.find(e=>e.id===n):v?.find(e=>e.is_chat_default)??v?.[0])},[e,N,M,O,D,k,g.service,I,v]),H=(0,o.useCallback)(e=>{e&&(E(e),P(e.defaultBranch||""),T(!e.enabled&&R))},[R]);return(0,o.useEffect)(()=>{t?.id!=null&&(async()=>{let e=await g.service.fetchRepo(t.id);e.payload&&L(e.payload)})()},[t,g]),(0,o.useEffect)(()=>{m&&z&&(async()=>{try{let e=(await (0,i.P)(z)).find(e=>e.nameWithOwner===z);if(e&&e.enabled){E(e),P(W??e.defaultBranch),T(!1);return}e&&R&&T(!0)}catch{}})()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.V,{modes:[{name:"Agent",icon:(0,n.jsx)(c.AgentIcon,{}),submitLabel:"Start task",placeholder:"Describe a coding task to work on",textAreaAriaLabel:"Coding task prompt",supportsAttachments:!1,supportsReferenceAttachments:!1,supportsModelSwitching:b.W.codingAgentModelSelection}],size:f,onSubmit:G,initialReference:k&&D?S({reference:D,referenceRepo:k}):void 0,extraToolbar:(0,n.jsx)(i.s,{hideRepoSelector:m,initialRepoNWO:z,initialBranch:W||void 0,selectedRepo:N||void 0,selectedBranch:M,selectedCustomAgent:O||void 0,onRepoSelect:H,onBranchSelect:e=>P(e||""),onCustomAgentSelect:e=>F(e||null),agentSelectionEnabled:U&&!A}),submitDisabled:!N||A,disableSavedUserMessage:!0,onRemoveReference:()=>{$(null)},isInPortal:h,textAreaRef:p,onNewThreadSelected:async()=>{},customModelPicker:b.W.codingAgentModelSelection?(0,n.jsx)(x.Y,{onUpdateModel:e=>{w.current=e}}):void 0}),A&&N&&R&&(0,n.jsx)(y,{repo:N,onRepoUpdate:async()=>{let e=N.nameWithOwner,t=(await (0,i.P)(e)).find(t=>t.nameWithOwner===e);t&&(E(t),T(!t.enabled&&R))}})]})}try{w.displayName||(w.displayName="NewTaskChatInput")}catch{}},60905:(e,t,a)=>{a.d(t,{s:()=>CopilotImageAttacher});var n=a(50467),r=a(53419),i=a(25641),l=a(35247),s=a(76166),o=a(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[a,n]=e.reduce(([e,a],n)=>this.isTypeAllowed(n.type,t)?[[...e,n],a]:[e,[...a,n]],[[],[]]);return[a,n]}static getAttachmentLimit(){return l.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let a=crypto.randomUUID(),n=new o.N(a,e,t);return{id:a,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown"){if(0===e.length)return[];if(l.W.previewFeaturesVisionGate&&this.state.hasCEorCBAccess&&!this.state.optedInToPreviewFeatures)return this.manager.addAmbientError("Please enable preview features to upload images"),(0,s.d)("preview_features_not_enabled"),[];let a=this.state.currentReferences.filter(e=>"image"===e.type).length,n=CopilotImageAttacher.getAttachmentLimit();if(a+e.length>n){let e=l.W.attachMultipleImages?`You can add up to ${n} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,s.d)("file_limit_reached"),[]}let o=[],c=[];for(let a of e){if(!CopilotImageAttacher.isTypeAllowed(a.type,this.state.model))return(0,s.d)("included_unsupported_file",{fileTypes:a.type,uploadType:t}),[];if(a.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,s.d)("size_limit_exceeded",{size:a.size}),[];let e=CopilotImageAttacher.makeImageReference(a,this.state.selectedThreadID);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,s.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let n=(0,i.Vc)(a.name);this.manager.addReference(n,"image-attacher"),0===c.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),c.push({file:a,placeholder:n,reference:e})}try{c.forEach(({file:e,placeholder:a,reference:n})=>{try{this.manager.setImageAttachmentUploaded(n.id,n.attachment),this.manager.replaceReference(a,n),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),o.push(n)}catch(n){this.manager.removeReference(a);let t="An unexpected error occurred while reading the file";if("string"==typeof n)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,s.d)("ErrorString",{message:n}),Error(n);if(n instanceof Error)if((0,s.d)(n.name,{message:n.message}),"GenericServerError"===n.name&&n.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),n;else throw this.manager.addAmbientError(t),n}})}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}return o}constructor(e,t){(0,n._)(this,"state",void 0),(0,n._)(this,"manager",void 0),this.state=e,this.manager=t}}},61015:(e,t,a)=>{a.d(t,{t:()=>o,y:()=>s});var n=a(74848),r=a(96540),i=a(50205);let l=(0,r.createContext)(void 0),s=({children:e,title:t,titleHeaderTag:a=i.tD})=>{let[s,o]=(0,r.useState)(!1),c=(0,r.useMemo)(()=>({title:t.trim()||i.QL,titleHeaderTag:a,hasMetadataTitle:s,setHasMetadataTitle:o}),[s,t,a]);return(0,n.jsx)(l.Provider,{value:c,children:e})};s.displayName="ListViewTitleProvider";let o=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useListViewTitle must be used with TitleProvider.");return e};try{l.displayName||(l.displayName="TitleContext")}catch{}},61180:(e,t,a)=>{a.d(t,{T:()=>l});var n=a(21728),r=a(96540),i=a(79064);function l(){let e,t,a=(0,n.c)(3),[l,o]=(0,r.useState)(s);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{o(e),e&&i.Jt.setLastUsedRepository(e)},a[0]=e):e=a[0];let c=e;return a[1]!==l?(t=[l,c],a[1]=l,a[2]=t):t=a[2],t}function s(){return i.Jt.getLastUsedRepository()}},62189:(e,t,a)=>{a.d(t,{U:()=>n});let n=(e,t)=>{if(!e)return"";let a=`/copilot/tasks/pull/${encodeURIComponent(e)}`;return t&&(a+=`?session_id=${encodeURIComponent(t)}`),a}},62227:(e,t,a)=>{a.d(t,{A:()=>n});let n={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},64846:(e,t,a)=>{a.d(t,{Q:()=>i});var n=a(82075),r=a(96540);function i(e){let t=(0,n.D)("localStorage");return{value:(0,r.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:a=>{t.setItem(e,a)},removeItem:()=>{t.removeItem(e)}}}},69093:(e,t,a)=>{a.d(t,{j:()=>s});var n=a(21728),r=a(38621),i=a(47789),l=a(35247);function s(e){let t,a,s,m=(0,n.c)(8),{enabled:h}=e,p=(0,i.qw)();if(m[0]!==h||m[1]!==p){e:{let e=[];if(!h){t=e;break e}for(let t of p)t.slashCommand&&e.push({key:t.slashCommand.key,name:t.slashCommand.name,description:t.slashCommand.description,icon:t.slashCommand.icon,isNew:t.slashCommand.isNew,order:t.slashCommand.order,suggestions:t.slashCommand.suggestions,enabled:t.slashCommand.enabled,disabledAction:t.slashCommand.disabledAction,execute:async(e,a,n)=>await t.slashCommand.execute(e,a,n)});l.W.planningAgent&&e.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:r.TasklistIcon,order:1,suggestions:[],execute:u}),e.push({key:"create-issue",name:"Create issue",description:"Create a GitHub issue from your conversation",icon:r.IssueDraftIcon,suggestions:["First, create a new draft issue. Then ask for additional information to fill out the issue.","First, create an issue with sub issues. Then ask for additional information to fill out these issues."],execute:d}),t=e.sort(c)}m[0]=h,m[1]=p,m[2]=t}else t=m[2];let f=t;return m[3]!==f?(a=f.map(o),m[3]=f,m[4]=a):a=m[4],m[5]!==f||m[6]!==a?(s={availableCommands:f,availableCommandKeys:a},m[5]=f,m[6]=a,m[7]=s):s=m[7],s}function o(e){return e.key}function c(e,t){return void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name)}function d(){return!1}function u(e,t,a,n){return n.setUsePlanningIntent(!0),!1}},71363:(e,t,a)=>{a.d(t,{F:()=>S,X:()=>I});var n=a(74848),r=a(21728),i=a(70170),l=a(69599),s=a(53419),o=a(33544),c=a(29731),d=a(5524),u=a(70119),m=a(34164),h=a(96540),p=a(40961),f=a(26408),g=a(25641),y=a(2635),v=a(33592);let x=e=>{let t,a,i,l=(0,r.c)(6),{children:s,delay:o,assertive:c}=e,d=void 0===o?500:o,[u,m]=(0,h.useState)(!1);if(l[0]!==d?(t=()=>{m(!1);let e=setTimeout(()=>m(!0),d);return()=>clearTimeout(e)},a=[d,m],l[0]=d,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,h.useEffect)(t,a),!u)return null;let p=void 0!==c&&c?"assertive":"polite";return l[3]!==s||l[4]!==p?(i=(0,n.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:s}),l[3]=s,l[4]=p,l[5]=i):i=l[5],i};try{x.displayName||(x.displayName="DelayedComponent")}catch{}var _=a(35673);let C="RepoSelectPanel-module__ActionList--ud9yE";var b=a(27844);function S(e){let t,a,i,l,s=(0,r.c)(12),{currentReferences:o}=(0,y.Pk)(),c=(0,v.b)();s[0]!==o?(a=new Set((t=o.filter(j)).map(w)),s[0]=o,s[1]=t,s[2]=a):(t=s[1],a=s[2]);let d=a,[u,m]=(0,h.useState)();s[3]!==c||s[4]!==e||s[5]!==t?(i=async a=>{m(void 0);let n=t.find(e=>e.id===a);if(n)return void c.removeReference(n);let r=await c.service.fetchRepo(a);if(!r.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}e.onRepoSelect?.(r.payload);let i=(0,g.qS)(r.payload);c.addReference(i,"repoMenu")},s[3]=c,s[4]=e,s[5]=t,s[6]=i):i=s[6];let p=i;return s[7]!==u||s[8]!==e||s[9]!==d||s[10]!==p?(l=(0,n.jsx)(I,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),s[7]=u,s[8]=e,s[9]=d,s[10]=p,s[11]=l):l=s[11],l}function w(e){return e.id}function j(e){return"repository"===e.type}function I(e){let t,a,g,v,S,w,j,I,A,T,R,k,L,M,P,O,F,D,$,B,W=(0,r.c)(53),{open:U,onOpenChange:V,submitReturnFocusRef:q,cancelReturnFocusRef:z,selectedRepoIds:G,featuredRepoIds:H,onSelectRepo:K,selectionVariant:Q,description:J,error:X,ownerDisplayLogin:Y,includeForks:Z,anchorRef:ee}=e,et=void 0===H?G:H,{ssoOrganizations:ea}=(0,y.Pk)(),[en,er]=(0,h.useState)("");W[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.s)(e=>er(e),150,{start:!1}),W[0]=t):t=W[0];let ei=t;W[1]!==U?(a=()=>{U||er("")},g=[U],W[1]=U,W[2]=a,W[3]=g):(a=W[2],g=W[3]),(0,h.useEffect)(a,g);let{repositories:el,loading:es}=(0,f.U)(en,U,void 0,Y,void 0!==Z&&Z);e:{if(es){v="Loading repositories";break e}if(0===el.length){v="No repositories found";break e}if(1===el.length){v="1 repository found";break e}v=`${el.length} repositories found`}let eo=v;W[4]===Symbol.for("react.memo_cache_sentinel")?(S=e=>{ei(e.currentTarget.value)},W[4]=S):S=W[4];let ec=S;t:{let e;if(!ea){let e;W[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],W[5]=e):e=W[5],w=e;break t}W[6]!==ea?(e=ea.map(E),W[6]=ea,W[7]=e):e=W[7],w=e}let ed=w;W[8]!==et?(j=e=>et.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",W[8]=et,W[9]=j):j=W[9];let{featuredRepos:eu,nonFeaturedRepos:em}=function(e,t){let a={};for(let n of e){let e=t(n);a[e]??(a[e]=[]),a[e].push(n)}return a}(el,j),[eh,ep]=(0,h.useState)(!1);W[10]!==K?(I=async e=>{ep(!0),await K(e),ep(!1)},W[10]=K,W[11]=I):I=W[11];let ef=I;W[12]===Symbol.for("react.memo_cache_sentinel")?(A=(0,c.G)("repo-select-panel"),W[12]=A):A=W[12];let eg=u.X,ey=ee&&"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm";W[13]!==ey?(T=(0,m.$)(ey),W[13]=ey,W[14]=T):T=W[14],W[15]!==z||W[16]!==V?(R=()=>{(0,p.flushSync)(()=>V(!1)),z.current?.focus(),(0,s.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},W[15]=z,W[16]=V,W[17]=R):R=W[17],W[18]!==V||W[19]!==q?(k=()=>{(0,p.flushSync)(()=>V(!1)),q.current?.focus()},W[18]=V,W[19]=q,W[20]=k):k=W[20];let ev=ee?"anchored":"modal",ex="multiple"===Q?"Select repositories":"Select a repository",e_=ed.length>0&&"border-bottom-0";W[21]!==e_?(L=(0,m.$)(e_),W[21]=e_,W[22]=L):L=W[22];let eC=!0===es||eh;W[23]!==eC?(M=(0,n.jsx)(u.X.SearchInput,{loading:eC,onChange:ec,placeholder:"Search repositories","aria-label":"Search repositories"}),W[23]=eC,W[24]=M):M=W[24],W[25]!==L||W[26]!==M?(P=(0,n.jsx)(u.X.Header,{className:L,children:M}),W[25]=L,W[26]=M,W[27]=P):P=W[27],W[28]!==Y||W[29]!==ed?(O=(void 0===Y||""===Y)&&!(0,l.G7)("global_sso_banner")&&(0,n.jsx)(o.x,{portalContainerName:_.f1,protectedOrgs:ed,redirectURI:N,useFullWidthStyle:!0}),W[28]=Y,W[29]=ed,W[30]=O):O=W[30],W[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,n.jsx)(_.hl,{}),W[31]=F):F=W[31],W[32]!==X?(D=X&&(0,n.jsx)(u.X.Message,{variant:"error",size:"inline",children:X}),W[32]=X,W[33]=D):D=W[33];let eb="initial"===es?(0,n.jsxs)("div",{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),(0,n.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==el.length||es?(0,n.jsxs)(d.l,{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),eu?.map(e=>(0,n.jsx)(b.W,{repo:e,onSelect:ef,selected:G.has(e.databaseId)},e.databaseId)),eu&&em&&(0,n.jsx)(d.l.Divider,{}),em?.map(e=>(0,n.jsx)(b.W,{repo:e,onSelect:ef,selected:G.has(e.databaseId)},e.databaseId))]}):(0,n.jsxs)("div",{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),(0,n.jsx)("div",{className:"RepoSelectPanel-module__emptyStateMessage--qQwDm",children:(0,n.jsx)(x,{delay:750,children:(0,n.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return W[34]!==eg||W[35]!==ee||W[36]!==J||W[37]!==U||W[38]!==Q||W[39]!==T||W[40]!==R||W[41]!==k||W[42]!==ev||W[43]!==ex||W[44]!==P||W[45]!==O||W[46]!==F||W[47]!==D||W[48]!==eb?($=(0,n.jsxs)(eg,{className:T,width:"large",maxHeight:"xlarge",onCancel:R,onSubmit:k,open:U,variant:ev,selectionVariant:Q,title:ex,description:J,anchorRef:ee,children:[P,O,F,D,eb]}),W[34]=eg,W[35]=ee,W[36]=J,W[37]=U,W[38]=Q,W[39]=T,W[40]=R,W[41]=k,W[42]=ev,W[43]=ex,W[44]=P,W[45]=O,W[46]=F,W[47]=D,W[48]=eb,W[49]=$):$=W[49],W[50]!==A||W[51]!==$?(B=(0,n.jsx)("div",{...A,children:$}),W[50]=A,W[51]=$,W[52]=B):B=W[52],B}function N(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function E(e){return e.login}try{S.displayName||(S.displayName="RepoReferencesSelectPanel")}catch{}try{I.displayName||(I.displayName="RepoSelectPanel")}catch{}},72011:(e,t,a)=>{a.d(t,{A2:()=>p,Bj:()=>g,CT:()=>u,Ku:()=>o,Lr:()=>m,O6:()=>s,X_:()=>c,dp:()=>d,ee:()=>h,vC:()=>f});var n=a(25641),r=a(23657),i=a(96379);let l="/github-copilot/chat",s=["copilot-chat","custom-copilots"],o=["copilot-chat","custom-copilots","count"];function c(e){return["copilot-chat","custom-copilots",e]}function d(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function u(e){let t=e?`${l}/custom_copilots?type=${e}`:`${l}/custom_copilots`,a=await (0,i.lS)(t);if(!a.ok)throw Error(`Failed to fetch spaces: ${n.nN[a.status]||n.DW}`);return await a.json()}async function m(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:a}=e,r=`${l}/custom_copilots/${t}/${a}`,s=await (0,i.lS)(r);if(!s.ok)return{status:s.status,ok:!1,error:n.nN[s.status]||n.DW};let o=await s.json();return{status:s.status,ok:!0,payload:o}}async function h(e){let t=await (0,i.lS)((0,r.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function p(e){let t=await (0,i.lS)(`${(0,r.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}async function f(e){let t=await (0,i.lS)(`${(0,r.fn)(e)}/menu_actions`);if(!t.ok)throw Error("Error fetching menu actions");try{let e=await t.json();return{visibility:e.visibility??"private",shareable:e.shareable??!1,editable:e.editable??!1,adminable:e.adminable??!1,baseRole:e.baseRole??"none",public:e.public??!1}}catch(e){throw Error(`Error parsing menu actions: ${e}`)}}async function g(){let e=await (0,i.lS)(`${l}/custom_copilots/count`);if(!e.ok)throw Error(`Failed to fetch spaces count: ${n.nN[e.status]||n.DW}`);return e.json()}},72439:(e,t,a)=>{a.d(t,{E:()=>CopilotTextAttacher,x:()=>s});var n=a(50467),r=a(53419),i=a(25641),l=a(23967);let s="application/x.clipboard",o=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(l.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),a=0,n=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);0===t?a++:t>127&&n++}let r=a/t,i=n/t;return r<=.1&&i<=.2}async makeReference(e,t){let a=await e.text(),n=e.name||(t?await t:await this.generateFileName(a,e.type));return this.makeReferenceSync(a,n)}makeReferenceSync(e,t){let a=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:a,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,a){let n;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let r=await e.text();if(!CopilotTextAttacher.isPlainText(r))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(a)n=this.makeReferenceSync(r,a),this.manager.addReference(n,"text-attacher");else{let a=(0,i.Vc)(e.name);this.manager.addReference(a,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{n=await this.makeReference(e,t),this.manager.replaceReference(a,n)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(a)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return n}async generateFileName(e,t){let a=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",n=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${a}

File contents:
\`\`\`
${e}
\`\`\`
`),i=n.ok?o.exec(n.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),a=t>0&&t<e.length-1,n=a?e.substring(0,t):e,r=a?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${n}${i}${r}`);)i++;return`${n}${i}${r}`}defaultFileName(e){return e===s?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,n._)(this,"manager",void 0),(0,n._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,n._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},74501:(e,t,a)=>{a.d(t,{J:()=>s,y:()=>l});var n=a(74848),r=a(96540);let i=(0,r.createContext)(void 0),l=({children:e})=>{let[t,a]=(0,r.useState)(""),[l,s]=(0,r.useState)(null),o=(0,r.useRef)(null);(0,r.useEffect)(()=>{o?.current?.textContent&&a(o.current.textContent.trim())},[o,a]);let c=(0,r.useMemo)(()=>({title:t,titleAction:l,setTitleAction:s,headingRef:o}),[t,l]);return(0,n.jsx)(i.Provider,{value:c,children:e})};l.displayName="ListItemTitleProvider";let s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useListItemTitle must be used with TitleProvider.");return e};try{i.displayName||(i.displayName="TitleContext")}catch{}},75986:(e,t,a)=>{a.d(t,{If:()=>s,JE:()=>l});var n=a(74848),r=a(96540);let i=(0,r.createContext)(void 0),l=({children:e})=>{let t=(0,r.useId)(),a=(0,r.useMemo)(()=>({idPrefix:t}),[t]);return(0,n.jsx)(i.Provider,{value:a,children:e})};l.displayName="ListViewIdProvider";let s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useListViewId must be used with IdProvider.");return e};try{i.displayName||(i.displayName="IdContext")}catch{}},76166:(e,t,a)=>{a.d(t,{d:()=>r});var n=a(53419);function r(e,t){(0,n.BI)("dotcom_chat.vision.error",{type:e,...t})}},76872:(e,t,a)=>{a.d(t,{D:()=>_});var n=a(74848),r=a(23657),i=a(44956),l=a(84646),s=a(51563),o=a(53419),c=a(20263),d=a(96459),u=a(59394),m=a(15220),h=a(84078),p=a(46251),f=a(86877),g=a(99511),y=a(96540),v=a(79064),x=a(6236);function _({dialogTitle:e="New Space",closeDialog:t,initialSpace:a,onSubmit:_,returnFocusRef:C}){let b=(0,d.Z)(),S=(0,y.useRef)(null),w=(0,l.AV)(),[j,I]=(0,y.useState)(a?.name??w),[N,E]=(0,y.useState)(null),[A,T]=(0,y.useState)({}),[R,k]=(0,y.useState)(!1),{upsertCopilotSpace:L,isPending:M}=(0,s.$)(),P=(0,u.S)(),O=(0,y.useCallback)(e=>{k(!1);let t={...A};for(let a of e)t[a]&&delete t[a];T(t)},[A]),F=(0,y.useCallback)(e=>E(e),[]);(0,y.useEffect)(()=>{(0,o.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,y.useEffect)(()=>{S.current?.focus()},[A.name,A.slug]),(0,y.useEffect)(()=>{a?S.current?.focus():S.current?.select()},[a]);let D=async()=>{if(M)return;let e=a?.resources?[...a.resources]:[],i=[];if(a&&N){let t=function(e,t){let a=[],n=[];if("Organization"!==t.type||t.allowsPrivateReposFromOtherOrgs)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let r of e)"ownerId"in r&&"private"in r&&r.private&&r.ownerId!==t.id?n.push(r):a.push(r);return{resourcesToSave:a,resourcesThatWillNotTransfer:n}}(a.resources||[],N);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let l=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;l=await P({title:"Some resources will not be duplicated",content:(0,n.jsx)(c.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(l)try{let n=await L({name:j,ownerId:N?.id,ownerType:N?.type,resources:e,generalInstructions:a?.generalInstructions});T({}),k(!1),t(),_?.(),v.Jt.setLastSelectedSpace(n);let i=(0,r.Cb)(n);return b(i)}catch(e){e&&"object"==typeof e&&Object.keys(e).length>0?(k(!1),T(e)):(T({}),k(!0))}},$=()=>{t(),setTimeout(()=>C?.current?.focus(),0)};return(0,n.jsx)(m.l,{position:{narrow:"fullscreen"},title:e,onClose:$,width:"large","aria-label":e,className:"CreateSpaceDialog-module__createSpaceDialog--YECfV",renderFooter:()=>(0,n.jsx)(i.m,{onCancel:$,onSave:D,isLoading:M,disabled:!N,saveButtonText:"Create Space"}),children:(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await D()},children:[R&&(0,n.jsx)(h.l,{className:"mb-3",variant:"critical",title:"Error saving space",hideTitle:!0,description:"Something went wrong while saving."}),(0,n.jsxs)(p.B,{children:[(0,n.jsxs)(f.A,{children:[(0,n.jsx)(f.A.Label,{required:!0,children:"Space name"}),(0,n.jsx)(g.A,{ref:S,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:j,onChange:e=>{I(e.target.value),O(["name","slug"])}}),(0,n.jsx)(f.A.Caption,{children:"Choose a name that describes your project or use case"}),A.name?(0,n.jsx)(f.A.Validation,{variant:"error",children:(0,n.jsxs)("span",{children:["Name ",A.name]})}):A.slug?(0,n.jsx)(f.A.Validation,{variant:"error",children:(0,n.jsx)("span",{children:r.j0})}):null]}),(0,n.jsx)(x.E,{onSelect:F})]})]})})}try{_.displayName||(_.displayName="CreateSpaceDialog")}catch{}},76977:(e,t,a)=>{a.d(t,{_:()=>d});var n=a(21728),r=a(96540),i=a(2635),l=a(34295),s=a(69599),o=a(65411);let c="PROTECTED_ORGS";function d(){let e,t,a,d,m=(0,n.c)(7),{ssoOrganizations:h}=(0,i.Pk)();m[0]!==h?(e=(h??[]).map(u).sort(),m[0]=h,m[1]=e):e=m[1];let p=e;m[2]!==p?(t=JSON.stringify(p),m[2]=p,m[3]=t):t=m[3];let f=t;m[4]!==f?(a=()=>{let e=sessionStorage.getItem(c);null===e?sessionStorage.setItem(c,f):f===e||(((0,s.G7)("mission_control_use_capi_token_provider")?new o.JR([]):new l.l).removeLocalStorageAuthToken(),sessionStorage.setItem(c,f))},d=[f],m[4]=f,m[5]=a,m[6]=d):(a=m[5],d=m[6]),(0,r.useEffect)(a,d)}function u(e){return e.login}},77177:(e,t,a)=>{a.d(t,{L:()=>s,O:()=>l});var n=a(74848),r=a(96540);let i=(0,r.createContext)(void 0),l=({children:e})=>{let[t,a]=(0,r.useState)(""),l=(0,r.useMemo)(()=>({description:t,setDescription:a}),[t]);return(0,n.jsx)(i.Provider,{value:l,children:e})};l.displayName="ListItemDescriptionProvider";let s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useListItemDescription must be used with DescriptionProvider.");return e};try{i.displayName||(i.displayName="DescriptionContext")}catch{}},79216:(e,t,a)=>{a.d(t,{Q:()=>l});let n=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,r=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},l={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,a,n,r,...l]=t.pathname.split("/"),s=l.join("/"),o=i.fromUrlType(r);if(a&&n&&o)return{repo:`${a}/${n}`,type:s?o:"repository",id:s}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=n.exec(e)?.groups;if(!t){let t=r.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let a=i.fromMentionType(t.type);return a?{repo:t.repo,type:a,id:t.id}:void 0},isEqual:(e,t)=>l.stringify(e)===l.stringify(t),refersTo(e,t){let a=l.for(t);return null!==a&&l.isEqual(e,a)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},80293:(e,t,a)=>{a.d(t,{N:()=>r});var n=a(96540);function r(e,{isPropUpdateDisabled:t=!1,isEqual:a=Object.is}={}){let[i,l]=(0,n.useState)(e),[s,o]=(0,n.useState)(e),c=e instanceof Function?e():e;return t||a(s,c)||(o(c),l(c)),[i,l]}},81829:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(74848),r=a(21728),i=a(71315),l=a(69726),s=a(96540);function o(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,a,i,l,s,o,c,d,u,m,h,p,f,g,y,v,x=(0,r.c)(17);return x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),a=(0,n.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),x[0]=t,x[1]=a,x[2]=i):(t=x[0],a=x[1],i=x[2]),x[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),s=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),o=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),x[3]=l,x[4]=s,x[5]=o,x[6]=c):(l=x[3],s=x[4],o=x[5],c=x[6]),x[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,n.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),x[7]=d,x[8]=u,x[9]=m,x[10]=h):(d=x[7],u=x[8],m=x[9],h=x[10]),x[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),x[11]=p):p=x[11],x[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),x[12]=f):f=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),x[13]=g):g=x[13],x[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,n.jsxs)("defs",{children:[f,g,(0,n.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),x[14]=y):y=x[14],x[15]!==e?(v=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,a,i,l,s,o,c,u,m,h,d,p,y]}),x[15]=e,x[16]=v):v=x[16],v};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u="FullScreenDragOverlay-module__text--oftCM";function m(e){let t,a,m,h=(0,r.c)(9),{onFilesDrop:p,isUploading:f}=e,g=void 0!==f&&f;h[0]!==g||h[1]!==p?(t=e=>{g||p(e)},h[0]=g,h[1]=p,h[2]=t):t=h[2];let y=t;h[3]!==y?(a={onFilesDrop:y,targetElement:i.XC},h[3]=y,h[4]=a):a=h[4];let{isDragging:v}=function(e){let t,a,n,i=(0,r.c)(6),{onFilesDrop:l,targetElement:d}=e,[u,m]=(0,s.useState)(!1),h=(0,s.useRef)(0);return i[0]!==l||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},a=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&l(t)};return d.addEventListener("dragover",o),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",a),()=>{d.removeEventListener("dragover",o),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",a)}},a=[l,d],i[0]=l,i[1]=d,i[2]=t,i[3]=a):(t=i[2],a=i[3]),(0,s.useEffect)(t,a),i[4]!==u?(n={isDragging:u},i[4]=u,i[5]=n):n=i[5],n}(a),x=null;if(g){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{size:"large"}),(0,n.jsx)("p",{className:u,children:"Uploading files..."})]}),h[5]=e):e=h[5],x=e}else if(v){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{}),(0,n.jsx)("p",{className:u,children:"Drop files to upload"})]}),h[6]=e):e=h[6],x=e}return x?(h[7]!==x?(m=(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__overlay--Q9gow",children:(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__centeredContent--iAFMy",children:x})}),h[7]=x,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},82595:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(74848),r=a(21728),i=a(34164),l=a(49851),s=a(38621);let o={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(o).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,a,d,u,m,h,p=(0,r.c)(19),{icon:f,hasBackground:g,color:y,size:v,className:x}=e,_=void 0!==g&&g,C=void 0===y?"gray":y,b=void 0===v?16:v;if("string"==typeof f)if(f in l.OZ)t=l.OZ[f];else{var S;let e,a;p[0]!==f?(S=f,e=(a=`${S.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`)in s?s[a]:void 0,p[0]=f,p[1]=e):e=p[1],t=e}else t=f;if(!t)return null;p[2]!==C?(a=c.has(C),p[2]=C,p[3]=a):a=p[3];let w=a,j=`${_?2*b:b}px`;p[4]!==C||p[5]!==w||p[6]!==j?(d={"--custom-size":j},w||(d["--custom-color"]=C),p[4]=C,p[5]=w,p[6]=j,p[7]=d):d=p[7];let I=w?o[C]:o.customColor,N=_&&o.hasBackground;return p[8]!==x||p[9]!==I||p[10]!==N?(u=(0,i.$)(o.container,I,N,x),p[8]=x,p[9]=I,p[10]=N,p[11]=u):u=p[11],p[12]!==t||p[13]!==b?(m=(0,n.jsx)(t,{size:b,fill:"currentColor"}),p[12]=t,p[13]=b,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,n.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},84331:(e,t,a)=>{function n(e,t,a=.1){let r=l(e,t,a);return r&&-1===t.indexOf("/")&&(r+=l(e.substring(e.lastIndexOf("/")+1),t,a)),r}function r(e,t,a){if(t){let n=e.innerHTML.trim().match(a||function(e){let t=e.toLowerCase().split(""),a="",n=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");n?(a+=`(.*)(${t})`,n=!1):a+=`([^${t}]*?)(${t})`}return RegExp(`${a}(.*?)$`,"i")}(t));if(!n)return;let r=!1,i=[];for(let e=1;e<n.length;++e){let t=n[e];t&&(e%2==0?r||(i.push("<mark>"),r=!0):r&&(i.push("</mark>"),r=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),a=t.replace(/<\/?mark>/g,"");t!==a&&(e.innerHTML=a)}}a.d(t,{He:()=>r,UD:()=>s,dt:()=>n});let i=new Set([" ","-","_"]);function l(e,t,a=.1){let n=e;if(n===t)return 1;let r=n.length,s=0,o=0,c=!0;for(let e of t){let t=n.indexOf(e.toLowerCase()),l=n.indexOf(e.toUpperCase()),d=Math.min(t,l),u=d>-1?d:Math.max(t,l);if(-1===u)return 0;s+=.1,n[u]===e&&(s+=.1),0===u&&(s+=.9-a,c&&(o=1)),i.has(n.charAt(u-1))&&(s+=.9-a),n=n.substring(u+1,r),c=!1}let d=t.length,u=s/d,m=(d/r*u+u)/2;return o&&m+a<1&&(m+=a),m}function s(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}},84646:(e,t,a)=>{a.d(t,{$7:()=>p,$W:()=>j,AV:()=>w,Ao:()=>v,BV:()=>S,OW:()=>CopilotSpaceSSOError,Tx:()=>x,a5:()=>C,e9:()=>f,i9:()=>CopilotSpaceNotFoundError,jS:()=>y,yV:()=>_,yk:()=>b});var n=a(50467),r=a(97665),i=a(94747),l=a(97286),s=a(72011),o=a(33592),c=a(96540),d=a(2635),u=a(71315),m=a(23657),h=a(69599);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,n._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function p(){let e=(0,r.jE)(),t=(0,o.b)();return(0,i.n)({mutationFn:async e=>{let a=await (0,s.ee)(e);if(!a.ok)throw Error(a.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:a.status,ok:!0,payload:a.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:s.O6})}})}function f(e){let t=(0,o.b)(),a=(0,h.G7)("copilot_spaces_split_index_calls"),n=y(e&&!a,{throwOnError:!1});(0,c.useEffect)(()=>{!a&&n.data&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n.data})},[n.data,t,a])}function g(e,t,a={}){return(0,l.I)({queryKey:(0,s.X_)(e),queryFn:()=>(0,s.CT)(e),enabled:t,staleTime:3e5,throwOnError:a.throwOnError})}function y(e,t={}){return(0,l.I)({queryKey:s.O6,queryFn:()=>(0,s.CT)(),enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function v(e){return(0,l.I)({queryKey:(0,s.dp)(e),queryFn:async()=>{let t=await (0,s.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function x(e,t){return(0,l.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,s.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function _(e,t){return(0,l.I)({queryKey:["menu-actions",e,t],queryFn:async()=>(0,s.vC)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function C(e){return(0,l.I)({queryKey:s.Ku,queryFn:s.Bj,enabled:e,staleTime:3e5})}function b(e){let{data:t,isLoading:a}=g("starred",e),{data:n,isLoading:r}=g("user_owned",e),{data:i,isLoading:l}=g("org_owned",e),{data:s,isLoading:o}=g("shared_with_user",e);return{categorizedSpaces:(0,c.useMemo)(()=>({starred:t,userOwned:n,orgOwned:i,sharedWithUser:s}),[t,n,i,s]),categorizedLoading:(0,c.useMemo)(()=>({starred:a,userOwned:r,orgOwned:l,sharedWithUser:o}),[a,r,l,o])}}function S(){return(0,d.A3)("customCopilotsEnabled")}function w(){let e,t=(e=(0,d.A3)("customCopilots"),e?.length??0);return(0,c.useMemo)(()=>`New Space ${t+1}`,[t])}function j(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,a=u.cg?.location.origin;if(!a)return;let n=(0,m.Cb)(e),r=`${a}${n}`,i=`content_url=${encodeURIComponent(r)}&report=${t}+(user)`;return`${a}/contact/report-content?${i}`},[e])}},91230:(e,t,a)=>{a.d(t,{E7:()=>D});var n=a(74848),r=a(96540);let i=(0,r.createContext)({actions:[],staticMenuActions:[],label:"Actions",gap:0}),l=({children:e,value:{actions:t=[],staticMenuActions:a,variant:l="toolbar",label:s,gap:o}})=>{let c=(0,r.useMemo)(()=>({actions:t,staticMenuActions:a,variant:l,label:s,gap:o}),[t,a,l,s,o]);return(0,n.jsx)(i.Provider,{value:c,children:e})},s=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useActionBarContent must be used with ActionBarContentProvider.");return e};try{i.displayName||(i.displayName="ActionBarContentContext")}catch{}try{l.displayName||(l.displayName="ActionBarContentProvider")}catch{}let o=(0,r.createContext)({outerContainerRef:(0,r.createRef)(),itemContainerRef:(0,r.createRef)()}),c=({value:{anchorRef:e},children:t})=>{let a=(0,r.useRef)(null),i=(0,r.useRef)(null),l=(0,r.useMemo)(()=>({outerContainerRef:a,itemContainerRef:i,anchorRef:e}),[e]);return(0,n.jsx)(o.Provider,{value:l,children:t})},d=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useActionBarRef must be used with ActionBarRefProvider.");return e};try{o.displayName||(o.displayName="ActionBarRefContext")}catch{}try{c.displayName||(c.displayName="ActionBarRefProvider")}catch{}var u=a(73189),m=a(80293),h=a(50463),p=a(93330);let f=(e,t)=>{let a=2*(e=>{if(!e)return 0;let t=window.getComputedStyle(e);return t?.columnGap?parseInt(t.columnGap,10):0})(t),n=e.getBoundingClientRect().width,r=window.getComputedStyle(e);return n+(r?.marginLeft?parseInt(r.marginLeft,10):0)+(r?.marginRight?parseInt(r.marginRight,10):0)+a},g=(e,t)=>{let a=y(e,t);if(void 0===a)return;let n=a;return t&&(n-=t.offsetLeft),n},y=(e,t)=>{if(!e)return;let a=e.offsetWidth;return t&&(a-=t.offsetWidth),a},v=(0,r.createContext)({visibleChildEndIndex:0,justifySpaceBetween:!1,recalculateItemSize:u.l}),x=({children:e,value:{actionKeys:t}})=>{let a=t.length,[i,l]=(0,m.N)(a),{outerContainerRef:s,itemContainerRef:o}=d(),[c,u]=(0,r.useState)(),[x,_]=(0,r.useState)(),[C,b]=(0,r.useState)(new Map(t.map(e=>[e,void 0]))),[S,w]=(0,r.useState)(!1),j=(0,r.useMemo)(()=>t.slice(0,i).every(e=>C.has(e)&&"number"==typeof C.get(e)),[t,C,i]),I=(0,r.useCallback)(e=>{let a=t[e];if(a)return C.get(a)},[t,C]),N=(0,r.useCallback)((e,t)=>{let a=o.current;if(!a)return;let n=f(t,a);b(t=>{if(n===t.get(e)||isNaN(n))return t;let a=new Map(Array.from(t.entries()));return a.set(e,n),a})},[o]),E=(0,r.useCallback)(()=>{if(!j)return;let e=s.current,t=o.current,a=y(e,t);if(void 0===a)return;let n=g(e,t);void 0!==n&&a<=n&&l(Math.max(0,i-1))},[j,s,o,l,i]),A=(0,r.useCallback)(()=>{let e=s.current,t=o.current,n=y(e,t);if(void 0===n)return;let r=I(i);if(void 0===r)return;let c=g(e,t);void 0!==c&&n>c+r&&l(Math.min(a,i+1))},[s,o,I,i,l,a]),T=(0,r.useCallback)(()=>{let e=s.current,t=o.current;if(!e||!t)return;let a=e.offsetWidth;a&&(void 0===c||a<=c?E():a>c&&A(),u(a),w(a<=(x??t.offsetWidth)))},[A,E,x,c,s,o]);(0,h.A)(()=>{let e=o.current;if(!e)return;let a=new Map;for(let n of t){let t=e.querySelector(`[data-action-bar-item="${n}"]`);t&&a.set(n,f(t,e))}b(a)},[t,o]),(0,h.A)(()=>{let e=o.current;e&&_(e.offsetWidth)},[o]),(0,h.A)(()=>{T()},[T]),(0,p.w)(T,s);let R=(0,r.useMemo)(()=>({visibleChildEndIndex:i,justifySpaceBetween:S,recalculateItemSize:N}),[i,S,N]);return(0,n.jsx)(v.Provider,{value:R,children:e})},_=()=>{let e=(0,r.useContext)(v);return e||{justifySpaceBetween:!1,visibleChildEndIndex:0,recalculateItemSize:u.l}};try{v.displayName||(v.displayName="ActionBarResizeContext")}catch{}try{x.displayName||(x.displayName="ActionBarResizeProvider")}catch{}var C=a(29731),b=a(11683),S=a(45800),w=a(34164),j=a(38621),I=a(94236),N=a(26108),E=a(5524),A=a(12683);let T=j.KebabHorizontalIcon,R="invisible",k=({anchorProps:{"aria-label":e,icon:t=T,variant:a=R,...i}={icon:T,variant:R},open:l,onOpenChange:o})=>{let{anchorRef:c}=d(),{actions:u,staticMenuActions:m,label:h}=s(),{visibleChildEndIndex:p}=_(),f=(0,r.useMemo)(()=>(0,A.h1)(i,{"aria-label":e?.trim()||`More ${h}`,icon:t,className:"OverflowMenu-module__IconButton_0--cxtvS",variant:a}),[e,t,h,a,i]),g=(0,r.useMemo)(()=>u?.slice(p),[u,p]),y=g&&g.length>0,v=m&&m.length>0;return y||v?(0,n.jsxs)(I.W,{anchorRef:c,open:l,onOpenChange:o,children:[(0,n.jsx)(I.W.Anchor,{children:(0,n.jsx)(N.K,{...(0,C.G)("overflow-menu-anchor"),...f})}),(0,n.jsx)(I.W.Overlay,{align:"end","data-overflow-menu-overlay":!0,children:(0,n.jsxs)(E.l,{children:[v&&m.map(e=>(0,n.jsx)(r.Fragment,{children:e.render()},e.key)),g?.map(e=>(0,n.jsx)(r.Fragment,{children:e.render(!0)},e.key))]})})]}):null};try{k.displayName||(k.displayName="OverflowMenu")}catch{}let L=({children:e,actionKey:t})=>{let a=(0,r.useRef)(null),{recalculateItemSize:i}=_();return(0,h.A)(()=>{a.current&&i(t,a.current)},[a,i,t]),(0,n.jsx)("div",{...(0,C.G)(`action-bar-item-${t}`),"data-action-bar-item":t,ref:a,className:"VisibleItem-module__Box_0--BsJkb",children:e})};try{L.displayName||(L.displayName="VisibleItem")}catch{}let M=({className:e,style:t})=>{let{itemContainerRef:a}=d(),{actions:r,gap:i}=s(),{visibleChildEndIndex:l}=_(),o=r?.slice(0,l);return(0,n.jsx)("div",{...(0,C.G)("action-bar"),ref:a,className:(0,w.$)(e,"VisibleItems-module__Box_1--LOtDr"),style:{gap:i,...t},children:o?.map(({key:e,render:t})=>(0,n.jsx)(L,{actionKey:e,children:t(!1)},e))})};try{M.displayName||(M.displayName="VisibleItems")}catch{}let P=({overflowMenuToggleProps:e,overflowMenuProps:t,children:a,...r})=>{let{outerContainerRef:i}=d(),{label:l,variant:o,gap:c}=s(),{justifySpaceBetween:u}=_();return(0,S.G)({containerRef:i,bindKeys:b.z0.ArrowHorizontal|b.z0.HomeAndEnd,focusOutBehavior:"wrap",disabled:"toolbar"!==o},[i]),(0,n.jsxs)("div",{ref:i,...(0,C.G)("action-bar-container"),role:"toolbar"===o?"toolbar":void 0,"aria-label":"toolbar"===o?l:void 0,style:{gap:c},className:(0,w.$)("VisibleAndOverflowContainer-module__Box_0--KyT2b",u&&"VisibleAndOverflowContainer-module__space--fVHr3"),children:[(0,n.jsx)(M,{...r}),a,(0,n.jsx)(k,{anchorProps:e,...t})]})};try{P.displayName||(P.displayName="VisibleAndOverflowContainer")}catch{}let O="normal",F=({children:e,...t})=>(0,n.jsx)(P,{...t,children:e}),D=({actions:e=[],staticMenuActions:t,overflowMenuToggleProps:a,overflowMenuProps:i,children:s,label:o,variant:d,density:u=O,anchorRef:m,className:h,style:p})=>{let f=(0,r.useMemo)(()=>({actions:e,staticMenuActions:t,variant:d,label:o,gap:"condensed"===u?"var(--base-size-4)":"spacious"===u?"var(--base-size-16)":"none"===u?0:"var(--base-size-8)"}),[e,t,d,o,u]),g=(0,r.useMemo)(()=>({actionKeys:e.map(e=>e.key)}),[e]),y=t&&t.length>0,v=e&&e.length>0;if(!v&&!y)return null;let _={overflowMenuToggleProps:a,overflowMenuProps:i,className:h,style:p};return(0,n.jsx)(c,{value:{anchorRef:m},children:(0,n.jsx)(l,{value:f,children:v?(0,n.jsx)(x,{value:g,children:(0,n.jsx)(F,{..._,children:s})}):(0,n.jsx)(F,{..._,children:s})})})};try{F.displayName||(F.displayName="InternalActionBar")}catch{}try{D.displayName||(D.displayName="ActionBar")}catch{}},91865:(e,t,a)=>{a.d(t,{ET:()=>c,Iw:()=>u,V4:()=>m,ms:()=>d});var n=a(96540),r=a(97665),i=a(97286),l=a(64846),s=a(69599),o=a(58612);let c="AGENT_SESSIONS_PR_MAP";function d(e){return Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(",")}let u=async(e,t)=>{let a=d(e);if(!a)return{};let n=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(a)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw Error("Failed to fetch pull requests");let r=(await n.json()).pull_requests;return t(r),r};function m({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:a}){let m=d(e),{value:h,setValue:p}=(0,l.Q)(c),f=(0,s.G7)("copilot_agent_sessions_alive_updates"),g=(0,r.jE)(),y=(0,n.useRef)(a??{}),v=(0,n.useCallback)(()=>{g.invalidateQueries({queryKey:["agent-sessions-pull-requests",m]})},[g,m]);(0,o.N)({onEvent:v,enableCreateEvents:!0,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:f});let x=(0,i.I)({queryKey:["agent-sessions-pull-requests",m],queryFn:async()=>await u(e,p),initialData:a??h,refetchInterval:!f&&t,refetchIntervalInBackground:!1,enabled:m.length>0});x.data&&(y.current={...y.current,...x.data});let _=(0,n.useMemo)(()=>y.current,[x.data]);return{...x,data:_}}},93654:(e,t,a)=>{a.d(t,{ZL:()=>m,j:()=>g,si:()=>y,xZ:()=>h});var n=a(35247),r=a(97665),i=a(96540),l=a(51120),s=a(42455),o=a(64846),c=a(91865),d=a(58612),u=a(69599);let m=["agent-tasks"],h="AGENT_SESSIONS_TASKS";function p(e,t){let a=e.map(e=>{let a=t.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!a,...a&&{problemStatement:a.problemStatement,nwo:a.nwo,baseRef:a.baseRef,clientGeneratedId:a.clientGeneratedId}}}),n=t.filter(e=>!a.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return[...a,...n].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}let f=async({queryClient:e,setCachedTasks:t})=>{let a=await (0,l.I)({path:"/agents/tasks"}),{tasks:n}=await a.json(),r=p(n.map(e=>e.last_updated_at&&!e.latest_session_updated_at?{...e,latest_session_updated_at:e.last_updated_at}:e),(e.getQueryData(m)||[]).filter(e=>!0===e.isOptimistic));return t(r),r},g=async({queryClient:e,setCachedTasks:t})=>{let a=await (0,l.I)({path:"/agents/sessions"}),n=p(function(e){let t=new Map;for(let a of e){let e=t.get(a.resource_id.toString());if(e){if(e.session_count+=1,new Date(a.last_updated_at)>new Date(e.latest_session_updated_at)&&(e.latest_session_updated_at=a.last_updated_at,e.latest_session_state=a.state,e.latest_session_id=a.id),a.event_identifiers){let t=new Set(e.event_identifiers||[]),n=a.event_identifiers.filter(e=>!t.has(e));e.event_identifiers=[...e.event_identifiers||[],...n]}}else t.set(a.resource_id.toString(),{resource_type:a.resource_type,resource_id:a.resource_id,resource_global_id:a.resource_global_id,session_count:1,latest_session_updated_at:a.last_updated_at,latest_session_state:a.state,latest_session_id:a.id,event_identifiers:a.event_identifiers,event_type:a.event_type??void 0})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await a.json()).sessions),(e.getQueryData(m)||[]).filter(e=>!0===e.isOptimistic));return t(n),n};function y({sessionsPollingInterval:e=3e3,initialTasks:t,initialPullRequestsMap:a}={}){let{value:l,setValue:p}=(0,o.Q)(h),v=(0,r.jE)(),x=n.W.copilotAgentTaskApi?f:g,_=(0,u.G7)("copilot_agent_sessions_alive_updates"),C=(0,i.useCallback)(()=>{v.invalidateQueries({queryKey:m})},[v]);(0,d.N)({onEvent:C,enableCreateEvents:!0,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:_});let b=(0,s.b)({queryKey:m,queryFn:async()=>await x({queryClient:v,setCachedTasks:p}),initialData:t??l,refetchInterval:!_&&e,refetchIntervalInBackground:!1}),S=(0,i.useMemo)(()=>b.data||[],[b.data]),w=S.filter(e=>void 0!==e.resource_id),{data:j,isError:I,isLoading:N}=(0,c.V4)({tasks:w,sessionsPollingInterval:e,initialPullRequestsMap:a}),E=S.map(e=>{if(void 0===e.resource_id)return e;let t=j[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}}).filter(e=>!0===e.isOptimistic||void 0!==e.pull);return{tasks:E,isLoading:b.isLoading&&!b.data||N&&!a,isError:b.isError||I}}},95378:(e,t,a)=>{a.d(t,{kx:()=>j,ao:()=>w});var n,r,i=a(74848),l=a(20263),s=a(73017),o=a(29731),c=a(34164),d=a(96540),u=a(56825),m=a(35220),h=a(29622),p=a(87670),f=a(46720),g=a(24347);let y="Selection-module__centerAligned--HIRyI",v="Selection-module__compact--azMKM";var x=a(60257),_=a(74501);let C=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:a}=(0,g.v)(),{isSelected:n,onSelect:r}=(0,x.r)(),{title:l}=(0,_.J)(),{alignment:s}=(0,h.m)();return t?(0,i.jsxs)("div",{className:(0,c.$)(a?"Selection-module__containerWithDragHandle--mLWh4":"Selection-module__container--OQE4d","center"===s&&y),...(0,o.G)("list-view-item-selection"),children:[a&&(0,i.jsx)(p.BS.DragTrigger,{className:(0,c.$)("Selection-module__dragTrigger--SM4bZ","compact"===e&&v)}),(0,i.jsx)(f.A,{className:(0,c.$)("Selection-module__checkbox--X3ras","compact"===e&&v,"center"===s&&y),checked:n,onChange:()=>r(!n),"aria-label":`Select: ${l}`,"data-listview-component":"selection-input",...(0,o.G)("list-view-item-selection-input")})]}):null};try{C.displayName||(C.displayName="ListItemSelection")}catch{}let b="Title-module__compact--eK6hD";function S({children:e,containerStyle:t,containerClassName:a,headerContainerRef:n,headingStyle:r,headingClassName:l,headingRef:s,leadingBadge:d,trailingBadges:p,header:f}){let{variant:g}=(0,m.e)(),{headingRef:y}=(0,_.J)(),{alignment:v}=(0,h.m)(),x=(0,u.m)("listitem");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{...(0,o.G)("list-view-item-title-container"),style:t,className:(0,c.$)("Title-module__container--XD9YG","compact"===g&&b,"center"===v&&"Title-module__centerAligned--J8aYA",a),ref:n,"data-listview-item-title-container":!0,children:[(0,i.jsxs)(x,{className:(0,c.$)("Title-module__heading--s7YnL","compact"===g&&b,l),style:r,ref:e=>{if(y&&(y.current=e),s&&"current"in s)try{s.current=e}catch{}},...(0,o.G)("list-view-item-title"),children:[d,f]}),p&&(0,i.jsx)("span",{className:"Title-module__trailingBadgesSpacer--Son9W"}),(0,i.jsx)("span",{className:"Title-module__trailingBadgesContainer--mijcn",children:p}),e]}),(0,i.jsx)(C,{})]})}function w({children:e,value:t,containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:l,headingClassName:s,headingRef:o,leadingBadge:c,trailingBadges:u,anchorRef:m,...h}){let p=(0,d.useRef)(null),f=m||p;return N({anchorRef:f,...h}),(0,i.jsx)(S,{header:h.href||h.onClick?(0,i.jsx)(I,{anchorRef:f,...h,children:(0,i.jsx)("span",{children:t})}):(0,i.jsx)("span",{children:t}),containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:l,headingClassName:s,headingRef:o,leadingBadge:c,trailingBadges:u,children:e})}function j({children:e,html:t,containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:s,headingClassName:o,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return N(m),(0,i.jsx)(S,{header:(0,i.jsx)(l.BC,{html:t,...m}),containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:s,headingClassName:o,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function I({anchorStyle:e,anchorClassName:t,anchorRef:a,linkProps:n,children:r,...l}){let{as:s="a",...u}=n??{},m=(0,d.useRef)(null);return(0,i.jsx)(s,{...(0,o.G)("listitem-title-link"),style:e,ref:a||m,className:(0,c.$)("Title-module__anchor--GmXUE","Title-module__inline--oM0P7",t),...l,...u,children:r})}let N=({href:e,onClick:t,anchorRef:a})=>{let{setTitleAction:n,headingRef:r}=(0,_.J)();return(0,d.useEffect)(()=>{(e||t)&&n(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(a?.current)a.current.click();else if(r?.current){let e=r.current.querySelector("a, button");e&&e.click()}})},[a,r,e,t,n]),null};try{S.displayName||(S.displayName="InternalTitle")}catch{}try{(n=TitleTag).displayName||(n.displayName="TitleTag")}catch{}try{w.displayName||(w.displayName="ListItemTitle")}catch{}try{j.displayName||(j.displayName="ListItemSafeHTMLTitle")}catch{}try{(r=function({children:e,html:t,containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:l,headingClassName:o,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return N(m),(0,i.jsx)(S,{header:(0,i.jsx)(s.JR,{html:t,...m}),containerStyle:a,containerClassName:n,headerContainerRef:r,headingStyle:l,headingClassName:o,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(r.displayName="ListItemUnsafeHTMLTitle")}catch{}try{I.displayName||(I.displayName="HeadingLink")}catch{}},97174:(e,t,a)=>{a.d(t,{u:()=>I});var n=a(74848),r=a(73189),i=a(29731),l=a(88431),s=a(80293),o=a(81960),c=a(34164),d=a(96540),u=a(50205),m=a(44569),h=a(11683),p=a(55966),f=a(45800);function g(e,t){let a=e,n=e.closest("[role=list] li");n&&(a=n);let r=a.closest("[role=list]");if(!r)return;let i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,e=>{if(!(e instanceof HTMLElement)||!e.id.includes("list-view-node"))return NodeFilter.FILTER_SKIP;let t=e.parentElement;for(;t&&t!==r;){if(t.id.includes("list-view-node"))return NodeFilter.FILTER_SKIP;t=t.parentElement}return NodeFilter.FILTER_ACCEPT}),l=i.firstChild(),s=0;for(;l!==a&&(l=i.nextNode(),!(++s>500)););let o="next"===t?i.nextNode():i.previousNode();for(;o instanceof HTMLElement&&o.parentElement?.closest("[role=list] li[aria-expanded=false]");)o="next"===t?i.nextNode():i.previousNode();return o instanceof HTMLElement?o:void 0}function y(e){let t=e.closest("[role=list]"),a=t?.querySelector("[role=list] li");return a instanceof HTMLElement?a:void 0}function v(e){let t=e.closest("[role=list]"),a=t?.querySelectorAll("[role=list] li");if(!a||a.length<1)return;let n=a[a.length-1];if(n instanceof HTMLElement)return n}function x(e,t){let a=[...(0,p.K1)(document.documentElement,{strict:!0,onlyTabbable:!0})],n=a.indexOf(e);return"next"===t?a[n+1]:a[n-1]}var _=a(75986),C=a(18377),b=a(53687),S=a(24347),w=a(61015),j=a(35220);let I=({children:e,hasDragHandle:t,isSelectable:a,onVariantChange:i=r.l,pluralUnits:l,selectedCount:o=0,singularUnits:c,title:m,titleHeaderTag:h,totalCount:p,variant:f=u.tp,...g})=>{let[y,v]=(0,s.N)(f);(0,d.useEffect)(()=>{i?.(y)},[i,y]);let x=(0,d.useMemo)(()=>d.Children.toArray(e).length,[e]);return(0,n.jsx)(_.JE,{children:(0,n.jsx)(w.y,{title:m,titleHeaderTag:h,children:(0,n.jsx)(j.H,{variant:y,setVariant:v,children:(0,n.jsx)(S.W,{countOnPage:x,selectedCount:o,totalCount:p,singularUnits:c,pluralUnits:l,isSelectable:a,hasDragHandle:t,children:(0,n.jsx)(b.e,{children:(0,n.jsx)(C.w,{children:(0,n.jsx)(N,{...g,children:e})})})})})})})},N=({ariaLabelledBy:e,as:t,children:a,className:r,itemsListClassName:s,itemsListStyle:u,listRef:C,metadata:b,role:S,strictFocusZone:I,...N})=>{let{idPrefix:E}=(0,_.If)(),{title:A,titleHeaderTag:T}=(0,w.t)(),{variant:R}=(0,j.e)(),{containerRef:k}=function(e=!0){let t=void 0===e||e,a=h.z0.ArrowVertical|h.z0.HomeAndEnd|h.z0.PageUpDown|h.z0.Tab,n=(0,m.zw)()?a|h.z0.JK:a,{containerRef:r}=(0,f.G)({strict:t,bindKeys:n,focusInStrategy:()=>{if(!r.current)return;let e=r.current.querySelector('[tabindex="0"]');return e?.closest("[role=list] li")||e},focusableElementFilter:e=>"list"!==e.getAttribute("role"),getNextFocusable:(e,a,n)=>{if(a instanceof HTMLElement){if("Tab"===n.key||"Tab"===n.code){if(n.shiftKey&&a.id.includes("list-view-node"))return x(a,"previous");let e=a.closest("[role=list] li");if(!e)return;let r=[...(0,p.K1)(e,{strict:t})],i=r.findIndex(e=>e.parentElement?.getAttribute("data-listview-component")==="trailing-badge"),l=r.findIndex(e=>"selection-input"===e.getAttribute("data-listview-component"));i>=0&&l>=0&&(r.splice(i,0,r[l]),r.splice(l+1,1));let s=r.indexOf(n.target);return s!==r.length-1||n.shiftKey?s>0?n.shiftKey?r[s-1]:r[s+1]:void 0:x(a,"next")}if("previous"===e)return g(a,e)||y(a);if("next"===e)return g(a,e)||v(a);if("start"===e)return y(a);if("end"===e)return v(a)}}});return{containerRef:r}}(I),[L,M]=(0,d.useState)(!0);(0,d.useEffect)(()=>{C&&(C.current=k.current)},[k,C]),(0,l.N)(()=>{k.current&&M(Array.from(k.current.querySelectorAll("li")).some(e=>{let t=e.parentElement;for(;t&&t!==k.current;){if("UL"===t.tagName||"OL"===t.tagName)return!1;t=t.parentElement}return!0}))},[k,a]);let P=e??`${E}-list-view-container-title`;return(0,n.jsxs)("div",{id:`${E}-list-view-container`,className:(0,c.$)("ListView-module__container--rxCWy",r),children:[!e&&(0,n.jsx)(o.A,{className:"sr-only",as:T,id:P,...(0,i.G)("list-view-title"),children:A}),b,(0,n.jsx)(t||(L?"ul":"div"),{className:(0,c.$)("ListView-module__ul--A_8jF",s),style:u,ref:k,"aria-labelledby":L?P:void 0,tabIndex:-1,role:S??L?"list":void 0,"data-listview-component":"items-list","data-density":R,...(0,i.G)("list-view-items"),...N,children:a})]})};try{I.displayName||(I.displayName="ListView")}catch{}try{N.displayName||(N.displayName="ListViewContainer")}catch{}},97564:(e,t,a)=>{a.d(t,{V:()=>r});var n=a(96379);async function r(e){let t=await (0,n.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,a)=>{a.d(t,{O:()=>f});var n=a(74848),r=a(96379),i=a(38621),l=a(15220),s=a(86877),o=a(99511),c=a(43371),d=a.n(c),u=a(96540);let m="McpServerDialog-module__inputError--Ojb_P",h="McpServerDialog-module__formField--rsUqW",p=(0,n.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),f=({isOpen:e,onClose:t,returnUrl:a,onServerAdded:c,returnFocusRef:f,showSettingsLink:g=!0})=>{let[y,v]=(0,u.useState)(""),[x,_]=(0,u.useState)(""),[C,b]=(0,u.useState)(null),[S,w]=(0,u.useState)(null),j=(0,u.useCallback)(()=>{v(""),_(""),b(null),w(null),t()},[t]),I=async e=>{if(e&&e.preventDefault(),""===y.trim()||""===x.trim()){x.trim()||b("MCP server URL is required"),y.trim()||w("Name is required");return}try{if(b(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),a=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!a.test(e)}catch{return!1}}(x))return void b("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",y.trim()),a&&e.append("return_url",a);let t=await (0,r.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let a=await t.text();try{let t=JSON.parse(a);if("unsupported_server_type"===t.error)e=(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",p,"."]});else if(t.field_errors){for(let[e,a]of Object.entries(t.field_errors)){let t=a.join(", ");"mcp_server_url"===e?b(t):"display_name"===e&&w(t)}return}else t.message&&(e=t.message)}catch{e=a.includes("well-known/oauth-authorization-server")||"Client setup failed"===a.trim()?(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",p,"."]}):a||e}}catch{e="Failed to add MCP server"}b(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(j(),c?.(),window.location.assign(i)):(j(),c?.())}catch(e){e instanceof Error?b(e.message):b("An unknown error occurred")}};return e?(0,n.jsx)(l.l,{title:"Add MCP server",onClose:j,footerButtons:[{buttonType:"default",content:"Cancel",onClick:j},{buttonType:"primary",content:(0,n.jsxs)(n.Fragment,{children:["Connect to MCP server",(0,n.jsx)("span",{style:{marginLeft:8},children:(0,n.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{I()}}],returnFocusRef:f,children:(0,n.jsxs)("form",{className:"McpServerDialog-module__dialogForm--pUtNF",onSubmit:I,autoComplete:"on",children:[(0,n.jsxs)(s.A,{required:!0,className:h,children:[(0,n.jsx)(s.A.Label,{children:"MCP server name"}),(0,n.jsx)(o.A,{name:"mcp-server-name",type:"text",value:y,onChange:e=>{v(e.target.value),w(null)},placeholder:"Enter a name for this MCP server",className:S?m:void 0,autoComplete:"on",block:!0}),S&&(0,n.jsx)(s.A.Validation,{variant:"error",children:S})]}),(0,n.jsxs)(s.A,{required:!0,className:h,children:[(0,n.jsx)(s.A.Label,{children:"MCP server URL"}),(0,n.jsx)(o.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{_(e.target.value),b(null)},placeholder:"https://mcp.example.com",className:C?m:void 0,autoComplete:"on",block:!0}),C&&(0,n.jsx)(s.A.Validation,{variant:"error",children:C})]}),(0,n.jsx)("button",{type:"submit",className:"McpServerDialog-module__hiddenSubmitButton--KcK0s",tabIndex:-1,children:"Submit"}),(0,n.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,n.jsxs)(n.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,n.jsx)("a",{href:"/settings",className:"McpServerDialog-module__underline--YKUMk",children:"your settings"}),"."]})]})]})}):null};try{p.displayName||(p.displayName="MCP_SPEC_LINK")}catch{}try{f.displayName||(f.displayName="McpServerDialog")}catch{}},97949:(e,t,a)=>{a.d(t,{U:()=>o});var n=a(99054),r=a(17925),i=a(25641),l=a(35247),s=a(79216);let o=function({references:e,agents:t,commands:a}){this.parser=function(o){let c=o.split(/(\s+)/),d=[];for(let[o,u]of c.entries()){if(l.W.chatInputCommands&&0===o){let e=(0,r.V)(u,a);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===o&&n.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let h=s.Q.parse(u),p=h&&e?.find(e=>s.Q.refersTo(h,e));if(h){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:p&&(0,i.Vb)(p),referenceMention:h}});continue}let f=d.at(-1);f?.type==="text"?f.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},99054:(e,t,a)=>{a.d(t,{JE:()=>p,Z3:()=>m,bn:()=>u,kw:()=>f,qj:()=>h});var n=a(21728),r=a(97286),i=a(8625),l=a(14521),s=a(25641),o=a(2635),c=a(33592),d=a(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",h=/^@(?<slug>\S+)$/;function p(e){let t,a,i,u,m,h,p=(0,n.c)(25),{agentsPath:f,model:g}=(0,o.bP)("agentsPath","model"),y=(0,d.tD)(),v=(0,c.b)(),x=!!(0,l.G)(),_=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==x||p[2]!==_?(t=e=>{let{messages:t}=y();if(_||x)return{agents:[],showLimit:!1};let a=(0,s.Q7)(t)[0];return a?{agents:e.filter(e=>e.slug===a.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=x,p[2]=_,p[3]=t):t=p[3];let C=t;p[4]!==f?(a=["copilot-chat","agents",f],p[4]=f,p[5]=a):a=p[5],p[6]!==f||p[7]!==v?(i=()=>f?v.fetchAgents(f):[],p[6]=f,p[7]=v,p[8]=i):i=p[8];let b=(void 0===e||e)&&!_&&!x;p[9]!==C||p[10]!==a||p[11]!==i||p[12]!==b?(u={queryKey:a,queryFn:i,select:C,enabled:b},p[9]=C,p[10]=a,p[11]=i,p[12]=b,p[13]=u):u=p[13];let{isLoading:S,data:w,refetch:j,isStale:I,isFetched:N}=(0,r.I)(u);p[14]!==w||p[15]!==N||p[16]!==I||p[17]!==j?(m=async()=>!N||I?(await j()).data:w,p[14]=w,p[15]=N,p[16]=I,p[17]=j,p[18]=m):m=p[18];let E=m,A=w?.agents,T=w?.showLimit??!1;return p[19]!==E||p[20]!==S||p[21]!==A||p[22]!==T||p[23]!==_?(h={loading:S,disabled:_,availableAgents:A,showLimit:T,imperativelyFetch:E},p[19]=E,p[20]=S,p[21]=A,p[22]=T,p[23]=_,p[24]=h):h=p[24],h}function f(e){let t,a,r=(0,n.c)(6),{inputOnChange:l,inputRef:s}=e;r[0]!==l||r[1]!==s?(t={inputRef:s,fallbackEventHandler:l},r[0]=l,r[1]=s,r[2]=t):t=r[2];let o=(0,i.H)(t);return r[3]!==o||r[4]!==s?(a=e=>{s.current?.value&&o(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;o(t,[0,0],t.length)},r[3]=o,r[4]=s,r[5]=a):a=r[5],a}}}]);
//# sourceMappingURL=12362-44fdc81b0bd9.js.map