"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[50832],{295:(e,t,n)=>{n.d(t,{h:()=>d});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(80770),o=n(99993);function d(){let e,t,n,d=(0,i.c)(7),c=(0,a.jE)(),u=(0,r.EY)();return d[0]!==u?(e=async e=>await u.deleteLoop(e),d[0]=u,d[1]=e):e=d[1],d[2]!==c?(t=(e,t)=>{e.success&&(c.removeQueries({queryKey:[o.M1,t]}),c.invalidateQueries({queryKey:[l.n]}))},d[2]=c,d[3]=t):t=d[3],d[4]!==e||d[5]!==t?(n={mutationFn:e,onSuccess:t},d[4]=e,d[5]=t,d[6]=n):n=d[6],(0,s.n)(n)}},894:(e,t,n)=>{n.d(t,{L:()=>s,M:()=>a});var i=n(96540);let a=(0,i.createContext)(null);function s(){let e=(0,i.useContext)(a);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},1747:(e,t,n)=>{n.d(t,{BH:()=>R,xx:()=>F,tZ:()=>M,wI:()=>$});var i=n(74848),a=n(21728),s=n(2635),r=n(35247),l=n(42312),o=n(33535),d=n(6551),c=n(40104),u=n(50899),m=n(96540),h=n(93380),f=n(79064),p=n(7812),g=n(33592),y=n(25641),x=n(82075),v=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],_=e=>!!e.isUserEdited,j=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,v.A)(t.get(e),n)),w=(e,t)=>!j(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),N=(e,t)=>!j(new Map(Array.from(e).filter(([,e])=>_(e))),new Map(Array.from(t).filter(([,e])=>_(e))));function C(e){return[e.id,e]}function S(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function L(e){return(0,p.PO)(e)}let T=(0,m.createContext)(void 0),E=new Map,D=[];function R(e){let t,n,c,v,j,R,F,M,$,B,V,U,q,G,H,K=(0,a.c)(55),{children:W}=e,z=(0,o.AI)(!1),Q=(0,o.AI)(!1),Z=(0,l.U)(),J=(0,m.useRef)(null),[Y,X]=(0,m.useState)(E),[ee,et]=(0,m.useState)(D),[en,ei]=(0,m.useState)(D),[ea,es]=(0,m.useState)(void 0),[er,el,eo]=(0,h.B)(!1),ed=(0,d.S)((0,s.pn)(O)),ec=(0,s.pn)(A);K[0]!==z||K[1]!==ed||K[2]!==ec?(t=()=>{ed&&ed!==ec&&(X(E),et(D),es(void 0),null===ec&&z.setValue(!1))},n=[ec,ed,z],K[0]=z,K[1]=ed,K[2]=ec,K[3]=t,K[4]=n):(t=K[3],n=K[4]),(0,m.useEffect)(t,n),K[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;et(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),i=t.findIndex(e=>(0,p.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),es(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},K[5]=c):c=K[5];let eu=c;K[6]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{X(t=>{let n=new Map(t);return n.set(e.id,e),n})},K[6]=v):v=K[6];let em=v;K[7]!==ee||K[8]!==ea?(j=e=>{let t=ee.indexOf(e);if(-1===t)return;let n=ee.toSpliced(t,1);ea===e&&es(n[t-1]??n[0]),et(n)},K[7]=ee,K[8]=ea,K[9]=j):j=K[9];let eh=(0,u.K)(j);K[10]!==ee||K[11]!==ea?(R=e=>{if(e){let t=ee;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ea===n&&es(t[e-1]??t[0]))}et(t)}else et(D),es(void 0)},K[10]=ee,K[11]=ea,K[12]=R):R=K[12];let ef=(0,u.K)(R);if(K[13]!==Y){for(let[e,t]of(F=new Map,Y)){let n=(0,p.oy)(e),i=F.get(n)??[];i.push(t.id),F.set(n,i)}for(let e of F.values())e.sort((e,t)=>{let n=Y.get(e),i=Y.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});K[13]=Y,K[14]=F}else F=K[14];let ep=F;K[15]!==eh||K[16]!==ee||K[17]!==ep?(M=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),ee.includes(t)){let e=(0,p.oy)(t),n=ep.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?eu(a,!1):eh(t)}}else X(E),et(D),es(void 0)},K[15]=eh,K[16]=ee,K[17]=ep,K[18]=M):M=K[18];let eg=(0,u.K)(M);K[19]!==z.value||K[20]!==ee?($=()=>z.value?ee:D,K[19]=z.value,K[20]=ee,K[21]=$):$=K[21];let ey=(0,u.K)($);K[22]!==Z||K[23]!==z?(B=e=>{z.setValue(!0),queueMicrotask(()=>{Z.current?.focus()}),void 0!==e&&(J.current=e)},K[22]=Z,K[23]=z,K[24]=B):B=K[24];let ex=B;K[25]!==z||K[26]!==Q?(V=()=>{z.setValue(!1),Q.setValue(!1)},K[25]=z,K[26]=Q,K[27]=V):V=K[27];let ev=V;K[28]!==Q?(U=()=>Q.setValue(!0),K[28]=Q,K[29]=U):U=K[29];let eb=U;K[30]!==Q?(q=()=>Q.setValue(!1),K[30]=Q,K[31]=q):q=K[31];let e_=q;K[32]!==eh||K[33]!==ef||K[34]!==ev||K[35]!==e_||K[36]!==Z||K[37]!==eo||K[38]!==el||K[39]!==ey||K[40]!==z||K[41]!==Q||K[42]!==Y||K[43]!==ee||K[44]!==en||K[45]!==ex||K[46]!==eb||K[47]!==eg||K[48]!==ea||K[49]!==er||K[50]!==ep?(G={items:Y,versionedItems:ep,contentPreviewRef:Z,isContentPreviewOpen:z,isResourcePanelOpen:Q,getOpenItems:ey,allOpenItems:ee,openItemsBeforeSubthreadChange:en,selectedItem:ea,updateItem:em,setOpenItemsBeforeSubthreadChange:ei,openItem:eu,closeItem:eh,closeItems:ef,openPreviewPane:ex,closePreviewPane:ev,openResourcePanel:eb,closeResourcePanel:e_,removeItems:eg,showLoadingState:er,enableLoadingState:el,disableLoadingState:eo,returnFocusElementRef:J},K[32]=eh,K[33]=ef,K[34]=ev,K[35]=e_,K[36]=Z,K[37]=eo,K[38]=el,K[39]=ey,K[40]=z,K[41]=Q,K[42]=Y,K[43]=ee,K[44]=en,K[45]=ex,K[46]=eb,K[47]=eg,K[48]=ea,K[49]=er,K[50]=ep,K[51]=G):G=K[51];let ej=G;return!function(e){let t,n,i=(0,a.c)(5),{updateItem:s,openItem:l,openPreviewPane:o}=e;i[0]!==l||i[1]!==o||i[2]!==s?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=f.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,p.g)(t);s(e),l(e.id)}o(),f.Jt.removeCopilotDiffReferences()}},n=[s,l,o],i[0]=l,i[1]=o,i[2]=s,i[3]=t,i[4]=n):(t=i[3],n=i[4]),(0,m.useEffect)(t,n)}(ej),P(ej),!function(e){let t,n,i,l=(0,a.c)(10),{items:o,removeItems:d,updateItem:c}=e,{currentReferences:u,messages:h,selectedThreadID:f}=(0,s.Pk)(),v=(0,g.b)(),j=(0,m.useRef)(o),T=(0,m.useRef)(u);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.A)("sessionStorage"),l[0]=t):t=l[0];let E=t;l[1]!==u||l[2]!==o||l[3]!==v||l[4]!==h.length||l[5]!==d||l[6]!==f||l[7]!==c?(n=()=>{let e=N(j.current,o);j.current=o;let t=w(T.current,u);if(T.current=u,e){let e=new Map(Array.from(o.values()).filter(_).map(L).filter(k).map(I)),t=new Set;for(let n of u)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?w([a],[n])&&v.addReference(a,"content-preview"):v.removeReference(n)}for(let[n,i]of e)t.has(n)||v.addReference(i,"content-preview")}else if(t){let e=new Map(u.map(e=>(0,p.oR)({ref:e,messageIndex:h.length})).filter(S).map(C)),t=new Set;for(let[n,i]of o)if(_(i)){t.add(n);let a=e.get(n);null!=a?N(new Map([[a.id,a]]),new Map([[i.id,i]]))&&c(a):(d([n]),r.W.copilotPersistEditedDraftIssues&&E.removeItem(`edited-${f}-${n}`))}for(let[n,i]of e)t.has(n)||c(i)}},i=[o,v,u,h.length,d,c,E,f],l[1]=u,l[2]=o,l[3]=v,l[4]=h.length,l[5]=d,l[6]=f,l[7]=c,l[8]=n,l[9]=i):(n=l[8],i=l[9]),(0,m.useEffect)(n,i)}(ej),K[52]!==W||K[53]!==ej?(H=(0,i.jsx)(T.Provider,{value:ej,children:W}),K[52]=W,K[53]=ej,K[54]=H):H=K[54],H}function A(e){return e.selectedThreadID}function O(e){return e.selectedThreadID}let P=e=>{let t,n,i,l=(0,a.c)(8),{updateItem:o}=e,{messagesLoading:d,selectedThreadID:u}=(0,s.Pk)(),h=`edited-${u}`;if(r.W.copilotPersistEditedDraftIssues){let e;l[0]!==h?(e=(0,c.MV)(h),l[0]=h,l[1]=e):e=l[1],t=e}else{let e;l[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[2]=e):e=l[2],t=e}let f=t;l[3]!==f||l[4]!==d.state||l[5]!==o?(n=()=>{if(f&&"loaded"===d.state)for(let e of f)o(e)},i=[f,o,d.state],l[3]=f,l[4]=d.state,l[5]=o,l[6]=n,l[7]=i):(n=l[6],i=l[7]),(0,m.useEffect)(n,i)};function F(){let e=(0,m.useContext)(T);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function M(){let e=(0,m.useContext)(T);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function $(){let e=(0,m.useContext)(T);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{T.displayName||(T.displayName="ContentPreviewContext")}catch{}try{R.displayName||(R.displayName="ContentPreviewProvider")}catch{}},2265:(e,t,n)=>{n.d(t,{W:()=>d,j:()=>o});var i=n(74848),a=n(68273),s=n(21728),r=n(96540);let l=(0,r.createContext)({}),o=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{children:o}=e,[d,c]=(0,r.useState)(!1);a[0]!==d?(t={isDialogOpen:d,setIsDialogOpen:c},a[0]=d,a[1]=t):t=a[1];let u=t;return a[2]!==o||a[3]!==u?(n=(0,i.jsx)(l.Provider,{value:u,children:o}),a[2]=o,a[3]=u,a[4]=n):n=a[4],n}:function({children:e}){let[t,n]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(l.Provider,{value:a,children:e})},d=((0,a.GV)(),()=>(0,r.useContext)(l));try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{o.displayName||(o.displayName="DialogStateProvider")}catch{}},2691:(e,t,n)=>{n.d(t,{I:()=>c});var i=n(74848),a=n(21728),s=n(73017),r=n(94236),l=n(5524),o=n(96540),d=n(15440);function c(e){let t,n,c,u,m,h,f=(0,a.c)(21),{group:p,onEntrySelect:g}=e,[y,x]=(0,o.useState)(!1),v=(0,o.useRef)(null);f[0]!==y?(t=()=>{x(!y)},f[0]=y,f[1]=t):t=f[1];let b=t;if(f[2]!==p.color||f[3]!==p.icon||f[4]!==p.id||f[5]!==p.name||f[6]!==b||f[7]!==y?(n=(0,i.jsx)(r.W.Anchor,{children:(0,i.jsx)(d.Z,{ref:v,testId:p.id,name:p.name,icon:p.icon,color:p.color,onClick:b,dropdown:!0,open:y})}),f[2]=p.color,f[3]=p.icon,f[4]=p.id,f[5]=p.name,f[6]=b,f[7]=y,f[8]=n):n=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(c={width:"260px"},f[9]=c):c=f[9],f[10]!==p.entries||f[11]!==g){let e;f[13]!==g?(e=e=>(0,i.jsx)(l.l.Item,{onSelect:()=>g(e),children:(0,i.jsx)(s.$6,{html:e.titleHtml})},e.id),f[13]=g,f[14]=e):e=f[14],u=p.entries.map(e),f[10]=p.entries,f[11]=g,f[12]=u}else u=f[12];return f[15]!==u?(m=(0,i.jsx)(r.W.Overlay,{style:c,children:(0,i.jsx)(l.l,{children:u})}),f[15]=u,f[16]=m):m=f[16],f[17]!==y||f[18]!==n||f[19]!==m?(h=(0,i.jsx)("li",{children:(0,i.jsxs)(r.W,{open:y,onOpenChange:x,children:[n,m]})}),f[17]=y,f[18]=n,f[19]=m,f[20]=h):h=f[20],h}try{c.displayName||(c.displayName="StarterGroupWithMenu")}catch{}},2702:(e,t,n)=>{n.d(t,{X:()=>u});var i=n(74848),a=n(21728),s=n(72206),r=n(53419),l=n(61526),o=n(50393),d=n(2691),c=n(15440);function u(e){let t,n,u,m,h=(0,a.c)(10),{handleStarterEntrySelect:f,taskStarterEnabled:p,style:g,startersLocationId:y}=e,x=void 0===g?"Starters-module__starters--L2GQo":g,v=(0,s.tD)()(),b=void 0!==p&&p&&v.hasCEorCBAccess&&!v.agentsEnabled,_=(0,l.Zp)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),h[0]=t):t=h[0];let j=b&&(0,i.jsx)("li",{children:(0,i.jsx)(c.Z,{testId:"task",name:"Task",icon:"agent",color:"var(--display-gray-fgColor)",onClick:()=>{(0,r.BI)("dotcom_chat.activate",{target:`${y.toUpperCase()}_STARTER_MENU_ITEM`,topic:v.currentTopic?.name,mode:"immersive",starterId:"task-starter"}),_("/copilot/agents")}},"task-starter")});h[1]!==f?(n=e=>(0,i.jsx)(d.I,{group:e,onEntrySelect:f},e.id),h[1]=f,h[2]=n):n=h[2];let w=(0,o.M)(b).map(n);return h[3]!==x||h[4]!==j||h[5]!==w?(u=(0,i.jsxs)("ul",{className:x,children:[j,w]}),h[3]=x,h[4]=j,h[5]=w,h[6]=u):u=h[6],h[7]!==t||h[8]!==u?(m=(0,i.jsxs)(i.Fragment,{children:[t,u]}),h[7]=t,h[8]=u,h[9]=m):m=h[9],m}try{u.displayName||(u.displayName="Starters")}catch{}},3038:(e,t,n)=>{n.d(t,{Av:()=>S,Ji:()=>f,Ls:()=>N,Mk:()=>x,Po:()=>m,S4:()=>_,Yf:()=>I,a1:()=>w,a2:()=>o,dT:()=>C,dv:()=>p,j2:()=>b,oH:()=>d,qK:()=>h,qX:()=>c,u6:()=>u,x_:()=>g});var i=n(13083),a=n(61583),s=n(66358),r=n(36729),l=n(51391);function o(e,t,n){return"left"===n?!m(e)&&e.left===t:!m(e)&&(0,i.XU)(e.type)===n&&e.right===t}function d(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function c(e,t,n){let i=`-${m(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${m(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function u(e,t){return`${e}-${t}`}function m(e){return!!e&&e===r.Vv}function h(e){return!!e&&e!==r.Vv}function f(e){return"CONTEXT"===e.type}function p(e,t){return t===s.w$.Empty||t===s.w$.Hunk?[e,void 0]:y(e,s.JF[t])}function g(e,t){let n;switch(t){case s.w$.Addition:n=s.JF[s.w$.Addition];break;case s.w$.Deletion:n=s.JF[s.w$.Deletion];break;case s.w$.Context:case s.w$.InjectedContext:n=s.JF[s.w$.Context]}return y(e,n)}function y(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function x(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.Vv);for(;n.length<t.length;)n.push(r.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function v(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function b({line:e,range:t,fileAnchor:n}){let i,{origin:s,pathname:r}=window.location;if(e){let s=v(e)?e.left:e.right;i=t&&s&&t.startLineNumber<=s&&t.endLineNumber>=s?(0,a.j$)(t):function(e,t){let n=v(e),i=n?e.left:e.right,s=n?"left":"right";if(null!==i)return(0,a.j$)({diffAnchor:t,endLineNumber:i,endOrientation:s,startLineNumber:i,startOrientation:s})}(e,n)}else t&&(i=(0,a.j$)(t));if(i)return`${s}${r}#${i}`}function _({hasThreads:e}){return e?"80px":"24px"}let j=["ADDITION","DELETION","CONTEXT"],w=(e,t)=>{if(m(e)||!e)return!1;let n=t.leftLines.concat(t.rightLines),i=n.filter(e=>!m(e)).map(e=>(0,l.bo)(e)),a=(0,l.bo)(e);return n.length>0&&i.includes(a)?n.every(e=>!!m(e)||j.includes(e.type)):!!m(e)||j.includes(e.type)},N=e=>e?e.filter(e=>!m(e)).map(e=>{var t;let[n]=g((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join(`
`):"";function C(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let S=(e,t,n,i)=>{let a;if(e)return e;if(!m(t)){let e=(n?t.left:t.right)??0,s=n?"left":"right";a={startOrientation:s,endOrientation:s,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return a};function I(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?"":i}},3252:(e,t,n)=>{function i(e){return[...e.querySelectorAll(".js-blob-code-addition")].map(e=>e.textContent).filter(e=>null!==e)}function a(e){if(!e||e.length>1e5)return null;let t=e.split(/\r?\n/),n=!1,i="",a=[];for(let e=0;e<t.length;e++){let s=t[e];if(void 0!==s)if(n){if(s.match(/^ {0,3}(`{3,}|~{3,})[ \t]*$/))return a;let e=s;if(i.length>0){let t=RegExp(`^ {0,${i.length}}`);e=s.replace(t,"")}a.push(e)}else{let e=s.match(/^( {0,3})(`{3,}|~{3,})suggestion[ \t]*$/);if(e){n=!0,i=e[1]||"";continue}}}return null}n.d(t,{T:()=>a,y:()=>i})},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(96540);function a(e,t,n){let a=(0,i.useRef)(n);return(0,i.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}},7812:(e,t,n)=>{n.d(t,{Bx:()=>g,LU:()=>d,PO:()=>x,SI:()=>f,SX:()=>b,by:()=>m,g:()=>h,oR:()=>v,oy:()=>o,wN:()=>p,wt:()=>u,yA:()=>y});var i=n(1631),a=n(25641),s=n(51213),r=n(35247),l=n(72994);function o(e){return e.split("#")[0]}function d(e,t){let n=o(e),i=t.get(n)??[],a=i.indexOf(e);return i.length>1&&-1!==a?a+1:null}function c(e,t){return`file:${e.name}#${t}`}function u(e,t,n){switch(e.type){case"thread-scoped-file":return d(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return d(v({ref:e,messageIndex:t}).id,n)??void 0}}function m(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function h(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?m(e.baseFile):i(e.headFile?.path||""),l=e.headFile?m(e.headFile):i(e.baseFile?.path||""),o=e.headFile||e.baseFile,d=o?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:l,name:d,language:(e.headFile?l:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function f(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function p(e,t){let{repoOwner:n,repoName:i,id:a}=e;return{type:"job-result",id:`job-result:${n}-${i}-${a}`,messageId:t??s.Wp,name:`Job #${a} in ${n}/${i}`,jobId:Number(a),workflowId:e.workflow?.id,repoOwner:n,repoName:i}}function g(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e),messageId:t,reference:e}}function y(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function x(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.t)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){let i=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:i,id:`${i}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.c)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function b(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}},8108:(e,t,n)=>{n.d(t,{_g:()=>p,bB:()=>u,e9:()=>h,xJ:()=>y});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),l=n(93161),o=n(5533),d=n(48057);function c(e){let t,n,l,o,c=(0,i.c)(13),u=(0,a.jE)(),m=(0,r.EY)();return c[0]!==u||c[1]!==m||c[2]!==e?(t=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(!r)throw Error("No current execution");let l=e(r.nodes[a],t);return await m.updateNodeExecution(n,i,r.id,a,l)},c[0]=u,c[1]=m,c[2]=e,c[3]=t):t=c[3],c[4]!==u||c[5]!==e?(n=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(r){let n=e(r.nodes[a],t),i={...r,nodes:{...r.nodes,[a]:n}};u.setQueryData(s,i)}await u.cancelQueries({queryKey:s},{revert:!1})},c[4]=u,c[5]=e,c[6]=n):n=c[6],c[7]!==u?(l=(e,t)=>{if(!e.success)return;let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i);u.setQueryData(s,t=>{if(!t)return t;let n=t.nodes[a],i=e.data;return n?.completedAt!==void 0&&n.completedAt>0&&!i.completedAt?t:{...t,nodes:{...t.nodes,[a]:i}}})},c[7]=u,c[8]=l):l=c[8],c[9]!==t||c[10]!==n||c[11]!==l?(o={mutationFn:t,onMutate:n,onSuccess:l},c[9]=t,c[10]=n,c[11]=l,c[12]=o):o=c[12],(0,s.n)(o)}function u(){return c(m)}function m(e,t){let{value:n}=t;return{...e??l.D,value:n,completedAt:Date.now()}}function h(){return c(f)}function f(e,t){let{error:n}=t;return{...e??l.D,error:n,value:null,completedAt:Date.now()}}function p(){return c(g)}function g(e){return{...e??l.D,startedAt:Date.now(),completedAt:void 0}}function y(){var e;let t,n,l,o,c,u;return e=x,o=(0,i.c)(10),c=(0,a.jE)(),u=(0,r.EY)(),o[0]!==c||o[1]!==u||o[2]!==e?(t=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(!s)throw Error("No current execution");let r=e(s,t);return await u.updateExecution(n,i,s.id,r)},o[0]=c,o[1]=u,o[2]=e,o[3]=t):t=o[3],o[4]!==c||o[5]!==e?(n=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(s){let n=e(s,t);c.setQueryData(a,n)}await c.cancelQueries({queryKey:a},{revert:!1})},o[4]=c,o[5]=e,o[6]=n):n=o[6],o[7]!==t||o[8]!==n?(l={mutationFn:t,onMutate:n},o[7]=t,o[8]=n,o[9]=l):l=o[9],(0,s.n)(l)}function x(e){return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(v))}}function v(e){let[t,n]=e;return[t,(0,o.f)(n)?{...n,completedAt:Date.now()}:n]}},8431:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--Sofy4",diffTargetable:"Diff-module__diffTargetable--kW3Cm",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--eH6zk",diffAddFileThread:"Diff-module__diffAddFileThread--f81Tx",diffFooter:"Diff-module__diffFooter--kHHJz"}},10221:(e,t,n)=>{n.d(t,{m:()=>S});var i=n(74848),a=n(21728),s=n(26100),r=n(35247),l=n(4817),o=n(53419),d=n(69726),c=n(20382),u=n(96540),m=n(7812),h=n(1747),f=n(28177),p=n(39344),g=n(46461),y=n(35149),x=n(48881),v=n(13974),b=n(41682),_=n(22841),j=n(23284),w=n(83796);function N(e){return"state"in e&&"draft"===e.state}function C(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function S({data:e,references:t,isStreaming:n}){let a=(0,y.KJ)(e),l=(0,y.Ny)(),d=(0,u.useRef)(l);(0,u.useEffect)(()=>{d.current=l},[l]);let f=(0,u.useMemo)(()=>{if(t){var e;return e=d.current,t.map(t=>{let n;if("existing-issue"===t.type)return{tag:t.tag,parentTag:t.parentTag,title:t.title,repository:t.repository,number:t.number,state:t.state,url:t.url};let i=(0,y.s6)(t.description||"",e);if(t.templateFormValuesById){for(let[i,a]of(n={},Object.entries(t.templateFormValuesById)))if(a)try{let t=JSON.parse(a);if(t&&"object"==typeof t&&"string"==typeof t.content){let a=(0,y.s6)(t.content,e);n[i]=a.trim()}else{let t=(0,y.s6)("string"==typeof a?a:"",e);n[i]=t.trim()}}catch{let t=(0,y.s6)("string"==typeof a?a:"",e);n[i]=t.trim()}}return{title:t.title,tag:t.tag,body:i,labels:t.labels,assignees:t.assignees,repository:t.repository,parentTag:t.parentTag,templateFormValues:n,issueType:t.issueType,projects:t.projects,milestone:t.milestone,issueNumber:t.issueNumber,blockedByTags:t.blockedByTags,bodyVersion:t.bodyVersion,type:t.type,template:t.template,state:"draft"}}).filter(e=>!!e.tag)}return a&&function(e){try{let t=(0,c.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return b.t.fromUnknown(e);case"open":case"closed":return j.r.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(a)||[]},[t,a]),{items:S,updateItem:k,openItem:L,openPreviewPane:T,closeItem:E,versionedItems:D}=(0,h.xx)(),{messageId:R,messageIndex:A,autoOpenPreviewPane:O,hasAutoOpenedPreviewPaneRef:P,setHasAutoOpenedPreviewPane:F}=(0,x.H)(),M=(0,u.useCallback)(e=>N(e)&&e.tag?`new-issue:${e.tag}#${A}`:C(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[A]);(0,_.s)({issues:f,isStreaming:n,isIssueTree:!0}),(0,u.useEffect)(()=>{for(let e of f)e.tag&&M(e)&&(N(e)&&k({messageId:R,type:"new-issue",id:`new-issue:${e.tag}#${A}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>"object"==typeof e&&null!==e?{id:"string"==typeof e.id?e.id:void 0,title:"string"==typeof e.title?e.title:void 0}:{title:String(e)}).filter(e=>!!e.title||!!e.id).sort((e,t)=>(e.title||"").localeCompare(t.title||"")),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:n,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}),C(e)&&e.repository&&e.number&&e.url&&(E(`issue:${e.repository}/${e.number}`),k({messageId:R,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]})))},[M,n,f,R,A,k,E]);let $=(0,u.useCallback)((e,{selectItem:t,event:n})=>{let i=M(e);i&&(L(i,t),(t||O&&!P.current)&&(T(n?.currentTarget),F(!0)),(0,o.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[M,L,O,P,T,F]),B=(0,u.useCallback)(e=>{let t=[...S.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,m.oy)(n),a=D.get(i),s=a?.at(-1);if(!s)return;let r=S.get(s);if(r)switch(r?.type){case"new-issue":return{...b.t.fromUnknown(r),state:"draft"};case"existing-issue":return j.r.fromUnknown(r);default:return}},[S,D]),V=(0,u.useMemo)(()=>{let e=new Set(f.map(e=>e.tag)),t=Array.from(new Set([...new Set(f.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(f.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(f.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>B(e)).filter(e=>null!=e),n=[...f,...t];return Array.from((0,g.G9)(n,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[f,B]),U=(0,v.p)(n),q=(0,u.useMemo)(()=>!t,[t]);(0,u.useEffect)(()=>{if(q&&!U)return;let e=!0;for(let t of V.values()){if(N(t.item)){$(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)N(n.item)&&($(n.item,{selectItem:e}),e=!1)}},[U,V,$,q]);let G=e=>{if(r.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:C(e.item)?e.item.url:void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),$(e.item,{selectItem:!0,event:t}))}}))},H=e=>{let t=M(e.item),a=t?(0,m.LU)(t,D):null;return(0,i.jsx)(p.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(I,{isStreaming:n,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(s.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),$(e.item,{selectItem:!0,event:t}))},href:C(e.item)?e.item.url:void 0,blockedBy:G(e),children:e.children.map(H)},e.item.tag)};return(0,i.jsx)("div",{className:w.A.container,children:V.map(e=>{let t=M(e.item),a=t?(0,m.LU)(t,D):null,r=-1;return(0,g.YR)(e,()=>r++),(0,i.jsxs)(p.K,{subIssueHeaderText:C(e.item)?"New sub-issues":void 0,subIssueCount:r,children:[(0,i.jsx)(p.K.RootItem,{title:e.item.title??"",leadingVisual:(0,i.jsx)(I,{isStreaming:n,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(s.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),$(e.item,{selectItem:!0,event:t}))},href:C(e.item)?e.item.url:void 0,blockedBy:G(e)}),e.children.map(H)]},e.item.tag)})})}function I(e){let t=(0,a.c)(4),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(d.A,{size:"small",className:`${l.sX} mt-1`}),t[0]=e):e=t[0],e}if(N(s)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(f.n,{type:"new-issue"}),t[1]=e):e=t[1],e}if(C(s)){let e;return t[2]!==s.state?(e=(0,i.jsx)(f.n,{type:"existing-issue",state:s.state}),t[2]=s.state,t[3]=e):e=t[3],e}}try{S.displayName||(S.displayName="DraftIssueTreeBlock")}catch{}try{I.displayName||(I.displayName="LeadingVisual")}catch{}},11128:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(22053);function o(e){let t,n,o,c,u,m,h,f=(0,a.c)(17),{additionalActions:p,errors:g,onFixErrorClick:y,title:x}=e,{isReadonly:v}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:"ErrorDisplay-module__errorIcon--SP3WM",size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,i.jsx)("h2",{className:"ErrorDisplay-module__errorTitle--P8tnN",children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==g?(o=g.map(d),f[3]=g,f[4]=o):o=f[4],f[5]!==n||f[6]!==o?(c=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorNotice--Ey4vJ",children:[n,o]}),f[5]=n,f[6]=o,f[7]=c):c=f[7],f[8]!==v||f[9]!==y?(u=!v&&y&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:y,children:"Try to fix it"}),f[8]=v,f[9]=y,f[10]=u):u=f[10],f[11]!==p||f[12]!==u?(m=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorActions--NW0lt",children:[p,u]}),f[11]=p,f[12]=u,f[13]=m):m=f[13],f[14]!==c||f[15]!==m?(h=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorContainer--r2xoZ",children:[t,c,m]}),f[14]=c,f[15]=m,f[16]=h):h=f[16],h}function d(e){return(0,i.jsx)("p",{className:"ErrorDisplay-module__errorText--c4NUQ",children:e},e)}try{o.displayName||(o.displayName="ErrorDisplay")}catch{}},11267:(e,t,n)=>{n.d(t,{U:()=>eq});var i=n(74848),a=n(21728),s=n(82595),r=n(894),l=n(75202),o=n(91747),d=n(61526),c=n(38621),u=n(11196),m=n(94236),h=n(5524),f=n(34164),p=n(96540),g=n(2635),y=n(33592),x=n(53419),v=n(26108),b=n(81960),_=n(40090),j=n(40961),w=n(25641),N=n(18878);function C({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,y.b)(),{threads:r}=(0,g.Pk)(),l=(0,p.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],l=[],o=[];for(let d of e)d.date.toDateString()===t.toDateString()?s.push(d):d.date.toDateString()===n.toDateString()?r.push(d):d.date>i?l.push(d):d.date>a&&o.push(d);return{Today:s,Yesterday:r,"Last 7 days":l,"Last 30 days":o}}(l),d=0===l.length,c=(0,p.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:(0,f.$)("ConversationListV2-module__container--DfLLE",a&&"ConversationListV2-module__condensed--vCbJZ"),children:d&&("loading"===t||"pending"===t)?(0,i.jsx)(_.r,{lines:5}):d?(0,i.jsx)(I,{}):(0,i.jsxs)("div",{className:"ConversationListV2-module__section--G3Lm1",children:[(0,i.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${c}_${t}`,className:"ConversationListV2-module__title--VKD9S",children:t}),(0,i.jsx)("ul",{className:"ConversationListV2-module__list--N8p2i",children:a.map(t=>(0,i.jsx)(S,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function S({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,u]=(0,p.useState)(!1),f=(0,p.useCallback)(()=>u(!0),[]),g=(0,p.useCallback)(()=>u(!1),[]),y=a.get(t),b=!!y?.customCopilotID,_=(0,p.useRef)(null),w=(0,p.useCallback)(()=>{(0,j.flushSync)(()=>l(null)),_.current?.focus()},[_]);return e.href&&(0,i.jsxs)("li",{className:"ConversationListV2-module__item--cPXI6",children:[(0,i.jsx)(d.N_,{className:"ConversationListV2-module__link--J46j6",to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:"ConversationListV2-module__text--IsNRP",children:e.text})}),(0,i.jsx)("span",{className:"ConversationListV2-module__context--a0pCE",children:(0,i.jsxs)(m.W,{anchorRef:_,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(N.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!b,threadName:e.text,threadId:e.id})})})]})}),(0,i.jsx)(N.p,{visibleDialog:r,onClose:w,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:f,onFinishLoading:g,returnFocusRef:_})]},e.id)}function I(){return(0,i.jsxs)("div",{className:"ConversationListV2-module__empty--4TgQY",children:[(0,i.jsx)(b.A,{as:"h3",className:"ConversationListV2-module__emptyStateHeading--KkuQU",children:"No chats yet"}),(0,i.jsx)("span",{className:"ConversationListV2-module__emptyStateText--LsdKG",children:"Ask Copilot anything on the right to start your first chat."})]})}try{C.displayName||(C.displayName="ConversationList")}catch{}try{S.displayName||(S.displayName="ConversationListEntry")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}var k=n(69599),L=n(10422);let T="SidebarListItem-module__link--_g1X4",E="SidebarListItem-module__linkWithSecondaryText--dmh3S";function D(e){let t,n,s,r,l,o,c,u,m,h=(0,a.c)(27),{href:p,text:g,isSelected:y,trailingAction:x,onClick:v,className:b,leadingVisual:_,secondaryText:j}=e,w=!!j;h[0]!==_?(t=_&&(0,i.jsx)("span",{className:(0,f.$)("SidebarListItem-module__statusIcon--Oc8Sk"),children:(0,i.jsx)(_,{})}),h[0]=_,h[1]=t):t=h[1],h[2]!==g?(n=(0,i.jsx)("span",{children:g}),h[2]=g,h[3]=n):n=h[3],h[4]!==t||h[5]!==n?(s=(0,i.jsxs)("div",{className:"SidebarListItem-module__topLine--ATLSE",children:[t,n]}),h[4]=t,h[5]=n,h[6]=s):s=h[6],h[7]!==j?(r=!!j&&(0,i.jsxs)("p",{className:"SidebarListItem-module__secondaryText--ZgXnc",children:[j," "]}),h[7]=j,h[8]=r):r=h[8],h[9]!==s||h[10]!==r?(l=(0,i.jsxs)("div",{className:"SidebarListItem-module__content--sAGuS",children:[s,r]}),h[9]=s,h[10]=r,h[11]=l):l=h[11];let N=l;return h[12]!==b?(o=(0,f.$)("SidebarListItem-module__item--x3BBP",b),h[12]=b,h[13]=o):o=h[13],h[14]!==N||h[15]!==w||h[16]!==p||h[17]!==y||h[18]!==v?(c=""===p?(0,i.jsx)("div",{className:(0,f.$)(T,{[E]:w}),children:N}):(0,i.jsx)(d.N_,{className:(0,f.$)(T,{[E]:w}),to:p,"aria-current":y?"page":void 0,onClick:v,children:N}),h[14]=N,h[15]=w,h[16]=p,h[17]=y,h[18]=v,h[19]=c):c=h[19],h[20]!==x?(u=x?(0,i.jsx)("span",{className:"SidebarListItem-module__trailingAction--S8yi9",children:x}):null,h[20]=x,h[21]=u):u=h[21],h[22]!==y||h[23]!==o||h[24]!==c||h[25]!==u?(m=(0,i.jsxs)("li",{className:o,"data-selected":y,children:[c,u]}),h[22]=y,h[23]=o,h[24]=c,h[25]=u,h[26]=m):m=h[26],m}try{D.displayName||(D.displayName="SidebarListItem")}catch{}function R(e){let t,n,s,r=(0,a.c)(10),{children:l,isCondensed:o,"aria-label":d,className:c}=e,u=void 0===d?"Navigation":d,m=(0,p.useId)(),h=`${m}-navigation`,g=o&&"SidebarNavigation-module__condensed--FtKTo";return r[0]!==c||r[1]!==g?(t=(0,f.$)("SidebarNavigation-module__container--XJoVm",g,c),r[0]=c,r[1]=g,r[2]=t):t=r[2],r[3]!==l?(n=(0,i.jsx)("div",{className:"SidebarNavigation-module__scrollingContainer--ny4XP",children:(0,i.jsx)("div",{className:"SidebarNavigation-module__section--IspfT",children:l})}),r[3]=l,r[4]=n):n=r[4],r[5]!==u||r[6]!==h||r[7]!==t||r[8]!==n?(s=(0,i.jsx)("nav",{"aria-label":u,id:h,tabIndex:-1,className:t,children:n}),r[5]=u,r[6]=h,r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function A(e){let t,n,s,r=(0,a.c)(12),{title:l,children:o,isLoading:d,isEmpty:c,viewMoreLink:u,trailingAction:m}=e,h=(0,p.useId)();return r[0]!==h||r[1]!==l||r[2]!==m?(t=l&&(0,i.jsxs)("div",{className:"SidebarNavigation-module__titleContainer--oAM2L",children:[(0,i.jsx)("h4",{id:h,className:"SidebarNavigation-module__title--aV4qO",children:l}),m||null]}),r[0]=h,r[1]=l,r[2]=m,r[3]=t):t=r[3],r[4]!==o||r[5]!==c||r[6]!==d||r[7]!==u?(n=c&&d?(0,i.jsx)(_.r,{lines:5}):c?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:"SidebarNavigation-module__list--bB1nv",children:o}),u]}),r[4]=o,r[5]=c,r[6]=d,r[7]=u,r[8]=n):n=r[8],r[9]!==t||r[10]!==n?(s=(0,i.jsxs)("div",{className:"SidebarNavigation-module__sectionContainer--KRNn6",children:[t,n]}),r[9]=t,r[10]=n,r[11]=s):s=r[11],s}try{R.displayName||(R.displayName="SidebarNavigation")}catch{}try{A.displayName||(A.displayName="SidebarSection")}catch{}var O=n(97189),P=n(76977),F=n(93654),M=n(47723),$=n(95254),B=n(62189);let V="TaskList-module__dotFillIcon--x5Tte";function U(e){let t,n=(0,a.c)(5),{viewAllLink:s,showTitle:r,trailingAction:l,onTaskClick:o}=e;return n[0]!==o||n[1]!==r||n[2]!==l||n[3]!==s?(t=(0,i.jsx)(O.Fn,{children:(0,i.jsx)(q,{viewAllLink:s,showTitle:r,trailingAction:l,onTaskClick:o})}),n[0]=o,n[1]=r,n[2]=l,n[3]=s,n[4]=t):t=n[4],t}function q(e){let t,n,s,r,l,o,c,u,m,h=(0,a.c)(26),{viewAllLink:f,showTitle:p,trailingAction:g,onTaskClick:y}=e,x=(0,d.zy)(),{tasks:v,isLoading:b}=(0,F.si)();if((0,P._)(),h[0]!==b||h[1]!==x||h[2]!==y||h[3]!==p||h[4]!==v||h[5]!==g){let e,a=v.filter(G).slice(0,5);n=0===a.length,t=A,s=p?"Agent sessions":void 0,r=n,l=b,o=g,h[13]!==x||h[14]!==y?(e=e=>{let t=(0,B.U)(e.resource_global_id),n=x.pathname===t;return(0,i.jsx)(H,{task:e,href:t,isSelected:n,secondaryText:e.nwo??e.pull?.repository_nwo??"Initializing...",onTaskClick:y},e.resource_id)},h[13]=x,h[14]=y,h[15]=e):e=h[15],c=a.map(e),h[0]=b,h[1]=x,h[2]=y,h[3]=p,h[4]=v,h[5]=g,h[6]=t,h[7]=n,h[8]=s,h[9]=r,h[10]=l,h[11]=o,h[12]=c}else t=h[6],n=h[7],s=h[8],r=h[9],l=h[10],o=h[11],c=h[12];h[16]!==t||h[17]!==s||h[18]!==r||h[19]!==l||h[20]!==o||h[21]!==c?(u=(0,i.jsx)(t,{title:s,isEmpty:r,isLoading:l,trailingAction:o,children:c}),h[16]=t,h[17]=s,h[18]=r,h[19]=l,h[20]=o,h[21]=c,h[22]=u):u=h[22];let _=!n&&f;return h[23]!==u||h[24]!==_?(m=(0,i.jsxs)(i.Fragment,{children:[u,_]}),h[23]=u,h[24]=_,h[25]=m):m=h[25],m}function G(e){var t;return!(t=e).pull||"merged"!==t.pull.state&&"closed"!==t.pull.state}function H(e){let t,n,s,r,l,o,d,u,f,g,y=(0,a.c)(27),{task:b,href:_,isSelected:j,secondaryText:w,onTaskClick:N}=e,C=(0,p.useRef)(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,k.G7)("copilot_immersive_task_hyperlinking"),y[0]=t):t=y[0];let S=t;y[1]!==b.pull?(n=()=>{(0,x.BI)("dotcom_chat.activate",{target:"TASK_ACTION_VIEW_PR",mode:"immersive"}),b.pull?.url&&(window.location.href=b.pull.url)},y[1]=b.pull,y[2]=n):n=y[2];let I=n;y[3]!==b.event_identifiers?(s=()=>{(0,x.BI)("dotcom_chat.activate",{target:"TASK_ACTION_GO_TO_CONVERSATION",mode:"immersive"});let e=(0,$.L)(b.event_identifiers);e&&(window.location.href=`/copilot/c/${e}`)},y[3]=b.event_identifiers,y[4]=s):s=y[4];let T=s;y[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{icon:c.KebabHorizontalIcon,"aria-label":"Manage session",variant:"invisible",onClick:K})}),y[5]=r):r=y[5],y[6]!==I?(l=(0,i.jsx)(h.l.Item,{onSelect:I,children:"View pull request"}),y[6]=I,y[7]=l):l=y[7],y[8]!==T||y[9]!==b.event_type?(o=b.event_type===M.qY&&S&&(0,i.jsx)(h.l.Item,{onSelect:T,children:"Go to parent conversation"}),y[8]=T,y[9]=b.event_type,y[10]=o):o=y[10],y[11]!==l||y[12]!==o?(d=(0,i.jsxs)(m.W,{anchorRef:C,children:[r,(0,i.jsx)(m.W.Overlay,{children:(0,i.jsxs)(h.l,{children:[l,o]})})]}),y[11]=l,y[12]=o,y[13]=d):d=y[13];let E=d,R=b.isOptimistic?b.problemStatement:b.pull.title;return y[14]!==b?(u=()=>(function(e){let t=e.latest_session_state,n=e.pull?.state??"unknown";if("queued"===t)return(0,i.jsx)(c.ClockIcon,{className:"TaskList-module__clockIcon--kx3d1"});if("open"===n){if("waiting_for_user"===t||"completed"===t)return(0,i.jsx)(c.CheckCircleFillIcon,{className:"TaskList-module__checkCircleIcon--fj_E_"});if("failed"===t||"timed_out"===t)return(0,i.jsx)(c.StopIcon,{className:"TaskList-module__stopIcon--O5nlX"});if("in_progress"===t)return(0,i.jsx)(L.gX,{animated:!0});if("idle"===t)return(0,i.jsx)(c.DotFillIcon,{className:V});if("cancelled"===t)return(0,i.jsx)(c.SkipIcon,{className:"TaskList-module__skipIcon--niuIE"})}return(0,i.jsx)(c.DotFillIcon,{className:V})})(b),y[14]=b,y[15]=u):u=y[15],y[16]!==N||y[17]!==b.resource_global_id?(f=()=>{N?.(),(0,x.BI)("agent_sessions.task_view",{target:"VIEW_TASK_FROM_MISSION_CONTROL",task_id:b.resource_global_id})},y[16]=N,y[17]=b.resource_global_id,y[18]=f):f=y[18],y[19]!==_||y[20]!==j||y[21]!==w||y[22]!==f||y[23]!==R||y[24]!==u||y[25]!==E?(g=(0,i.jsx)(D,{href:_,text:R,leadingVisual:u,isSelected:j,trailingAction:E,secondaryText:w,onClick:f}),y[19]=_,y[20]=j,y[21]=w,y[22]=f,y[23]=R,y[24]=u,y[25]=E,y[26]=g):g=y[26],g}function K(){return(0,x.BI)("dotcom_chat.activate",{target:"TASK_CONTEXT_MENU",mode:"immersive"})}try{U.displayName||(U.displayName="TasksListWrapper")}catch{}try{q.displayName||(q.displayName="TasksList")}catch{}try{H.displayName||(H.displayName="TaskListEntry")}catch{}var W=n(61282),z=n(11607),Q=n(77999),Z=n(62421);function J({handleSidebarClick:e,title:t,trailingAction:n}){let a=(0,d.zy)().pathname.includes("/share/"),{threadsLoading:s,selectedThreadID:r,threads:l}=(0,g.bP)("threadsLoading","selectedThreadID","threads"),o=(0,y.b)(),c=(0,p.useMemo)(()=>o.sortAndFilterThreads(l).map(e=>({id:e.id,text:(0,w.CB)(e),href:`${w.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[l,o]),u=0===c.length,m="loading"===s.state||"pending"===s.state;return(0,i.jsx)(A,{title:t,isEmpty:u,isLoading:m,trailingAction:n,children:c.map(t=>(0,i.jsx)(Y,{item:t,selectedItemId:a?void 0:r??void 0,onSelect:e,threads:l},t.id))})}function Y({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,d]=(0,p.useState)(!1),u=(0,p.useCallback)(()=>d(!0),[]),f=(0,p.useCallback)(()=>d(!1),[]),g=a.get(t),y=!!g?.customCopilotID,b=(0,p.useRef)(null),_=(0,p.useCallback)(()=>{(0,j.flushSync)(()=>l(null)),b.current?.focus()},[b]),w=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.W,{anchorRef:b,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(N.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!y,threadName:e.text,threadId:e.id})})})]}),(0,i.jsx)(N.p,{visibleDialog:r,onClose:_,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:u,onFinishLoading:f,returnFocusRef:b})]});return(0,i.jsx)(D,{href:e.href,text:e.text,isSelected:s,trailingAction:w,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}function X({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let[a,s]=(0,p.useState)(!1),r=(0,Z.G)(),l=(0,p.useCallback)(()=>{t&&n()},[t,n]),o=(0,p.useCallback)(()=>s(!1),[]),d=(0,p.useCallback)(async()=>{t?o():e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"})},[e,r,t,o]),u=(0,i.jsx)(W.V,{isIconButton:!0,icon:c.PlusIcon,label:"New agent session",onOpen:()=>(0,x.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"}),onClose:l,eventType:"activity_panel",size:"small",tooltipDirection:"e",variant:"invisible"}),h=()=>(0,i.jsxs)(R,{isCondensed:!1,"aria-label":"Navigation",children:[(0,i.jsx)(U,{showTitle:!0,trailingAction:u,onTaskClick:t?o:void 0}),(0,i.jsx)(J,{title:"Chats",trailingAction:(0,i.jsx)(v.K,{icon:c.PlusIcon,variant:"invisible","aria-label":"New chat",size:"small",tooltipDirection:"e",onClick:d}),handleSidebarClick:e})]});return t?(0,i.jsx)("div",{className:"ActivityPanel-module__compactContainer--KLMAT",children:(0,i.jsxs)("div",{className:"ActivityPanel-module__compactAgentsMenu--MWK7t",children:[(0,i.jsxs)(m.W,{open:a,onOpenChange:s,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(Q.m,{text:"Agent sessions and chats",children:(0,i.jsx)(z.$,{"aria-label":"Agent sessions and chats",icon:(0,i.jsx)(c.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(m.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:"ActivityPanel-module__overlay--OZPYs",children:(0,i.jsx)("div",{children:h()})})]}),(0,i.jsx)("div",{className:"ActivityPanel-module__largeButton--NUegB",children:u})]})}):h()}try{J.displayName||(J.displayName="ConversationListWrapper")}catch{}try{Y.displayName||(Y.displayName="ConversationListEntry")}catch{}try{X.displayName||(X.displayName="ActivityPanel")}catch{}let ee="CopilotNavigation-module__toggleButtonIcon--__j1B",et="CopilotNavigation-module__footerButton--RlFpZ",en="CopilotNavigation-module__footerButtonContent--mIARB",ei="CopilotNavigation-module__condensed--TzlR_",ea="CopilotNavigation-module__footerButtonIcon--VWrey";var es=n(84646),er=n(49851),el=n(26607),eo=n(27359),ed=n(47789),ec=n(23657);let eu="ServiceList-module__link--VJdHH",em="ServiceList-module__content--k6BSj",eh="ServiceList-module__textWrapper--jtpsQ",ef="ServiceList-module__text--DxTKY",ep="ServiceList-module__label--eTRas",eg="ServiceList-module__condensed--x5s6A";function ey({"aria-current":e,"data-analytics-event":t,href:n,icon:a,onLinkClick:r,id:l,displayName:o,condensed:u,label:m,external:h}){let p=h?(0,i.jsxs)("a",{href:n,className:eu,"aria-label":o,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(em,u&&eg),children:[(0,i.jsx)("div",{className:eh,children:(0,i.jsx)("div",{className:ef,children:o})}),(0,i.jsx)("div",{className:ep,children:(0,i.jsxs)("div",{className:"ServiceList-module__externalLabel--P9mcb",children:[(0,i.jsx)("span",{className:"ServiceList-module__previewLabel--JWC5Z",children:m}),(0,i.jsx)(c.ArrowUpRightIcon,{className:"ServiceList-module__externalIcon--lTFBq"})]})})]})]}):(0,i.jsxs)(d.N_,{to:n,...{"aria-current":e,"data-analytics-event":t,className:eu,onClick:e=>{r?.(e,l)}},"aria-label":o,children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(em,u&&eg),children:[(0,i.jsx)("div",{className:eh,children:(0,i.jsx)("div",{className:ef,children:o})}),(0,i.jsx)("div",{className:ep,children:m})]})]});return(0,i.jsx)("li",{className:"ServiceList-module__section--k1uLc",children:(0,i.jsx)("div",{className:"ServiceList-module__item--fn806",children:(0,i.jsx)(Q.m,{text:u?o:"",children:p})})})}let ex=JSON.stringify({source:"ServiceList"});function ev({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,g.Pk)(),a=(0,eo.v)()?.id,s=(0,ed.qw)(),r=(0,Z.G)(),l=(0,es.BV)(),o=(0,ec.mM)(),d=!n&&!a&&!o,c=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},u=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),m=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),h=!(0,k.G7)("copilot_spaces_ga"),f=(0,p.useMemo)(()=>[...l?[{type:"spaces",component:(0,i.jsx)(ey,{"aria-current":o?"page":void 0,"data-analytics-event":ex,displayName:"Spaces",href:w.VR,icon:er.Dy,condensed:t,id:"spaces",onLinkClick:u,label:h&&(0,i.jsx)(el.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(ey,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":ex,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:m,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[l,o,t,u,h,s,a,m]);return(0,i.jsxs)("ul",{className:"ServiceList-module__list--nR74A",children:[(0,i.jsx)(ey,{"aria-current":d?"page":void 0,"data-analytics-event":ex,displayName:"New chat",href:w.Jz,icon:er.KJ,condensed:t,id:"home",onLinkClick:c}),f.map(e=>e.component)]})}try{ey.displayName||(ey.displayName="ServiceListItem")}catch{}try{ev.displayName||(ev.displayName="ServiceList")}catch{}var eb=n(77430),e_=n(84268),ej=n(51213),ew=n(98755),eN=n(71315),eC=n(15220),eS=n(46251),eI=n(69726),ek=n(76720),eL=n(10006),eT=n(3803);let eE="ManageSharedConversationsDialog-module__mutedText--_uOci";var eD=n(21373),eR=n(20139);let eA=e=>{let t,n,s,r,l,o,d,c,u,m,h,f,v,b,_,j,w,N,C,S,I=(0,a.c)(60),{closeDialog:k,threadId:L}=e,T=(0,g.Pk)(),E=(0,y.b)(),{selectedThreadID:D,ssoOrganizations:R,apiUrl:A,threads:O}=T,[P,F]=(0,p.useState)(T.messages);I[0]!==L||I[1]!==O?(t=()=>{let e=O.get(L);return e?.sharedID||""},I[0]=L,I[1]=O,I[2]=t):t=I[2];let[M,$]=(0,p.useState)(t),B=(0,p.useRef)(""!==M),V=(0,p.useRef)("");I[3]!==P||I[4]!==M||I[5]!==T.apiUrl||I[6]!==T.ssoOrganizations||I[7]!==L?(n=()=>{let e=async()=>{if(0===P.filter(e=>e.threadID===L).length){let e=new eR.k(T.apiUrl,T.ssoOrganizations),t=await e.listSharedThreadMessages(M);t.ok&&F(t.payload.messages)}};V.current!==M&&M&&(V.current=M,e())},s=[M,L,P,T.apiUrl,T.ssoOrganizations],I[3]=P,I[4]=M,I[5]=T.apiUrl,I[6]=T.ssoOrganizations,I[7]=L,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,p.useEffect)(n,s),I[10]!==D||I[11]!==L||I[12]!==O?(r=O.get(L||D),I[10]=D,I[11]=L,I[12]=O,I[13]=r):r=I[13];let U=r,q=P[P.length-1],G=q?.content||"";I[14]!==D||I[15]!==L||I[16]!==O?(l=()=>{let e=L||D;if(e){let t=O.get(e);$(t?.sharedID||"")}},I[14]=D,I[15]=L,I[16]=O,I[17]=l):l=I[17],I[18]!==E||I[19]!==D||I[20]!==L||I[21]!==O?(o=[E,$,D,O,L],I[18]=E,I[19]=D,I[20]=L,I[21]=O,I[22]=o):o=I[22],(0,p.useEffect)(l,o),I[23]!==A||I[24]!==k||I[25]!==E||I[26]!==D||I[27]!==M||I[28]!==R||I[29]!==L?(d=async()=>{let e=L||D,t=new eR.k(A,R),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;E.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),B.current=!1,k(),(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:M})}},I[23]=A,I[24]=k,I[25]=E,I[26]=D,I[27]=M,I[28]=R,I[29]=L,I[30]=d):d=I[30];let H=d;I[31]!==k?(c=()=>{k()},I[31]=k,I[32]=c):c=I[32];let K=c;I[33]!==H||I[34]!==M?(u=()=>{if(M)return(0,i.jsx)(eD.Q,{onClick:H,variant:"danger",children:"Unshare"})},I[33]=H,I[34]=M,I[35]=u):u=I[35];let W=u;I[36]!==k?(m=()=>(0,i.jsx)(eD.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let z=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=h):h=I[38];let Q=U?.name||"";return I[39]!==Q?(f=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadTitle--eBgrX",children:Q}),I[39]=Q,I[40]=f):f=I[40],I[41]!==G?(v=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadDescription--E1H0T",children:G}),I[41]=G,I[42]=v):v=I[42],I[43]!==f||I[44]!==v?(b=(0,i.jsxs)(eS.B,{direction:"vertical",className:"UnshareConversationDialog-module__threadInfoStack--gcf6y",children:[f,v]}),I[43]=f,I[44]=v,I[45]=b):b=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=_):_=I[46],I[47]!==z?(j=z(),I[47]=z,I[48]=j):j=I[48],I[49]!==W?(w=W(),I[49]=W,I[50]=w):w=I[50],I[51]!==j||I[52]!==w?(N=(0,i.jsxs)(eS.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:"UnshareConversationDialog-module__buttonStack--JvbNF",children:[j,w]}),I[51]=j,I[52]=w,I[53]=N):N=I[53],I[54]!==b||I[55]!==N?(C=(0,i.jsxs)("div",{className:"UnshareConversationDialog-module__container--Tc1R_",children:[h,b,_,N]}),I[54]=b,I[55]=N,I[56]=C):C=I[56],I[57]!==K||I[58]!==C?(S=(0,i.jsx)(eC.l,{title:"Unshare conversation",onClose:K,width:"large",children:C}),I[57]=K,I[58]=C,I[59]=S):S=I[59],S};try{eA.displayName||(eA.displayName="UnshareConversationDialog")}catch{}let eO=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},eP=({closeDialog:e,returnFocusRef:t})=>{let n=(0,y.b)(),a=(0,g.Pk)(),[s,r]=(0,p.useState)(0),[l,o]=(0,p.useState)([]),[d,u]=(0,p.useState)(!0),[m,h]=(0,p.useState)(!1),[f,b]=(0,p.useState)(null),[_,j]=(0,p.useState)(!1),[w,N]=(0,p.useState)(5>l.length),C=5*s,S=l.slice(C,C+5);(0,p.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eO(e.updatedAt),sharedUrl:`${eN.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eN.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,p.useEffect)(()=>{w&&s>0&&l.length<=5*s&&r(0);let e=5<l.length;e!==w&&N(e)},[l,s,5,w]);let I=(0,p.useCallback)(()=>{e()},[e]),k=(0,p.useCallback)(async()=>{if(!_)return void j(!0);j(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{u(!1)}},[_,n]),L=async()=>{h(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New chat",lastUpdated:eO(e.updatedAt),sharedUrl:`${eN.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eN.fV.origin}/copilot/c/${e.id}`}))),u(!1)},T=d||"error"===a.sharedThreadsLoading.state||0===l.length,E=(0,p.useMemo)(()=>{if(!l.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{_?k():j(!0)}};return _?[{buttonType:"default",content:"Cancel",onClick:()=>j(!1)},e]:[e]},[l.length,_,k]),D=(0,p.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,a.sharedThreadsLoading.state]);return(0,i.jsxs)(eC.l,{title:"Manage shared conversations",width:"xlarge",className:"ManageSharedConversationsDialog-module__dialog--_C8sX",position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>{var e;return E?.length?(0,i.jsx)(eC.l.Footer,{className:"ManageSharedConversationsDialog-module__footer--aTXFp",children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__footerContent--yVU91",children:[(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",children:_&&(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__confirmationText--tYQ41 ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",children:1===(e=l.length)?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`})}),(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerRight--n1XJG",children:(0,i.jsx)(eC.l.Buttons,{buttons:E})})]})}):null},children:[T?(0,i.jsxs)(ek.E,{children:[(0,i.jsx)(ek.E.Visual,{children:D.isSpinner?(0,i.jsx)(eS.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(eI.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:eE,children:"error"===D.result?(0,i.jsx)(c.AlertIcon,{size:"medium",className:"ManageSharedConversationsDialog-module__alertIcon--mA28C","aria-label":"Error loading shared conversations"}):(0,i.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(ek.E.Heading,{children:D.heading}),(0,i.jsx)(ek.E.Description,{children:D.description})]}):(0,i.jsxs)(eL.X.Container,{children:[(0,i.jsx)(eT.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Chat",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(e_.A,{href:e.threadUrl,className:"ManageSharedConversationsDialog-module__conversationLink--JqMKE",children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:eE,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__actionButtons--iuECd",children:[(0,i.jsx)(ew.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(v.K,{"aria-label":"Unshare chat",title:"Unshare chat",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),h(!0)}})]})})}],data:S}),l.length>5&&(0,i.jsx)(eL.X.Pagination,{"aria-label":"Shared chats pagination",pageSize:5,defaultPageIndex:s,totalCount:l.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&f&&(0,i.jsx)(eA,{threadId:f.id,closeDialog:L})]})};try{eP.displayName||(eP.displayName="ManageSharedConversationsDialog")}catch{}var eF=n(17005),eM=n(87255);let e$="UserMenu-module__userAvatar--sp40T";function eB(e){let t,n,s,r,l,o,d,u,y,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R,A=(0,a.c)(55),{isCondensed:O}=e,P=void 0!==O&&O,F=(0,p.useRef)(null),M=(0,p.useRef)(null),[$,B]=(0,p.useState)(!1),[V,U]=(0,p.useState)(!1),{currentUserLogin:q,plan:G,optedInToUserFeedback:H}=(0,g.bP)("currentUserLogin","plan","optedInToUserFeedback"),K=(0,ec.mM)();A[0]!==G?(t=function(e){switch(e){case ej.UH.IndividualFree:return"Free";case ej.UH.IndividualPro:return"Pro";case ej.UH.IndividualProPlus:return"Pro+";case ej.UH.Business:return"Business";case ej.UH.Enterprise:return"Enterprise";default:return"Free"}}(G),A[0]=G,A[1]=t):t=A[1];let W=`Copilot ${t}`,z=!G||G===ej.UH.IndividualFree,Q=P&&"UserMenu-module__condensed--rjzRR";A[2]!==Q?(n=(0,f.$)("UserMenu-module__userButton--FuXsC",Q),A[2]=Q,A[3]=n):n=A[3];let Z=P?"user":void 0,J=`/${q}.png`;A[4]!==J?(s=(0,i.jsx)("div",{className:e$,children:(0,i.jsx)(eb.r,{src:J,size:24})}),A[4]=J,A[5]=s):s=A[5],A[6]!==W?(r=(0,i.jsx)("div",{className:"UserMenu-module__planLabel--wfY7B",children:W}),A[6]=W,A[7]=r):r=A[7],A[8]!==q||A[9]!==r?(l=(0,i.jsxs)("div",{className:"UserMenu-module__userContent--jXldm",children:[q,r]}),A[8]=q,A[9]=r,A[10]=l):l=A[10],A[11]!==n||A[12]!==Z||A[13]!==s||A[14]!==l?(o=(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:n,"aria-label":Z,children:[s,l]})}),A[11]=n,A[12]=Z,A[13]=s,A[14]=l,A[15]=o):o=A[15];let Y=`/${q}.png`;return A[16]!==Y?(d=(0,i.jsx)("div",{className:e$,children:(0,i.jsx)(eb.r,{src:Y,size:32})}),A[16]=Y,A[17]=d):d=A[17],A[18]!==q?(u=(0,i.jsx)("div",{className:"UserMenu-module__username--n5Tln",children:q}),A[18]=q,A[19]=u):u=A[19],A[20]!==z?(y=z&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(e_.A,{onClick:eU,href:"https://github.com/github-copilot/pro",className:"UserMenu-module__upgradeLink--eI332",children:"Upgrade"})]}),A[20]=z,A[21]=y):y=A[21],A[22]!==W||A[23]!==y?(v=(0,i.jsxs)("span",{className:"UserMenu-module__description--FvI5s",children:[W,y]}),A[22]=W,A[23]=y,A[24]=v):v=A[24],A[25]!==u||A[26]!==v?(b=(0,i.jsxs)("div",{className:"UserMenu-module__userDetails--mes1V",children:[u,v]}),A[25]=u,A[26]=v,A[27]=b):b=A[27],A[28]!==d||A[29]!==b?(_=(0,i.jsxs)("div",{className:"UserMenu-module__menuItem--oXBxi",children:[d,b]}),A[28]=d,A[29]=b,A[30]=_):_=A[30],A[31]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(h.l.Divider,{}),A[31]=j):j=A[31],A[32]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{U(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},A[32]=w):w=A[32],A[33]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsxs)(h.l.Item,{onSelect:w,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),A[33]=N):N=A[33],A[34]!==K?(C=!K&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{B(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),A[34]=K,A[35]=C):C=A[35],A[36]!==H?(S=H&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{M.current?.openDialog(),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.CommentIcon,{})}),"Give feedback"]}),A[36]=H,A[37]=S):S=A[37],A[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsxs)(h.l.LinkItem,{href:"/settings/copilot",onClick:eV,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.GearIcon,{})}),"Settings"]}),A[38]=I):I=A[38],A[39]!==_||A[40]!==C||A[41]!==S?(k=(0,i.jsx)(m.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(h.l,{children:[_,j,N,C,S,I]})}),A[39]=_,A[40]=C,A[41]=S,A[42]=k):k=A[42],A[43]!==o||A[44]!==k?(L=(0,i.jsxs)(m.W,{anchorRef:F,children:[o,k]}),A[43]=o,A[44]=k,A[45]=L):L=A[45],A[46]===Symbol.for("react.memo_cache_sentinel")?(T=(0,i.jsx)(eF.l,{ref:M,mode:"immersive",returnFocusRef:F}),A[46]=T):T=A[46],A[47]!==$?(E=$&&(0,i.jsx)(eP,{closeDialog:()=>{B(!1)},returnFocusRef:F}),A[47]=$,A[48]=E):E=A[48],A[49]!==V?(D=V&&(0,i.jsx)(eM.Y,{onDismiss:()=>U(!1),returnFocusRef:F}),A[49]=V,A[50]=D):D=A[50],A[51]!==L||A[52]!==E||A[53]!==D?(R=(0,i.jsxs)(i.Fragment,{children:[L,T,E,D]}),A[51]=L,A[52]=E,A[53]=D,A[54]=R):R=A[54],R}function eV(){return(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}function eU(){(0,x.BI)("dotcom_chat.activate",{target:"UPGRADE_USER_MENU_LINK",mode:"immersive"})}try{eB.displayName||(eB.displayName="UserMenu")}catch{}function eq(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:l,toggleSidebar:o}=(0,r.L)();return t[0]!==l||t[1]!==n||t[2]!==s||t[3]!==o?(e=(0,i.jsx)(eH,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:l,onToggleSidebar:o}),t[0]=l,t[1]=n,t[2]=s,t[3]=o,t[4]=e):e=t[4],e}function eG(e){let t,n=(0,a.c)(6),{children:s,showTooltip:r,text:l,direction:o}=e,d=void 0===o?"e":o;if(!r){let e;return n[0]!==s?(e=(0,i.jsx)(i.Fragment,{children:s}),n[0]=s,n[1]=e):e=n[1],e}return n[2]!==s||n[3]!==d||n[4]!==l?(t=(0,i.jsx)(u.m,{text:l,direction:d,children:s}),n[2]=s,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}function eH(e){let t,n,r,u,x,v,b,_,j,w,N,S,I,k,L,T,E=(0,a.c)(47),{onSidebarClick:D,onToggleSidebar:R,sidebarExpanded:A,sidebarFloating:O,sidebarVisible:P}=e,F=!O&&!A,M=(0,y.b)(),{threadsLoading:$,threads:B,selectedThreadID:V,ssoOrganizations:U,agentsEnabled:q}=(0,g.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),G=(0,d.zy)(),H=G.pathname.includes("/share/");E[0]!==M||E[1]!==B.size||E[2]!==$.state?(t=()=>{0===B.size&&"pending"===$.state&&M.fetchThreads()},n=[B.size,M,$.state],E[0]=M,E[1]=B.size,E[2]=$.state,E[3]=t,E[4]=n):(t=E[3],n=E[4]),(0,p.useEffect)(t,n),E[5]!==D||E[6]!==P||E[7]!==R?(r=()=>{D?.(),P&&R()},E[5]=D,E[6]=P,E[7]=R,E[8]=r):r=E[8];let K=r,W=(0,p.useId)();E[9]!==G.hash||E[10]!==G.pathname||E[11]!==G.search?(u=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=G.pathname+G.search+G.hash;return`${t}?return_to=${encodeURIComponent(n)}`},E[9]=G.hash,E[10]=G.pathname,E[11]=G.search,E[12]=u):u=E[12];let z=u;E[13]!==F||E[14]!==R?(x=()=>(0,i.jsx)(eG,{showTooltip:F,text:"Expand sidebar",children:(0,i.jsxs)("button",{className:et,"aria-label":F?"Expand sidebar":"Collapse sidebar",onClick:R,children:[F?(0,i.jsx)(c.SidebarCollapseIcon,{size:16,className:ee}):(0,i.jsx)(c.SidebarExpandIcon,{size:16,className:ee}),(0,i.jsx)("span",{className:(0,f.$)(en,F&&ei),children:"Collapse"})]})}),E[13]=F,E[14]=R,E[15]=x):x=E[15];let Q=x;E[16]!==z||E[17]!==F||E[18]!==U?(v=()=>{if(0===U.length)return null;if(1===U.length){let e=U[0];return(0,i.jsx)(eG,{showTooltip:F,text:"Single sign-on",children:(0,i.jsxs)("a",{href:z(e.login),className:et,children:[(0,i.jsx)(c.ShieldLockIcon,{size:16,className:ea}),(0,i.jsx)("span",{className:(0,f.$)(en,F&&ei),"aria-hidden":F,children:"Single sign-on"})]})})}return(0,i.jsx)(eG,{showTooltip:F,text:"Single sign-on",children:(0,i.jsx)("div",{children:(0,i.jsxs)(m.W,{children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:et,"aria-label":"Single sign-on",children:[(0,i.jsx)(s.I,{icon:c.ShieldLockIcon,size:16,className:ea}),(0,i.jsx)("div",{className:(0,f.$)(en,F&&ei),"aria-hidden":F,children:"Single sign-on"})]})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:U.map(e=>(0,i.jsx)(h.l.LinkItem,{href:z(e.login),children:e.login},e.login))})})]})})})},E[16]=z,E[17]=F,E[18]=U,E[19]=v):v=E[19];let Z=v;E[20]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eK,{}),E[20]=b):b=E[20];let J=`${W}-quick-links`,Y=`${W}-quick-links`;E[21]!==Y?(_=(0,i.jsx)("h3",{id:Y,className:"sr-only",children:"Quick links"}),E[21]=Y,E[22]=_):_=E[22],E[23]!==K||E[24]!==F?(j=(0,i.jsx)(ev,{isSidebarCondensed:F,toggleFloatingSidebar:K}),E[23]=K,E[24]=F,E[25]=j):j=E[25],E[26]!==_||E[27]!==j||E[28]!==J?(w=(0,i.jsxs)("nav",{"aria-labelledby":J,className:"CopilotNavigation-module__quicklinks--y91ru",children:[_,j]}),E[26]=_,E[27]=j,E[28]=J,E[29]=w):w=E[29];let es=(0,o.u)("copilot_swe_agent_progress_commands")&&q?(0,i.jsx)(X,{handleSidebarClick:K,isCondensed:F,onToggleSidebar:R}):(0,i.jsx)(C,{selectedItemID:H?null:V,loadingState:$.state,onConversationSelect:K,isSidebarCondensed:F});return E[30]!==w||E[31]!==es?(N=(0,i.jsxs)(l.t,{fallback:b,children:[w,es]}),E[30]=w,E[31]=es,E[32]=N):N=E[32],E[33]!==Q||E[34]!==O?(S=!O&&Q(),E[33]=Q,E[34]=O,E[35]=S):S=E[35],E[36]!==Z?(I=Z(),E[36]=Z,E[37]=I):I=E[37],E[38]!==F?(k=(0,i.jsx)(eB,{isCondensed:F}),E[38]=F,E[39]=k):k=E[39],E[40]!==S||E[41]!==I||E[42]!==k?(L=(0,i.jsxs)("div",{className:"CopilotNavigation-module__footer--WE0C5",children:[S,I,k]}),E[40]=S,E[41]=I,E[42]=k,E[43]=L):L=E[43],E[44]!==N||E[45]!==L?(T=(0,i.jsxs)(i.Fragment,{children:[N,L]}),E[44]=N,E[45]=L,E[46]=T):T=E[46],T}function eK(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"CopilotNavigation-module__blankslateContainer--nuX9Y",children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{eq.displayName||(eq.displayName="CopilotNavigationWithContext")}catch{}try{eG.displayName||(eG.displayName="ConditionalTooltip")}catch{}try{eH.displayName||(eH.displayName="CopilotNavigation")}catch{}try{eK.displayName||(eK.displayName="SidebarContentsFallback")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>d});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),l=n(61526);let o={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},d=(0,r.forwardRef)((e,t)=>{let n,r,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N=(0,a.c)(65);N[0]!==e?({size:m,variant:h,condensed:f,iconOnly:p,icon:c,className:r,children:n,disabled:d,...u}=e,N[0]=e,N[1]=n,N[2]=r,N[3]=d,N[4]=c,N[5]=u,N[6]=m,N[7]=h,N[8]=f,N[9]=p):(n=N[1],r=N[2],d=N[3],c=N[4],u=N[5],m=N[6],h=N[7],f=N[8],p=N[9]);let C=void 0===h?"default":h,S=void 0!==f&&f,I=void 0!==p&&p,k=o[void 0===m?"small":m],L=o[C],T=S&&o.condensed,E=I&&o.iconOnly,D=d&&o.disabled;N[10]!==r||N[11]!==k||N[12]!==L||N[13]!==T||N[14]!==E||N[15]!==D?(g=(0,s.$)(o.button,k,L,T,E,D,r),N[10]=r,N[11]=k,N[12]=L,N[13]=T,N[14]=E,N[15]=D,N[16]=g):g=N[16];let R=g;N[17]!==c?(y=null!=c?(0,i.jsx)("span",{className:o.icon,children:c}):null,N[17]=c,N[18]=y):y=N[18],N[19]!==n||N[20]!==I?(x=!I&&n?(0,i.jsx)("span",{className:o.text,children:n}):null,N[19]=n,N[20]=I,N[21]=x):x=N[21],N[22]!==y||N[23]!==x?(v=(0,i.jsxs)(i.Fragment,{children:[y,x]}),N[22]=y,N[23]=x,N[24]=v):v=N[24];let A=v;if("to"in u){let e,n,a,s;return N[25]!==u?({to:a,onClick:e,...n}=u,N[25]=u,N[26]=e,N[27]=n,N[28]=a):(e=N[26],n=N[27],a=N[28]),N[29]!==R||N[30]!==A||N[31]!==d||N[32]!==e||N[33]!==n||N[34]!==t||N[35]!==a?(s=(0,i.jsx)(l.N_,{ref:t,to:a,className:R,"aria-disabled":d,onClick:e,...n,children:A}),N[29]=R,N[30]=A,N[31]=d,N[32]=e,N[33]=n,N[34]=t,N[35]=a,N[36]=s):s=N[36],s}if("href"in u){let e,n,a,s,r,l;return N[37]!==u?({href:e,target:r,rel:a,onClick:n,...s}=u,N[37]=u,N[38]=e,N[39]=n,N[40]=a,N[41]=s,N[42]=r):(e=N[38],n=N[39],a=N[40],s=N[41],r=N[42]),N[43]!==R||N[44]!==A||N[45]!==d||N[46]!==e||N[47]!==n||N[48]!==a||N[49]!==s||N[50]!==t||N[51]!==r?(l=(0,i.jsx)("a",{ref:t,href:e,target:r,rel:a,className:R,"aria-disabled":d,onClick:n,...s,children:A}),N[43]=R,N[44]=A,N[45]=d,N[46]=e,N[47]=n,N[48]=a,N[49]=s,N[50]=t,N[51]=r,N[52]=l):l=N[52],l}N[53]!==u?({onClick:b,type:j,..._}=u,N[53]=u,N[54]=b,N[55]=_,N[56]=j):(b=N[54],_=N[55],j=N[56]);let O=void 0===j?"button":j;return N[57]!==R||N[58]!==A||N[59]!==d||N[60]!==b||N[61]!==_||N[62]!==t||N[63]!==O?(w=(0,i.jsx)("button",{ref:t,type:O,onClick:b,disabled:d,className:R,..._,children:A}),N[57]=R,N[58]=A,N[59]=d,N[60]=b,N[61]=_,N[62]=t,N[63]=O,N[64]=w):w=N[64],w});d.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>N});var i=n(74848),a=n(21728),s=n(4817),r=n(85094),l=n(98755),o=n(96540),d=n(57826),c=n(34164),u=n(53419);function m(e){let t,n,s,r,m,h,f,p,g,y=(0,a.c)(18),{children:x,code:v}=e,b=(0,o.useId)(),{chatMode:_,wrapCodeLines:j}=(0,o.useContext)(d.F);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.$)("CodeBlocks-module__container--GV7vX","CodeBlocks-module__immersive--pP6K5"),y[0]=t):t=y[0],y[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("CodeBlocks-module__copyContainer--PlsVH"),s=(0,c.$)("CodeBlocks-module__copyContent--_B0qO"),y[1]=n,y[2]=s):(n=y[1],s=y[2]),y[3]!==_?(r=()=>{(0,u.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:_})},y[3]=_,y[4]=r):r=y[4],y[5]!==v||y[6]!==r?(m=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:v,ariaLabel:"Copy code",className:"CodeBlocks-module__copyButton--xrG5L",size:"small",onCopy:r})})}),y[5]=v,y[6]=r,y[7]=m):m=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.$)("CodeBlocks-module__codeContainer--wOuWu"),y[8]=h):h=y[8];let w=j&&"CodeBlocks-module__codeWrap--YQDq8";return y[9]!==w?(f=(0,c.$)(w),y[9]=w,y[10]=f):f=y[10],y[11]!==x||y[12]!==f?(p=(0,i.jsx)("div",{className:h,children:(0,i.jsx)("pre",{className:"CodeBlocks-module__code--wvK8k",tabIndex:0,children:(0,i.jsx)("code",{className:f,children:x})})}),y[11]=x,y[12]=f,y[13]=p):p=y[13],y[14]!==b||y[15]!==m||y[16]!==p?(g=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":b,children:[m,p]})}),y[14]=b,y[15]=m,y[16]=p,y[17]=g):g=y[17],g}try{m.displayName||(m.displayName="CodeBlocksForLoop")}catch{}var h=n(47970);let f="data-codeblock-for-loop-props",p=(0,r.F)(f),g={code:(e,t)=>{let n=(0,r.k)(e,f);return n?(0,i.jsx)(m,{...n,children:e.children}):t}};var y=n(90122),x=n(76219),v=n(69726);let b="data-mermaid-props",_=(0,r.F)(b);function j(e){let t,n,s,r,l,o,d,u,m=(0,a.c)(18),{code:h,identity:f,viewscreenHost:p}=e,g=`${p}/markdown/mermaid`,y=encodeURIComponent(h);m[0]!==y?(t=btoa(y),m[0]=y,m[1]=t):t=m[1];let x=t;m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("js-render-needs-enrichment","render-needs-enrichment","Mermaid-module__diagramContainer--YUzME"),m[2]=n):n=m[2];let b=`${g}?data=${x}`;return m[3]!==h?(s=JSON.stringify({data:h}),m[3]=h,m[4]=s):s=m[4],m[5]!==h?(r=(0,i.jsx)("div",{className:"Mermaid-module__hiddenSourceCode--dlgHV",children:(0,i.jsx)("pre",{lang:"mermaid",children:h})}),m[5]=h,m[6]=r):r=m[6],m[7]!==h||m[8]!==s||m[9]!==r?(l=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":h,children:r}),m[7]=h,m[8]=s,m[9]=r,m[10]=l):l=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.$)("js-render-enrichment-loader","Mermaid-module__loaderContainer--pyhaT"),m[11]=o):o=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("span",{className:o,role:"presentation",children:(0,i.jsx)(v.A,{})}),m[12]=d):d=m[12],m[13]!==p||m[14]!==f||m[15]!==b||m[16]!==l?(u=(0,i.jsxs)("section",{className:n,"data-identity":f,"data-host":p,"data-src":b,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[l,d]}),m[13]=p,m[14]=f,m[15]=b,m[16]=l,m[17]=u):u=m[17],u}let w={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,r.k)(e,b);return n?(0,i.jsx)(j,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{j.displayName||(j.displayName="MermaidRenderer")}catch{}function N(e){let t,n,r,l,o,d,u=(0,a.c)(15),{className:m,isRunning:f,nodeValue:v,renderAsJson:b}=e,j=void 0!==b&&b,{previewUrl:N}=(0,x.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,h.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[p]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&p in i.properties&&n.children.splice(t,1,i)}),reactComponents:g},u[0]=t):t=u[0],u[1]!==N){var C;n=[t],N&&n.push((C={viewscreenHost:N},{transformMarkdown:e=>(0,h.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[_]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:C.viewscreenHost})}})}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&_ in i.properties&&n.children.splice(t,1,i)}),reactComponents:w})),u[1]=N,u[2]=n}else n=u[2];let S=n;u[3]!==v?(r=(0,y.DO)(v),u[3]=v,u[4]=r):r=u[4];let I=r;return u[5]!==m?(l=(0,c.$)("OutputDisplay-module__outputValue--I7SuT",m),u[5]=m,u[6]=l):l=u[6],u[7]!==S||u[8]!==f||u[9]!==j||u[10]!==I?(o=j?(0,i.jsx)("pre",{className:"OutputDisplay-module__jsonOutput--NA93D",children:I}):(0,i.jsx)(s.To,{extensions:S,className:"OutputDisplay-module__markdownOutput--c47bk",isStreaming:f,markdown:I}),u[7]=S,u[8]=f,u[9]=j,u[10]=I,u[11]=o):o=u[11],u[12]!==l||u[13]!==o?(d=(0,i.jsx)("div",{className:l,children:o}),u[12]=l,u[13]=o,u[14]=d):d=u[14],d}try{N.displayName||(N.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(21728),a=n(94747),s=n(97665),r=n(46747),l=n(99519),o=n(99993),d=n(33026);function c(e){let t,n,s=(0,i.c)(5),r=(0,l.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,o.c_)(t,d.kj)});let a=n.getQueryData((0,o.c_)(t,d.kj)),s=a?.version?n.getQueryData((0,o.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,o.c_)(t,d.kj),e),e.version&&n.setQueryData((0,o.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,o.c_)(i.loopID,d.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,o.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],c(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),l=c(),u=(0,r.d)(l.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,o.c_)(n,d.kj)});let s=i(a.getQueryData((0,o.c_)(n,d.kj))??null);return a.setQueryData((0,o.c_)(n,d.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==l?(t={...l,mutate:m},n[3]=m,n[4]=l,n[5]=t):t=n[5],t}},13107:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>f,wW:()=>y});var i=n(74848),a=n(73017),s=n(96379),r=n(84268),l=n(69726),o=n(96540),d=n(75202),c=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,i.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,i.jsx)(r.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function h({header:e,message:t}){return(0,i.jsxs)("div",{className:"blankslate",children:[(0,i.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,i.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function f({children:e}){return(0,i.jsx)("div",{className:"d-flex flex-justify-center",children:(0,i.jsx)(d.t,{fallback:(0,i.jsx)(h,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(l.A,{})}),children:e})})})}function p({codespacesPath:e}){let{data:t}=(0,c.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,s.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,i.jsx)(a.vb,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repoPolicyInfo:n,contactPath:a,currentUserIsEnterpriseManaged:s,enterpriseManagedBusinessName:l,newCodespacePath:o,codespacesPath:d,isLoggedIn:c}=e;if(!t){if(!c)return(0,i.jsx)(h,{header:"Sign in required",message:(0,i.jsxs)("span",{children:["Please"," ",(0,i.jsx)(r.A,{inline:!0,href:o,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)if(!n?.changesWouldBeSafe)return(0,i.jsx)(h,{header:"Repository access limited",message:(0,i.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});else return(0,i.jsx)(h,{header:"Codespace access limited",message:m(a)});{let e=null;return e=!n?.canBill&&s?(0,i.jsxs)("span",{children:[(0,i.jsx)(r.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${l||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,i.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,i.jsx)(r.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"})," ","which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,i.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,i.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(a),(0,i.jsx)(h,{header:"Codespace access limited",message:e})}}return(0,i.jsx)(p,{codespacesPath:d})}function y(e){return(0,i.jsx)(f,{children:(0,i.jsx)(g,{...e})})}try{h.displayName||(h.displayName="ErrorMessage")}catch{}try{f.displayName||(f.displayName="CodespacesTabWrapper")}catch{}try{p.displayName||(p.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{y.displayName||(y.displayName="CodespacesTab")}catch{}},13647:(e,t,n)=>{n.d(t,{Ch:()=>a,PW:()=>o,V2:()=>l,Ve:()=>r,Xg:()=>d,a1:()=>s});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_code_nodes")}function s(){return(0,i.G7)("copilot_pipes_react_nodes")}function r(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function l(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}function d(){return(0,i.G7)("loops_service_graphql_execution")}},13814:(e,t,n)=>{n.d(t,{J:()=>DiffSelectedLineEvent,L:()=>DiffAddCommentButtonClickedEvent});var i=n(50467);let DiffAddCommentButtonClickedEvent=class DiffAddCommentButtonClickedEvent extends Event{constructor(e,t){super("DiffAddCommentButtonClickedEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}};let DiffSelectedLineEvent=class DiffSelectedLineEvent extends Event{constructor(e,t){super("DiffSelectedLineEvent",{bubbles:!0,cancelable:!0,composed:!0}),(0,i._)(this,"endLineNumber",void 0),(0,i._)(this,"endOrientation",void 0),(0,i._)(this,"filePath",void 0),(0,i._)(this,"startOrientation",void 0),(0,i._)(this,"startLineNumber",void 0),this.startLineNumber=e.startLineNumber,this.endLineNumber=e.endLineNumber,this.startOrientation=e.startOrientation,this.endOrientation=e.endOrientation,this.filePath=t}}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s=(0,i.c)(4),[r,l]=(0,a.useState)(!1),o=(0,a.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(o.current=!0),e||!o.current||r||l(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,a.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(21728),s=n(5524),r=n(94236),l=n(59394),o=n(96540),d=n(38621),c=n(295),u=n(53419),m=n(25641),h=n(61526),f=n(25407),p=n(64917),g=n(35247);function y(e){let t,n,y,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R,A,O,P=(0,a.c)(66),{onDelete:F,onCopyLoop:M,onDuplicate:$,onShare:B,onEdit:V,onCopyOutput:U,onRename:q,loopId:G,hasOutput:H,returnFocusRef:K}=e,W=void 0!==H&&H,[z,Q]=(0,o.useState)(null),{mutate:Z}=(0,c.h)(),{ownerLogin:J,owned:Y,loopURL:X}=(0,p.I)(x);P[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},P[0]=t):t=P[0];let ee=t;P[1]!==K?(n=()=>{Q(null),setTimeout(()=>K?.current?.focus())},P[1]=K,P[2]=n):n=P[2];let et=n;P[3]!==Z||P[4]!==G||P[5]!==F?(y=async()=>{G&&(Q(null),Z(G,{onSuccess:F}))},P[3]=Z,P[4]=G,P[5]=F,P[6]=y):y=P[6];let en=y;P[7]!==G||P[8]!==$?(v=()=>{G&&$&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),$(G))},P[7]=G,P[8]=$,P[9]=v):v=P[9];let ei=v;P[10]!==B?(b=()=>{B?.()},P[10]=B,P[11]=b):b=P[11];let ea=b;P[12]!==V?(_=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),V?.()},P[12]=V,P[13]=_):_=P[13];let es=_;P[14]!==U?(j=()=>{U&&U()},P[14]=U,P[15]=j):j=P[15];let er=j;return G?(P[16]!==er||P[17]!==W||P[18]!==U?(w=U&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!W,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy output"]}),P[16]=er,P[17]=W,P[18]=U,P[19]=w):w=P[19],P[20]!==es||P[21]!==G||P[22]!==V?(N=V&&(0,i.jsxs)(s.l.LinkItem,{as:h.N_,to:`${m.Jz}/l/${G}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Edit loop"]}),P[20]=es,P[21]=G,P[22]=V,P[23]=N):N=P[23],P[24]!==M||P[25]!==U||P[26]!==$||P[27]!==V||P[28]!==B?(C=(U||V)&&($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[24]=M,P[25]=U,P[26]=$,P[27]=V,P[28]=B,P[29]=C):C=P[29],P[30]!==ei||P[31]!==$?(S=$&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),P[30]=ei,P[31]=$,P[32]=S):S=P[32],P[33]!==q?(I=q&&(0,i.jsxs)(s.l.Item,{onSelect:q,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Rename"]}),P[33]=q,P[34]=I):I=P[34],P[35]!==ea||P[36]!==B?(k=B&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.LinkIcon,{})}),"Copy link"]}),P[35]=ea,P[36]=B,P[37]=k):k=P[37],P[38]!==M?(L=M&&(0,i.jsxs)(s.l.Item,{onSelect:M,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy JSON"]}),P[38]=M,P[39]=L):L=P[39],P[40]!==M||P[41]!==$||P[42]!==B?(T=($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[40]=M,P[41]=$,P[42]=B,P[43]=T):T=P[43],P[44]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.TrashIcon,{})}),"Delete"]}),P[44]=E):E=P[44],P[45]!==X||P[46]!==Y||P[47]!==J?(D=g.W.loopsAbusePrevention&&J&&!Y&&X&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,f.YPg)({report:`${J} (User)`,contentURL:X}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.AlertIcon,{})}),"Report"]}),P[45]=X,P[46]=Y,P[47]=J,P[48]=D):D=P[48],P[49]!==N||P[50]!==C||P[51]!==S||P[52]!==I||P[53]!==k||P[54]!==L||P[55]!==T||P[56]!==D||P[57]!==w?(R=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[w,N,C,S,I,k,L,T,E,D]})}),P[49]=N,P[50]=C,P[51]=S,P[52]=I,P[53]=k,P[54]=L,P[55]=T,P[56]=D,P[57]=w,P[58]=R):R=P[58],P[59]!==et||P[60]!==en||P[61]!==z?(A="delete"===z&&(0,i.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),P[59]=et,P[60]=en,P[61]=z,P[62]=A):A=P[62],P[63]!==R||P[64]!==A?(O=(0,i.jsxs)(i.Fragment,{children:[R,A]}),P[63]=R,P[64]=A,P[65]=O):O=P[65],O):null}function x(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},14808:(e,t,n)=>{n.d(t,{LR:()=>o,KA:()=>T,G9:()=>p,XA:()=>N});var i=n(74848),a=n(21728),s=n(5524),r=n(96540);let l=(0,r.forwardRef)((e,t)=>{let n,r,l,o,d,c,u,m,h,f,p,g,y,x,v=(0,a.c)(28);if(v[0]!==t||v[1]!==e){l=Symbol.for("react.early_return_sentinel");e:{let{selected:a,...y}=e;if(y.renderItem){l=y.renderItem({selected:a,...y});break e}let{label:x,id:v,description:b,descriptionVariant:_,onSelect:j,renderDescription:w,className:N,trailingVisual:C,disabled:S}=y;g=C,n=s.l.Item,r=v,o="option",d=()=>{j({label:x,id:v,selected:a,description:b,descriptionVariant:_})},c=a,u=t,m=N,h=S,f=x,p=(b||w)&&(0,i.jsx)(s.l.Description,{variant:_,children:w?w():b})}v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=l,v[5]=o,v[6]=d,v[7]=c,v[8]=u,v[9]=m,v[10]=h,v[11]=f,v[12]=p,v[13]=g}else n=v[2],r=v[3],l=v[4],o=v[5],d=v[6],c=v[7],u=v[8],m=v[9],h=v[10],f=v[11],p=v[12],g=v[13];return l!==Symbol.for("react.early_return_sentinel")?l:(v[14]!==g?(y=g?(0,i.jsx)(s.l.TrailingVisual,{children:g}):null,v[14]=g,v[15]=y):y=v[15],v[16]!==n||v[17]!==r||v[18]!==y||v[19]!==o||v[20]!==d||v[21]!==c||v[22]!==u||v[23]!==m||v[24]!==h||v[25]!==f||v[26]!==p?(x=(0,i.jsxs)(n,{role:o,onSelect:d,selected:c,ref:u,className:m,disabled:h,children:[f,p,y]},r),v[16]=n,v[17]=r,v[18]=y,v[19]=o,v[20]=d,v[21]=c,v[22]=u,v[23]=m,v[24]=h,v[25]=f,v[26]=p,v[27]=x):x=v[27],x)});l.displayName="SelectItem";let o=(0,r.forwardRef)((e,t)=>{let n,l,o,f=(0,a.c)(18),{selectionVariant:p,items:g,onSelect:y,controlled:x,showGroupHeading:v}=e;f[0]!==g?(n=()=>g.filter(c),f[0]=g,f[1]=n):n=f[1];let[b,_]=(0,r.useState)(n);f[2]!==g?(l=g.find(u),f[2]=g,f[3]=l):l=f[3];let j=l;if(f[4]!==x||f[5]!==j||f[6]!==g||f[7]!==y||f[8]!==t||f[9]!==b||f[10]!==p||f[11]!==v){let e,n=j?g.reduce(m,{}):null,a=g.filter(h),l=n&&Object.entries(n);f[13]!==x||f[14]!==y||f[15]!==b||f[16]!==p?(e=e=>{let{id:t}=e;if(y&&y(e),x)if(b.find(e=>e.id===t)){let e=b.filter(e=>e.id!==t);_(e),x(e)}else{let t="multiple"===p?[...b,e]:[e];_(t),x(t)}},f[13]=x,f[14]=y,f[15]=b,f[16]=p,f[17]=e):e=f[17];let c=e;o=(0,i.jsx)(i.Fragment,{children:n?(0,i.jsxs)(i.Fragment,{children:[l?l.map((e,n)=>{let[a,o]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(s.l.Group,{"aria-label":o[0]?.groupTitle||`Group ${a}`,selectionVariant:p,children:[v?(0,i.jsx)(s.l.GroupHeading,{variant:"filled",children:o[0]?.groupTitle||`Group ${a}`}):null,o.map((e,a)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===a&&0===n?t:void 0,...e},e.id))]},a),l.length>1&&n!==l.length-1?(0,i.jsx)(s.l.Divider,{}):null]},a)}):null,a.map(e=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,...e},e.id))]}):(0,i.jsx)(i.Fragment,{children:g.map((e,n)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===n?t:null,...e},e.id))})}),f[4]=x,f[5]=j,f[6]=g,f[7]=y,f[8]=t,f[9]=b,f[10]=p,f[11]=v,f[12]=o}else o=f[12];return o}),d=r.forwardRef((e,t)=>{let n,s,r,o,d,c,u,m,h,f,p,g,y=(0,a.c)(35);y[0]!==e?({id:r,label:o,description:s,selectedItems:h,onSelectToggle:c,onSelect:d,controlled:n,selected:m,...u}=e,y[0]=e,y[1]=n,y[2]=s,y[3]=r,y[4]=o,y[5]=d,y[6]=c,y[7]=u,y[8]=m,y[9]=h):(n=y[1],s=y[2],r=y[3],o=y[4],d=y[5],c=y[6],u=y[7],m=y[8],h=y[9]),y[10]!==s||y[11]!==r||y[12]!==o||y[13]!==c||y[14]!==u.descriptionVariant||y[15]!==m?(f=()=>{c({label:o,id:r,selected:m,description:s,descriptionVariant:u.descriptionVariant})},y[10]=s,y[11]=r,y[12]=o,y[13]=c,y[14]=u.descriptionVariant,y[15]=m,y[16]=f):f=y[16];let x=f;y[17]!==n||y[18]!==r||y[19]!==m||y[20]!==h?(p=n?h.some(e=>e.id===r):!!m,y[17]=n,y[18]=r,y[19]=m,y[20]=h,y[21]=p):p=y[21];let v=d||x;return y[22]!==s||y[23]!==r||y[24]!==o||y[25]!==u.className||y[26]!==u.descriptionVariant||y[27]!==u.disabled||y[28]!==u.renderDescription||y[29]!==u.renderItem||y[30]!==u.trailingVisual||y[31]!==t||y[32]!==p||y[33]!==v?(g=(0,i.jsx)(l,{label:o,id:r,description:s,descriptionVariant:u.descriptionVariant,selected:p,onSelect:v,className:u.className,renderItem:u.renderItem,ref:t,trailingVisual:u.trailingVisual,disabled:u.disabled,renderDescription:u.renderDescription}),y[22]=s,y[23]=r,y[24]=o,y[25]=u.className,y[26]=u.descriptionVariant,y[27]=u.disabled,y[28]=u.renderDescription,y[29]=u.renderItem,y[30]=u.trailingVisual,y[31]=t,y[32]=p,y[33]=v,y[34]=g):g=y[34],g});function c(e){return e.selected}function u(e){return void 0!==e.groupId}function m(e,t){return void 0!==t.groupId&&(e[t.groupId]=e[t.groupId]||[],e[t.groupId]&&e[t.groupId].push(t)),e}function h(e){return void 0===e.groupId}o.displayName="SelectBody",d.displayName="SelectBodyItem";var f=n(21373);function p(e){let t,n,s,r,l,o,d,c,u,m=(0,a.c)(23),{footerButtons:h,onSave:p,onCancel:x}=e;m[0]!==h?(t=h?.reduce(y,{save:void 0,cancel:void 0,supplementary:[]}),r="SimpleSelect-module__Footer--BWYvt",n="SimpleSelect-module__FooterContent--CCfD8",s=h?t?.supplementary.map(g):null,m[0]=h,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]),m[5]!==n||m[6]!==s?(l=(0,i.jsx)("div",{className:n,children:s}),m[5]=n,m[6]=s,m[7]=l):l=m[7];let v=t?.cancel,b=t?.cancel?.content||"Cancel";m[8]!==x||m[9]!==v||m[10]!==b?(o=(0,i.jsx)(f.Q,{onClick:x,...v,children:b}),m[8]=x,m[9]=v,m[10]=b,m[11]=o):o=m[11];let _=t?.save,j=t?.save?.content||"Save";return m[12]!==p||m[13]!==_||m[14]!==j?(d=(0,i.jsx)(f.Q,{variant:"primary",onClick:p,..._,children:j}),m[12]=p,m[13]=_,m[14]=j,m[15]=d):d=m[15],m[16]!==d||m[17]!==o?(c=(0,i.jsxs)("div",{className:"SimpleSelect-module__FooterActions--ILN1s",children:[o,d]}),m[16]=d,m[17]=o,m[18]=c):c=m[18],m[19]!==c||m[20]!==r||m[21]!==l?(u=(0,i.jsxs)("div",{className:r,children:[l,c]}),m[19]=c,m[20]=r,m[21]=l,m[22]=u):u=m[22],u}function g(e){let{variant:t,content:n,...a}=e;return(0,i.jsx)(f.Q,{variant:t||"default",...a,children:n},n)}function y(e,t){let{action:n,...i}=t;return"save"===n||"cancel"===n?e[n]=i:e.supplementary.push(i),e}try{p.displayName||(p.displayName="SelectFooter")}catch{}var x=n(38621),v=n(81960),b=n(26108);let _=e=>{let t,n,s,r=(0,a.c)(8),{id:l,title:o,onClose:d}=e,c=void 0===o?"Select an item":o;return r[0]!==l||r[1]!==c?(t=(0,i.jsx)(v.A,{id:l,as:"h1",className:"SimpleSelect-module__Title--dSeJ4",children:c}),r[0]=l,r[1]=c,r[2]=t):t=r[2],r[3]!==d?(n=(0,i.jsx)(b.K,{icon:x.XIcon,"aria-label":"Close",variant:"invisible",onClick:d}),r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,i.jsxs)("div",{className:"SimpleSelect-module__Header--DPfBs",children:[t,n]}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s};try{_.displayName||(_.displayName="SelectHeader")}catch{}var j=n(31604),w=n(15220);function N(e){let t,n,l,d,c,u,m,h,g,y,v,b,j,w,N,E,D=(0,a.c)(76),{variant:R,items:A,label:O,title:P,selectionVariant:F,onSelect:M,renderText:$,onSave:B,onCancel:V,selectable:U,buttonProps:q,outsideClick:G,onEscape:H,focusTarget:K,dialogProps:W,footerButtons:z}=e,Q=void 0===R?"overlay":R,Z=void 0===P?"Select an item":P,J=void 0===G?"save":G,Y=void 0===H?"save":H,X=void 0===K?"first-target":K,[ee,et]=(0,r.useState)(!1),[en,ei]=(0,r.useState)();D[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],D[0]=t):t=D[0];let[ea,es]=(0,r.useState)(t),er=(0,r.useRef)(null),el=(0,r.useId)(),eo=U?ea:A.filter(L),ed=(0,r.useRef)(null);en||(ei(A),es(A.filter(k))),D[1]!==A||D[2]!==V||D[3]!==B||D[4]!==ea||D[5]!==U||D[6]!==en?(n=(e,t)=>{if("save"===e&&(B||U)){let e=U?t||ea:A.filter(I),n=A.map(t=>e.find(e=>e.id===t.id)?{...t,selected:!0}:{...t,selected:!1});ei(n),B&&B(n)}else"cancel"===e&&V?V(en||A):"cancel"===e&&U&&es(en?.filter(S)||[]);et(!1)},D[1]=A,D[2]=V,D[3]=B,D[4]=ea,D[5]=U,D[6]=en,D[7]=n):n=D[7];let ec=n;D[8]!==ec?(l=()=>ec("save"),D[8]=ec,D[9]=l):l=D[9];let eu=l;D[10]!==ec?(d=()=>ec("cancel"),D[10]=ec,D[11]=d):d=D[11];let em=d;D[12]!==ec||D[13]!==ea||D[14]!==U||D[15]!==F?(c=e=>{es(e),ea&&U?.(e),"single"===F&&ec("save",e)},D[12]=ec,D[13]=ea,D[14]=U,D[15]=F,D[16]=c):c=D[16];let eh=c;D[17]!==ec||D[18]!==Y||D[19]!==J||D[20]!==ea?(u=e=>{"click-outside"===e||"anchor-click"===e||"close-button"===e?ec(J):"escape"===e&&ec(Y,ea)},D[17]=ec,D[18]=Y,D[19]=J,D[20]=ea,D[21]=u):u=D[21];let ef=u,ep=f.Q,eg="overlay"===Q?x.TriangleDownIcon:null;D[22]!==ee?(m=()=>et(!ee),D[22]=ee,D[23]=m):m=D[23];let ey=$?$():`${O}${!eo.length?"":`: ${eo.map(C).join(", ")}`}`;D[24]!==ep||D[25]!==q||D[26]!==ee||D[27]!==eg||D[28]!==m||D[29]!==ey?(h=(0,i.jsx)(ep,{trailingAction:eg,ref:ed,variant:"default",onClick:m,"aria-haspopup":"dialog","aria-expanded":ee,...q,children:ey}),D[24]=ep,D[25]=q,D[26]=ee,D[27]=eg,D[28]=m,D[29]=ey,D[30]=h):h=D[30],D[31]!==el||D[32]!==em||D[33]!==Z||D[34]!==Q?(g="overlay"===Q?(0,i.jsx)(_,{id:el,title:Z,onClose:em}):null,D[31]=el,D[32]=em,D[33]=Z,D[34]=Q,D[35]=g):g=D[35];let ex=U&&en?en:A;D[36]!==B||D[37]!==M||D[38]!==U||D[39]!==F?(y="single"!==F||B||U?M:e=>{M?.(e),et(!1)},D[36]=B,D[37]=M,D[38]=U,D[39]=F,D[40]=y):y=D[40];let ev=U?eh:void 0,eb="first-item"===X?er:null;return D[41]!==F||D[42]!==ex||D[43]!==y||D[44]!==ev||D[45]!==eb?(v=(0,i.jsx)(o,{selectionVariant:F,items:ex,onSelect:y,controlled:ev,ref:eb}),D[41]=F,D[42]=ex,D[43]=y,D[44]=ev,D[45]=eb,D[46]=v):v=D[46],D[47]!==F||D[48]!==v?(b=(0,i.jsx)("div",{className:"SimpleSelect-module__SelectBodyWrapper--Dre5i",children:(0,i.jsx)(s.l,{role:"listbox",selectionVariant:F,"aria-label":"Selection",children:v})}),D[47]=F,D[48]=v,D[49]=b):b=D[49],D[50]!==z||D[51]!==B||D[52]!==em||D[53]!==eu||D[54]!==Q?(j=B&&"modal"!==Q?(0,i.jsx)(p,{onSave:eu,onCancel:em,footerButtons:z}):null,D[50]=z,D[51]=B,D[52]=em,D[53]=eu,D[54]=Q,D[55]=j):j=D[55],D[56]!==g||D[57]!==b||D[58]!==j||D[59]!==Q?(w=(0,i.jsxs)("div",{"data-container":Q,className:"SimpleSelect-module__Wrapper--cFdti",children:[g,b,j]}),D[56]=g,D[57]=b,D[58]=j,D[59]=Q,D[60]=w):w=D[60],D[61]!==W||D[62]!==X||D[63]!==z||D[64]!==el||D[65]!==ef||D[66]!==ee||D[67]!==em||D[68]!==eu||D[69]!==w||D[70]!==Z||D[71]!==Q?(N=(0,i.jsx)(T,{headingId:el,open:ee,anchorRef:ed,onClose:ef,variant:Q,dialogProps:W,title:Z,selectSave:eu,selectCancel:em,footerButtons:z,focusTarget:X,firstItem:er,children:w}),D[61]=W,D[62]=X,D[63]=z,D[64]=el,D[65]=ef,D[66]=ee,D[67]=em,D[68]=eu,D[69]=w,D[70]=Z,D[71]=Q,D[72]=N):N=D[72],D[73]!==h||D[74]!==N?(E=(0,i.jsxs)(i.Fragment,{children:[h,N]}),D[73]=h,D[74]=N,D[75]=E):E=D[75],E}function C(e){return e.label}function S(e){return e.selected}function I(e){return e.selected}function k(e){return e.selected}function L(e){return e.selected}function T(e){let t,n=(0,a.c)(15),{open:s,anchorRef:r,headingId:l,focusTarget:o,firstItem:d,onClose:c,children:u,variant:m,dialogProps:h,title:f,selectSave:g,selectCancel:y,footerButtons:x,focusZoneSettings:v}=e;return n[0]!==r||n[1]!==u||n[2]!==h||n[3]!==d||n[4]!==o||n[5]!==v||n[6]!==x||n[7]!==l||n[8]!==c||n[9]!==s||n[10]!==y||n[11]!==g||n[12]!==f||n[13]!==m?(t=(0,i.jsx)(i.Fragment,{children:"overlay"===m?(0,i.jsx)(j.T,{open:s,anchorRef:r,renderAnchor:null,overlayProps:{role:"dialog","aria-labelledby":l,maxHeight:"large",maxWidth:"medium"},focusZoneSettings:v||{disabled:!0},focusTrapSettings:{initialFocusRef:"first-item"===o?d:void 0},onClose:c,children:u}):(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(w.l,{renderBody:()=>(0,i.jsx)(w.l.Body,{className:"SimpleSelect-module__DialogBody--NoZic",children:u}),width:"large",onClose:c,title:f,renderFooter:()=>(0,i.jsx)(p,{onSave:g,onCancel:y,footerButtons:x}),position:{narrow:"fullscreen",regular:"center"},...h}):null})}),n[0]=r,n[1]=u,n[2]=h,n[3]=d,n[4]=o,n[5]=v,n[6]=x,n[7]=l,n[8]=c,n[9]=s,n[10]=y,n[11]=g,n[12]=f,n[13]=m,n[14]=t):t=n[14],t}try{N.displayName||(N.displayName="SimpleSelect")}catch{}try{T.displayName||(T.displayName="SelectContainer")}catch{}},15440:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(74848),a=n(21728),s=n(82595),r=n(38621);let l=n(96540).forwardRef((e,t)=>{let n,l,o,d,c=(0,a.c)(15),{testId:u,name:m,icon:h,color:f,onClick:p,dropdown:g,open:y}=e,x=`starter-${u}`;return c[0]!==f||c[1]!==h?(n=s.I&&(0,i.jsx)("div",{className:"StarterPill-module__icon--GKvj8",children:(0,i.jsx)(s.I,{icon:h,color:f})}),c[0]=f,c[1]=h,c[2]=n):n=c[2],c[3]!==g?(l=g&&(0,i.jsx)("div",{className:"StarterPill-module__dropdown--NngRn",children:(0,i.jsx)(r.TriangleDownIcon,{})}),c[3]=g,c[4]=l):l=c[4],c[5]!==m||c[6]!==l?(o=(0,i.jsxs)("div",{className:"StarterPill-module__title--Nsp36",children:[m,l]}),c[5]=m,c[6]=l,c[7]=o):o=c[7],c[8]!==p||c[9]!==y||c[10]!==t||c[11]!==x||c[12]!==n||c[13]!==o?(d=(0,i.jsxs)("button",{ref:t,className:"StarterPill-module__container--d2dFs",onClick:p,"aria-expanded":y,"data-testid":x,children:[n,o]}),c[8]=p,c[9]=y,c[10]=t,c[11]=x,c[12]=n,c[13]=o,c[14]=d):d=c[14],d});l.displayName="StarterPill"},15697:(e,t,n)=>{function i({paths:e,diffSummaries:t}){let n={};for(let i of e){let e=t[i];if(e&&e.markersMap){let t=[];for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push(i)}n[i]=t}}return n}function a({diffSummary:e}){let t=[];if(e&&e.markersMap)for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push({start:i[0],end:i[1]})}return t}n.d(t,{B:()=>a,i:()=>i})},16070:(e,t,n)=>{n.d(t,{Y0:()=>P,$I:()=>O,kR:()=>F});var i=n(74848),a=n(96540),s=n(84078),r=n(38621),l=n(61526),o=n(31315),d=n(69599),c=n(51587),u=n(11083),m=n(30459),h=n(79634);function f({children:e,hidden:t}){let[n,s]=a.useState("visible"),r=a.useRef(null),l=a.useRef(void 0);return(a.useEffect(()=>{if(t&&"visible"===n){s("collapsing");let e=r.current;if(e){let t=e.getBoundingClientRect().height;l.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{s("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,i.jsx)("div",{ref:r,style:{height:"visible"===n?l.current??"auto":0},className:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",children:(0,i.jsx)("div",{className:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",style:{transform:"visible"===n?void 0:`translateY(-${l.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{f.displayName||(f.displayName="SlideDismiss")}catch{}var p=n(21728),g=n(84268),y=n(15220);function x(e){let t,n,a,s=(0,p.c)(7),{ssoOrgs:r}=e;if(1===r.length){let e,t=r[0],n=t?.name;return s[0]!==n?(e=(0,i.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",n," organization on this device."]}),s[0]=n,s[1]=e):e=s[1],e}return s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),s[2]=t):t=s[2],s[3]!==r?(n=r.map(v),s[3]=r,s[4]=n):n=s[4],s[5]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)("ul",{className:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",children:n})]}),s[5]=n,s[6]=a):a=s[6],a}function v(e){return(0,i.jsx)("li",{children:e.name},e.id)}try{x.displayName||(x.displayName="DismissalSummary")}catch{}var b=n(94236),_=n(5524),j=n(46251);let w=30,N=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:w},{id:"one-year",text:"One year",days:365}],C=()=>N.findIndex(e=>e.days===w);function S(e){let t,n,a,s,l,o=(0,p.c)(11),{selectedDurationIndex:d,onDurationChange:c}=e,u=N[d];o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),o[0]=t):t=o[0];let m=u?.text||"Pick duration";return o[1]!==m?(n=(0,i.jsx)(b.W.Button,{trailingAction:r.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:m}),o[1]=m,o[2]=n):n=o[2],o[3]!==c||o[4]!==d?(a=N.map((e,t)=>(0,i.jsx)(_.l.Item,{role:"menuitemradio",selected:t===d,"aria-checked":t===d,onSelect:()=>c(t),children:e.text},e.id)),o[3]=c,o[4]=d,o[5]=a):a=o[5],o[6]!==a?(s=(0,i.jsx)(b.W.Overlay,{children:(0,i.jsx)(_.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:a})}),o[6]=a,o[7]=s):s=o[7],o[8]!==n||o[9]!==s?(l=(0,i.jsxs)(j.B,{align:"center",direction:"horizontal",className:"GlobalSSOBanner-module__durationSelector--DOJjX",children:[t,(0,i.jsxs)(b.W,{children:[n,s]})]}),o[8]=n,o[9]=s,o[10]=l):l=o[10],l}try{S.displayName||(S.displayName="DurationMenu")}catch{}function I(e){let t,n,s,r,l,o,d,c,u,m,h=(0,p.c)(23),{isOpen:f,onClose:v,onConfirm:b,ssoOrgs:_}=e,[j,I]=a.useState(C);h[0]!==f?(t=()=>{f&&I(C())},n=[f],h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]),a.useEffect(t,n),h[3]!==b||h[4]!==j?(s=()=>{let e=N[j];b(e?.days??w)},h[3]=b,h[4]=j,h[5]=s):s=h[5];let k=s;return f?(h[6]!==v?(r={buttonType:"default",content:"Cancel",onClick:v},h[6]=v,h[7]=r):r=h[7],h[8]!==k?(l={buttonType:"primary",content:"Confirm",onClick:k},h[8]=k,h[9]=l):l=h[9],h[10]!==r||h[11]!==l?(o=[r,l],h[10]=r,h[11]=l,h[12]=o):o=h[12],h[13]!==_?(d=(0,i.jsx)(x,{ssoOrgs:_}),h[13]=_,h[14]=d):d=h[14],h[15]!==j?(c=(0,i.jsx)(S,{selectedDurationIndex:j,onDurationChange:I}),h[15]=j,h[16]=c):c=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,i.jsx)(g.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),h[17]=u):u=h[17],h[18]!==v||h[19]!==o||h[20]!==d||h[21]!==c?(m=(0,i.jsxs)(y.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:v,footerButtons:o,children:[d,c,u]}),h[18]=v,h[19]=o,h[20]=d,h[21]=c,h[22]=m):m=h[22],m):null}try{I.displayName||(I.displayName="ConfirmationDialog")}catch{}var k=n(21373),L=n(77430),T=n(79988);function E(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,i=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(i)}`}function D(e){let t,n,a,s,r,l=(0,p.c)(20),{ssoOrgs:o,redirectLocation:d}=e,{sendClickAnalyticsEvent:c}=(0,m.S)();if(0===o.length)return null;l[0]!==c?(t=()=>{c({category:T.c$,action:"click_single_sso_button",label:"sso_authentication"})},l[0]=c,l[1]=t):t=l[1];let u=t;l[2]!==c?(n=e=>{c({category:T.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},l[2]=c,l[3]=n):n=l[3];let h=n;if(1===o.length){let e,t,n=o[0];return void 0===n?null:(l[4]!==n.login||l[5]!==d?(e=E(n.login,d),l[4]=n.login,l[5]=d,l[6]=e):e=l[6],l[7]!==u||l[8]!==e?(t=(0,i.jsx)(k.Q,{as:"a",href:e,onClick:u,children:"Single sign-on"}),l[7]=u,l[8]=e,l[9]=t):t=l[9],t)}if(l[10]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(b.W.Button,{size:"small",children:"Single sign-on"}),l[10]=a):a=l[10],l[11]!==h||l[12]!==d||l[13]!==o){let e;l[15]!==h||l[16]!==d?(e=e=>(0,i.jsxs)(_.l.LinkItem,{href:E(e.login,d),onClick:()=>h(e.name),children:[e.avatar_url&&(0,i.jsx)(_.l.LeadingVisual,{children:(0,i.jsx)(L.r,{size:24,src:e.avatar_url})}),e.name]},e.login),l[15]=h,l[16]=d,l[17]=e):e=l[17],s=o.map(e),l[11]=h,l[12]=d,l[13]=o,l[14]=s}else s=l[14];return l[18]!==s?(r=(0,i.jsxs)(b.W,{children:[a,(0,i.jsx)(b.W.Overlay,{children:(0,i.jsx)(_.l,{children:s})})]}),l[18]=s,l[19]=r):r=l[19],r}try{D.displayName||(D.displayName="SSOActionMenu")}catch{}function R(){let e=(0,o.Ri)(T.z4);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,o.Yj)(T.z4)}return[]}function A(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function O({ssoOrgs:e}){let t=(0,l.zy)(),[n,c]=a.useState("visible"),[h,p]=a.useState(!1),g=a.useRef(!1),{sendClickAnalyticsEvent:y}=(0,m.S)(),x=(0,d.G7)("global_sso_banner_dismiss_dialog");if(a.useEffect(()=>{!g.current&&e.length>0&&((0,d.G7)("record_sso_banner_metrics")&&(0,u.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),g.current=!0)},[e]),0===e.length)return null;let v=(t=w)=>{let n,i,a;c("hidden"),n=e.map(e=>e.id),(0,d.G7)("global_sso_banner_dismiss_dialog")&&(n=[...new Set([...R(),...n])].sort()),(0,o.Yj)(T.z4),i=t??w,a=new Date(Date.now()+24*i*36e5).toUTCString(),(0,o.TV)(T.z4,JSON.stringify(n),a)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f,{hidden:"visible"!==n,children:(0,i.jsx)(s.l,{title:"Single sign-on",className:"GlobalSSOBanner-module__banner--kzCnx",hideTitle:!0,icon:(0,i.jsx)(r.ShieldLockIcon,{}),description:(()=>{if(0===e.length)return"Single sign-on to see results";let t=e.slice(0,T.n5),n=e.length-T.n5,a=1===e.length?"organization":"organizations";return(0,i.jsxs)(i.Fragment,{children:["Single sign-on to see results in the ",(()=>{let e=t.map(e=>(0,i.jsx)("strong",{children:e.name},e.login));if(1===e.length)return e[0];{if(2===e.length)return(0,i.jsxs)(i.Fragment,{children:[e[0]," and ",e[1]]});let t=e.length-1,a=(0,i.jsxs)(i.Fragment,{children:[e[0],", ",e[1],", and ",e[t]]});return n>0?(0,i.jsxs)(i.Fragment,{children:[a,", and ",n," more"]}):a}})()," ",a]})})(),onDismiss:()=>{y({category:T.c$,action:"click_dismiss_button",label:"banner_dismissed"}),x?p(!0):v()},primaryAction:(0,i.jsx)(D,{ssoOrgs:e,redirectLocation:t}),"data-testid":"global-sso-banner"})}),(0,i.jsx)(I,{isOpen:x&&h,onClose:()=>p(!1),onConfirm:e=>{v(e),p(!1)},ssoOrgs:e})]})}function P(){let{ssoOrgs:e,suppressBanner:t}=function(){let e,{ssoOrgs:t,baseAvatarUrl:n}=(0,c.N)(),{current_sso_orgs_match_dismissed_cookie:i}=(0,h.X)()??{},s=a.useMemo(()=>t.filter(A).map(e=>({...e,avatar_url:`${n}/u/${e.id}`})),[t,n]);return{suppressBanner:!0===i||(e=R(),s.length===e.length&&s.every(t=>e.includes(t.id))),ssoOrgs:s,baseAvatarUrl:n}}();return 0===e.length||!(0,d.G7)("global_sso_banner")||t?null:(0,i.jsx)(O,{ssoOrgs:e})}let F=T.z4;try{O.displayName||(O.displayName="GlobalSsoBanner")}catch{}try{P.displayName||(P.displayName="ContextualGlobalSsoBanner")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(21728),s=n(77274),r=n(96379),l=n(96540),o=n(35247),d=n(54508);let c=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}],u=(0,l.forwardRef)(function(e,t){let n,u,m,h,f=(0,a.c)(7),{mode:p,returnFocusRef:g}=e,y=(0,l.useRef)(null),x=(0,l.useRef)(null),v=(0,l.useRef)(void 0);f[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,o.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),f[0]=n):n=f[0],(0,l.useImperativeHandle)(t,n),f[1]!==p?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:p};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},f[1]=p,f[2]=u):u=f[2];let b=u;return f[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(d.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),f[3]=m):m=f[3],f[4]!==b||f[5]!==g?(h=(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)(s.NE,{ref:x,options:c,onSubmit:b,returnFocusRef:g})]}),f[4]=b,f[5]=g,f[6]=h):h=f[6],h});u.displayName="ConversationFeedbackDialog"},18373:(e,t,n)=>{n.d(t,{U:()=>v});var i=n(74848),a=n(21728),s=n(96540),r=n(43883),l=n(21373),o=n(57478),d=n(72511),c=n(15837),u=n(86877),m=n(4175),h=n(46251),f=n(39183),p=n(15220),g=n(38621),y=n(55127),x=n.n(y);function v(e){let t,n,f,y,v,_,j,w,N,C,S,I,k,L,T,E,D,R,A,O,P=(0,a.c)(60),{setOpen:F,count:M,dismissalOptions:$,error:B,isPending:V,delegatedAlertDismissalEnabled:U,codeSecurity:q,onSubmit:G}=e,[H,K]=(0,s.useState)(""),[W,z]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(!1);P[0]!==U||P[1]!==W?(t=!U||!!W.trim(),P[0]=U,P[1]=W,P[2]=t):t=P[2];let J=t,Y=!!H&&J;P[3]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{K(e??"")},P[3]=n):n=P[3];let X=n,ee=q?"alert":"finding";if(P[4]!==M||P[5]!==ee){let e,t,n,i,a,s,r;e=x()(ee,M),t=M>1,n=`Dismiss ${e}`,i=`Select a reason to dismiss ${x()("this",M)} ${e}.`,a=`Request to dismiss ${e}`,s=t?`These ${e} need approval before they can be dismissed. Requests are sent to all approvers.`:`This ${e} needs approval before it can be dismissed. Requests are sent to all approvers.`,r=t?`These ${e} are not valid`:`This ${e} is not valid`,f={title:n,subtitle:i,submitButtonLabel:"Dismiss",delegatedAlertDismissal:{title:a,subtitle:s,submitButtonLabel:"Submit request"},reasons:{falsePositiveDescription:r,usedInTestsDescription:t?`These ${e} are not in production code`:`This ${e} is not in production code`,wontFixDescription:t?`These ${e} are not relevant`:`This ${e} is not relevant`}},P[4]=M,P[5]=ee,P[6]=f}else f=P[6];let{title:et,subtitle:en,submitButtonLabel:ei,delegatedAlertDismissal:ea,reasons:es}=f;P[7]!==es.falsePositiveDescription?(y={value:"FALSE_POSITIVE",label:"False positive",description:es.falsePositiveDescription},P[7]=es.falsePositiveDescription,P[8]=y):y=P[8],P[9]!==es.usedInTestsDescription?(v={value:"USED_IN_TESTS",label:"Used in tests",description:es.usedInTestsDescription},P[9]=es.usedInTestsDescription,P[10]=v):v=P[10],P[11]!==es.wontFixDescription?(_={value:"WONT_FIX",label:"Won't fix",description:es.wontFixDescription},P[11]=es.wontFixDescription,P[12]=_):_=P[12],P[13]!==y||P[14]!==v||P[15]!==_?(j=[y,v,_],P[13]=y,P[14]=v,P[15]=_,P[16]=j):j=P[16];let er=j,el=$?.length?$:er;P[17]!==W||P[18]!==Y||P[19]!==G||P[20]!==H?(w=async()=>{Y?(Z(!1),G({resolution:H,dismissalComment:W})):Z(!0)},P[17]=W,P[18]=Y,P[19]=G,P[20]=H,P[21]=w):w=P[21];let eo=w;P[22]!==F?(N=()=>F(!1),P[22]=F,P[23]=N):N=P[23];let ed=U?ea.title:et,ec=U?ea.subtitle:en;return P[24]!==M||P[25]!==ea||P[26]!==U||P[27]!==V||P[28]!==Y||P[29]!==eo||P[30]!==F||P[31]!==ei?(C=()=>(0,i.jsxs)(p.l.Footer,{children:[(0,i.jsx)(l.Q,{onClick:()=>F(!1),children:"Cancel"}),(0,i.jsxs)(l.Q,{variant:"primary",onClick:eo,disabled:!Y||V,leadingVisual:V?g.SyncIcon:null,children:[(0,i.jsx)("span",{children:U?ea.submitButtonLabel:ei}),M>1&&(0,i.jsx)(o.A,{scheme:"primary",className:"ml-2",children:(0,r.ai)(M)})]})]}),P[24]=M,P[25]=ea,P[26]=U,P[27]=V,P[28]=Y,P[29]=eo,P[30]=F,P[31]=ei,P[32]=C):C=P[32],P[33]!==B?(S=B&&(0,i.jsx)(d.A,{variant:"danger",children:B.message}),P[33]=B,P[34]=S):S=P[34],P[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsx)(c.A.Label,{visuallyHidden:!0,children:"Dismissal reason"}),P[35]=I):I=P[35],P[36]!==el?(k=el.map(b),P[36]=el,P[37]=k):k=P[37],P[38]!==V||P[39]!==k?(L=(0,i.jsxs)(c.A,{name:"resolution",onChange:X,disabled:V,children:[I,k]}),P[38]=V,P[39]=k,P[40]=L):L=P[40],P[41]!==U?(T=(0,i.jsx)(u.A.Label,{required:U,children:"Comment"}),P[41]=U,P[42]=T):T=P[42],P[43]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)(m.Ay,{placeholder:"Add a comment",rows:5,maxLength:280,name:"dismissal_comment",onChange:e=>z(e.target.value),className:"BaseSharedDismissalDialog-module__dismissalCommentTextarea--xxBPO"}),P[43]=E):E=P[43],P[44]!==Q?(D=Q&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"This field is required"}),P[44]=Q,P[45]=D):D=P[45],P[46]!==V||P[47]!==T||P[48]!==D?(R=(0,i.jsx)("div",{children:(0,i.jsxs)(u.A,{disabled:V,children:[T,E,D]})}),P[46]=V,P[47]=T,P[48]=D,P[49]=R):R=P[49],P[50]!==S||P[51]!==L||P[52]!==R?(A=(0,i.jsxs)(h.B,{gap:"normal",children:[S,L,R]}),P[50]=S,P[51]=L,P[52]=R,P[53]=A):A=P[53],P[54]!==ed||P[55]!==ec||P[56]!==C||P[57]!==A||P[58]!==N?(O=(0,i.jsx)(p.l,{width:"large",height:"auto",onClose:N,title:ed,subtitle:ec,renderFooter:C,children:A}),P[54]=ed,P[55]=ec,P[56]=C,P[57]=A,P[58]=N,P[59]=O):O=P[59],O}function b(e){return(0,i.jsxs)(u.A,{children:[(0,i.jsx)(f.A,{value:e.value}),(0,i.jsx)(u.A.Label,{children:e.label}),(0,i.jsx)(u.A.Caption,{children:e.description})]},e.value)}try{v.displayName||(v.displayName="BaseSharedDismissalDialog")}catch{}},18878:(e,t,n)=>{n.d(t,{p:()=>G,V:()=>q});var i=n(74848),a=n(21728),s=n(53419),r=n(79634),l=n(97286),o=n(38621),d=n(5524),c=n(59394),u=n(86877),m=n(99511),h=n(15220),f=n(96540),p=n(62421),g=n(25641),y=n(35247),x=n(2635),v=n(33592),b=n(40260),_=n(71315),j=n(21373),w=n(69726),N=n(98552),C=n(46251),S=n(20139);let I="ConversationSharingDialog-module__success--zCOcd",k="ConversationSharingDialog-module__successIcon--z1nhd",L="ConversationSharingDialog-module__quickFadeUp--_qvsX",T=e=>{let t,n,r,l,d,c,p,g,T,E,D,R,A,O,P,F,M,$,B,V,U,q,G,H,K,W,z,Q,Z,J=(0,a.c)(94),{closeDialog:Y,threadId:X,returnFocusRef:ee,showThirdPartyMcpWarning:et}=e,en=void 0!==et&&et,ei=(0,x.Pk)(),ea=(0,v.b)(),[es,er]=(0,f.useState)(!1),[el,eo]=(0,f.useState)(!1),[ed,ec]=(0,f.useState)(!1),[eu,em]=(0,f.useState)(!1),{selectedThreadID:eh,ssoOrganizations:ef,apiUrl:ep,threads:eg}=ei;J[0]!==eh||J[1]!==X||J[2]!==eg?(t=eg.get(X||eh),J[0]=eh,J[1]=X,J[2]=eg,J[3]=t):t=J[3];let ey=t;J[4]!==ey?.sharedID?(n=()=>ey?.sharedID||"",J[4]=ey?.sharedID,J[5]=n):n=J[5];let[ex,ev]=(0,f.useState)(n);J[6]!==ey?(r=()=>ey?.sharedMessageID?ey.sharedMessageID:"",J[6]=ey,J[7]=r):r=J[7];let[eb,e_]=(0,f.useState)(r),ej=_.fV.origin,ew=`${ej}/copilot/share/${ex}`;J[8]!==es?(l=()=>{if(es){let e=setTimeout(()=>er(!1),1500);return()=>clearTimeout(e)}},d=[es],J[8]=es,J[9]=l,J[10]=d):(l=J[9],d=J[10]),(0,f.useEffect)(l,d),J[11]!==ed?(c=()=>{if(ed){let e=setTimeout(()=>ec(!1),1500);return()=>clearTimeout(e)}},p=[ed],J[11]=ed,J[12]=c,J[13]=p):(c=J[12],p=J[13]),(0,f.useEffect)(c,p),J[14]!==ew?(g=async()=>{try{await (0,b.D)(ew),er(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},J[14]=ew,J[15]=g):g=J[15];let eN=g;J[16]!==ey?.sharedID||J[17]!==eh||J[18]!==X?(T=()=>{(X||eh)&&ev(ey?.sharedID||"")},J[16]=ey?.sharedID,J[17]=eh,J[18]=X,J[19]=T):T=J[19];let eC=ey?.sharedID;J[20]!==eh||J[21]!==eC||J[22]!==X?(E=[eC,eh,X],J[20]=eh,J[21]=eC,J[22]=X,J[23]=E):E=J[23],(0,f.useEffect)(T,E),J[24]!==ep||J[25]!==ea||J[26]!==eh||J[27]!==ef||J[28]!==X?(D=async()=>{eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eh?ea.FindLastMessageID():"");if(n.ok){eo(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ev(i),ec(!0),e_(a),ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else eo(!1)},J[24]=ep,J[25]=ea,J[26]=eh,J[27]=ef,J[28]=X,J[29]=D):D=J[29];let eS=D;J[30]!==ep||J[31]!==ea||J[32]!==eh||J[33]!==ex||J[34]!==eu||J[35]!==ef||J[36]!==X?(R=async()=>{if(!eu)return void em(!0);em(!1),eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.unshareThread(e);if(n.ok){eo(!1),e_("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:ex})}else eo(!1)},J[30]=ep,J[31]=ea,J[32]=eh,J[33]=ex,J[34]=eu,J[35]=ef,J[36]=X,J[37]=R):R=J[37];let eI=R;J[38]!==eS||J[39]!==el||J[40]!==ex?(A=()=>{if(!ex)return(0,i.jsx)(j.Q,{variant:"primary",disabled:el,onClick:eS,children:"Share"})},J[38]=eS,J[39]=el,J[40]=ex,J[41]=A):A=J[41];let ek=A;J[42]!==eN||J[43]!==ex?(O=()=>{if(ex)return(0,i.jsx)(j.Q,{variant:"primary",autoFocus:!0,onClick:eN,children:"Copy link"})},J[42]=eN,J[43]=ex,J[44]=O):O=J[44];let eL=O;J[45]!==eI||J[46]!==el||J[47]!==ex?(P=()=>{if(ex)return(0,i.jsx)(j.Q,{variant:"danger",disabled:el,onClick:eI,children:"Unshare"})},J[45]=eI,J[46]=el,J[47]=ex,J[48]=P):P=J[48];let eT=P;J[49]!==ex||J[50]!==eu?(F=()=>{if(ex&&eu)return(0,i.jsx)(j.Q,{variant:"default",onClick:()=>em(!1),className:"ConversationSharingDialog-module__cancelButton--CL34L",children:"Cancel"})},J[49]=ex,J[50]=eu,J[51]=F):F=J[51];let eE=F;J[52]!==es||J[53]!==el||J[54]!==ex||J[55]!==eu||J[56]!==ed?(M=()=>el?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(w.A,{size:"small",className:"ConversationSharingDialog-module__spinner--KpY5f"}),ex?"Unsharing chat...":"Sharing chat..."]}):eu?(0,i.jsx)("div",{className:L,children:(0,i.jsx)(N.A,{size:"medium",className:"ConversationSharingDialog-module__warningText--t4nnB",children:"Confirm unsharing this chat?"})}):es?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(N.A,{size:"medium",className:I,children:"Copied to clipboard"})]}):ed?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(N.A,{size:"medium",className:I,children:"Chat shared"})]}):ex?(0,i.jsxs)("div",{children:[(0,i.jsx)(o.UnlockIcon,{className:"ConversationSharingDialog-module__lockIcon--yCWzZ"}),(0,i.jsx)(N.A,{size:"medium",className:"ConversationSharingDialog-module__mutedText--r3ZSy",children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),J[52]=es,J[53]=el,J[54]=ex,J[55]=eu,J[56]=ed,J[57]=M):M=J[57];let eD=M,eR=ex?"Chat shared":"Share chat";return J[58]!==eb||J[59]!==ex||J[60]!==en?($=(0,i.jsx)(C.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:eb?(0,i.jsx)("span",{children:(0,i.jsx)("span",{className:"ConversationSharingDialog-module__snapshotText--XNu1W",children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):ex?(0,i.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${en?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${en?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),J[58]=eb,J[59]=ex,J[60]=en,J[61]=$):$=J[61],J[62]!==ew||J[63]!==ex?(B=ex&&(0,i.jsx)("div",{className:"ConversationSharingDialog-module__innerContainer--OaIjU",children:(0,i.jsx)("div",{className:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",children:(0,i.jsxs)(u.A,{id:"share-link",className:"ConversationSharingDialog-module__textInputContainer--jHhX6",children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:ex&&ew,className:"ConversationSharingDialog-module__textInput--DymUf"})]})})}),J[62]=ew,J[63]=ex,J[64]=B):B=J[64],J[65]!==$||J[66]!==B?(V=(0,i.jsxs)(C.B,{direction:"vertical",gap:"condensed",children:[$,B]}),J[65]=$,J[66]=B,J[67]=V):V=J[67],J[68]!==eD?(U=(0,i.jsx)("div",{role:"status",children:eD()}),J[68]=eD,J[69]=U):U=J[69],J[70]!==ek?(q=ek(),J[70]=ek,J[71]=q):q=J[71],J[72]!==eE?(G=eE(),J[72]=eE,J[73]=G):G=J[73],J[74]!==eT?(H=eT(),J[74]=eT,J[75]=H):H=J[75],J[76]!==eL?(K=eL(),J[76]=eL,J[77]=K):K=J[77],J[78]!==q||J[79]!==G||J[80]!==H||J[81]!==K?(W=(0,i.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[q,G,H,K]}),J[78]=q,J[79]=G,J[80]=H,J[81]=K,J[82]=W):W=J[82],J[83]!==U||J[84]!==W?(z=(0,i.jsxs)(C.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:"ConversationSharingDialog-module__buttonStack--gWe8E",children:[U,W]}),J[83]=U,J[84]=W,J[85]=z):z=J[85],J[86]!==V||J[87]!==z?(Q=(0,i.jsxs)("div",{className:"ConversationSharingDialog-module__container--wNKq6",children:[V,z]}),J[86]=V,J[87]=z,J[88]=Q):Q=J[88],J[89]!==Y||J[90]!==ee||J[91]!==eR||J[92]!==Q?(Z=(0,i.jsx)(h.l,{title:eR,onClose:Y,width:"large",returnFocusRef:ee,children:Q}),J[89]=Y,J[90]=ee,J[91]=eR,J[92]=Q,J[93]=Z):Z=J[93],Z};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}var E=n(94236),D=n(1747),R=n(71941),A=n(41941);let O={json:{name:"JSON",mimeType:"application/json",exportHandler:function(e,t,n,i,a){let s,r,l=new Blob([(s=e.map(F),r=Object.fromEntries(t),JSON.stringify({currentUserLogin:n,threadUrl:P(i),threadName:a,messages:s,files:r},null,2))],{type:O.json.mimeType});return{url:URL.createObjectURL(l),exportName:`${$(a)}.json`}}},md:{name:"Markdown",mimeType:"text/markdown",exportHandler:M}};function P(e){return`${window.location.origin}/copilot/c/${e}`}function F(e){return{id:e.id,parentMessageID:e.parentMessageID,intent:e.intent,role:e.role,model:e.model,content:e.content,createdAt:e.createdAt,threadID:e.threadID,references:e.references,skillExecutions:e.skillExecutions}}async function M(e,t,n,i,a){let s=[new File([function(e,t,n,i){let a=e.filter(e=>"root"!==e.id),s=new Map;for(let e of a){let t=e.parentMessageID;if(t){s.has(t)||s.set(t,{childMessageCount:0});let e=s.get(t);e.childMessageCount+=1}}let r=`# Copilot Chat Conversation Export: ${i}

**User:** @${t}
**Thread URL:** ${P(n)}`,l=a.map(e=>{let n="user"===e.role?`## @${t}`:"## Copilot",i=e.content||"",a=`${n}

${i}
`;if(e.parentMessageID){let t=s.get(e.parentMessageID);t&&t.childMessageCount>1&&(a+=`
*System: User retried message*
`)}return a}).join(`
`);return`${r}

${l}`}(e,n,i,a)],`${$(a)}.md`)];if(t.size>0){for(let[,e]of t)for(let t of e)"value"in t&&"string"==typeof t.value&&s.push(new File([t.value],`v${t.version}_${t.name}`));let e=await (0,R._6)(s).blob();return{url:URL.createObjectURL(e),exportName:`${$(a)}.zip`}}{let e=new Blob(s,{type:O.md.mimeType});return{url:URL.createObjectURL(e),exportName:`${$(a)}.md`}}}function $(e){return(0,A.A)(`${new Date().toDateString()} ${e}`)}function B(e){(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive"})}function V(e){let t,n,s,r,l=(0,a.c)(18),{fileType:o,threadName:c,threadId:u,currentUserLogin:m,messages:h}=e,f=(0,v.b)(),{items:p,versionedItems:g}=(0,D.xx)();l[0]!==p||l[1]!==g?(t=function(e,t){let n=new Map;for(let[,i]of t){let t=i.map(t=>e.get(t)).filter(e=>void 0!==e).map((e,t)=>({version:t+1,...e}));t.length>0&&t[0]?.type==="file"&&t[0]?.name&&n.set(t[0].name,t)}return n}(p,g),l[0]=p,l[1]=g,l[2]=t):t=l[2];let y=t,x=O[o].name;l[3]!==x?(n=x.toUpperCase(),l[3]=x,l[4]=n):n=l[4];let b=`CONVERSATION_CONTEXT_MENU_EXPORT_${n}`;l[5]!==m||l[6]!==o||l[7]!==y||l[8]!==f||l[9]!==h||l[10]!==b||l[11]!==u||l[12]!==c?(s=async()=>{try{let{url:e,exportName:t}=await O[o].exportHandler(h,y,m,u,c),n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),B(`${b}_SUCCEEDED`),setTimeout(()=>URL.revokeObjectURL(e),0)}catch{B(`${b}_DOWNLOAD_FAILED`),f.addAmbientError("There was an error exporting the conversation. Please try again.")}},l[5]=m,l[6]=o,l[7]=y,l[8]=f,l[9]=h,l[10]=b,l[11]=u,l[12]=c,l[13]=s):s=l[13];let _=s,j=`Export conversation as ${x}`;return l[14]!==x||l[15]!==_||l[16]!==j?(r=(0,i.jsx)(d.l.Item,{"aria-label":j,onSelect:_,children:x}),l[14]=x,l[15]=_,l[16]=j,l[17]=r):r=l[17],r}try{V.displayName||(V.displayName="ExportActionItem")}catch{}function U(e){let t,n,s=(0,a.c)(6),{threadName:r,threadId:l,currentUserLogin:c,messages:u,selectedThreadID:m}=e,h=m===l;return y.W.exportChat&&h?(s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(E.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.DownloadIcon,{})}),"Export"]})}),s[0]=t):t=s[0],s[1]!==c||s[2]!==u||s[3]!==l||s[4]!==r?(n=(0,i.jsxs)(E.W,{children:[t,(0,i.jsx)(E.W.Overlay,{children:(0,i.jsxs)(d.l,{children:[(0,i.jsx)(V,{threadName:r,fileType:"json",threadId:l,currentUserLogin:c,messages:u}),(0,i.jsx)(V,{threadName:r,fileType:"md",threadId:l,currentUserLogin:c,messages:u})]})})]}),s[1]=c,s[2]=u,s[3]=l,s[4]=r,s[5]=n):n=s[5],n):null}try{U.displayName||(U.displayName="ExportActionList")}catch{}function q(e){let t,n,l,c,u,m,h,f,p,y,v,b=(0,a.c)(32),{onOpenDialog:_,showShare:j,hideShareOnDesktop:w,isShared:N,threadName:C,threadId:S}=e,I=void 0===j||j,k=void 0!==w&&w,L=void 0!==N&&N,{canShareThread:T}=(0,r.X)(),{isWaitingOnCopilot:E,messages:D,currentUserLogin:R,selectedThreadID:A}=(0,x.Pk)();b[0]!==D?(t=(0,g.Q7)(D),b[0]=D,b[1]=t):t=b[1];let O=t;b[2]!==D?(n=(0,g.UM)(D),b[2]=D,b[3]=n):n=b[3];let P=n,F=O.length>0||E||P;return b[4]!==_?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),_("rename")},b[4]=_,b[5]=l):l=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.PencilIcon,{})}),b[6]=c):c=b[6],b[7]!==l?(u=(0,i.jsxs)(d.l.Item,{onSelect:l,children:[c,"Rename"]}),b[7]=l,b[8]=u):u=b[8],b[9]!==T||b[10]!==k||b[11]!==L||b[12]!==_||b[13]!==F||b[14]!==I?(m=I&&T&&(0,i.jsxs)(d.l.Item,{className:k?"ConversationActions-module__hideOnDesktop--J5K5t":void 0,disabled:F,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),_("share")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:L?(0,i.jsx)(o.UnlockIcon,{}):(0,i.jsx)(o.LockIcon,{})}),"Share"]}),b[9]=T,b[10]=k,b[11]=L,b[12]=_,b[13]=F,b[14]=I,b[15]=m):m=b[15],b[16]!==R||b[17]!==D||b[18]!==A||b[19]!==S||b[20]!==C?(h=(0,i.jsx)(U,{threadName:C,threadId:S,currentUserLogin:R,messages:D,selectedThreadID:A}),b[16]=R,b[17]=D,b[18]=A,b[19]=S,b[20]=C,b[21]=h):h=b[21],b[22]!==_?(f=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),_("delete")},b[22]=_,b[23]=f):f=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.TrashIcon,{})}),b[24]=p):p=b[24],b[25]!==f?(y=(0,i.jsxs)(d.l.Item,{variant:"danger",onSelect:f,children:[p,"Delete"]}),b[25]=f,b[26]=y):y=b[26],b[27]!==h||b[28]!==y||b[29]!==u||b[30]!==m?(v=(0,i.jsxs)(i.Fragment,{children:[u,m,h,y]}),b[27]=h,b[28]=y,b[29]=u,b[30]=m,b[31]=v):v=b[31],v}function G(e){let t,n,r,o,d,c,u,m,h=(0,a.c)(35),{visibleDialog:f,onClose:g,threadName:b,threadId:_,selectedThreadId:j,onStartLoading:w,onFinishLoading:N,returnFocusRef:C}=e,{threads:S}=(0,x.Pk)(),I=(0,v.b)(),k=(0,p.G)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],h[0]=t):t=h[0],h[1]!==I?(n={queryKey:t,queryFn:async()=>I.service.fetchMCPServers(),placeholderData:H},h[1]=I,h[2]=n):n=h[2];let{data:L}=(0,l.I)(n);h[3]!==L?(r=L||[],h[3]=L,h[4]=r):r=h[4];let E=r,D=y.W.copilotThirdPartyMcp&&E.length>0;h[5]!==g?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},h[5]=g,h[6]=o):o=h[6];let R=o;h[7]!==I||h[8]!==k||h[9]!==g||h[10]!==N||h[11]!==w||h[12]!==j||h[13]!==_||h[14]!==S?(d=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),w();let e=S.get(_);e&&(_===j&&await k({clearTopic:!0,includeThreads:!1}),await I.deleteThread(e)),N(),g()},h[7]=I,h[8]=k,h[9]=g,h[10]=N,h[11]=w,h[12]=j,h[13]=_,h[14]=S,h[15]=d):d=h[15];let A=d;h[16]!==I||h[17]!==g||h[18]!==N||h[19]!==w||h[20]!==_||h[21]!==S?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),w();let t=S.get(_);t&&await I.renameThread(t,e),N(),g()},h[16]=I,h[17]=g,h[18]=N,h[19]=w,h[20]=_,h[21]=S,h[22]=c):c=h[22];let O=c;return h[23]!==R||h[24]!==A||h[25]!==g||h[26]!==C||h[27]!==D||h[28]!==O||h[29]!==_||h[30]!==b||h[31]!==f?(u="delete"===f?(0,i.jsx)(K,{onCancel:g,onConfirm:A,returnFocusRef:C}):"rename"===f?(0,i.jsx)(W,{onCancel:g,currentName:b,onSubmit:O,returnFocusRef:C}):"share"===f?(0,i.jsx)(T,{closeDialog:R,threadId:_,returnFocusRef:C,showThirdPartyMcpWarning:D}):null,h[23]=R,h[24]=A,h[25]=g,h[26]=C,h[27]=D,h[28]=O,h[29]=_,h[30]=b,h[31]=f,h[32]=u):u=h[32],h[33]!==u?(m=(0,i.jsx)(i.Fragment,{children:u}),h[33]=u,h[34]=m):m=h[34],m}function H(e){return e}let K=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:l,returnFocusRef:o}=e;return n[0]!==l||n[1]!==r||n[2]!==o?(t=(0,i.jsx)(c.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),l(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=l,n[1]=r,n[2]=o,n[3]=t):t=n[3],t},W=e=>{let t,n,r,l,o,d,c,p,g,y,x,v,b=(0,a.c)(34),{currentName:_,onCancel:j,onSubmit:w,returnFocusRef:N}=e,[C,S]=(0,f.useState)(void 0),I=(0,f.useRef)(null),k=(0,f.useId)(),L=(0,f.useId)();b[0]!==w?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(S("max_length"),I.current?.focus()):(S(void 0),w(t)):(S("required"),I.current?.focus())},b[0]=w,b[1]=t):t=b[1];let T=t;b[2]!==j?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},b[2]=j,b[3]=n):n=b[3];let E=n;b[4]!==L?(r=(0,i.jsx)("span",{id:L,children:"Rename chat"}),b[4]=L,b[5]=r):r=b[5],b[6]!==E?(l={content:"Cancel",onClick:E},b[6]=E,b[7]=l):l=b[7],b[8]!==k?(o={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:z},b[8]=k,b[9]=o):o=b[9],b[10]!==l||b[11]!==o?(d=[l,o],b[10]=l,b[11]=o,b[12]=d):d=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=c):c=b[13];let D=C?"error-message":void 0,R=C?"true":void 0;return b[14]!==_||b[15]!==L||b[16]!==D||b[17]!==R?(p=(0,i.jsx)(m.A,{"aria-labelledby":L,"aria-describedby":D,"aria-invalid":R,ref:I,defaultValue:_,block:!0}),b[14]=_,b[15]=L,b[16]=D,b[17]=R,b[18]=p):p=b[18],b[19]!==C?(g=C&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===C?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=C,b[20]=g):g=b[20],b[21]!==p||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[c,p,g]}),b[21]=p,b[22]=g,b[23]=y):y=b[23],b[24]!==k||b[25]!==T||b[26]!==y?(x=(0,i.jsx)("form",{id:k,onSubmit:T,children:y}),b[24]=k,b[25]=T,b[26]=y,b[27]=x):x=b[27],b[28]!==E||b[29]!==N||b[30]!==x||b[31]!==r||b[32]!==d?(v=(0,i.jsx)(h.l,{title:r,onClose:E,width:"small",footerButtons:d,initialFocusRef:I,returnFocusRef:N,children:x}),b[28]=E,b[29]=N,b[30]=x,b[31]=r,b[32]=d,b[33]=v):v=b[33],v};try{q.displayName||(q.displayName="ConversationActions")}catch{}try{G.displayName||(G.displayName="ConversationActionDialogs")}catch{}try{K.displayName||(K.displayName="DeleteDialog")}catch{}try{W.displayName||(W.displayName="RenameDialog")}catch{}function z(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},19199:(e,t,n)=>{n.d(t,{n:()=>S});var i=n(74848),a=n(82075),s=n(21373),r=n(1481),l=n(96540),o=n(13107),d=n(26410),c=n(68273),u=n(21728),m=n(20622),h=n(53885),f=n(96379),p=n(65510);let g=(0,c.Z6)()?function(e){let t,n,i,a=(0,u.c)(7),s=(0,h.e)(m.uT.codeButton);return a[0]!==s?(t=[m.uT.codeButton,s],n=async()=>{let e=await (0,f.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==e||a[4]!==t||a[5]!==n?(i={queryKey:t,queryFn:n,initialData:e,staleTime:1/0},a[3]=e,a[4]=t,a[5]=n,a[6]=i):i=a[6],(0,p.U)(i)}:function(e){let t=(0,h.e)(m.uT.codeButton);return(0,p.U)({queryKey:[m.uT.codeButton,t],queryFn:async()=>{let e=await (0,f.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})};var y=n(91747),x=n(31604),v=n(94236),b=n(38621);let _=({isPrimary:e,children:t,size:n,onOpenChange:a})=>{let r=(0,y.u)("accessible_code_button"),[o,d]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{r&&a&&a(o)},[o,r]),r)?(0,i.jsx)(x.T,{align:"end",focusZoneSettings:{disabled:!0},open:o,onOpen:()=>d(!0),onClose:()=>d(!1),renderAnchor:t=>(0,i.jsx)(s.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(b.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,i.jsx)(b.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,i.jsxs)(v.W,{children:[(0,i.jsx)(v.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(b.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,i.jsx)(v.W.Overlay,{width:"auto",align:"end",children:t})]})};try{_.displayName||(_.displayName="CodeMenuButton")}catch{}let j="CodeDropdownButton-module__NavItem--_hXZP",w=(0,a.A)("localStorage"),N="local",C="cloud";function S(e){var t,n;let{primary:a,size:c,showCodespacesTab:u,isEnterprise:m,localTab:h,codespacesTab:f,localTabProps:p,codespacesPath:g}=e,y="code-button-default-tab",[x,v]=(0,l.useState)(N),b=(0,l.useCallback)(e=>{v(C),w.setItem(y,C),e?.preventDefault()},[]),S=(0,l.useCallback)(e=>{v(N),w.setItem(y,N),e?.preventDefault()},[]);(0,l.useEffect)(()=>{w.getItem(y)===C&&u&&b()},[]);let k=!m&&u;return(0,i.jsxs)(_,{size:c,isPrimary:a,children:[k&&(0,i.jsxs)(r.A,{className:"CodeDropdownButton-module__TabNav--zWa9N",children:[(0,i.jsx)(r.A.Link,{as:s.Q,selected:x===N,onClick:S,className:j,children:"Local"}),!m&&u&&(0,i.jsx)(r.A.Link,{as:s.Q,selected:x===C,onClick:b,className:j,children:"Codespaces"})]}),(0,i.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[x===N&&(h||((t=p)?(0,i.jsx)(d.F,{...t}):null)),x===C&&(f||((n=g)?(0,i.jsx)(o.VO,{children:(0,i.jsx)(I,{codespacesPath:n})}):null))]})]})}function I(e){let t=g().data,n=(0,y.u)("copilot_swe_agent_progress_commands"),{repositoryPolicyInfo:a,...s}=t;return n?(0,i.jsx)(o.NF,{codespacesPath:e.codespacesPath,repoPolicyInfo:a,...s}):(0,i.jsx)(o.NF,{codespacesPath:e.codespacesPath,...t})}try{S.displayName||(S.displayName="CodeDropdownButton")}catch{}try{I.displayName||(I.displayName="SuspendedCodespacesTab")}catch{}},19336:(e,t,n)=>{n.d(t,{G:()=>h});var i=n(74848),a=n(21728),s=n(34031),r=n(11128),l=n(12357),o=n(90177),d=n(53419),c=n(38621),u=n(81945);let m=[];function h(e){let t,n=(0,a.c)(10),{outputNodeExists:h,isRunning:f,isLoading:p,nodeValue:g,nodeError:y,validationErrors:x,additionalActions:v,onRun:b,onStop:_}=e,j=void 0!==p&&p,w=void 0===x?m:x;return n[0]!==v||n[1]!==j||n[2]!==f||n[3]!==y||n[4]!==g||n[5]!==b||n[6]!==_||n[7]!==h||n[8]!==w?(t=(0,i.jsx)(i.Fragment,{children:h?j?(0,i.jsxs)("div",{className:"ExecutionView-module__loadingState--bX4_m",children:[(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"})]}):f&&!g?(0,i.jsx)(s.M,{isRunning:f,messages:{running:"Running the loop...",waiting:"Waiting..."}}):w.length>0?(0,i.jsx)(r.n,{errors:w,title:"Oops, this loop is configured incorrectly",additionalActions:v}):y?(0,i.jsx)(r.n,{errors:[y],title:"Oops, there was an error running this loop",additionalActions:v}):g?(0,i.jsx)(l.U,{isRunning:f,nodeValue:g}):(0,i.jsxs)("div",{className:"ExecutionView-module__emptyState--gD9en",children:[(0,i.jsxs)("div",{className:"ExecutionView-module__emptyStateText--awSRT",children:[(0,i.jsx)("h3",{className:"ExecutionView-module__emptyStateTitle--F8TRM",children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(o.c,{onClick:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{_(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:f,value:g,variant:"default",leadingVisual:(0,i.jsx)(c.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=j,n[2]=f,n[3]=y,n[4]=g,n[5]=b,n[6]=_,n[7]=h,n[8]=w,n[9]=t):t=n[9],t}try{h.displayName||(h.displayName="ExecutionView")}catch{}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},21132:(e,t,n)=>{n.d(t,{s:()=>i});let i={Loaded:"Loaded",Loading:"Loading",NotLoaded:"NotLoaded"}},21229:(e,t,n)=>{n.d(t,{D:()=>u});var i=n(74848),a=n(21728),s=n(46747),r=n(38621),l=n(86877),o=n(26108),d=n(99511),c=n(96540);function u(e){let t,n,u,m,h,f,p=(0,a.c)(20),{onSearch:g,placeholder:y,"aria-label":x,disabled:v,debounceDelay:b}=e,_=void 0===y?"Search...":y,j=void 0===x?"Search":x,w=void 0!==v&&v,[N,C]=(0,c.useState)(""),S=(0,s.d)(g,void 0===b?200:b);p[0]!==S||p[1]!==g?(t=e=>{let t=e.currentTarget.value;C(t),""===t.trim()?g(""):S(t)},p[0]=S,p[1]=g,p[2]=t):t=p[2];let I=t;p[3]!==g?(n=()=>{C(""),g("")},p[3]=g,p[4]=n):n=p[4];let k=n;return p[5]!==j?(u=(0,i.jsx)(l.A.Label,{visuallyHidden:!0,children:j}),p[5]=j,p[6]=u):u=p[6],p[7]!==k||p[8]!==w||p[9]!==N?(m=""!==N?(0,i.jsx)(o.K,{icon:r.XCircleFillIcon,onClick:k,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:w}):void 0,p[7]=k,p[8]=w,p[9]=N,p[10]=m):m=p[10],p[11]!==I||p[12]!==_||p[13]!==N||p[14]!==m?(h=(0,i.jsx)(d.A,{className:"SearchInput-module__searchInput--PKKMu",placeholder:_,value:N,onChange:I,leadingVisual:r.SearchIcon,trailingAction:m}),p[11]=I,p[12]=_,p[13]=N,p[14]=m,p[15]=h):h=p[15],p[16]!==w||p[17]!==u||p[18]!==h?(f=(0,i.jsx)("div",{className:"SearchInput-module__searchContainer--r7MLn",children:(0,i.jsxs)(l.A,{className:"SearchInput-module__searchInputWrapper--fhRw6",disabled:w,children:[u,h]})}),p[16]=w,p[17]=u,p[18]=h,p[19]=f):f=p[19],f}try{u.displayName||(u.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(21728),a=n(27912),s=n(96540);function r(e){let t,n=(0,i.c)(2),r=function(e){let t,n,a,r=(0,i.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[l,o]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{o(e.matches)};return o(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,s.useEffect)(n,a),l}(void 0===e?a.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>P});var i=n(74848),a=n(68273),s=n(21728),r=n(96540),l=n(98755),o=n(25407),d=n(26052),c=n(69726),u=n(84268),m=n(56149),h=n(21373),f=n(62935),p=n(72579),g=n(29e3),y=n(66990),x=n(79634),v=n(79431),b=n(11196),_=n(97665),j=n(33578),w=n(30923),N=n(20622),C=n(53885),S=n(96379),I=n(94747);let k=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,C.e)(N.uT.changeBase);return t[0]!==n?(e={mutationFn:e=>{let{newBaseBranch:t}=e,i=btoa(t);return(0,S.Sr)(n,{method:"PATCH",body:{new_base_binary:i}})},onSuccess:L},t[0]=n,t[1]=e):e=t[1],(0,I.n)(e)}:function(){let e=(0,C.e)(N.uT.changeBase);return(0,I.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,S.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,w.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})};async function L(e){let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,w.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}let T="PullRequestHeaderSummary-module__truncateBranch--bdsQu";var E=n(34261),D=n(95807),R=n(99223),A=n(69599),O=n(37212);function P({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:a="",baseRepositoryOwnerLogin:s="",canChangeBase:p=!1,commitsCount:b,headBranch:w,headRepositoryOwnerLogin:N="",headRepositoryName:C="",isInAdvisoryRepo:S,isEditing:I=!1,mergedBy:L,mergedByName:T,mergedTime:P,pullRequestId:M,pullRequestNumber:$,repositoryId:B,setIsEditing:V,state:U}){var q,G,H;let K,W=(0,_.jE)(),{refListCacheKey:z}=(0,x.X)(),[Q,Z]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(""),[et,en]=(0,r.useState)(""),ei=(0,A.G7)("render_user_display_name"),ea=(0,E.f)(),es=(0,O.NP)(),{mutate:er}=k(),el=e=>{Y(!1),ee(e)},eo=J?()=>(0,i.jsx)(c.A,{size:"small"}):null,ed=N&&N!==s?`${s}:${t}`:t,ec=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(s,N,C,w,S),eu=U===j.Q.Merged?L?{login:L,displayName:T}:null:e,em=(q=U,G=b,H=eu?.login,K=`${G} ${G>1?"commits":"commit"}`,q!==j.Q.Merged?`wants to merge ${K} into`:H?`merged ${K} into`:`${K} merged into`);return(0,i.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center overflow-hidden PullRequestHeaderSummary-module__summaryContainer--iNR1T",children:[eu?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,o.dCN)({owner:eu.login}),href:`/${eu.login}`,children:ei?(0,i.jsx)(d.v,{login:eu.login,profileName:eu.displayName}):eu.login})," "]}):null,em,p&&I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.PI,{cacheKey:z,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:s,repo:a,types:["branch"],onSelectItem:e=>{Z(!0),en(e)}}),(0,i.jsx)(m.ZL,{children:(0,i.jsxs)(g.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:Q,onDismiss:()=>{Z(!1),en(""),ee("")},children:[(0,i.jsx)(g.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),X&&(0,i.jsx)(v.v,{className:"mt-2",variant:"critical",children:X}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:J?"Base branch update in progress.":""}),(0,i.jsx)(h.Q,{alignContent:"center","aria-disabled":J?"true":void 0,block:!0,className:"mt-3",disabled:J,leadingVisual:eo,onClick:()=>{Y(!0),er({newBaseBranch:et},{onError:e=>el(e.message),onSuccess:async()=>{try{await Promise.all([W.refetchQueries({queryKey:ea},{throwOnError:!0}),W.refetchQueries({queryKey:es},{throwOnError:!0})]),Y(!1),V?.(!1),Z(!1)}catch{el("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:J?null:"Change base"})]})]})})]}):(0,i.jsx)(F,{branch:t,branchText:ed,repositoryName:a,repositoryOwner:s}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(F,{branch:w,branchText:ec,repositoryName:C,repositoryOwner:N}),(0,i.jsx)(l.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:N?ec:w})]}),U===j.Q.Merged&&(0,i.jsx)(f.A,{datetime:P}),U===j.Q.Open&&!(0,R.k)()&&(0,i.jsx)(D.i,{processingIndicatorUrl:(0,o.CZ9)({owner:s,repo:a,number:$}),repositoryId:B,pullRequestId:M})]})}let F=(0,a.Z6)()?function(e){let t=(0,s.c)(12),{branchText:n,repositoryOwner:a,repositoryName:r,branch:l}=e;if(r&&a){let e,s,d;t[0]!==l||t[1]!==r||t[2]!==a?(e=(0,o.WJ9)({owner:a,repo:r,branch:l}),t[0]=l,t[1]=r,t[2]=a,t[3]=e):e=t[3];let c=e,u=`${a}/${r}:${l}`;return t[4]!==n||t[5]!==c?(s=(0,i.jsx)(p.A,{href:c,className:T,children:n}),t[4]=n,t[5]=c,t[6]=s):s=t[6],t[7]!==u||t[8]!==s?(d=(0,i.jsx)(b.m,{text:u,children:s}),t[7]=u,t[8]=s,t[9]=d):d=t[9],d}{let e;return t[10]!==n?(e=(0,i.jsx)(p.A,{as:"span",className:T,title:"This repository has been deleted",children:n}),t[10]=n,t[11]=e):e=t[11],e}}:function({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(p.A,{as:"span",className:T,title:"This repository has been deleted",children:e});{let s=(0,o.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(b.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(p.A,{href:s,className:T,children:e})})}};try{P.displayName||(P.displayName="PullRequestHeaderSummary")}catch{}try{F.displayName||(F.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>l});var i=n(21728),a=n(50050),s=n(33026),r=n(64917);function l(){let e,t=(0,i.c)(4),n=(0,a.Ud)(d),l=(0,r.I)(o),c=n!==s.kj&&n!==s.qD;if(void 0===l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(c){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function o(e){return e?.owned}function d(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(38621),l=n(84268),o=n(76720),d=n(96540);function c(e){let t,n,c,u,m,h,f=(0,a.c)(8),{regionName:p}=e;return f[0]!==p?(t=()=>{let e=`ERROR_FALLBACK_${p.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${p} error fallback`})},n=[p],f[0]=p,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,d.useEffect)(t,n),f[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(o.E.Visual,{children:(0,i.jsx)(r.AlertIcon,{size:"medium"})}),u=(0,i.jsx)(o.E.Heading,{children:"Something went wrong"}),f[3]=c,f[4]=u):(c=f[3],u=f[4]),f[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(l.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),f[5]=m):m=f[5],f[6]!==p?(h=(0,i.jsx)("div",{className:"ErrorFallback-module__errorFallbackContainer--uGjJA",children:(0,i.jsxs)(o.E,{children:[c,u,(0,i.jsxs)(o.E.Description,{children:[p," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",m,"."]})]})}),f[6]=p,f[7]=h):h=f[7],h}try{c.displayName||(c.displayName="ErrorFallback")}catch{}},22841:(e,t,n)=>{n.d(t,{s:()=>y});var i=n(21728),a=n(2635),s=n(73952),r=n(69599),l=n(53419),o=n(46996),d=n(99852),c=n(96540),u=n(48881);let m=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),h=(e,t)=>{let n=(e||[]).map(e=>m(e)),i=(t||[]).map(e=>m(e));return n.length===i.length&&(0,o.A)((0,d.A)(n),(0,d.A)(i))},f=e=>null==e?"":m(e),p=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?m(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?f(e):JSON.stringify(e)},g=(e,t)=>{let n=[],i={};return f(e.title)!==f(t.title)&&(n.push("title"),i.title={expected:p(t.title),actual:p(e.title)}),f(e.body)!==f(t.description)&&(n.push("body"),i.body={expected:p(t.description),actual:p(e.body)}),f(e.repository)!==f(t.repository)&&(n.push("repository"),i.repository={expected:p(t.repository),actual:p(e.repository)}),f(e.template)!==f(t.template)&&(n.push("template"),i.template={expected:p(t.template),actual:p(e.template)}),f(e.issueType)!==f(t.issueType)&&(n.push("issueType"),i.issueType={expected:p(t.issueType),actual:p(e.issueType)}),f(e.milestone)!==f(t.milestone)&&(n.push("milestone"),i.milestone={expected:p(t.milestone),actual:p(e.milestone)}),h(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:p(t.assignees),actual:p(e.assignees)}),h(e.labels,t.labels)||(n.push("labels"),i.labels={expected:p(t.labels),actual:p(e.labels)}),((e,t)=>{let n=e||[],i=t||[];if(n.length!==i.length)return!1;if(0===n.length)return!0;if(!(n.some(e=>"string"==typeof e)||i.some(e=>"string"==typeof e))&&n.every(e=>"object"==typeof e&&e.id)&&i.every(e=>"object"==typeof e&&e.id)){let e=n.map(e=>m(e.id||"")),t=i.map(e=>m(e.id||""));return(0,o.A)((0,d.A)(e),(0,d.A)(t))}let a=e=>"string"==typeof e?e:e.title||"",s=n.map(e=>m(a(e))),r=i.map(e=>m(a(e)));return(0,o.A)((0,d.A)(s),(0,d.A)(r))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:p(t.projects),actual:p(e.projects)}),(0,o.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:p(t.templateFormValuesById),actual:p(e.templateFormValues)}),h(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),i.blockedByTags={expected:p(t.blockedByTags),actual:p(e.blockedByTags)}),h(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),i.isBlockingTags={expected:p(t.isBlockingTags),actual:p(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function y(e){let t,n,o=(0,i.c)(8),{issues:d,isStreaming:m,isIssueTree:h}=e,f=void 0!==h&&h,{messages:p,threadSelectedAt:y}=(0,a.Pk)(),{messageId:v}=(0,u.H)();o[0]!==f||o[1]!==m||o[2]!==d||o[3]!==v||o[4]!==p||o[5]!==y?(t=()=>{let e=(0,s.B)(p),t=e[e.length-1],n=e.find(e=>e.id===v);if(!m&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=y&&n.references&&d.length>0){let e=n.references.filter(x);for(let t of d)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=g(t,n);if(!e.isEqual)return void(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:v,issueTree:f,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,r.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[m,d,p,y,f,v],o[0]=f,o[1]=m,o[2]=d,o[3]=v,o[4]=p,o[5]=y,o[6]=t,o[7]=n):(t=o[6],n=o[7]),(0,c.useEffect)(t,n)}function x(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}},23284:(e,t,n)=>{n.d(t,{r:()=>p,t:()=>y});var i=n(74848),a=n(21728),s=n(35247),r=n(38621),l=n(20382),o=n(96540),d=n(1747),c=n(39344),u=n(46461),m=n(48881),h=n(7026),f=n(83796);let p={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t}};function g(e){try{let t=(0,l.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(p.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function y({data:e}){let t=(0,h.M)(e,g,[]),{messageId:n}=(0,m.H)(),{updateItem:a,openItem:r,openPreviewPane:l}=(0,d.xx)(),p=(0,o.useMemo)(()=>Array.from((0,u.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function y(e,t){if(!e.url)return;let[i,s]=e.repository?.split("/")??[];if(!i||!s||!e.number)return;let o=`issue:${i}/${s}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:i,repo:s,id:o,href:e.url,type:"issue"}),r(o),l(t?.currentTarget)}let b=e=>{if(s.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),y(e.item,t))}}))};function _(e){return(0,i.jsx)(c.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(x,{item:e.item}),trailingBadge:(0,i.jsx)(v,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),y(e.item,t)},blockedBy:b(e),children:e.children.map(_)},e.item.tag)}return(0,i.jsx)("div",{className:f.A.container,children:p.map(e=>{let t=-1;return(0,u.YR)(e,()=>t++),(0,i.jsxs)(c.K,{subIssueCount:t,children:[(0,i.jsx)(c.K.RootItem,{leadingVisual:(0,i.jsx)(x,{item:e.item}),title:e.item.title??"",trailingBadge:(0,i.jsx)(v,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),y(e.item,t)},blockedBy:b(e)}),e.children.map(_)]},e.item.tag)})})}function x(e){let t=(0,a.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function v(e){let t,n=(0,a.c)(5),{node:s}=e;if(!s.item.repository||!s.item.number)return null;if(s.item.repository===s.parent?.item.repository){let e;return n[0]!==s.item.number?(e=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",s.item.number]}),n[0]=s.item.number,n[1]=e):e=n[1],e}return n[2]!==s.item.number||n[3]!==s.item.repository?(t=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:[s.item.repository,"#",s.item.number]}),n[2]=s.item.number,n[3]=s.item.repository,n[4]=t):t=n[4],t}try{y.displayName||(y.displayName="IssueTreeBlock")}catch{}try{x.displayName||(x.displayName="LeadingVisual")}catch{}try{v.displayName||(v.displayName="IssueLocation")}catch{}},24469:(e,t,n)=>{n.d(t,{b:()=>so});var i,a,s,r,l,o=n(74848),d=n(68273),c=n(21728),u=n(70719),m=n(79472),h=n(18799),f=n(71315),p=n(83494),g=n(70843),y=n(15220),x=n(87555),v=n(34164),b=n(96540),_=n(70170),j=n(56051),w=n(5524),N=n(57478),C=n(96459),S=n(53627),I=n(82603),k=n(27011);let L=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(61),{basePath:v,fileFilterMenuOptions:L,fileFilterState:E,filterSize:D,viewerLogin:R,setFileFilterState:A}=e,[O]=(0,C.o)();x[0]!==v?(t={basePath:v},x[0]=v,x[1]=t):t=x[1];let{data:P}=(0,I.dG)(t);x[2]!==E?(n={...E},x[2]=E,x[3]=n):n=x[3];let{filterText:F,fileExtensions:M,unselectedFileExtensions:$,showOnlyOwnedFiles:B,showDeletedFiles:V,showOnlyManifestFiles:U,showVendoredFiles:q,showViewedFiles:G}=n,{canSeeDeletedFilesFilter:H,canSeeOnlyManifestFilesFilter:K,canSeeVendorFilesFilter:W}=L,z=(0,k.q6)(),{clearAllFilters:Q}=(0,k.or)(),{canSeeCodeownersFilter:Z}=L,J=0;if(P){let e;Z=P.isViewerOneOfMultipleCodeowners,x[4]!==P.ownershipByPath?(e=Object.values(P.ownershipByPath).filter(T),x[4]=P.ownershipByPath,x[5]=e):e=x[5],J=e.length}let Y=(0,b.useRef)((0,_.s)(e=>ee({filterText:e}),250)),X=(e,t)=>{let n=$;"selectFileExtension"===e?n=new Set([...$].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...$,t.extension]));let i=Object.keys(M).filter(e=>!n.has(e)),a=new URLSearchParams(O);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),ee({unselectedFileExtensions:n},a)};x[6]!==A?(i=(e,t)=>{t&&(0,S.MM)(t),A({...e})},x[6]=A,x[7]=i):i=x[7];let ee=i;x[8]!==Q||x[9]!==O?(a=()=>{let e=new URLSearchParams(O);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,S.MM)(e),Q()},x[8]=Q,x[9]=O,x[10]=a):a=x[10];let et=a;return x[11]!==Y?(s=e=>Y.current(e),x[11]=Y,x[12]=s):s=x[12],x[13]!==Z||x[14]!==J||x[15]!==ee||x[16]!==O||x[17]!==B||x[18]!==R?(r=Z&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{selectionVariant:"single",children:(0,o.jsx)(w.l.Item,{selected:B,onSelect:()=>{if(!R)return;let e=new URLSearchParams(O);B?e.delete("owned-by[]",R):e.set("owned-by[]",R),ee({showOnlyOwnedFiles:!B},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(N.A,{children:J})]})})})]}),x[13]=Z,x[14]=J,x[15]=ee,x[16]=O,x[17]=B,x[18]=R,x[19]=r):r=x[19],x[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(w.l.Divider,{}),x[20]=l):l=x[20],x[21]!==K||x[22]!==ee||x[23]!==O||x[24]!==U?(d=K&&(0,o.jsx)(w.l.Item,{selected:U,onSelect:()=>{let e=new URLSearchParams(O);e.set("manifests",`${!U}`),ee({showOnlyManifestFiles:!U},e)},children:"Only manifest files"}),x[21]=K,x[22]=ee,x[23]=O,x[24]=U,x[25]=d):d=x[25],x[26]!==H||x[27]!==ee||x[28]!==O||x[29]!==V?(u=H&&(0,o.jsx)(w.l.Item,{selected:V,onSelect:()=>{let e=new URLSearchParams(O);e.set("show-deleted-files",`${!V}`),ee({showDeletedFiles:!V},e)},children:"Deleted files"}),x[26]=H,x[27]=ee,x[28]=O,x[29]=V,x[30]=u):u=x[30],x[31]!==W||x[32]!==ee||x[33]!==O||x[34]!==q?(m=W&&(0,o.jsx)(w.l.Item,{selected:q,onSelect:()=>{let e=new URLSearchParams(O);e.set("show-vendored-files",`${!q}`),ee({showVendoredFiles:!q},e)},children:"Vendored files"}),x[31]=W,x[32]=ee,x[33]=O,x[34]=q,x[35]=m):m=x[35],x[36]!==ee||x[37]!==O||x[38]!==G?(h=()=>{let e=new URLSearchParams(O);e.set("show-viewed-files",`${!G}`),ee({showViewedFiles:!G},e)},x[36]=ee,x[37]=O,x[38]=G,x[39]=h):h=x[39],x[40]!==G||x[41]!==h?(f=(0,o.jsx)(w.l.Item,{selected:G,onSelect:h,children:"Viewed files"}),x[40]=G,x[41]=h,x[42]=f):f=x[42],x[43]!==m||x[44]!==f||x[45]!==d||x[46]!==u?(p=(0,o.jsxs)(w.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[d,u,m,f]}),x[43]=m,x[44]=f,x[45]=d,x[46]=u,x[47]=p):p=x[47],x[48]!==p||x[49]!==r?(g=(0,o.jsxs)(o.Fragment,{children:[r,l,p]}),x[48]=p,x[49]=r,x[50]=g):g=x[50],x[51]!==M||x[52]!==D||x[53]!==F||x[54]!==z||x[55]!==et||x[56]!==X||x[57]!==g||x[58]!==s||x[59]!==$?(y=(0,o.jsx)(j.kF,{filterSize:D,filterText:F,fileExtensions:M,unselectedFileExtensions:$,onFilterTextChange:s,onFilterChange:X,onClearAllFilters:et,isFilteringActive:z,additionalFilterGroups:g}),x[51]=M,x[52]=D,x[53]=F,x[54]=z,x[55]=et,x[56]=X,x[57]=g,x[58]=s,x[59]=$,x[60]=y):y=x[60],y}:function({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:i,viewerLogin:a,setFileFilterState:s}){let[r]=(0,C.o)(),{data:l}=(0,I.dG)({basePath:e}),{filterText:d,fileExtensions:c,unselectedFileExtensions:u,showOnlyOwnedFiles:m,showDeletedFiles:h,showOnlyManifestFiles:f,showVendoredFiles:p,showViewedFiles:g}={...n},{canSeeDeletedFilesFilter:y,canSeeOnlyManifestFilesFilter:x,canSeeVendorFilesFilter:v}=t,L=(0,k.q6)(),{clearAllFilters:T}=(0,k.or)(),{canSeeCodeownersFilter:E}=t,D=0;l&&(E=l.isViewerOneOfMultipleCodeowners,D=Object.values(l.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let R=(0,b.useRef)((0,_.s)(e=>A({filterText:e}),250)),A=(0,b.useCallback)((e,t)=>{t&&(0,S.MM)(t),s({...e})},[s]),O=(0,b.useCallback)(()=>{let e=new URLSearchParams(r);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,S.MM)(e),T()},[r,T]);return(0,o.jsx)(j.kF,{filterSize:i,filterText:d,fileExtensions:c,unselectedFileExtensions:u,onFilterTextChange:e=>R.current(e),onFilterChange:(e,t)=>{let n=u;"selectFileExtension"===e?n=new Set([...u].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...u,t.extension]));let i=Object.keys(c).filter(e=>!n.has(e)),a=new URLSearchParams(r);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),A({unselectedFileExtensions:n},a)},onClearAllFilters:O,isFilteringActive:L,additionalFilterGroups:(0,o.jsxs)(o.Fragment,{children:[E&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{selectionVariant:"single",children:(0,o.jsx)(w.l.Item,{selected:m,onSelect:()=>{if(!a)return;let e=new URLSearchParams(r);m?e.delete("owned-by[]",a):e.set("owned-by[]",a),A({showOnlyOwnedFiles:!m},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(N.A,{children:D})]})})})]}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[x&&(0,o.jsx)(w.l.Item,{selected:f,onSelect:()=>{let e=new URLSearchParams(r);e.set("manifests",`${!f}`),A({showOnlyManifestFiles:!f},e)},children:"Only manifest files"}),y&&(0,o.jsx)(w.l.Item,{selected:h,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-deleted-files",`${!h}`),A({showDeletedFiles:!h},e)},children:"Deleted files"}),v&&(0,o.jsx)(w.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-vendored-files",`${!p}`),A({showVendoredFiles:!p},e)},children:"Vendored files"}),(0,o.jsx)(w.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-viewed-files",`${!g}`),A({showViewedFiles:!g},e)},children:"Viewed files"})]})]})})};function T(e){return e.isOwnedByViewer}try{L.displayName||(L.displayName="FileFilter")}catch{}var E=n(1946),D=n(75202),R=n(81960),A=n(69726),O=n(84268),P=n(11196);let F="GroupsList-module__GroupsListContainer--x6dMy",M="GroupsList-module__GroupsListItemsShiftLeft--PGMNM",$="GroupsList-module__GroupItem--vAFCe",B="GroupsList-module__GroupsListToggle--KO5Om";var V=n(34535),U=n(82130);let q=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(5),{sendPullRequestAnalyticsEvent:i}=(0,U.q)(),a=(0,k.JA)();n[0]!==a||n[1]!==i?(e=e=>{let{isErrorState:t,unavailableReason:n,userPreferenceDisabled:s,hasGroups:r}=e,l=void 0!==t&&t,o=void 0!==s&&s,d=void 0!==r&&r;i("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:d&&!l&&!o,presented_and_not_visible:d&&!l&&o,has_groups:d,is_error_state:l,selected_group_id:a?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...n&&{unavailable_reason:n},...a&&{selected_group_name:a.name}})},n[0]=a,n[1]=i,n[2]=e):e=n[2];let s=e;return n[3]!==s?(t={sendChangeGroupsPresentedEvent:s},n[3]=s,n[4]=t):t=n[4],t}:function(){let{sendPullRequestAnalyticsEvent:e}=(0,U.q)(),t=(0,k.JA)();return{sendChangeGroupsPresentedEvent:(0,b.useCallback)(({isErrorState:n=!1,unavailableReason:i,userPreferenceDisabled:a=!1,hasGroups:s=!1})=>{e("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:s&&!n&&!a,presented_and_not_visible:s&&!n&&a,has_groups:s,is_error_state:n,selected_group_id:t?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...i&&{unavailable_reason:i},...t&&{selected_group_name:t.name}})},[e,t])}};var G=n(38621),H=n(26108),K=n(64451),W=n(86877),z=n(46720),Q=n(4175),Z=n(21373);let J=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(16),{onClose:r,onSubmit:l,returnFocusRef:d,feedbackOptions:u,precheckOther:m}=e,h=void 0!==m&&m,[f,p]=(0,b.useState)(!1);s[0]!==h?(t=h?["OTHER"]:[],s[0]=h,s[1]=t):t=s[1];let[g,x]=(0,b.useState)(t),[v,_]=(0,b.useState)("");s[2]!==g||s[3]!==l||s[4]!==v?(n=e=>{e.preventDefault(),p(!0),g.length&&l({type:"NEGATIVE",feedbackChoice:g,textResponse:v})},s[2]=g,s[3]=l,s[4]=v,s[5]=n):n=s[5];let j=n;return s[6]!==f||s[7]!==g||s[8]!==u||s[9]!==j||s[10]!==v?(i=()=>(0,o.jsxs)("form",{onSubmit:j,children:[(0,o.jsxs)(y.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(K.A,{onChange:x,required:!0,children:[(0,o.jsx)(K.A.Label,{children:"Category"}),u.map(e=>(0,o.jsxs)(W.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(z.A,{value:e.value,checked:g.includes(e.value)}),(0,o.jsx)(W.A.Label,{children:e.label})]},e.value)),f&&!g.length&&(0,o.jsx)(K.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(W.A,{id:"text_response",children:[(0,o.jsx)(W.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(Q.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:v,resize:"vertical",onChange:e=>_(e.currentTarget.value)})]})]}),(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(Z.Q,{type:"submit",disabled:f&&(!v||!g),children:"Submit"})})]}),s[6]=f,s[7]=g,s[8]=u,s[9]=j,s[10]=v,s[11]=i):i=s[11],s[12]!==r||s[13]!==d||s[14]!==i?(a=(0,o.jsx)(y.l,{onClose:r,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:d,renderBody:i}),s[12]=r,s[13]=d,s[14]=i,s[15]=a):a=s[15],a}:function({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i,precheckOther:a=!1}){let[s,r]=(0,b.useState)(!1),[l,d]=(0,b.useState)(a?["OTHER"]:[]),[c,u]=(0,b.useState)(""),m=e=>{e.preventDefault(),r(!0),l.length&&t({type:"NEGATIVE",feedbackChoice:l,textResponse:c})};return(0,o.jsx)(y.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,o.jsxs)("form",{onSubmit:m,children:[(0,o.jsxs)(y.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(K.A,{onChange:d,required:!0,children:[(0,o.jsx)(K.A.Label,{children:"Category"}),i.map(e=>(0,o.jsxs)(W.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(z.A,{value:e.value,checked:l.includes(e.value)}),(0,o.jsx)(W.A.Label,{children:e.label})]},e.value)),s&&!l.length&&(0,o.jsx)(K.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(W.A,{id:"text_response",children:[(0,o.jsx)(W.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(Q.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>u(e.currentTarget.value)})]})]}),(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(Z.Q,{type:"submit",disabled:s&&(!c||!l),children:"Submit"})})]})})};try{J.displayName||(J.displayName="NegativeFeedbackForm")}catch{}let Y=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{disabled:a,onSubmit:s}=e;return i[0]!==s?(t=()=>s({type:"POSITIVE"}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)(H.K,{size:"small",variant:"invisible",disabled:a,icon:G.ThumbsupIcon,"aria-label":"Positive feedback",onClick:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:function({disabled:e,onSubmit:t}){return(0,o.jsx)(H.K,{size:"small",variant:"invisible",disabled:e,icon:G.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})},X=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{disabled:l,onSubmit:d,feedbackOptions:u}=e,[m,h]=(0,b.useState)(!1),f=(0,b.useRef)(null);r[0]!==d?(t=e=>{d(e),h(!1)},r[0]=d,r[1]=t):t=r[1];let p=t;return r[2]!==m||r[3]!==u||r[4]!==p?(n=m&&(0,o.jsx)(J,{onClose:()=>h(!1),onSubmit:p,returnFocusRef:f,feedbackOptions:u}),r[2]=m,r[3]=u,r[4]=p,r[5]=n):n=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>h(!0),r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(H.K,{ref:f,size:"small",variant:"invisible",disabled:l,icon:G.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:i}),r[7]=l,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s=(0,o.jsxs)(o.Fragment,{children:[n,a]}),r[9]=n,r[10]=a,r[11]=s):s=r[11],s}:function({disabled:e,onSubmit:t,feedbackOptions:n}){let[i,a]=(0,b.useState)(!1),s=(0,b.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)(J,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,o.jsx)(H.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:G.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>a(!0)})]})};try{Y.displayName||(Y.displayName="PositiveFeedbackButton")}catch{}try{X.displayName||(X.displayName="NegativeFeedbackButton")}catch{}var ee=n(20622),et=n(53885),en=n(94747),ei=n(48845);let ea=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,et.e)(ee.uT.submitCopilotGroupsFeedback);return t[0]!==n?(e={mutationFn:async e=>{let{type:t,feedbackChoice:i,textResponse:a}=e,s={feedback:t};a&&(s.text_response=a),i&&i.length>0&&(s.feedback_choice=i);let r=await (0,ei.q$)(n,{method:"POST",headers:{Accept:"application/json"},body:s}),l=await (0,ei.hp)(r);return(0,ei.R)(r,l),l}},t[0]=n,t[1]=e):e=t[1],(0,en.n)(e)}:function(){let e=(0,et.e)(ee.uT.submitCopilotGroupsFeedback);return(0,en.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,ei.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,ei.hp)(s);return(0,ei.R)(s,r),r}})},es=(0,d.Z6)()?e=>{let t,n,i,a,s,r=(0,c.c)(15),{onNegativeFeedbackSubmit:l}=e,[d,u]=(0,b.useState)(),{mutate:m}=ea(),h=(0,k.xW)().changeGroupFeedbackOptions;r[0]!==m?(t=e=>{u(e.type),m(e)},r[0]=m,r[1]=t):t=r[1];let f=t;r[2]!==f||r[3]!==l?(n=e=>{l(),f(e)},r[2]=f,r[3]=l,r[4]=n):n=r[4];let p=n;return r[5]!==f||r[6]!==d?(i="NEGATIVE"!==d&&(0,o.jsx)(Y,{disabled:!!d,onSubmit:f}),r[5]=f,r[6]=d,r[7]=i):i=r[7],r[8]!==h||r[9]!==p||r[10]!==d?(a="POSITIVE"!==d&&(0,o.jsx)(X,{disabled:!!d,onSubmit:p,feedbackOptions:h}),r[8]=h,r[9]=p,r[10]=d,r[11]=a):a=r[11],r[12]!==i||r[13]!==a?(s=(0,o.jsxs)("div",{className:"d-flex",children:[i,a]}),r[12]=i,r[13]=a,r[14]=s):s=r[14],s}:({onNegativeFeedbackSubmit:e})=>{let[t,n]=(0,b.useState)(),{mutate:i}=ea(),a=(0,k.xW)().changeGroupFeedbackOptions,s=e=>{n(e.type),i(e)};return(0,o.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,o.jsx)(Y,{disabled:!!t,onSubmit:s}),"POSITIVE"!==t&&(0,o.jsx)(X,{disabled:!!t,onSubmit:t=>{e(),s(t)},feedbackOptions:a})]})},er=(0,d.Z6)()?e=>{let t,n,i=(0,c.c)(5),{className:a,onNegativeFeedbackSubmit:s}=e;return i[0]!==s?(t=(0,o.jsx)(D.t,{fallback:null,children:(0,o.jsx)(es,{onNegativeFeedbackSubmit:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)("div",{className:a,children:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:({className:e,onNegativeFeedbackSubmit:t})=>(0,o.jsx)("div",{className:e,children:(0,o.jsx)(D.t,{fallback:null,children:(0,o.jsx)(es,{onNegativeFeedbackSubmit:t})})});try{es.displayName||(es.displayName="Feedback")}catch{}try{er.displayName||(er.displayName="GroupsFeedback")}catch{}var el=n(70263),eo=n(40235),ed=n(97286),ec=n(96379);function eu(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function em(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}function eh({baseSha:e,headSha:t,changeGroupsURL:n}){return[ee.uT.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}let ef=(0,d.Z6)()?function(e,t){let n,i,a,s,r,l=(0,c.c)(15),o=(0,et.e)(ee.uT.changeGroups);l[0]!==t||l[1]!==o||l[2]!==e?(n=eh({headSha:e,baseSha:t,changeGroupsURL:o}),l[0]=t,l[1]=o,l[2]=e,l[3]=n):n=l[3];let d=n,{updateChangeGroupGeneration:u}=(0,k.wL)(),m=(0,k.xW)();l[4]!==m?(i=()=>{let e=m.latestChangeGroupOrchestration?.state;if(e&&eu(e))return m},l[4]=m,l[5]=i):i=l[5];let h=i;return l[6]!==o||l[7]!==u?(a=async()=>{let e=await (0,ec.QJ)(o);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return u(t),t},l[6]=o,l[7]=u,l[8]=a):a=l[8],l[9]!==h?(s=h(),l[9]=h,l[10]=s):s=l[10],l[11]!==d||l[12]!==a||l[13]!==s?(r={queryKey:d,queryFn:a,initialData:s,staleTime:1/0},l[11]=d,l[12]=a,l[13]=s,l[14]=r):r=l[14],(0,ed.I)(r)}:function(e,t){let n=(0,et.e)(ee.uT.changeGroups),i=eh({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:a}=(0,k.wL)(),s=(0,k.xW)(),r=(0,b.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&eu(e))return s},[s]);return(0,ed.I)({queryKey:i,queryFn:async()=>{let e=await (0,ec.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return a(t),t},initialData:r(),staleTime:1/0})},ep=(0,d.Z6)()?function(e,t,n){let i,a,s=(0,c.c)(7),r=(0,el.A)(),{refetch:l}=ef(n,t);s[0]!==r||s[1]!==l?(i=(0,_.n)(()=>{r()&&l()},2e3),s[0]=r,s[1]=l,s[2]=i):i=s[2];let o=i;s[3]!==t||s[4]!==n||s[5]!==o?(a=e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>o(),e.wait||0)},s[3]=t,s[4]=n,s[5]=o,s[6]=a):a=s[6];let d=a;(0,eo.x)(e,d)}:function(e,t,n){let i=(0,el.A)(),{refetch:a}=ef(n,t),s=(0,b.useMemo)(()=>(0,_.n)(()=>{i()&&a()},2e3),[i,a]),r=(0,b.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,eo.x)(e,r)};function eg(e){switch(e){case"DIFF_TOO_LARGE":case"TOO_MANY_GROUPS":return"Groups are unavailable because the PR exceeds the size limit.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";default:return"Copilot was unable to generate groups for this pull request."}}var ey=n(82075);let ex=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(46),{groups:p,activeGroupId:g,onSelectGroup:y,onClearActiveGroup:x,isLoadingState:_}=e,{sendPullRequestAnalyticsEvent:j}=(0,U.q)(),{sendChangeGroupsPresentedEvent:C}=q(),{fullDiff:S}=(0,k.L3)(),I=(0,k.a_)(),L=(0,k.TV)(),T=(0,k.r$)(),E=(0,b.useRef)(null),{error:D}=ef(S.headOid,S.baseOid),O=!!D&&!_;ep(I,S.baseOid,S.headOid),f[0]!==p.length||f[1]!==_||f[2]!==C||f[3]!==O||f[4]!==L?(t=()=>{_||(O||L?C({isErrorState:!0,unavailableReason:L||void 0}):p.length>0?C({isErrorState:!1,hasGroups:!0}):C({isErrorState:!1,hasGroups:!1}))},f[0]=p.length,f[1]=_,f[2]=C,f[3]=O,f[4]=L,f[5]=t):t=f[5],f[6]!==p||f[7]!==_||f[8]!==C||f[9]!==O||f[10]!==L?(n=[p,_,O,L,C],f[6]=p,f[7]=_,f[8]=C,f[9]=O,f[10]=L,f[11]=n):n=f[11],(0,b.useEffect)(t,n),f[12]!==x||f[13]!==j?(i=()=>{j("groups_list.clear_group","GROUPS_LIST_ITEM"),x()},f[12]=x,f[13]=j,f[14]=i):i=f[14];let P=i;f[15]!==P?(a=()=>{P(),requestAnimationFrame(()=>{E.current?.focus()})},f[15]=P,f[16]=a):a=f[16];let $=a,V=p.length>0,{isCollapsed:H,handleToggleCollapsed:K}=ew(T);f[17]!==K?(s=()=>{K(),requestAnimationFrame(()=>{E.current?.focus()})},f[17]=K,f[18]=s):s=f[18];let W=s;f[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(R.A,{as:"h2",className:"h6",children:"Groups by Copilot"}),f[19]=r):r=f[19];let z=r;return f[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,v.$)(F),f[20]=l):l=f[20],f[21]!==p.length||f[22]!==K||f[23]!==V||f[24]!==H||f[25]!==_?(d=_?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[z,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(A.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,v.$)("d-flex flex-row flex-items-center fgColor-muted",B),onClick:K,"aria-expanded":!H,ref:E,children:[z,H&&V&&(0,o.jsx)(N.A,{scheme:"secondary",className:"mx-2",children:p.length}),H?(0,o.jsx)(G.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(G.ChevronUpIcon,{className:"ml-auto"})]}),f[21]=p.length,f[22]=K,f[23]=V,f[24]=H,f[25]=_,f[26]=d):d=f[26],f[27]!==g||f[28]!==p||f[29]!==P||f[30]!==$||f[31]!==V||f[32]!==H||f[33]!==y||f[34]!==W?(u=V&&(0,o.jsxs)("div",{className:(0,v.$)("mt-n2",M),children:[H&&!g?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(w.l,{children:[!H&&(0,o.jsx)(w.l.Item,{active:void 0===g,onSelect:P,children:"All files"},"All files"),p.toSorted(ev).map(e=>(0,o.jsx)(e_,{group:e,activeGroupId:g,onSelectGroup:y,isListCollapsed:H,onClickGroupWhenCollapsed:$},e.id)).filter(Boolean)]}),!H&&(0,o.jsx)(er,{className:"ml-2",onNegativeFeedbackSubmit:W})]}),f[27]=g,f[28]=p,f[29]=P,f[30]=$,f[31]=V,f[32]=H,f[33]=y,f[34]=W,f[35]=u):u=f[35],f[36]!==V||f[37]!==H||f[38]!==_||f[39]!==O||f[40]!==L?(m=!H&&!V&&!_&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:L?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:eg(L)})," ",(0,o.jsx)(eb,{})]}):O&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})}),f[36]=V,f[37]=H,f[38]=_,f[39]=O,f[40]=L,f[41]=m):m=f[41],f[42]!==m||f[43]!==d||f[44]!==u?(h=(0,o.jsxs)("div",{className:l,children:[d,u,m]}),f[42]=m,f[43]=d,f[44]=u,f[45]=h):h=f[45],h}:function({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i,isLoadingState:a}){let{sendPullRequestAnalyticsEvent:s}=(0,U.q)(),{sendChangeGroupsPresentedEvent:r}=q(),{fullDiff:l}=(0,k.L3)(),d=(0,k.a_)(),c=(0,k.TV)(),u=(0,k.r$)(),m=(0,b.useRef)(null),{error:h}=ef(l.headOid,l.baseOid),f=!!h&&!a;ep(d,l.baseOid,l.headOid),(0,b.useEffect)(()=>{a||(f||c?r({isErrorState:!0,unavailableReason:c||void 0}):e.length>0?r({isErrorState:!1,hasGroups:!0}):r({isErrorState:!1,hasGroups:!1}))},[e,a,f,c,r]);let p=()=>{s("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},g=()=>{p(),requestAnimationFrame(()=>{m.current?.focus()})},y=e.length>0,{isCollapsed:x,handleToggleCollapsed:_}=ew(u),j=(0,o.jsx)(R.A,{as:"h2",className:"h6",children:"Groups by Copilot"});return(0,o.jsxs)("div",{className:(0,v.$)(F),children:[a?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[j,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(A.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,v.$)("d-flex flex-row flex-items-center fgColor-muted",B),onClick:_,"aria-expanded":!x,ref:m,children:[j,x&&y&&(0,o.jsx)(N.A,{scheme:"secondary",className:"mx-2",children:e.length}),x?(0,o.jsx)(G.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(G.ChevronUpIcon,{className:"ml-auto"})]}),y&&(0,o.jsxs)("div",{className:(0,v.$)("mt-n2",M),children:[x&&!t?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(w.l,{children:[!x&&(0,o.jsx)(w.l.Item,{active:void 0===t,onSelect:p,children:"All files"},"All files"),e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,o.jsx)(e_,{group:e,activeGroupId:t,onSelectGroup:n,isListCollapsed:x,onClickGroupWhenCollapsed:g},e.id)).filter(Boolean)]}),!x&&(0,o.jsx)(er,{className:"ml-2",onNegativeFeedbackSubmit:()=>{_(),requestAnimationFrame(()=>{m.current?.focus()})}})]}),!x&&!y&&!a&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:eg(c)})," ",(0,o.jsx)(eb,{})]}):f&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})})]})};function ev(e,t){return t.priority-e.priority}let eb=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(9),s=(0,b.useRef)(null),{mutate:r}=ea(),[l,d]=(0,b.useState)(!1),u=(0,k.xW)().changeGroupFeedbackOptions;a[0]!==r?(e=e=>{r(e),d(!1)},a[0]=r,a[1]=e):e=a[1];let m=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(O.A,{className:"d-inline",as:"button",ref:s,inline:!0,muted:!0,onClick:()=>d(!0),children:"Give feedback"}),a[2]=t):t=a[2],a[3]!==l||a[4]!==u||a[5]!==m?(n=l&&(0,o.jsx)(J,{feedbackOptions:u,onSubmit:m,onClose:()=>d(!1),returnFocusRef:s,precheckOther:!0}),a[3]=l,a[4]=u,a[5]=m,a[6]=n):n=a[6],a[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[t,n]}),a[7]=n,a[8]=i):i=a[8],i}:function(){let e=(0,b.useRef)(null),{mutate:t}=ea(),[n,i]=(0,b.useState)(!1),a=(0,k.xW)().changeGroupFeedbackOptions;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O.A,{className:"d-inline",as:"button",ref:e,inline:!0,muted:!0,onClick:()=>i(!0),children:"Give feedback"}),n&&(0,o.jsx)(J,{feedbackOptions:a,onSubmit:e=>{t(e),i(!1)},onClose:()=>i(!1),returnFocusRef:e,precheckOther:!0})]})},e_=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(20),{group:d,activeGroupId:u,isListCollapsed:m,onSelectGroup:h,onClickGroupWhenCollapsed:f}=e,{sendPullRequestAnalyticsEvent:p}=(0,U.q)(),g=(0,b.useRef)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:g,mouseRowRef:g},l[0]=t):t=l[0];let y=(0,V.Z)(t);l[1]!==d.id||l[2]!==h||l[3]!==p?(n=()=>{p("groups_list.select_group","GROUPS_LIST_ITEM"),h(d.id)},l[1]=d.id,l[2]=h,l[3]=p,l[4]=n):n=l[4];let x=n,_=u===d.id;if(m&&!_)return null;let j=`${d.name}-${m?"collapsed":"expanded"}`,N=m?void 0:x;l[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,v.$)($,"PRIVATE_TreeView-item-content-text"),l[5]=i):i=l[5],l[6]!==d.name?(a=(0,o.jsx)("div",{className:i,children:d.name}),l[6]=d.name,l[7]=a):a=l[7],l[8]!==m||l[9]!==f?(s=m?(0,o.jsx)(w.l.TrailingAction,{as:"button",label:"Clear active group",icon:G.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),f()}}):null,l[8]=m,l[9]=f,l[10]=s):s=l[10],l[11]!==_||l[12]!==j||l[13]!==N||l[14]!==a||l[15]!==s?(r=(0,o.jsxs)(w.l.Item,{active:_,onSelect:N,ref:g,children:[a,s]},j),l[11]=_,l[12]=j,l[13]=N,l[14]=a,l[15]=s,l[16]=r):r=l[16];let C=r;if(y){let e;return l[17]!==d.name||l[18]!==C?(e=(0,o.jsx)(P.m,{text:d.name,direction:"ne",children:C}),l[17]=d.name,l[18]=C,l[19]=e):e=l[19],e}return C}:function({group:e,activeGroupId:t,isListCollapsed:n,onSelectGroup:i,onClickGroupWhenCollapsed:a}){let{sendPullRequestAnalyticsEvent:s}=(0,U.q)(),r=(0,b.useRef)(null),l=(0,V.Z)({focusRowRef:r,mouseRowRef:r}),d=t===e.id;if(n&&!d)return null;let c=(0,o.jsxs)(w.l.Item,{active:d,onSelect:n?void 0:()=>{s("groups_list.select_group","GROUPS_LIST_ITEM"),i(e.id)},ref:r,children:[(0,o.jsx)("div",{className:(0,v.$)($,"PRIVATE_TreeView-item-content-text"),children:e.name}),n?(0,o.jsx)(w.l.TrailingAction,{as:"button",label:"Clear active group",icon:G.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),a()}}):null]},`${e.name}-${n?"collapsed":"expanded"}`);return l?(0,o.jsx)(P.m,{text:e.name,direction:"ne",children:c}):c};function ej(e){return`GroupsListIsCollapsed_${e}`}function ew(e){let t=(0,ey.A)("localStorage"),[n,i]=(0,b.useState)(!1),{sendPullRequestAnalyticsEvent:a}=(0,U.q)();return(0,b.useEffect)(()=>{let n=t.getItem(ej(e));null!==n&&i(JSON.parse(n))},[]),{isCollapsed:n,handleToggleCollapsed:()=>{let s=!n;f.cg?.requestAnimationFrame(()=>{t.setItem(ej(e),JSON.stringify(s))}),i(()=>s),a("groups_list.toggle_collapse","GROUPS_LIST_TOGGLE",{is_collapsed:s})}}}try{ex.displayName||(ex.displayName="GroupsList")}catch{}try{eb.displayName||(eb.displayName="FeedbackButton")}catch{}try{e_.displayName||(e_.displayName="GroupItem")}catch{}var eN=n(45270);let eC="PullRequestFileTree-module__sidebar--A_ZKx",eS="PullRequestFileTree-module__FileTreeScrollable--tm_BE";var eI=n(69599);let ek="pr-file-tree",eL=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p=(0,c.c)(35),{className:g,fileFilter:y,filteredDiffs:x,onFileSelected:_,onSetFilterState:j,allowPullRequestGroups:w}=e,N=void 0!==w&&w,C=(0,k.iY)(),S=(0,k.YL)(),I=(0,eN.ww)(),L=(0,k.Fl)(),T=(0,k.WA)(),{sendChangeGroupsPresentedEvent:R}=q();p[0]!==L?(t=L&&!eu(L.state),p[0]=L,p[1]=t):t=p[1];let A=t,O=(0,k.TV)();p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,eI.G7)("hide_groups_list_for_few_groups"),p[2]=n):n=p[2];let P=n&&("TOO_FEW_GROUPS"===O||"DIFF_TOO_SMALL"===O||"NOT_GENERATED_YET"===O);return p[3]!==N||p[4]!==C.length||p[5]!==I||p[6]!==R||p[7]!==T?(i=()=>{N&&C.length>0&&!I&&!T&&R({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},a=[N,I,T,R,C.length],p[3]=N,p[4]=C.length,p[5]=I,p[6]=R,p[7]=T,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,b.useEffect)(i,a),p[10]!==S||p[11]!==N||p[12]!==C||p[13]!==I||p[14]!==A||p[15]!==j||p[16]!==P||p[17]!==T?(s=N&&!I&&T&&!P&&(0,o.jsx)(ex,{activeGroupId:S,groups:C,onClearActiveGroup:()=>{j({activeChangeGroupId:void 0})},onSelectGroup:e=>{j({activeChangeGroupId:e})},isLoadingState:A||!1}),p[10]=S,p[11]=N,p[12]=C,p[13]=I,p[14]=A,p[15]=j,p[16]=P,p[17]=T,p[18]=s):s=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{children:"File tree failed to load."}),p[19]=r):r=p[19],p[20]!==g?(l=(0,v.$)("d-flex flex-column min-height-0",g),p[20]=g,p[21]=l):l=p[21],p[22]!==y?(d=(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:y}),p[22]=y,p[23]=d):d=p[23],p[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),p[24]=u):u=p[24],p[25]!==x||p[26]!==_?(m=(0,o.jsxs)("div",{className:eS,children:[u,(0,o.jsx)(E.oj,{diffs:x,fileNodeRenderer:eT,sortByDiffOrder:!0,onSelect:_,className:"pr-lg-3"})]}),p[25]=x,p[26]=_,p[27]=m):m=p[27],p[28]!==m||p[29]!==l||p[30]!==d?(h=(0,o.jsx)(D.t,{fallback:r,children:(0,o.jsxs)("div",{className:l,id:ek,children:[d,m]})}),p[28]=m,p[29]=l,p[30]=d,p[31]=h):h=p[31],p[32]!==h||p[33]!==s?(f=(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s,h]}),p[32]=h,p[33]=s,p[34]=f):f=p[34],f}:function({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,allowPullRequestGroups:s=!1}){let r=(0,b.useCallback)(e=>(0,o.jsx)(eE,{...e},e.file.filePath),[]),l=(0,k.iY)(),d=(0,k.YL)(),c=(0,eN.ww)(),u=(0,k.Fl)(),m=(0,k.WA)(),{sendChangeGroupsPresentedEvent:h}=q(),f=u&&!eu(u.state),p=(0,k.TV)(),g=(0,eI.G7)("hide_groups_list_for_few_groups");return(0,b.useEffect)(()=>{s&&l.length>0&&!c&&!m&&h({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},[s,c,m,h,l.length]),(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s&&!c&&m&&!(g&&("TOO_FEW_GROUPS"===p||"DIFF_TOO_SMALL"===p||"NOT_GENERATED_YET"===p))&&(0,o.jsx)(ex,{activeGroupId:d,groups:l,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})},isLoadingState:f||!1}),(0,o.jsx)(D.t,{fallback:(0,o.jsx)("span",{children:"File tree failed to load."}),children:(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-column min-height-0",e),id:ek,children:[(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:t}),(0,o.jsxs)("div",{className:eS,children:[(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,o.jsx)(E.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-lg-3"})]})]})})]})};function eT(e){return(0,o.jsx)(eE,{...e},e.file.filePath)}let eE=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(14);l[0]!==e?({file:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.diff?(i=Object.values(t.diff?.markersMap??{}).flatMap(eR),l[3]=t.diff,l[4]=i):i=l[4];let d=i,u=(0,k.Qb)(d);l[5]!==u||l[6]!==t.diff?(a={...t.diff,totalCommentsCount:u},l[5]=u,l[6]=t.diff,l[7]=a):a=l[7],l[8]!==t||l[9]!==a?(s={...t,diff:a},l[8]=t,l[9]=a,l[10]=s):s=l[10];let m=s;return l[11]!==m||l[12]!==n?(r=(0,o.jsx)(E.ZH,{file:m,...n}),l[11]=m,l[12]=n,l[13]=r):r=l[13],r}:function({file:e,...t}){let n=(0,b.useMemo)(()=>Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),[e.diff]),i=(0,k.Qb)(n),a=(0,b.useMemo)(()=>({...e,diff:{...e.diff,totalCommentsCount:i}}),[e,i]);return(0,o.jsx)(E.ZH,{file:a,...t})});try{eL.displayName||(eL.displayName="PullRequestFileTree")}catch{}try{eE.displayName||(eE.displayName="PullRequestFile")}catch{}function eD(e){return e.id}function eR(e){return e.threads.map(eD)}var eA=n(84078),eO=n(25407);let eP=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(17),{pageLimits:l,repository:d,urls:u}=e,m=l.filesLimitExceeded||l.reviewThreadsLimitExceeded||l.annotationsLimitExceeded;r[0]!==l.annotationsLimit||r[1]!==l.annotationsLimitExceeded||r[2]!==l.filesLimit||r[3]!==l.filesLimitExceeded||r[4]!==l.reviewThreadsLimit||r[5]!==l.reviewThreadsLimitExceeded?(t=()=>{let e=[];l.filesLimitExceeded&&e.push(`${l.filesLimit} files`),l.reviewThreadsLimitExceeded&&e.push(`${l.reviewThreadsLimit} comments`),l.annotationsLimitExceeded&&e.push(`${l.annotationsLimit} alerts`);let t="";return 1===e.length?t=`${e[0]}`:2===e.length?t=`${e[0]} and ${e[1]}`:3===e.length&&(t=`${e[0]}, ${e[1]}, and ${e[2]}`),"Only the first "+t+" are currently being shown."},r[0]=l.annotationsLimit,r[1]=l.annotationsLimitExceeded,r[2]=l.filesLimit,r[3]=l.filesLimitExceeded,r[4]=l.reviewThreadsLimit,r[5]=l.reviewThreadsLimitExceeded,r[6]=t):t=r[6];let h=t;r[7]!==d?(n=async function(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ec.DI)((0,eO.ZD8)({repo:d}),{body:e,method:"POST"})},r[7]=d,r[8]=n):n=r[8];let f=n,p=h(),g=`${u.files}?new_files_changed=false`;r[9]!==f||r[10]!==g?(i=(0,o.jsx)(O.A,{inline:!0,href:g,onClick:f,rel:"noreferrer",children:"switch back"}),r[9]=f,r[10]=g,r[11]=i):i=r[11],r[12]!==p||r[13]!==i?(a=(0,o.jsxs)(o.Fragment,{children:[p," To see more,"," ",i," ","to the classic page."]}),r[12]=p,r[13]=i,r[14]=a):a=r[14];let y=a;return m?(r[15]!==y?(s=(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:y,className:"mb-3"}),r[15]=y,r[16]=s):s=r[16],s):null}:function({pageLimits:e,repository:t,urls:n}){let i,a,s=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function r(){let e=new FormData;e.append("feature_name","prx_files"),await (0,ec.DI)((0,eO.ZD8)({repo:t}),{body:e,method:"POST"})}let l=(0,o.jsxs)(o.Fragment,{children:[(i=[],e.filesLimitExceeded&&i.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&i.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&i.push(`${e.annotationsLimit} alerts`),a="",1===i.length?a=`${i[0]}`:2===i.length?a=`${i[0]} and ${i[1]}`:3===i.length&&(a=`${i[0]}, ${i[1]}, and ${i[2]}`),"Only the first "+a+" are currently being shown.")," To see more,"," ",(0,o.jsx)(O.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:r,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return s?(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:l,className:"mb-3"}):null};try{eP.displayName||(eP.displayName="PageLimitsBanner")}catch{}let eF="ViewedFileProgress-module__ProgressContainer--ZQ1e8",eM="ViewedFileProgress-module__FilesCountText--q4rKx",e$="ViewedFileProgress-module__ViewedText--vvFsM",eB=(0,d.Z6)()?e=>{let t,n,i,a,s=(0,c.c)(5),{progress:r}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t={transform:"rotate(-90deg)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),s[1]=n):n=s[1];let l=38-38*r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(i={transition:"stroke-dashoffset 0.35s"},s[2]=i):i=s[2],s[3]!==l?(a=(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:t,width:"16",children:[n,(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:l,strokeLinecap:"round",strokeWidth:"2",style:i})]}),s[3]=l,s[4]=a):a=s[4],a}:({progress:e})=>(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]}),eV=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(14),{totalFilesCount:u}=e,m=(0,k.gi)();if(0===u)return null;let h=(m??0)/u||0;return d[0]!==h?(t=(0,o.jsx)(eB,{progress:h}),d[0]=h,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("ml-1",eF),d[2]=n):n=d[2],d[3]!==m?(i=(0,o.jsx)("span",{className:eM,children:m}),d[3]=m,d[4]=i):i=d[4],d[5]!==u?(a=(0,o.jsx)("span",{className:eM,children:u}),d[5]=u,d[6]=a):a=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("span",{className:e$,children:"viewed"}),d[7]=s):s=d[7],d[8]!==i||d[9]!==a?(r=(0,o.jsxs)("span",{className:n,children:[i," /"," ",a," ",s]}),d[8]=i,d[9]=a,d[10]=r):r=d[10],d[11]!==t||d[12]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[t,r]}),d[11]=t,d[12]=r,d[13]=l):l=d[13],l}:function({totalFilesCount:e}){let t=(0,k.gi)();return 0===e?null:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,o.jsx)(eB,{progress:(t??0)/e||0}),(0,o.jsxs)("span",{className:(0,v.$)("ml-1",eF),children:[(0,o.jsx)("span",{className:eM,children:t})," /"," ",(0,o.jsx)("span",{className:eM,children:e})," ",(0,o.jsx)("span",{className:e$,children:"viewed"})]})]})};try{eB.displayName||(eB.displayName="ProgressIcon")}catch{}try{eV.displayName||(eV.displayName="ViewedFileProgress")}catch{}function eU(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var eq=n(99511),eG=n(94236),eH=n(77430);function eK(e,t){return new Set([...e.filter(e=>{let{thread:n,previewInfo:i}=e;return function(e,t){let{filterText:n,showResolvedThreads:i}=t;if(!i&&e.isResolved||!t.showOutdatedThreads&&e.isOutdated)return!1;if(n){let t=n.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!t.selectedAuthor||e.authorLogin===t.selectedAuthor}({authorLogin:i.firstComment?.author?.login??"",body:i.firstComment?.body??"",id:i.threadId,isResolved:n?.isResolved??!1,isOutdated:n?.isOutdated??!1,path:i.path},t)}).map(e=>e.previewInfo.threadId??"")])}let eW={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0},ez=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(42),{authorList:b,className:_,filterState:j,onFilterStateChange:N}=e;x[0]!==j||x[1]!==N?(t=e=>{N({...j,filterText:e})},x[0]=j,x[1]=N,x[2]=t):t=x[2];let C=t;x[3]!==j||x[4]!==N?(n=()=>{N({...j,showResolvedThreads:!j.showResolvedThreads})},x[3]=j,x[4]=N,x[5]=n):n=x[5];let S=n;x[6]!==j||x[7]!==N?(i=()=>{N({...j,showOutdatedThreads:!j.showOutdatedThreads})},x[6]=j,x[7]=N,x[8]=i):i=x[8];let I=i;x[9]!==j||x[10]!==N?(a=e=>{if(j.selectedAuthor===e)return N({...j,selectedAuthor:void 0});N({...j,selectedAuthor:e})},x[9]=j,x[10]=N,x[11]=a):a=x[11];let k=a;return x[12]!==_?(s=(0,v.$)("d-flex flex-row gap-2 flex-nowrap",_),x[12]=_,x[13]=s):s=x[13],x[14]!==C?(r=e=>C(e.target.value),x[14]=C,x[15]=r):r=x[15],x[16]!==j.filterText||x[17]!==r?(l=(0,o.jsx)(eq.A,{block:!0,"aria-label":"Filter comments",leadingVisual:G.SearchIcon,placeholder:"Filter comments",value:j.filterText,onChange:r}),x[16]=j.filterText,x[17]=r,x[18]=l):l=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(Z.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:G.FilterIcon,trailingAction:G.TriangleDownIcon,children:"Filter"})}),x[19]=d):d=x[19],x[20]!==S?(u=()=>S(),x[20]=S,x[21]=u):u=x[21],x[22]!==j.showResolvedThreads||x[23]!==u?(m=(0,o.jsx)(w.l.Item,{selected:j.showResolvedThreads,onSelect:u,children:"Show resolved comments"}),x[22]=j.showResolvedThreads,x[23]=u,x[24]=m):m=x[24],x[25]!==I?(h=()=>I(),x[25]=I,x[26]=h):h=x[26],x[27]!==j.showOutdatedThreads||x[28]!==h?(f=(0,o.jsx)(w.l.Item,{selected:j.showOutdatedThreads,onSelect:h,children:"Show outdated comments"}),x[27]=j.showOutdatedThreads,x[28]=h,x[29]=f):f=x[29],x[30]!==b||x[31]!==j.selectedAuthor||x[32]!==k?(p=b.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{children:[(0,o.jsx)(w.l.GroupHeading,{children:"Filter by"}),b.map(e=>(0,o.jsxs)(w.l.Item,{selected:j.selectedAuthor===e.login,onSelect:()=>k(e.login),children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(eH.r,{src:e.avatarUrl})}),e.login]},e.login))]})]}),x[30]=b,x[31]=j.selectedAuthor,x[32]=k,x[33]=p):p=x[33],x[34]!==m||x[35]!==f||x[36]!==p?(g=(0,o.jsxs)(eG.W,{children:[d,(0,o.jsx)(eG.W.Overlay,{width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[m,f,p]})})]}),x[34]=m,x[35]=f,x[36]=p,x[37]=g):g=x[37],x[38]!==g||x[39]!==s||x[40]!==l?(y=(0,o.jsxs)("div",{className:s,children:[l,g]}),x[38]=g,x[39]=s,x[40]=l,x[41]=y):y=x[41],y}:function({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,o.jsx)(eq.A,{block:!0,"aria-label":"Filter comments",leadingVisual:G.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,o.jsxs)(eG.W,{children:[(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(Z.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:G.FilterIcon,trailingAction:G.TriangleDownIcon,children:"Filter"})}),(0,o.jsx)(eG.W.Overlay,{width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[(0,o.jsx)(w.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,o.jsx)(w.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsxs)(w.l.Group,{children:[(0,o.jsx)(w.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,o.jsxs)(w.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(eH.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})};try{ez.displayName||(ez.displayName="CommentsFilter")}catch{}var eQ=n(61219),eZ=n(98091),eJ=n(58615),eY=n(72511),eX=n(26607);let e0="ConversationHeader-module__file-name-overflow--Ymb0e",e1=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(47),{firstCommentId:_,isCollapsed:j,isOutdated:w,isResolved:N,line:C,onToggleCollapsed:S,onNavigateToDiffComment:I,path:k,rightSideContent:L,threadId:T,headingLevel:E}=e,D=void 0===E?"h3":E;x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ey.A)("localStorage"),x[0]=t):t=x[0];let A=t,[F,M]=(0,b.useState)(j);x[1]!==T?(n=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${T}`);null!==e&&M(JSON.parse(e))},x[1]=T,x[2]=n):n=x[2],x[3]!==F||x[4]!==T?(i=[F,T],x[3]=F,x[4]=T,x[5]=i):i=x[5],(0,b.useEffect)(n,i),x[6]!==F||x[7]!==S||x[8]!==T?(a=()=>{A.setItem(`reviewThreadIsCollapsed_${T}`,JSON.stringify(!F)),M(e2),S()},x[6]=F,x[7]=S,x[8]=T,x[9]=a):a=x[9];let $=a,B=F&&"rounded-2",V=F&&"border-bottom-0";x[10]!==B||x[11]!==V?(s=(0,v.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",B,V),x[10]=B,x[11]=V,x[12]=s):s=x[12];let U=F?"Open review comment":"Close review comment",q=F?G.ChevronRightIcon:G.ChevronDownIcon;x[13]!==$||x[14]!==q||x[15]!==U?(r=(0,o.jsx)(H.K,{"aria-label":U,icon:q,size:"small",variant:"invisible",onClick:$}),x[13]=$,x[14]=q,x[15]=U,x[16]=r):r=x[16],x[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,v.$)(e0,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),x[17]=l):l=x[17];let K=`#r${_}`;x[18]!==I||x[19]!==k||x[20]!==K?(d=(0,o.jsxs)(O.A,{className:l,onClick:I,href:K,muted:!0,children:["\u200E",k,"\u200E"]}),x[18]=I,x[19]=k,x[20]=K,x[21]=d):d=x[21],x[22]!==k||x[23]!==d?(u=(0,o.jsx)(P.m,{direction:"n",text:k,type:"label",children:d}),x[22]=k,x[23]=d,x[24]=u):u=x[24],x[25]!==C?(m=!!C&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",C]}),x[25]=C,x[26]=m):m=x[26],x[27]!==D||x[28]!==u||x[29]!==m?(h=(0,o.jsxs)(R.A,{as:D,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[u,m]}),x[27]=D,x[28]=u,x[29]=m,x[30]=h):h=x[30],x[31]!==N?(f=N&&(0,o.jsx)(eX.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),x[31]=N,x[32]=f):f=x[32],x[33]!==w||x[34]!==N?(p=w&&!N&&(0,o.jsx)(eX.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),x[33]=w,x[34]=N,x[35]=p):p=x[35];let W=`#r${_}`;return x[36]!==I||x[37]!==W?(g=(0,o.jsx)(H.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:G.FileSymlinkFileIcon,variant:"invisible",href:W,onClick:I}),x[36]=I,x[37]=W,x[38]=g):g=x[38],x[39]!==L||x[40]!==r||x[41]!==h||x[42]!==f||x[43]!==p||x[44]!==g||x[45]!==s?(y=(0,o.jsxs)("div",{className:s,children:[r,h,f,p,g,L]}),x[39]=L,x[40]=r,x[41]=h,x[42]=f,x[43]=p,x[44]=g,x[45]=s,x[46]=y):y=x[46],y}:function({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:l,rightSideContent:d,threadId:c,headingLevel:u="h3"}){let m=(0,ey.A)("localStorage"),[h,f]=(0,b.useState)(t);return(0,b.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${c}`);null!==e&&f(JSON.parse(e))},[h,c]),(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",h&&"rounded-2",h&&"border-bottom-0"),children:[(0,o.jsx)(H.K,{"aria-label":h?"Open review comment":"Close review comment",icon:h?G.ChevronRightIcon:G.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${c}`,JSON.stringify(!h)),f(e=>!e),s()}}),(0,o.jsxs)(R.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,o.jsx)(P.m,{direction:"n",text:l,type:"label",children:(0,o.jsxs)(O.A,{className:(0,v.$)(e0,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",l,"\u200E"]})}),!!a&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,o.jsx)(eX.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,o.jsx)(eX.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,o.jsx)(H.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:G.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),d]})};function e2(e){return!e}try{e1.displayName||(e1.displayName="ConversationHeader")}catch{}let e3="ThreadHeader-module__ThreadHeaderIconButton--RGjVM";var e4=n(97695),e5=n(39698),e6=n(36729),e7=n(21067);let e8=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(35),{firstCommentId:u,isCollapsed:m,onToggleCollapsed:h,onNavigateToDiffComment:f,threadPreview:p,headingLevel:g}=e,{sendPullRequestAnalyticsEvent:y}=(0,U.q)(),[x,v]=(0,b.useState)(void 0),_=p.thread,j=p.previewInfo;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e7.M3)(),d[0]=t):t=d[0];let w=t,{mutate:N}=(0,e4.H)(j.path,_?.line?`R${_?.line}`:e6.zW);d[1]!==m||d[2]!==h||d[3]!==j.threadId||d[4]!==N||d[5]!==_?.isResolved?(n=()=>{_?.isResolved||N({threadId:j.threadId},{onError:()=>v("Failed to resolve thread"),onSuccess:()=>{m||h()}})},d[1]=m,d[2]=h,d[3]=j.threadId,d[4]=N,d[5]=_?.isResolved,d[6]=n):n=d[6];let C=n,{mutate:S}=(0,e5.i)(j.path,_?.line?`L${_?.line}`:e6.zW);d[7]!==m||d[8]!==h||d[9]!==y||d[10]!==_?.isResolved||d[11]!==p||d[12]!==S?(i=async()=>{!p||_?.isResolved&&(S({threadId:p.previewInfo.threadId},{onError:()=>v("Failed to unresolve thread"),onSuccess:()=>{m&&h()}}),y("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},d[7]=m,d[8]=h,d[9]=y,d[10]=_?.isResolved,d[11]=p,d[12]=S,d[13]=i):i=d[13];let I=i,k=_?.isOutdated||!1,L=_?.isResolved||!1,T=_?.line;return d[14]!==C||d[15]!==I||d[16]!==_?.isResolved?(a=w?(0,o.jsx)(H.K,{"aria-label":_?.isResolved?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:_?.isResolved?G.CheckCircleFillIcon:G.CheckCircleIcon,"data-thread-resolved":_?.isResolved,className:e3,variant:"invisible",onClick:_?.isResolved?I:C}):null,d[14]=C,d[15]=I,d[16]=_?.isResolved,d[17]=a):a=d[17],d[18]!==u||d[19]!==g||d[20]!==m||d[21]!==f||d[22]!==h||d[23]!==j.path||d[24]!==j.threadId||d[25]!==k||d[26]!==L||d[27]!==T||d[28]!==a?(s=(0,o.jsx)(e1,{firstCommentId:u,isCollapsed:m,isOutdated:k,isResolved:L,line:T,path:j.path,rightSideContent:a,onNavigateToDiffComment:f,onToggleCollapsed:h,threadId:j.threadId,headingLevel:g}),d[18]=u,d[19]=g,d[20]=m,d[21]=f,d[22]=h,d[23]=j.path,d[24]=j.threadId,d[25]=k,d[26]=L,d[27]=T,d[28]=a,d[29]=s):s=d[29],d[30]!==x?(r=x&&(0,o.jsxs)(eY.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(G.StopIcon,{className:"mr-2"}),x]}),d[30]=x,d[31]=r):r=d[31],d[32]!==s||d[33]!==r?(l=(0,o.jsxs)(o.Fragment,{children:[s,r]}),d[32]=s,d[33]=r,d[34]=l):l=d[34],l}:function({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s}){let{sendPullRequestAnalyticsEvent:r}=(0,U.q)(),[l,d]=(0,b.useState)(void 0),c=a.thread,u=a.previewInfo,m=(0,e7.M3)(),{mutate:h}=(0,e4.H)(u.path,c?.line?`R${c?.line}`:e6.zW),{mutate:f}=(0,e5.i)(u.path,c?.line?`L${c?.line}`:e6.zW),p=async()=>{!a||c?.isResolved&&(f({threadId:a.previewInfo.threadId},{onError:()=>d("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),r("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e1,{firstCommentId:e,isCollapsed:t,isOutdated:c?.isOutdated||!1,isResolved:c?.isResolved||!1,line:c?.line,path:u.path,rightSideContent:m?(0,o.jsx)(H.K,{"aria-label":c?.isResolved?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:c?.isResolved?G.CheckCircleFillIcon:G.CheckCircleIcon,"data-thread-resolved":c?.isResolved,className:e3,variant:"invisible",onClick:c?.isResolved?p:()=>{c?.isResolved||h({threadId:u.threadId},{onError:()=>d("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}):null,onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:u.threadId,headingLevel:s}),l&&(0,o.jsxs)(eY.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(G.StopIcon,{className:"mr-2"}),l]})]})};try{e8.displayName||(e8.displayName="ThreadHeader")}catch{}var e9=n(72538);let te=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(4),{commentAuthors:a}=e;return a.length<1?null:(i[0]!==a?(t=a.map(tt),i[0]=a,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(e9.A,{children:t}),i[2]=t,i[3]=n):n=i[3],n)}:function({commentAuthors:e}){return e.length<1?null:(0,o.jsx)(e9.A,{children:e.map(({login:e,avatarUrl:t})=>(0,o.jsx)(eH.r,{alt:e,size:18,src:t},e))})};function tt(e){let{login:t,avatarUrl:n}=e;return(0,o.jsx)(eH.r,{alt:t,size:18,src:n},t)}try{te.displayName||(te.displayName="PreviewAuthors")}catch{}var tn=n(73017);let ti=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(29),{commentPreview:u,onNavigateToDiffComment:m,tabSize:h}=e,[f,p]=(0,b.useState)(!1),g=u.commentId;d[0]!==g||d[1]!==m?(t=()=>{window.location.hash=`#r${g}`,m(g)},d[0]=g,d[1]=m,d[2]=t):t=d[2];let y=t;d[3]!==u.commentsData?(n=u.commentsData??{comments:[]},d[3]=u.commentsData,d[4]=n):n=d[4],d[5]!==g||d[6]!==n?(i=ta(g,n),d[5]=g,d[6]=n,d[7]=i):i=d[7];let x=i,v=u.threadPreviewComments.length,_=`${v} previous ${1===v?"comment":"comments"}`,j=u.isOutdated||!1,w=u.isResolved||!1,N=u.line,C=u.path;d[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>p(tr),d[8]=a):a=d[8];let S=u.threadId,I=parseInt(u.commentId);return d[9]!==u.line||d[10]!==u.path||d[11]!==u.threadId||d[12]!==f||d[13]!==y||d[14]!==I||d[15]!==j||d[16]!==w?(s=(0,o.jsx)(e1,{isCollapsed:f,isOutdated:j,isResolved:w,line:N,path:C,onNavigateToDiffComment:y,onToggleCollapsed:a,threadId:S,firstCommentId:I}),d[9]=u.line,d[10]=u.path,d[11]=u.threadId,d[12]=f,d[13]=y,d[14]=I,d[15]=j,d[16]=w,d[17]=s):s=d[17],d[18]!==x||d[19]!==u||d[20]!==f||d[21]!==y||d[22]!==v||d[23]!==_||d[24]!==h?(r=!f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:u.subject?.diffLines,className:"m-0 border-0",tabSize:h||4})}),v>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Z.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:G.ChevronRightIcon,variant:"invisible",onClick:y,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:_}),(0,o.jsx)(te,{commentAuthors:x})]})})}),(0,o.jsx)(tn.vb,{className:"markdown-body",html:ts(u),sx:{p:3,fontSize:1}})]}),d[18]=x,d[19]=u,d[20]=f,d[21]=y,d[22]=v,d[23]=_,d[24]=h,d[25]=r):r=d[25],d[26]!==s||d[27]!==r?(l=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[s,r]}),d[26]=s,d[27]=r,d[28]=l):l=d[28],l}:function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,b.useState)(!1),s=e.commentId,r=(0,b.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),l=ta(s,e.commentsData??{comments:[]}),d=e.threadPreviewComments.length,c=`${d} previous ${1===d?"comment":"comments"}`;return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e1,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),d>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(Z.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:G.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:c}),(0,o.jsx)(te,{commentAuthors:l})]})})}),(0,o.jsx)(tn.vb,{className:"markdown-body",html:ts(e),sx:{p:3,fontSize:1}})]})]})});function ta(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",l=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:l}),n.add(a)),t},[])}function ts(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}try{ti.displayName||(ti.displayName="PendingCommentPreview")}catch{}function tr(e){return!e}function tl(e){return`panel-thread-collapsed-state-${e}`}let to=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(43),{onNavigateToDiffComment:m,pullRequestId:h,tabSize:f,threadPreview:p,headingLevel:g}=e,{thread:y,previewInfo:x}=p,{threadId:v,firstComment:b}=x,_=y?.isOutdated??!1,j=b?.id,w=x.path,N=(0,k.j5)(),{navigateToSelectedComment:C}=(0,k.Lh)();u[0]!==b?.databaseId||u[1]!==_||u[2]!==N||u[3]!==C||u[4]!==m||u[5]!==x.originalDiffPathUri?(t=()=>{if(_&&x.originalDiffPathUri){let e=new URL(x.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${b?.databaseId}`,N&&b?.databaseId&&C(b?.databaseId);m()},u[0]=b?.databaseId,u[1]=_,u[2]=N,u[3]=C,u[4]=m,u[5]=x.originalDiffPathUri,u[6]=t):t=u[6],b?.databaseId;let S=t;u[7]!==v?(n=tl(v),u[7]=v,u[8]=n):n=u[8];let[I,L]=(0,eJ.M)(n,!1),T=x.threadPreviewComments.length,E=0===T?"No replies":`${T} ${1===T?"reply":"replies"}`,D={...y,id:y?.id??"",commentsData:{comments:[]}};if(!b||!D)return null;let R=y?.subjectType==="FILE"?"FILE":`R${y?.line}`;u[9]!==y?.commentsData?(i=y?.commentsData??{comments:[]},u[9]=y?.commentsData,u[10]=i):i=u[10],u[11]!==x.commentId||u[12]!==i?(a=ta(x.commentId,i),u[11]=x.commentId,u[12]=i,u[13]=a):a=u[13];let A=a,O=b?.databaseId;return u[14]!==I||u[15]!==L?(s=()=>L(!I),u[14]=I,u[15]=L,u[16]=s):s=u[16],u[17]!==g||u[18]!==I||u[19]!==S||u[20]!==O||u[21]!==s||u[22]!==p?(r=(0,o.jsx)(e8,{firstCommentId:O,isCollapsed:I,threadPreview:p,onNavigateToDiffComment:S,onToggleCollapsed:s,headingLevel:g}),u[17]=g,u[18]=I,u[19]=S,u[20]=O,u[21]=s,u[22]=p,u[23]=r):r=u[23],u[24]!==A||u[25]!==j||u[26]!==w||u[27]!==b||u[28]!==I||u[29]!==_||u[30]!==R||u[31]!==S||u[32]!==x.originalDiffPathUri||u[33]!==x.subject?.diffLines||u[34]!==h||u[35]!==E||u[36]!==f||u[37]!==y?.isResolved||u[38]!==v?(l=!I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:x?.subject?.diffLines,className:"m-0 border-0",tabSize:f||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(eQ.U,{lineMarkersKey:R,hideActions:!0,isInlineComment:!1,comment:b,filePath:w,index:0,isAnchorable:!1,isOutdated:_,isThreadResolved:y?.isResolved||!1,subjectId:h,threadId:v,originalDiffPathUri:x.originalDiffPathUri,headingLevel:"h3"},j)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Z.Q,{"aria-label":`View ${E}`,size:"small",trailingVisual:G.ChevronRightIcon,variant:"invisible",onClick:S,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:E}),(0,o.jsx)(te,{commentAuthors:A})]})})})]}),u[24]=A,u[25]=j,u[26]=w,u[27]=b,u[28]=I,u[29]=_,u[30]=R,u[31]=S,u[32]=x.originalDiffPathUri,u[33]=x.subject?.diffLines,u[34]=h,u[35]=E,u[36]=f,u[37]=y?.isResolved,u[38]=v,u[39]=l):l=u[39],u[40]!==r||u[41]!==l?(d=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[r,l]}),u[40]=r,u[41]=l,u[42]=d):d=u[42],d}:function({onNavigateToDiffComment:e,pullRequestId:t,tabSize:n,threadPreview:i,headingLevel:a}){let{thread:s,previewInfo:r}=i,{threadId:l,firstComment:d}=r,c=s?.isOutdated??!1,u=d?.id,m=r.path,h=(0,k.j5)(),{navigateToSelectedComment:f}=(0,k.Lh)(),p=(0,b.useCallback)(()=>{if(c&&r.originalDiffPathUri){let e=new URL(r.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${d?.databaseId}`,h&&d?.databaseId&&f(d?.databaseId);e()},[c,r.originalDiffPathUri,e,d?.databaseId,h,f]),[g,y]=(0,eJ.M)(tl(l),!1),x=r.threadPreviewComments.length,v=0===x?"No replies":`${x} ${1===x?"reply":"replies"}`,_={...s,id:s?.id??"",commentsData:{comments:[]}};if(!d||!_)return null;let j=s?.subjectType==="FILE"?"FILE":`R${s?.line}`,w=ta(r.commentId,s?.commentsData??{comments:[]});return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(e8,{firstCommentId:d?.databaseId,isCollapsed:g,threadPreview:i,onNavigateToDiffComment:p,onToggleCollapsed:()=>y(!g),headingLevel:a}),!g&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(eZ.i,{diffTableClassName:"border-0",diffLines:r?.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(eQ.U,{lineMarkersKey:j,hideActions:!0,isInlineComment:!1,comment:d,filePath:m,index:0,isAnchorable:!1,isOutdated:c,isThreadResolved:s?.isResolved||!1,subjectId:t,threadId:l,originalDiffPathUri:r.originalDiffPathUri,headingLevel:"h3"},u)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(Z.Q,{"aria-label":`View ${v}`,size:"small",trailingVisual:G.ChevronRightIcon,variant:"invisible",onClick:p,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:v}),(0,o.jsx)(te,{commentAuthors:w})]})})})]})]})});try{to.displayName||(to.displayName="ThreadPreview")}catch{}var td=n(4559),tc=n(76720);let tu=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),{heading:r,description:l,icon:d,headingLevel:u}=e,m=void 0===u?"h1":u;return s[0]!==d?(t=(0,o.jsx)(tc.E.Visual,{children:(0,o.jsx)(d,{size:"medium"})}),s[0]=d,s[1]=t):t=s[1],s[2]!==r||s[3]!==m?(n=(0,o.jsx)(tc.E.Heading,{as:m,children:r}),s[2]=r,s[3]=m,s[4]=n):n=s[4],s[5]!==l?(i=l&&(0,o.jsx)(tc.E.Description,{children:l}),s[5]=l,s[6]=i):i=s[6],s[7]!==t||s[8]!==n||s[9]!==i?(a=(0,o.jsxs)(tc.E,{children:[t,n,i]}),s[7]=t,s[8]=n,s[9]=i,s[10]=a):a=s[10],a}:function({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,o.jsxs)(tc.E,{children:[(0,o.jsx)(tc.E.Visual,{children:(0,o.jsx)(n,{size:"medium"})}),(0,o.jsx)(tc.E.Heading,{as:i,children:e}),t&&(0,o.jsx)(tc.E.Description,{children:t})]})};try{tu.displayName||(tu.displayName="ZeroState")}catch{}var tm=n(69510);let th=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(28),{filteredThreadIds:f,onClose:p,pageLimits:g,pathName:y,pullRequestId:x,isOpen:v,setThreadPreviews:j,tabSize:w}=e;h[0]!==y?(t={pathName:y},h[0]=y,h[1]=t):t=h[1];let{data:N}=(0,tm._l)(t),C=void 0===N?[]:N;(0,b.useEffect)(()=>{j(C)},[C,j]);let S=(0,b.useRef)(null);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,_.s)(td.i,300),h[2]=n):n=h[2];let I=n,k=C.length>0;h[3]!==p?(i=()=>{p()},h[3]=p,h[4]=i):i=h[4];let L=i;h[5]!==f||h[6]!==L||h[7]!==x||h[8]!==w?(a=e=>e&&f.has(e.previewInfo.threadId)?(0,o.jsx)(to,{tabSize:w,threadPreview:e,onNavigateToDiffComment:L,pullRequestId:x,headingLevel:"h2"},e.previewInfo.threadId):null,h[5]=f,h[6]=L,h[7]=x,h[8]=w,h[9]=a):a=h[9];let T=C.map(a).filter(Boolean);return h[10]!==I||h[11]!==v||h[12]!==T.length?(s=()=>{v&&I(T.length>0?`${T.length} ${1===T.length?"comment":"comments"}`:"No comments found",{element:S.current})},h[10]=I,h[11]=v,h[12]=T.length,h[13]=s):s=h[13],h[14]!==I||h[15]!==v||h[16]!==T?(r=[v,I,T],h[14]=I,h[15]=v,h[16]=T,h[17]=r):r=h[17],(0,b.useEffect)(s,r),h[18]!==g.reviewThreadsLimit||h[19]!==g.reviewThreadsLimitExceeded?(l=g.reviewThreadsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${g.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h[18]=g.reviewThreadsLimit,h[19]=g.reviewThreadsLimitExceeded,h[20]=l):l=h[20],h[21]!==k||h[22]!==T?(d=T.length>0?(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:T})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tu,{description:"Comments will show up here as soon as there are some.",heading:k?"No comments match the current filter":"No comments on changes yet",icon:G.CommentIcon,headingLevel:"h2"})}),h[21]=k,h[22]=T,h[23]=d):d=h[23],h[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:S}),h[24]=u):u=h[24],h[25]!==l||h[26]!==d?(m=(0,o.jsxs)(o.Fragment,{children:[l,d,u]}),h[25]=l,h[26]=d,h[27]=m):m=h[27],m}:function({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,pullRequestId:a,isOpen:s,setThreadPreviews:r,tabSize:l}){let{data:d=[]}=(0,tm._l)({pathName:i});(0,b.useEffect)(()=>{r(d)},[d,r]);let c=(0,b.useRef)(null),u=(0,b.useMemo)(()=>(0,_.s)(td.i,300),[]),m=d.length>0,h=(0,b.useCallback)(()=>{t()},[t]),f=d.map(t=>t&&e.has(t.previewInfo.threadId)?(0,o.jsx)(to,{tabSize:l,threadPreview:t,onNavigateToDiffComment:h,pullRequestId:a,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,b.useEffect)(()=>{s&&u(f.length>0?`${f.length} ${1===f.length?"comment":"comments"}`:"No comments found",{element:c.current})},[s,u,f]),(0,o.jsxs)(o.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),f.length>0?(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:f})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tu,{description:"Comments will show up here as soon as there are some.",heading:m?"No comments match the current filter":"No comments on changes yet",icon:G.CommentIcon,headingLevel:"h2"})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:c})]})},tf=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(25);f[0]!==e?({pathName:t,toggleSidesheetRef:i,...n}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i):(t=f[1],n=f[2],i=f[3]),f[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],f[4]=a):a=f[4];let[p,g]=(0,b.useState)(a),[x,v]=(0,b.useState)(tp);f[5]!==x||f[6]!==p?(s=eK(p,x),f[5]=x,f[6]=p,f[7]=s):s=f[7];let _=s,j=(0,b.useRef)(null);if(f[8]!==p){for(let e of(r=[],p)){let t=e.previewInfo.firstComment;t?.author&&!r.some(e=>e.login===t.author?.login)&&("Copilot"===t.author.login?r.unshift(t.author):r.push(t.author))}f[8]=p,f[9]=r}else r=f[9];let w=r;return n.isOpen?(f[10]===Symbol.for("react.memo_cache_sentinel")?(l={narrow:"fullscreen",regular:"right",wide:"right"},f[10]=l):l=f[10],f[11]!==w||f[12]!==x||f[13]!==n.onClose?(d=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(y.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(y.l.Title,{id:t,children:"Comments"}),(0,o.jsx)(H.K,{ref:j,"aria-label":"Close comments panel",icon:G.XIcon,variant:"invisible",onClick:n.onClose})]}),(0,o.jsx)(ez,{authorList:w,className:"mt-2 width-full",filterState:x,onFilterStateChange:v})]})},f[11]=w,f[12]=x,f[13]=n.onClose,f[14]=d):d=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}),f[15]=u):u=f[15],f[16]!==_||f[17]!==t||f[18]!==n?(m=(0,o.jsx)(b.Suspense,{fallback:u,children:(0,o.jsx)(th,{...n,filteredThreadIds:_,pathName:t,setThreadPreviews:g})}),f[16]=_,f[17]=t,f[18]=n,f[19]=m):m=f[19],f[20]!==n.onClose||f[21]!==d||f[22]!==m||f[23]!==i?(h=(0,o.jsx)(y.l,{initialFocusRef:j,position:l,returnFocusRef:i,onClose:n.onClose,renderHeader:d,children:m}),f[20]=n.onClose,f[21]=d,f[22]=m,f[23]=i,f[24]=h):h=f[24],h):null}:function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,b.useState)([]),[r,l]=(0,b.useState)(()=>({...eW})),d=eK(a,r),c=(0,b.useRef)(null),u=(0,b.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,o.jsx)(y.l,{initialFocusRef:c,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(y.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(y.l.Title,{id:e,children:"Comments"}),(0,o.jsx)(H.K,{ref:c,"aria-label":"Close comments panel",icon:G.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,o.jsx)(ez,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:l})]}),children:(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}),children:(0,o.jsx)(th,{...i,filteredThreadIds:d,pathName:t,setThreadPreviews:s})})}):null});try{th.displayName||(th.displayName="CommentsSidePanelContent")}catch{}try{tf.displayName||(tf.displayName="CommentsSidePanel")}catch{}function tp(){return{...eW}}let tg=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(19),{isFileTreeExpanded:u,pageLimits:m,pullRequest:h,tabSize:f}=e,[p,g]=(0,b.useState)(!1),y=(0,b.useRef)(null),x=h.id,v=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:_}=(0,U.q)();return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(Z.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:G.CommentDiscussionIcon,size:"small",variant:"invisible"}),d[0]=t):t=d[0],d[1]!==_?(n=()=>{_("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eU(),g(!0)},d[1]=_,d[2]=n):n=d[2],d[3]!==u?(i=u&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"}),d[3]=u,d[4]=i):i=d[4],d[5]!==v||d[6]!==n||d[7]!==i?(a=(0,o.jsx)(Z.Q,{ref:y,"aria-label":"Open comments side panel",count:v,leadingVisual:G.CommentDiscussionIcon,size:"small",onClick:n,children:i}),d[5]=v,d[6]=n,d[7]=i,d[8]=a):a=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>g(!1),d[9]=s):s=d[9],d[10]!==p||d[11]!==m||d[12]!==h.pathName||d[13]!==x||d[14]!==f?(r=(0,o.jsx)(tf,{isOpen:p,pageLimits:m,pathName:h.pathName,pullRequestId:x,tabSize:f,toggleSidesheetRef:y,onClose:s}),d[10]=p,d[11]=m,d[12]=h.pathName,d[13]=x,d[14]=f,d[15]=r):r=d[15],d[16]!==a||d[17]!==r?(l=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:t,children:[a,r]})}),d[16]=a,d[17]=r,d[18]=l):l=d[18],l}:function({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,b.useState)(!1),r=(0,b.useRef)(null),l=n.id,d=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:c}=(0,U.q)();return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(Z.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:G.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Z.Q,{ref:r,"aria-label":"Open comments side panel",count:d,leadingVisual:G.CommentDiscussionIcon,size:"small",onClick:()=>{c("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eU(),s(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,o.jsx)(tf,{isOpen:a,pageLimits:t,pathName:n.pathName,pullRequestId:l,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})};try{tg.displayName||(tg.displayName="OpenCommentsSidePanelButton")}catch{}var ty=n(86909);function tx(e,t){return new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,t)).map(e=>e.id))}let tv=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(8),{className:s,filteredText:r,onFilteredTextChange:l}=e;return a[0]!==l?(t=e=>l(e.target.value),a[0]=l,a[1]=t):t=a[1],a[2]!==r||a[3]!==t?(n=(0,o.jsx)(eq.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:G.SearchIcon,placeholder:"Filter alerts\u2026",value:r,onChange:t}),a[2]=r,a[3]=t,a[4]=n):n=a[4],a[5]!==s||a[6]!==n?(i=(0,o.jsx)("div",{className:s,children:n}),a[5]=s,a[6]=n,a[7]=i):i=a[7],i}:function({className:e,filteredText:t,onFilteredTextChange:n}){return(0,o.jsx)("div",{className:e,children:(0,o.jsx)(eq.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:G.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})};try{tv.displayName||(tv.displayName="AlertsFilter")}catch{}let tb="AlertsSidePanel-module__annotationsHeaderFileName--JzcsF",t_=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(25),{databaseId:m,lineNumber:h,path:f,toggleCollapsed:p,isCollapsed:g,onNavigateToAnnotation:y,annotationLevel:x}=e,b=g?"Expand annotation":"Collapse annotation",_=g?G.ChevronRightIcon:G.ChevronDownIcon;u[0]!==b||u[1]!==_||u[2]!==p?(t=(0,o.jsx)(H.K,{"aria-label":b,icon:_,size:"small",variant:"invisible",className:"mr-1",onClick:p}),u[0]=b,u[1]=_,u[2]=p,u[3]=t):t=u[3];let j=ty.Gt[x];u[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tb),u[4]=n):n=u[4];let w=`#annotation_${m}`;u[5]!==y||u[6]!==f||u[7]!==w?(i=(0,o.jsxs)(O.A,{className:n,href:w,onClick:y,muted:!0,children:["\u200E",f]}),u[5]=y,u[6]=f,u[7]=w,u[8]=i):i=u[8],u[9]!==f||u[10]!==i?(a=(0,o.jsx)(P.m,{direction:"n",text:f,type:"label",children:i}),u[9]=f,u[10]=i,u[11]=a):a=u[11],u[12]!==h?(s=(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",h]}),u[12]=h,u[13]=s):s=u[13],u[14]!==t||u[15]!==j||u[16]!==a||u[17]!==s?(r=(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[t,j,a,s]}),u[14]=t,u[15]=j,u[16]=a,u[17]=s,u[18]=r):r=u[18];let N=`#annotation_${m}`;return u[19]!==y||u[20]!==N?(l=(0,o.jsx)(H.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:G.FileSymlinkFileIcon,variant:"invisible",href:N,onClick:y}),u[19]=y,u[20]=N,u[21]=l):l=u[21],u[22]!==r||u[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[r,l]}),u[22]=r,u[23]=l,u[24]=d):d=u[24],d}:function({databaseId:e,lineNumber:t,path:n,toggleCollapsed:i,isCollapsed:a,onNavigateToAnnotation:s,annotationLevel:r}){return(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,o.jsx)(H.K,{"aria-label":a?"Expand annotation":"Collapse annotation",icon:a?G.ChevronRightIcon:G.ChevronDownIcon,size:"small",variant:"invisible",className:"mr-1",onClick:i}),ty.Gt[r],(0,o.jsx)(P.m,{direction:"n",text:n,type:"label",children:(0,o.jsxs)(O.A,{className:(0,v.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tb),href:`#annotation_${e}`,onClick:s,muted:!0,children:["\u200E",n]})}),(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,o.jsx)(H.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:G.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:s})]})},tj=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(26),{annotations:f,onClose:p,isOpen:g,pageLimits:x,returnFocusRef:v}=e,[j,w]=(0,b.useState)(""),N=tx(f,j),C=(0,b.useRef)(null),S=f.length>0,I=(0,k.j5)(),{navigateToSelectedAnnotation:L}=(0,k.Lh)();h[0]!==I||h[1]!==L||h[2]!==p?(t=e=>{I&&L(e),p()},h[0]=I,h[1]=L,h[2]=p,h[3]=t):t=h[3];let T=t,E=f.map(e=>e&&N.has(e.id)?(0,o.jsx)(tw,{annotation:e,handleNavigateToAnnotation:T},e.id):null).filter(Boolean),D=(0,b.useRef)(null);h[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,_.s)(td.i,300),h[4]=n):n=h[4];let A=n;return(h[5]!==E||h[6]!==g?(i=()=>{g&&A(E.length>0?`${E.length} ${1===E.length?"alert":"alerts"}`:"No alerts found",{element:D.current})},a=[g,A,E],h[5]=E,h[6]=g,h[7]=i,h[8]=a):(i=h[7],a=h[8]),(0,b.useEffect)(i,a),g)?(h[9]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen",regular:"right",wide:"right"},h[9]=s):s=h[9],h[10]!==j||h[11]!==p?(r=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(y.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(R.A,{as:"h1",className:"f4 text-bold",id:t,children:"Alerts"}),(0,o.jsx)(H.K,{ref:C,"aria-label":"Close alerts panel",icon:G.XIcon,variant:"invisible",onClick:p})]}),(0,o.jsx)(tv,{className:"mt-2 width-full",filteredText:j,onFilteredTextChange:w})]})},h[10]=j,h[11]=p,h[12]=r):r=h[12],h[13]!==x.annotationsLimit||h[14]!==x.annotationsLimitExceeded?(l=x.annotationsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${x.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h[13]=x.annotationsLimit,h[14]=x.annotationsLimitExceeded,h[15]=l):l=h[15],h[16]!==E||h[17]!==S?(d=E.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:E}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tu,{heading:S?"No alerts match the current filter":"No alerts on changes yet",icon:G.AlertIcon})}),h[16]=E,h[17]=S,h[18]=d):d=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:D}),h[19]=u):u=h[19],h[20]!==p||h[21]!==v||h[22]!==r||h[23]!==l||h[24]!==d?(m=(0,o.jsxs)(y.l,{initialFocusRef:C,onClose:p,position:s,returnFocusRef:v,renderHeader:r,children:[l,d,u]}),h[20]=p,h[21]=v,h[22]=r,h[23]=l,h[24]=d,h[25]=m):m=h[25],m):null}:function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,b.useState)(""),l=tx(e,s),d=(0,b.useRef)(null),c=e.length>0,u=(0,k.j5)(),{navigateToSelectedAnnotation:m}=(0,k.Lh)(),h=(0,b.useCallback)(e=>{u&&m(e),t()},[t,u,m]),f=e.map(e=>e&&l.has(e.id)?(0,o.jsx)(tw,{annotation:e,handleNavigateToAnnotation:h},e.id):null).filter(Boolean),p=(0,b.useRef)(null),g=(0,b.useMemo)(()=>(0,_.s)(td.i,300),[]);return((0,b.useEffect)(()=>{n&&g(f.length>0?`${f.length} ${1===f.length?"alert":"alerts"}`:"No alerts found",{element:p.current})},[n,g,f]),n)?(0,o.jsxs)(y.l,{initialFocusRef:d,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(y.l.Header,{className:"p-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,o.jsx)(R.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,o.jsx)(H.K,{ref:d,"aria-label":"Close alerts panel",icon:G.XIcon,variant:"invisible",onClick:t})]}),(0,o.jsx)(tv,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,o.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),f.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:f}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tu,{heading:c?"No alerts match the current filter":"No alerts on changes yet",icon:G.AlertIcon})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:p})]}):null}),tw=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(18),{annotation:r,handleNavigateToAnnotation:l}=e,{isCollapsed:d,handleToggleCollapsed:u}=(0,ty.Vv)(r);return s[0]!==r.databaseId||s[1]!==l?(t=()=>l(r.databaseId),s[0]=r.databaseId,s[1]=l,s[2]=t):t=s[2],s[3]!==r.annotationLevel||s[4]!==r.databaseId||s[5]!==r.endLine||s[6]!==r.path||s[7]!==u||s[8]!==d||s[9]!==t?(n=(0,o.jsx)(t_,{databaseId:r.databaseId,lineNumber:r.endLine,annotationLevel:r.annotationLevel,path:r.path,toggleCollapsed:u,isCollapsed:d,onNavigateToAnnotation:t}),s[3]=r.annotationLevel,s[4]=r.databaseId,s[5]=r.endLine,s[6]=r.path,s[7]=u,s[8]=d,s[9]=t,s[10]=n):n=s[10],s[11]!==r||s[12]!==d?(i=!d&&(0,o.jsx)(ty.YH,{annotation:r,inSidePanel:!0}),s[11]=r,s[12]=d,s[13]=i):i=s[13],s[14]!==r.id||s[15]!==n||s[16]!==i?(a=(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[n,i]},r.id),s[14]=r.id,s[15]=n,s[16]=i,s[17]=a):a=s[17],a}:function({annotation:e,handleNavigateToAnnotation:t}){let{isCollapsed:n,handleToggleCollapsed:i}=(0,ty.Vv)(e);return(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,o.jsx)(t_,{databaseId:e.databaseId,lineNumber:e.endLine,annotationLevel:e.annotationLevel,path:e.path,toggleCollapsed:i,isCollapsed:n,onNavigateToAnnotation:()=>t(e.databaseId)}),!n&&(0,o.jsx)(ty.YH,{annotation:e,inSidePanel:!0})]},e.id)};try{t_.displayName||(t_.displayName="AnnotationHeader")}catch{}try{tj.displayName||(tj.displayName="AlertsSidePanel")}catch{}try{tw.displayName||(tw.displayName="SidePanelAlert")}catch{}let tN=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{isFileTreeExpanded:s,pageLimits:r,className:l}=e,[d,u]=(0,b.useState)(!1),m=(0,b.useRef)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(!1),a[0]=t):t=a[0];let h=t,f=(0,k.wI)(),{sendPullRequestAnalyticsEvent:p}=(0,U.q)();if(!f)return null;a[1]!==f?(n=Object.values(f),a[1]=f,a[2]=n):n=a[2];let g=n,y=g.length;return a[3]!==g||a[4]!==l||a[5]!==s||a[6]!==r||a[7]!==p||a[8]!==d||a[9]!==y?(i=y>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(H.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:G.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Z.Q,{ref:m,className:l,"aria-label":"Open alerts side panel",count:y,leadingVisual:G.AlertIcon,size:"small",onClick:()=>{p("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eU(),u(!0)},children:s&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tj,{annotations:g,isOpen:d,pageLimits:r,returnFocusRef:m,onClose:h})]})}):null,a[3]=g,a[4]=l,a[5]=s,a[6]=r,a[7]=p,a[8]=d,a[9]=y,a[10]=i):i=a[10],i}:function({isFileTreeExpanded:e,pageLimits:t,className:n}){let[i,a]=(0,b.useState)(!1),s=(0,b.useRef)(null),r=(0,b.useCallback)(()=>a(!1),[]),l=(0,k.wI)(),{sendPullRequestAnalyticsEvent:d}=(0,U.q)();if(!l)return null;let c=Object.values(l),u=c.length;return u>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(H.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:G.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(Z.Q,{ref:s,className:n,"aria-label":"Open alerts side panel",count:u,leadingVisual:G.AlertIcon,size:"small",onClick:()=>{d("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eU(),a(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tj,{annotations:c,isOpen:i,pageLimits:t,returnFocusRef:s,onClose:r})]})}):null};try{tN.displayName||(tN.displayName="OpenAlertsPanelButton")}catch{}var tC=n(70109),tS=n(42255),tI=n(46251),tk=n(31604),tL=n(33578);let tT={approve:"approve",comment:"comment",requestChanges:"request changes"},tE=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,et.e)(ee.uT.submitReview);return s[0]!==o?(t=async e=>{let{body:t,event:n,headSha:i}=e;return(0,ec.Sr)(`${o}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:t,event:n,headSha:i}})},s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,en.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,et.e)(ee.uT.submitReview);return(0,en.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,ec.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})},tD=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,et.e)(ee.uT.abandonReview);return s[0]!==o?(t=async()=>(0,ec.Sr)(`${o}`,{method:"DELETE",headers:{Accept:"application/json"}}),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,en.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,et.e)(ee.uT.abandonReview);return(0,en.n)({mutationFn:async()=>(0,ec.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})};var tR=n(46747);let{getItem:tA,removeItem:tO,setItem:tP}=(0,ey.D)("localStorage"),tF=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),[r,l]=(0,b.useState)(!1),o=`Review:${e}`;s[0]!==o?(t=tA(o),s[0]=o,s[1]=t):t=s[1];let d=t;s[2]!==o?(n=()=>{tO(o)},s[2]=o,s[3]=n):n=s[3];let u=n;s[4]!==r||s[5]!==o?(i=(e,t)=>{if(!r)try{tP(o,{event:e,text:t})}catch{l(!0)}},s[4]=r,s[5]=o,s[6]=i):i=s[6];let m=(0,tR.d)(i,1e3);return s[7]!==m||s[8]!==d||s[9]!==u?(a={persistedReview:d,persistReviewToStorage:m,removePersistedReviewFromStorage:u},s[7]=m,s[8]=d,s[9]=u,s[10]=a):a=s[10],a}:function(e){let[t,n]=(0,b.useState)(!1),i=(0,b.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:tA(i),persistReviewToStorage:(0,tR.d)((e,a)=>{if(!t)try{tP(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{tO(i)}}},tM="ReviewMenuButton-module__ReviewMenuButton--uK7FN",t$="ReviewMenuButton-module__SubmitReviewButton--ZSu4L",tB="ReviewMenuButton-module__ErrorMessage--bglZe",tV="ReviewMenuButton-module__ExpandSection--sAB8o",tU="ReviewMenuButton-module__AnchoredReviewBody--nirqE";function tq(e,t){let n=(0,k.BI)(e),i=(0,k.l0)();return(0,b.useMemo)(()=>{let a=e;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let l=0,{path:o,diffLines:d}=r,c=i[o];if(c){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let l=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...l)}return i}(c,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),d.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let l=n.markersMap[r],o=[],d=[];if(l){for(let t of l.threads){let n;if(void 0===t.id)continue;let l=i.find(e=>Number(e.id)===t.id);if(!l)continue;let c=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=c-u),m>a&&(m=a+1);let h=s.slice(a+1-m,a+1);for(let e=0;e<h.length;e++)h[e]?.type==="HUNK"&&h.splice(0,e+1);let f=l.commentsData?.comments.slice(0,-1),p=[];for(let e of f??[])e.author&&p.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});o.push(t.id),l.commentsData&&(d=d.concat(l.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:l.id,commentId:(t.databaseId??0).toString(),isOutdated:l.isOutdated??!1,isResolved:!1,line:c,path:e,subject:{diffLines:h,endLine:c,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:l.commentsData,threadPreviewComments:p}))))}return{pendingCommentsReturnArray:d,markersFoundInLine:o}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,c,n,l,d);l++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}var tG=n(29255),tH=n(55461),tK=n(15837),tW=n(39183),tz=n(55255);let tQ="ReviewMenu-module__Radio--i3DSd",tZ="ReviewMenu-module__RadioGroup--uQwUG",tJ="ReviewMenu-module__RadioText--dXY49",tY=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(13),{isPROpen:s,reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,handleReviewEventChange:f,handleReviewSubmit:g}=e;return s?(a[0]!==g?(t={"pull-request-files-changed:submit-review":g},a[0]=g,a[1]=t):t=a[1],a[2]!==f||a[3]!==r||a[4]!==l||a[5]!==d||a[6]!==u||a[7]!==m||a[8]!==h?(n=(0,o.jsx)(tX,{reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,onReviewEventChange:f}),a[2]=f,a[3]=r,a[4]=l,a[5]=d,a[6]=u,a[7]=m,a[8]=h,a[9]=n):n=a[9],a[10]!==t||a[11]!==n?(i=(0,o.jsx)(p.tL,{commands:t,children:n}),a[10]=t,a[11]=n,a[12]=i):i=a[12],i):null}:function({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:l,handleReviewSubmit:d}){return e?(0,o.jsx)(p.tL,{commands:{"pull-request-files-changed:submit-review":d},children:(0,o.jsx)(tX,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:l})}):null},tX=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(34),{onReviewEventChange:y,reviewEvent:x,viewerAllowedNonCommentReviewTypes:v,viewerCanWriteToRepo:b,viewerHasViolatedPushPolicy:_,viewerIsAuthor:j,viewerIsCopilotAttributed:w}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(tK.A.Label,{visuallyHidden:!0,children:"Review Event"}),g[0]=t):t=g[0];let N=x===tT.comment;g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,tH.ZH)(tT.comment),g[1]=n):n=g[1],g[2]!==N?(i=(0,o.jsx)(t0,{checked:N,label:n,subLabel:"Submit general feedback without explicit approval.",value:tT.comment}),g[2]=N,g[3]=i):i=g[3];let C=x===tT.approve;g[4]!==v?(a=v.includes("APPROVE"),g[4]=v,g[5]=a):a=g[5];let S=!a;g[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,tH.ZH)(tT.approve),g[6]=s):s=g[6],g[7]!==w?(r=t3(w),g[7]=w,g[8]=r):r=g[8];let I=!!_;g[9]!==I||g[10]!==v||g[11]!==j?(l=t1(j,I,v),g[9]=I,g[10]=v,g[11]=j,g[12]=l):l=g[12],g[13]!==l||g[14]!==C||g[15]!==S||g[16]!==r?(d=(0,o.jsx)(t0,{checked:C,disabled:S,label:s,subLabel:r,value:tT.approve,disabledTooltip:l}),g[13]=l,g[14]=C,g[15]=S,g[16]=r,g[17]=d):d=g[17];let k=x===tT.requestChanges;g[18]!==v?(u=v.includes("REQUEST_CHANGES"),g[18]=v,g[19]=u):u=g[19];let L=!u;g[20]!==v||g[21]!==j?(m=t2(j,v),g[20]=v,g[21]=j,g[22]=m):m=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,tH.ZH)(tT.requestChanges),g[23]=h):h=g[23];let T=b?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes.";return g[24]!==k||g[25]!==L||g[26]!==m||g[27]!==T?(f=(0,o.jsx)(t0,{checked:k,disabled:L,disabledTooltip:m,label:h,value:tT.requestChanges,subLabel:T}),g[24]=k,g[25]=L,g[26]=m,g[27]=T,g[28]=f):f=g[28],g[29]!==y||g[30]!==d||g[31]!==f||g[32]!==i?(p=(0,o.jsxs)(tK.A,{name:"reviewEvent",onChange:y,className:tZ,children:[t,i,d,f]}),g[29]=y,g[30]=d,g[31]=f,g[32]=i,g[33]=p):p=g[33],p}:function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){return(0,o.jsxs)(tK.A,{name:"reviewEvent",onChange:e,className:tZ,children:[(0,o.jsx)(tK.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,o.jsx)(t0,{checked:t===tT.comment,label:(0,tH.ZH)(tT.comment),subLabel:"Submit general feedback without explicit approval.",value:tT.comment}),(0,o.jsx)(t0,{checked:t===tT.approve,disabled:!n.includes("APPROVE"),label:(0,tH.ZH)(tT.approve),subLabel:t3(r),value:tT.approve,disabledTooltip:t1(s,!!a,n)}),(0,o.jsx)(t0,{checked:t===tT.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:t2(s,n),label:(0,tH.ZH)(tT.requestChanges),value:tT.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})}),t0=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(18),{checked:d,disabled:u,disabledTooltip:m,label:h,subLabel:f,value:p}=e;l[0]!==d||l[1]!==p?(t=(0,o.jsx)(tW.A,{checked:d,value:p,className:tQ}),l[0]=d,l[1]=p,l[2]=t):t=l[2],l[3]!==h?(n=(0,o.jsx)("span",{className:"text-bold",children:h}),l[3]=h,l[4]=n):n=l[4],l[5]!==f?(i=(0,o.jsx)("span",{className:tJ,children:f}),l[5]=f,l[6]=i):i=l[6],l[7]!==n||l[8]!==i?(a=(0,o.jsxs)(W.A.Label,{className:"d-flex flex-column",children:[n,i]}),l[7]=n,l[8]=i,l[9]=a):a=l[9],l[10]!==u||l[11]!==t||l[12]!==a?(s=(0,o.jsxs)(W.A,{disabled:u,children:[t,a]}),l[10]=u,l[11]=t,l[12]=a,l[13]=s):s=l[13];let g=s;return l[14]!==u||l[15]!==m||l[16]!==g?(r=u&&m?(0,o.jsx)(tz.A,{text:m,children:g}):g,l[14]=u,l[15]=m,l[16]=g,l[17]=r):r=l[17],r}:function({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,o.jsxs)(W.A,{disabled:t,children:[(0,o.jsx)(tW.A,{checked:e,value:s,className:tQ}),(0,o.jsxs)(W.A.Label,{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"text-bold",children:i}),(0,o.jsx)("span",{className:tJ,children:a})]})]});return t&&n?(0,o.jsx)(tz.A,{text:n,children:r}):r};function t1(e,t,n){return e?"Pull request authors can't approve their own pull requests.":t?"Users that pushed changes to this pull request after it was opened can't approve":n.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests"}function t2(e,t){return e?"Pull request authors can't request changes on their own pull requests.":t.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"}function t3(e){return e?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes."}try{tY.displayName||(tY.displayName="ReviewTypeSelector")}catch{}try{tX.displayName||(tX.displayName="ReviewRadioButtons")}catch{}try{t0.displayName||(t0.displayName="RadioButton")}catch{}var t4=n(4908),t5=n(23398);let t6=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(23),{totalPendingComments:f,commentsList:p,handleNavigateToDiffComment:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={defaultOpen:!0,closeOnOutsideClick:!1},h[0]=t):t=h[0];let{getDetailsProps:y,open:x}=(0,t4.A)(t);return f?(h[1]!==y?(n=y(),h[1]=y,h[2]=n):n=h[2],h[3]!==x?(i=x&&(0,o.jsx)(G.ChevronDownIcon,{className:"fgColor-muted"}),h[3]=x,h[4]=i):i=h[4],h[5]!==x?(a=!x&&(0,o.jsx)(G.ChevronRightIcon,{className:"fgColor-muted"}),h[5]=x,h[6]=a):a=h[6],h[7]!==f?(s=(0,o.jsxs)(R.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(N.A,{children:f})]}),h[7]=f,h[8]=s):s=h[8],h[9]!==i||h[10]!==a||h[11]!==s?(r=(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[i,a,s]})}),h[9]=i,h[10]=a,h[11]=s,h[12]=r):r=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(A.A,{}),h[13]=l):l=h[13],h[14]!==p||h[15]!==g?(d=p?.map(e=>(0,o.jsx)(ti,{commentPreview:e,onNavigateToDiffComment:g},e.threadId)),h[14]=p,h[15]=g,h[16]=d):d=h[16],h[17]!==d?(u=(0,o.jsx)(b.Suspense,{fallback:l,children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:d})}),h[17]=d,h[18]=u):u=h[18],h[19]!==n||h[20]!==r||h[21]!==u?(m=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...n,children:[r,u]})}),h[19]=n,h[20]=r,h[21]=u,h[22]=m):m=h[22],m):null}:function({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,t4.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t5.A,{...i(),children:[(0,o.jsx)(t5.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,o.jsx)(G.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,o.jsx)(G.ChevronRightIcon,{className:"fgColor-muted"}),(0,o.jsxs)(R.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(N.A,{children:e})]})]})}),(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(A.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,o.jsx)(ti,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null};try{t6.displayName||(t6.displayName="ReviewCommentsSection")}catch{}var t7=n(56149);let t8=(0,d.Z6)()?e=>{let t,n,i,a=(0,c.c)(4),{portalName:s}=e,r=(0,b.useRef)(null);return a[0]!==s?(t=()=>{r.current&&(0,t7.cw)(r.current,s)},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,b.useEffect)(t,n),a[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("div",{ref:r,className:"position-absolute"}),a[3]=i):i=a[3],i}:({portalName:e})=>{let t=(0,b.useRef)(null);return(0,b.useEffect)(()=>{t.current&&(0,t7.cw)(t.current,e)},[e]),(0,o.jsx)("div",{ref:t,className:"position-absolute"})};try{t8.displayName||(t8.displayName="OverlayPortalContainer")}catch{}let t9="review-menu-portal-root";function ne({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let i=t.includes("APPROVE"),a=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case i:case a:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}}let nt=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,x,v,_,j,w,N,C,S,I,L,T,E,D,A,O,P,F,M,$,B,V=(0,c.c)(125),{currentUserLogin:q,pullRequest:K,repository:W,redirectOnMutation:z}=e,Q=void 0===z||z,{author:J,pathName:Y,state:X,viewerAllowedNonCommentReviewTypes:ee,viewerHasViolatedPushPolicy:et,viewerIsCopilotAttributed:en,comparison:ei}=K,ea=(0,k.ys)(),es=(0,k.HZ)(),{persistedReview:er,persistReviewToStorage:el,removePersistedReviewFromStorage:eo}=tF(Y);V[0]!==ea?.pendingReviewIDs?(t=ea?.pendingReviewIDs??[],V[0]=ea?.pendingReviewIDs,V[1]=t):t=V[1];let ed=tq(t,es),ec=ed?.length??0,eu=J?.login===q,em=X!==tL.Q.Closed&&X!==tL.Q.Merged,eh="WRITE"===W.viewerPermission||"ADMIN"===W.viewerPermission,ef=ei.headOid,[ep,eg]=(0,tS.A)("none"),[ey,ex]=(0,tS.A)("idle"),[ev,eb]=(0,tS.A)(),[e_,ej]=(0,tS.A)(er?.event??tT.comment);V[2]!==ea?.pendingReviewIDs?(n=ea?.pendingReviewIDs??[],V[2]=ea?.pendingReviewIDs,V[3]=n):n=V[3];let ew=n.length>0,eN=(0,b.useRef)(null),eC=er?.text??"",eS=(0,b.useRef)(eC),[eI,ek]=(0,tS.A)(!!er?.text),eL="submitting"===ey||!eI&&e_===tT.comment&&!ec,{sendPullRequestAnalyticsEvent:eT}=(0,U.q)();V[4]!==el||V[5]!==e_||V[6]!==ek?(i=e=>{eS.current=e,ek(!!e.trim()),el(e_,e)},V[4]=el,V[5]=e_,V[6]=ek,V[7]=i):i=V[7];let eE=i;V[8]!==el||V[9]!==ej?(a=e=>{Object.values(tT).includes(e)&&(ej(e),el(e,eS.current))},V[8]=el,V[9]=ej,V[10]=a):a=V[10];let eD=a;V[11]!==Q||V[12]!==eo?(s=e=>{let{redirectUrl:t}=e;eo(),Q&&(window.location.href=t)},V[11]=Q,V[12]=eo,V[13]=s):s=V[13],V[14]!==eb||V[15]!==ex?(r=e=>{ex("idle"),eb(e.message)},V[14]=eb,V[15]=ex,V[16]=r):r=V[16],V[17]!==s||V[18]!==r?(l={onSuccess:s,onError:r},V[17]=s,V[18]=r,V[19]=l):l=V[19];let{mutate:eR}=tE(l);V[20]!==Q||V[21]!==eo?(d=e=>{let{redirectUrl:t}=e;eo(),Q&&(window.location.href=t)},V[20]=Q,V[21]=eo,V[22]=d):d=V[22],V[23]!==eb||V[24]!==ex?(u=e=>{ex("idle"),eb(e.message)},V[23]=eb,V[24]=ex,V[25]=u):u=V[25],V[26]!==u||V[27]!==d?(m={onSuccess:d,onError:u},V[26]=u,V[27]=d,V[28]=m):m=V[28];let{mutate:eA}=tD(m);V[29]!==ev||V[30]!==ef||V[31]!==e_||V[32]!==eT||V[33]!==eb||V[34]!==ex||V[35]!==eL||V[36]!==eR?(h=()=>{eL||(ev&&eb(void 0),ex("submitting"),eT("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),eR({body:eS.current,event:e_,headSha:ef}))},V[29]=ev,V[30]=ef,V[31]=e_,V[32]=eT,V[33]=eb,V[34]=ex,V[35]=eL,V[36]=eR,V[37]=h):h=V[37];let eO=h;V[38]!==eA||V[39]!==ev||V[40]!==ea?.pendingReviewIDs||V[41]!==eT||V[42]!==eb||V[43]!==ex?(f=()=>{0===(ea?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(ev&&eb(void 0),ex("canceling"),eT("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),eA())},V[38]=eA,V[39]=ev,V[40]=ea?.pendingReviewIDs,V[41]=eT,V[42]=eb,V[43]=ex,V[44]=f):f=V[44],ea?.pendingReviewIDs;let eP=f;V[45]!==em||V[46]!==ee||V[47]!==eu?(p=ne({isPROpen:em,viewerAllowedNonCommentReviewTypes:ee,viewerIsAuthor:eu}),V[45]=em,V[46]=ee,V[47]=eu,V[48]=p):p=V[48];let eF=p;V[49]!==eT||V[50]!==eg?(g=()=>{window.innerWidth<768?eg("dialog"):eg("anchored"),eT("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},V[49]=eT,V[50]=eg,V[51]=g):g=V[51];let eM=g;V[52]!==eg?(x=()=>{eg("none")},V[52]=eg,V[53]=x):x=V[53];let e$=x;V[54]!==eg?(v=()=>{eg("none")},V[54]=eg,V[55]=v):v=V[55];let eB=v;V[56]!==e$||V[57]!==eM||V[58]!==ep?(_=()=>{"none"===ep?eM():e$()},V[56]=e$,V[57]=eM,V[58]=ep,V[59]=_):_=V[59];let eV=_;V[60]!==ed||V[61]!==eB||V[62]!==eD||V[63]!==eO||V[64]!==eC||V[65]!==em||V[66]!==eE||V[67]!==e_||V[68]!==ec||V[69]!==ee||V[70]!==eh||V[71]!==et||V[72]!==eu||V[73]!==en?(j=(0,o.jsx)(na,{initialReviewBody:eC,isPROpen:em,onReviewBodyChange:eE,reviewEvent:e_,viewerAllowedNonCommentReviewTypes:ee,viewerCanWriteToRepo:eh,viewerHasViolatedPushPolicy:et,viewerIsAuthor:eu,viewerIsCopilotAttributed:en,commentsList:ed,totalPendingComments:ec,handleNavigateToDiffComment:eB,handleReviewSubmit:eO,handleReviewEventChange:eD}),V[60]=ed,V[61]=eB,V[62]=eD,V[63]=eO,V[64]=eC,V[65]=em,V[66]=eE,V[67]=e_,V[68]=ec,V[69]=ee,V[70]=eh,V[71]=et,V[72]=eu,V[73]=en,V[74]=j):j=V[74];let eU=j;if(eF.isHidden)return null;V[75]!==ev||V[76]!==e$||V[77]!==eP||V[78]!==eO||V[79]!==ew||V[80]!==eF||V[81]!==ey||V[82]!==eL?(w=()=>(0,o.jsx)(ni,{errorMessage:ev,hasPendingReviews:ew,reviewSubmissionState:ey,handleReviewCancel:eP,handleCloseReviewDialog:e$,handleReviewSubmit:eO,submitDisabled:eL,reviewMenuButtonDisplayState:eF}),V[75]=ev,V[76]=e$,V[77]=eP,V[78]=eO,V[79]=ew,V[80]=eF,V[81]=ey,V[82]=eL,V[83]=w):w=V[83];let eq=w,eG=ec||void 0;V[84]!==eV||V[85]!==eF.text||V[86]!==eG?(N=(0,o.jsxs)(Z.Q,{count:eG,className:tM,trailingAction:G.TriangleDownIcon,variant:"primary",onClick:eV,size:"small",ref:eN,children:["Submit ",eF.text]}),V[84]=eV,V[85]=eF.text,V[86]=eG,V[87]=N):N=V[87],V[88]===Symbol.for("react.memo_cache_sentinel")?(C=(0,o.jsx)(t8,{portalName:t9}),V[88]=C):C=V[88];let eH="anchored"===ep;return V[89]===Symbol.for("react.memo_cache_sentinel")?(S={regular:"anchored",narrow:"fullscreen"},V[89]=S):S=V[89],V[90]===Symbol.for("react.memo_cache_sentinel")?(I={disabled:!0},L={role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t9},V[90]=I,V[91]=L):(I=V[90],L=V[91]),V[92]!==eF.text?(T=(0,o.jsxs)(R.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",eF.text]}),V[92]=eF.text,V[93]=T):T=V[93],V[94]!==ew||V[95]!==eg?(E=ew&&(0,o.jsx)(H.K,{icon:G.MaximizeIcon,className:tV,variant:"invisible","aria-label":"Expand this section",onClick:()=>eg("dialog")}),V[94]=ew,V[95]=eg,V[96]=E):E=V[96],V[97]!==e$?(D=(0,o.jsx)(H.K,{icon:G.XIcon,variant:"invisible","aria-label":"Close",onClick:e$}),V[97]=e$,V[98]=D):D=V[98],V[99]!==E||V[100]!==D?(A=(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",gap:"none",children:[E,D]}),V[99]=E,V[100]=D,V[101]=A):A=V[101],V[102]!==T||V[103]!==A?(O=(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[T,A]}),V[102]=T,V[103]=A,V[104]=O):O=V[104],V[105]!==eU?(P=(0,o.jsx)("div",{className:tU,children:eU}),V[105]=eU,V[106]=P):P=V[106],V[107]!==eq?(F=(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(eq,{})}),V[107]=eq,V[108]=F):F=V[108],V[109]!==e$||V[110]!==eH||V[111]!==O||V[112]!==P||V[113]!==F?(M=(0,o.jsxs)(tk.T,{open:eH,anchorRef:eN,width:"xlarge",onClose:e$,displayCloseButton:!1,variant:S,renderAnchor:null,focusZoneSettings:I,overlayProps:L,children:[O,P,F]}),V[109]=e$,V[110]=eH,V[111]=O,V[112]=P,V[113]=F,V[114]=M):M=V[114],V[115]!==eU||V[116]!==eq||V[117]!==e$||V[118]!==ep||V[119]!==eF.text?($="dialog"===ep&&(0,o.jsx)(y.l,{onClose:e$,returnFocusRef:eN,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${eF.text}`,renderFooter:()=>(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(eq,{})}),children:eU}),V[115]=eU,V[116]=eq,V[117]=e$,V[118]=ep,V[119]=eF.text,V[120]=$):$=V[120],V[121]!==N||V[122]!==M||V[123]!==$?(B=(0,o.jsxs)(o.Fragment,{children:[N,C,M,$]}),V[121]=N,V[122]=M,V[123]=$,V[124]=B):B=V[124],B}:function({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:l,viewerHasViolatedPushPolicy:d,viewerIsCopilotAttributed:c,comparison:u}=t,m=(0,k.ys)(),h=(0,k.HZ)(),{persistedReview:f,persistReviewToStorage:p,removePersistedReviewFromStorage:g}=tF(s),x=tq(m?.pendingReviewIDs??[],h),v=x?.length??0,_=a?.login===e,j=r!==tL.Q.Closed&&r!==tL.Q.Merged,w="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,N=u.headOid,[C,S]=(0,tS.A)("none"),[I,L]=(0,tS.A)("idle"),[T,E]=(0,tS.A)(),[D,A]=(0,tS.A)(f?.event??tT.comment),O=(m?.pendingReviewIDs??[]).length>0,P=(0,b.useRef)(null),F=f?.text??"",M=(0,b.useRef)(F),[$,B]=(0,tS.A)(!!f?.text),V="submitting"===I||!$&&D===tT.comment&&!v,{sendPullRequestAnalyticsEvent:q}=(0,U.q)(),K=(0,b.useCallback)(e=>{M.current=e,B(!!e.trim()),p(D,e)},[p,D,B]),W=(0,b.useCallback)(e=>{Object.values(tT).includes(e)&&(A(e),p(e,M.current))},[p,A]),{mutate:z}=tE({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{L("idle"),E(e.message)}}),{mutate:Q}=tD({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{L("idle"),E(e.message)}}),J=(0,b.useCallback)(()=>{V||(T&&E(void 0),L("submitting"),q("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),z({body:M.current,event:D,headSha:N}))},[T,N,D,q,E,L,V,z]),Y=(0,b.useCallback)(()=>{0===(m?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(T&&E(void 0),L("canceling"),q("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Q())},[Q,T,m?.pendingReviewIDs,q,E,L]),X=(0,b.useMemo)(()=>ne({isPROpen:j,viewerAllowedNonCommentReviewTypes:l,viewerIsAuthor:_}),[l,_,j]),ee=(0,b.useCallback)(()=>{window.innerWidth<768?S("dialog"):S("anchored"),q("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[q,S]),et=(0,b.useCallback)(()=>{S("none")},[S]),en=(0,b.useCallback)(()=>{S("none")},[S]),ei=(0,b.useCallback)(()=>{"none"===C?ee():et()},[et,ee,C]),ea=(0,b.useMemo)(()=>(0,o.jsx)(na,{initialReviewBody:F,isPROpen:j,onReviewBodyChange:K,reviewEvent:D,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:w,viewerHasViolatedPushPolicy:d,viewerIsAuthor:_,viewerIsCopilotAttributed:c,commentsList:x,totalPendingComments:v,handleNavigateToDiffComment:en,handleReviewSubmit:J,handleReviewEventChange:W}),[x,en,W,J,F,j,K,D,v,l,w,d,_,c]);if(X.isHidden)return null;let es=()=>(0,o.jsx)(ni,{errorMessage:T,hasPendingReviews:O,reviewSubmissionState:I,handleReviewCancel:Y,handleCloseReviewDialog:et,handleReviewSubmit:J,submitDisabled:V,reviewMenuButtonDisplayState:X});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Z.Q,{count:v||void 0,className:tM,trailingAction:G.TriangleDownIcon,variant:"primary",onClick:ei,size:"small",ref:P,children:["Submit ",X.text]}),(0,o.jsx)(t8,{portalName:t9}),(0,o.jsxs)(tk.T,{open:"anchored"===C,anchorRef:P,width:"xlarge",onClose:et,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:t9},children:[(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,o.jsxs)(R.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",X.text]}),(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",gap:"none",children:[O&&(0,o.jsx)(H.K,{icon:G.MaximizeIcon,className:tV,variant:"invisible","aria-label":"Expand this section",onClick:()=>S("dialog")}),(0,o.jsx)(H.K,{icon:G.XIcon,variant:"invisible","aria-label":"Close",onClick:et})]})]}),(0,o.jsx)("div",{className:tU,children:ea}),(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(es,{})})]}),"dialog"===C&&(0,o.jsx)(y.l,{onClose:et,returnFocusRef:P,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${X.text}`,renderFooter:()=>(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(es,{})}),children:ea})]})},nn=(0,b.forwardRef)((0,d.Z6)()?(e,t)=>{let n,i,a,s,r,l=(0,c.c)(12);l[0]!==e?({initialValue:n,onChange:i,...a}=e,l[0]=e,l[1]=n,l[2]=i,l[3]=a):(n=l[1],i=l[2],a=l[3]);let[d,u]=(0,tS.A)(n);l[4]!==i||l[5]!==u?(s=e=>{u(e),i(e)},l[4]=i,l[5]=u,l[6]=s):s=l[6];let m=s;return l[7]!==m||l[8]!==a||l[9]!==t||l[10]!==d?(r=(0,o.jsx)(tC.S,{...a,value:d,onChange:m,ref:t}),l[7]=m,l[8]=a,l[9]=t,l[10]=d,l[11]=r):r=l[11],r}:({initialValue:e,onChange:t,...n},i)=>{let[a,s]=(0,tS.A)(e),r=(0,b.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,o.jsx)(tC.S,{...n,value:a,onChange:r,ref:i})});nn.displayName="ControlledCommentBox";let ni=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m=(0,c.c)(28),{errorMessage:h,handleReviewCancel:f,handleCloseReviewDialog:p,handleReviewSubmit:g,hasPendingReviews:y,submitDisabled:x,reviewMenuButtonDisplayState:v,reviewSubmissionState:b}=e,_="canceling"===b,j="submitting"===b;m[0]!==h?(t=h&&(0,o.jsxs)(eY.A,{className:tB,variant:"danger",children:[(0,o.jsx)(G.StopIcon,{className:"mr-2"}),h]}),m[0]=h,m[1]=t):t=m[1],m[2]!==f||m[3]!==y||m[4]!==_||m[5]!==j||m[6]!==v.text?(n=y?(0,o.jsx)(Z.Q,{disabled:_||j,loading:_,onClick:f,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:["Discard ",v.text]})}):(0,o.jsx)("div",{}),m[2]=f,m[3]=y,m[4]=_,m[5]=j,m[6]=v.text,m[7]=n):n=m[7];let w=_||j;m[8]!==p||m[9]!==w?(i=(0,o.jsx)(Z.Q,{onClick:p,disabled:w,children:"Cancel"}),m[8]=p,m[9]=w,m[10]=i):i=m[10];let N=x||j;return m[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(tG.U,{keys:"Mod+enter"}),m[11]=a):a=m[11],m[12]!==v.text?(s=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",v.text]}),m[12]=v.text,m[13]=s):s=m[13],m[14]!==g||m[15]!==j||m[16]!==N||m[17]!==s?(r=(0,o.jsx)(Z.Q,{disabled:N,variant:"primary",onClick:g,loading:j,className:t$,trailingVisual:a,children:s}),m[14]=g,m[15]=j,m[16]=N,m[17]=s,m[18]=r):r=m[18],m[19]!==i||m[20]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[i,r]}),m[19]=i,m[20]=r,m[21]=l):l=m[21],m[22]!==n||m[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[n,l]}),m[22]=n,m[23]=l,m[24]=d):d=m[24],m[25]!==t||m[26]!==d?(u=(0,o.jsxs)(o.Fragment,{children:[t,d]}),m[25]=t,m[26]=d,m[27]=u):u=m[27],u}:function({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:l}){let d="canceling"===l,c="submitting"===l;return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsxs)(eY.A,{className:tB,variant:"danger",children:[(0,o.jsx)(G.StopIcon,{className:"mr-2"}),e]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,o.jsx)(Z.Q,{disabled:d||c,loading:d,onClick:t,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,o.jsx)(Z.Q,{onClick:n,disabled:d||c,children:"Cancel"}),(0,o.jsx)(Z.Q,{disabled:s||c,variant:"primary",onClick:i,loading:c,className:t$,trailingVisual:(0,o.jsx)(tG.U,{keys:"Mod+enter"}),children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})},na=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(25),{initialReviewBody:u,isPROpen:m,onReviewBodyChange:h,reviewEvent:f,viewerAllowedNonCommentReviewTypes:p,viewerCanWriteToRepo:g,viewerHasViolatedPushPolicy:y,viewerIsAuthor:x,viewerIsCopilotAttributed:v,commentsList:_,totalPendingComments:j,handleNavigateToDiffComment:w,handleReviewSubmit:N,handleReviewEventChange:C}=e,S=(0,b.useRef)(null);return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=window.setTimeout(()=>S.current?.focus());return()=>{window.clearTimeout(e)}},n=[],d[0]=t,d[1]=n):(t=d[0],n=d[1]),(0,b.useEffect)(t,n),d[2]===Symbol.for("react.memo_cache_sentinel")?(i={flexGrow:"1",width:"100%"},d[2]=i):i=d[2],d[3]!==N||d[4]!==u||d[5]!==h?(a=(0,o.jsx)(nn,{ref:S,label:"Add review comment",placeholder:"Leave a comment",sx:i,initialValue:u,onChange:h,onPrimaryAction:N}),d[3]=N,d[4]=u,d[5]=h,d[6]=a):a=d[6],d[7]!==C||d[8]!==N||d[9]!==m||d[10]!==f||d[11]!==p||d[12]!==g||d[13]!==y||d[14]!==x||d[15]!==v?(s=(0,o.jsx)(tY,{isPROpen:m,reviewEvent:f,viewerAllowedNonCommentReviewTypes:p,viewerCanWriteToRepo:g,viewerHasViolatedPushPolicy:y,viewerIsAuthor:x,viewerIsCopilotAttributed:v,handleReviewEventChange:C,handleReviewSubmit:N}),d[7]=C,d[8]=N,d[9]=m,d[10]=f,d[11]=p,d[12]=g,d[13]=y,d[14]=x,d[15]=v,d[16]=s):s=d[16],d[17]!==_||d[18]!==w||d[19]!==j?(r=(0,o.jsx)(t6,{totalPendingComments:j,commentsList:_,handleNavigateToDiffComment:w}),d[17]=_,d[18]=w,d[19]=j,d[20]=r):r=d[20],d[21]!==a||d[22]!==s||d[23]!==r?(l=(0,o.jsxs)(o.Fragment,{children:[a,s,r]}),d[21]=a,d[22]=s,d[23]=r,d[24]=l):l=d[24],l}:function({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,commentsList:c,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:h,handleReviewEventChange:f}){let p=(0,b.useRef)(null);return(0,b.useEffect)(()=>{let e=window.setTimeout(()=>p.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nn,{ref:p,label:"Add review comment",placeholder:"Leave a comment",sx:{flexGrow:"1",width:"100%"},initialValue:e,onChange:n,onPrimaryAction:h}),(0,o.jsx)(tY,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,handleReviewEventChange:f,handleReviewSubmit:h}),(0,o.jsx)(t6,{totalPendingComments:u,commentsList:c,handleNavigateToDiffComment:m})]})};try{nt.displayName||(nt.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{ni.displayName||(ni.displayName="ReviewMenuFooterComponent")}catch{}try{na.displayName||(na.displayName="ReviewMenuBodyComponent")}catch{}var ns=n(27028),nr=n(39029);let nl="RefreshButton-module__refresh--gOrN1";var no=n(91747),nd=n(43073),nc=n(61526);let nu=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(5),{aliveChannel:s,pathName:r}=e,[l,d]=(0,b.useState)(!1),u=(0,nd.E)(),m=(0,no.u)("combined_pr_changes_route")?`${r}/changes`:`${r}/files`;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{d(!0)},a[0]=t):t=a[0];let h=t;if(a[1]===Symbol.for("react.memo_cache_sentinel")?(n={git_updated:!0},a[1]=n):n=a[1],(0,nr.G)(s,h,n),!l)return null;if(u){let e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(nh,{}),a[2]=e):e=a[2],e}return a[3]!==m?(i=(0,o.jsx)(nm,{refreshUrl:m}),a[3]=m,a[4]=i):i=a[4],i}:function({aliveChannel:e,pathName:t}){let[n,i]=(0,b.useState)(!1),a=(0,nd.E)(),s=(0,no.u)("combined_pr_changes_route")?`${t}/changes`:`${t}/files`;return((0,nr.G)(e,()=>{i(!0)},{git_updated:!0}),n)?a?(0,o.jsx)(nh,{}):(0,o.jsx)(nm,{refreshUrl:s}):null},nm=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{refreshUrl:a}=e;i[0]!==a?(t=e=>{e.preventDefault(),window.location.href=a},i[0]=a,i[1]=t):t=i[1];let s=t;return i[2]!==s||i[3]!==a?(n=(0,o.jsx)(Z.Q,{as:O.A,variant:"invisible",href:a,className:nl,leadingVisual:G.SyncIcon,size:"small",onClick:s,children:"Refresh"}),i[2]=s,i[3]=a,i[4]=n):n=i[4],n}:function({refreshUrl:e}){return(0,o.jsx)(Z.Q,{as:O.A,variant:"invisible",href:e,className:nl,leadingVisual:G.SyncIcon,size:"small",onClick:t=>{t.preventDefault(),window.location.href=e},children:"Refresh"})},nh=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(4),i=(0,nc.zy)(),[a,s]=(0,b.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{s(!0)},n[0]=e):e=n[0];let r=e;return n[1]!==a||n[2]!==i.pathname?(t=(0,o.jsx)(Z.Q,{as:nc.N_,to:i.pathname,variant:"invisible",className:nl,leadingVisual:G.SyncIcon,size:"small",onClick:r,loading:a,children:"Refresh"}),n[1]=a,n[2]=i.pathname,n[3]=t):t=n[3],t}:function(){let e=(0,nc.zy)(),[t,n]=(0,b.useState)(!1),i=async()=>{n(!0)};return(0,o.jsx)(Z.Q,{as:nc.N_,to:e.pathname,variant:"invisible",className:nl,leadingVisual:G.SyncIcon,size:"small",onClick:i,loading:t,children:"Refresh"})};try{nu.displayName||(nu.displayName="RefreshButton")}catch{}try{nm.displayName||(nm.displayName="NavigatorRefreshButton")}catch{}try{nh.displayName||(nh.displayName="DataRouterRefreshButton")}catch{}var nf=n(40523),np=n(68874),ng=n(14808);function ny(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,_,j,N,C,S,I,k=(0,c.c)(76),{items:L,onMultiSelect:T,onSingleSelect:E,onApply:D,onCancel:R,buttonProps:A,anchorLabel:O,variant:P,title:F,dialogProps:M}=e,$=void 0===P?"overlay":P,B=(0,b.useRef)(null),[V,U]=(0,b.useState)(!1),[q,G]=(0,b.useState)();k[0]!==L?(t=L.reduce(nw,{single:[],multiple:[]}),k[0]=L,k[1]=t):t=k[1];let H=t;k[2]!==H?(n=()=>H,k[2]=H,k[3]=n):n=k[3];let[K,W]=(0,b.useState)(n);k[4]!==K?.multiple||k[5]!==K?.single?(i=e=>{W({single:K?.single.map(t=>t.id===e.id?{...t,selected:!t.selected}:t.selected?{...t,selected:!1}:t)||[],multiple:K?.multiple||[]})},k[4]=K?.multiple,k[5]=K?.single,k[6]=i):i=k[6];let z=i;k[7]!==K?.multiple||k[8]!==K?.single?(a=e=>{let t=K?.multiple.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)||[];W({single:K?.single||[],multiple:t})},k[7]=K?.multiple,k[8]=K?.single,k[9]=a):a=k[9];let Q=a;k[10]!==K?.multiple||k[11]!==T||k[12]!==H?.multiple?(s=T?H?.multiple.filter(n_).length:K?.multiple.filter(nj).length||0,k[10]=K?.multiple,k[11]=T,k[12]=H?.multiple,k[13]=s):s=k[13];let J=s;k[14]!==q?.multiple?(r=q?.multiple.filter(nb).length||0,k[14]=q?.multiple,k[15]=r):r=k[15];let Y=r,X=J&&0!==Y?`${Y} commit${Y>1?"s":""} selected`:"Select commits";k[16]!==K||k[17]!==D?(l=()=>{G(K),U(!1),D&&D(K?.multiple.filter(nv)||[])},k[16]=K,k[17]=D,k[18]=l):l=k[18];let ee=l;k[19]!==R||k[20]!==H?(d=()=>{W(H),G(H),R?.()},k[19]=R,k[20]=H,k[21]=d):d=k[21];let et=d;k[22]!==V?(u=()=>U(!V),k[22]=V,k[23]=u):u=k[23];let en=O||X;k[24]!==A||k[25]!==u||k[26]!==en?(m=(0,o.jsx)(Z.Q,{ref:B,onClick:u,...A,children:en}),k[24]=A,k[25]=u,k[26]=en,k[27]=m):m=k[27],k[28]!==K?.single||k[29]!==q?.multiple||k[30]!==H?(h=()=>{W({single:K?.single||[],multiple:q?.multiple||H.multiple}),U(!1)},k[28]=K?.single,k[29]=q?.multiple,k[30]=H,k[31]=h):h=k[31],k[32]===Symbol.for("react.memo_cache_sentinel")?(f={focusOutBehavior:"wrap",focusableElementFilter:nx},k[32]=f):f=k[32],k[33]!==et?(p=()=>{et(),U(!1)},k[33]=et,k[34]=p):p=k[34],k[35]!==K?.single||k[36]!==E||k[37]!==H?(g=E?H.single:K?.single||[],k[35]=K?.single,k[36]=E,k[37]=H,k[38]=g):g=k[38],k[39]!==z||k[40]!==E||k[41]!==$?(y=e=>{E?E(e):z(e),"modal"!==$&&U(!1)},k[39]=z,k[40]=E,k[41]=$,k[42]=y):y=k[42],k[43]!==g||k[44]!==y?(x=(0,o.jsx)(nN,{selectionVariant:"single",items:g,onSelect:y,showGroupHeading:!1}),k[43]=g,k[44]=y,k[45]=x):x=k[45],k[46]!==K?.multiple||k[47]!==T||k[48]!==H?(v=T?H.multiple:K?.multiple||[],k[46]=K?.multiple,k[47]=T,k[48]=H,k[49]=v):v=k[49];let ei=T??Q;return k[50]!==v||k[51]!==ei?(_=(0,o.jsx)(nN,{selectionVariant:"multiple",items:v,onSelect:ei}),k[50]=v,k[51]=ei,k[52]=_):_=k[52],k[53]!==x||k[54]!==_?(j=(0,o.jsx)("div",{className:"CommitSelector-module__CommitSelectorContainer--_atPn",children:(0,o.jsxs)(w.l,{role:"listbox",selectionVariant:"single","aria-label":"Selection",children:[x,_]})}),k[53]=x,k[54]=_,k[55]=j):j=k[55],k[56]!==et||k[57]!==J||k[58]!==ee||k[59]!==$?(N=J&&"modal"!==$?(0,o.jsx)(ng.G9,{footerButtons:[{content:"Apply",onClick:ee,action:"save"},{content:"Clear",onClick:et,action:"cancel"}]}):null,k[56]=et,k[57]=J,k[58]=ee,k[59]=$,k[60]=N):N=k[60],k[61]!==j||k[62]!==N?(C=(0,o.jsxs)("div",{className:"CommitSelector-module__CommitSelectorWrapper--Wp_n9",children:[j,N]}),k[61]=j,k[62]=N,k[63]=C):C=k[63],k[64]!==M||k[65]!==V||k[66]!==ee||k[67]!==h||k[68]!==p||k[69]!==C||k[70]!==F||k[71]!==$?(S=(0,o.jsx)(ng.KA,{open:V,anchorRef:B,headingId:"select-label",onClose:h,variant:$,focusZoneSettings:f,title:F,dialogProps:M,selectSave:ee,selectCancel:p,children:C}),k[64]=M,k[65]=V,k[66]=ee,k[67]=h,k[68]=p,k[69]=C,k[70]=F,k[71]=$,k[72]=S):S=k[72],k[73]!==m||k[74]!==S?(I=(0,o.jsxs)(o.Fragment,{children:[m,S]}),k[73]=m,k[74]=S,k[75]=I):I=k[75],I}function nx(e){return"BUTTON"!==e.tagName}function nv(e){return e.selected}function nb(e){return e.selected}function n_(e){return e.selected}function nj(e){return e.selected}function nw(e,t){return"single"===t.selectionVariant?{...e,single:[...e.single,t]}:"multiple"===t.selectionVariant?{...e,multiple:[...e.multiple,t]}:e}function nN(e){let t,n=(0,c.c)(5),{items:i,onSelect:a,selectionVariant:s,showGroupHeading:r}=e,l=void 0===r||r;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==l?(t=(0,o.jsx)(ng.LR,{selectionVariant:s,items:i,showGroupHeading:l,onSelect:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=l,n[4]=t):t=n[4],t}try{ny.displayName||(ny.displayName="CommitSelector")}catch{}try{nN.displayName||(nN.displayName="CommitSelectorBody")}catch{}var nC=n(62935),nS=n(70119);function nI(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}let nk=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,_,j,N,C=(0,c.c)(52),{baseRefOid:S,commitOids:I,commits:k,endOid:L,onClose:T,onRangeUpdated:E,startOid:D}=e;C[0]!==I||C[1]!==L||C[2]!==D?(t=()=>{if(!D||!L)return;let e=D?I.indexOf(D)+1:-1,t=L?I.indexOf(L):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},C[0]=I,C[1]=L,C[2]=D,C[3]=t):t=C[3];let[R,A]=(0,b.useState)(t);C[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{A(void 0)},C[4]=n):n=C[4];let O=n;C[5]!==I||C[6]!==R?(i=(e,t)=>{let n,i=I.indexOf(e);if(R){if(R.start!==R.end||"removed"!==t){let{newStartIndex:e,newEndIndex:a}=nI(i,R.start,R.end,t);n={start:e,end:a}}}else n="added"===t?{start:i,end:i}:void 0;A(n)},C[5]=I,C[6]=R,C[7]=i):i=C[7];let P=i;C[8]!==S||C[9]!==I||C[10]!==L||C[11]!==T||C[12]!==E||C[13]!==R||C[14]!==D?(a=()=>{let e,t;(R&&(R.start>0||R.end<I.length-1)&&(e=R.start>0?I[R.start-1]:S,t=I[R.end]),e===D&&t===L)?T():e&&t?R&&R.start===R.end?E({type:"single",oid:t}):E({type:"range",fromPRBase:e===S,baseOid:e,endOid:t}):E({type:"unfiltered"})},C[8]=S,C[9]=I,C[10]=L,C[11]=T,C[12]=E,C[13]=R,C[14]=D,C[15]=a):a=C[15];let F=a;if(C[16]!==I||C[17]!==k||C[18]!==F||C[19]!==P||C[20]!==T||C[21]!==R){let e=R?I.slice(R.start,R.end+1):[];r=nS.X,g=!0,y=!0,x="Picking a range will select commits in between.",v="multiple",l="Pick one or more commits",d="modal",u="large",m=T,h=O,f=F,s=w.l,p=k.map(t=>{let n=e.includes(t.oid);return(0,o.jsxs)(w.l.Item,{selected:n,onSelect:()=>P(t.oid,n?"removed":"added"),children:[t.messageHeadline,(0,o.jsxs)(w.l.Description,{variant:"block",children:[t.shortOid," \xb7 ",t.actorLogin," \xb7 ",(0,o.jsx)(nC.A,{datetime:t.createdAt})]})]},t.oid)}),C[16]=I,C[17]=k,C[18]=F,C[19]=P,C[20]=T,C[21]=R,C[22]=s,C[23]=r,C[24]=l,C[25]=d,C[26]=u,C[27]=m,C[28]=h,C[29]=f,C[30]=p,C[31]=g,C[32]=y,C[33]=x,C[34]=v}else s=C[22],r=C[23],l=C[24],d=C[25],u=C[26],m=C[27],h=C[28],f=C[29],p=C[30],g=C[31],y=C[32],x=C[33],v=C[34];return C[35]!==s||C[36]!==p?(_=(0,o.jsx)(s,{children:p}),C[35]=s,C[36]=p,C[37]=_):_=C[37],C[38]===Symbol.for("react.memo_cache_sentinel")?(j=(0,o.jsx)(nS.X.Footer,{}),C[38]=j):j=C[38],C[39]!==r||C[40]!==l||C[41]!==d||C[42]!==u||C[43]!==m||C[44]!==h||C[45]!==f||C[46]!==_||C[47]!==g||C[48]!==y||C[49]!==x||C[50]!==v?(N=(0,o.jsxs)(r,{defaultOpen:g,open:y,description:x,selectionVariant:v,title:l,variant:d,width:u,onCancel:m,onClearSelection:h,onSubmit:f,children:[_,j]}),C[39]=r,C[40]=l,C[41]=d,C[42]=u,C[43]=m,C[44]=h,C[45]=f,C[46]=_,C[47]=g,C[48]=y,C[49]=x,C[50]=v,C[51]=N):N=C[51],N}:function({baseRefOid:e,commitOids:t,commits:n,endOid:i,onClose:a,onRangeUpdated:s,startOid:r}){let[l,d]=(0,b.useState)(()=>{if(!r||!i)return;let e=r?t.indexOf(r)+1:-1,n=i?t.indexOf(i):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),c=l?t.slice(l.start,l.end+1):[];return(0,o.jsxs)(nS.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:a,onClearSelection:()=>{d(void 0)},onSubmit:()=>{let n,o;(l&&(l.start>0||l.end<t.length-1)&&(n=l.start>0?t[l.start-1]:e,o=t[l.end]),n===r&&o===i)?a():n&&o?l&&l.start===l.end?s({type:"single",oid:o}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:o}):s({type:"unfiltered"})},children:[(0,o.jsx)(w.l,{children:n.map(e=>{let n=c.includes(e.oid);return(0,o.jsxs)(w.l.Item,{selected:n,onSelect:()=>((e,n)=>{let i,a=t.indexOf(e);if(l){if(l.start!==l.end||"removed"!==n){let{newStartIndex:e,newEndIndex:t}=nI(a,l.start,l.end,n);i={start:e,end:t}}}else i="added"===n?{start:a,end:a}:void 0;d(i)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,o.jsxs)(w.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,o.jsx)(nC.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,o.jsx)(nS.X.Footer,{})]})});try{nk.displayName||(nk.displayName="CommitsSelector")}catch{}let nL="All commits";function nT({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:nL}function nE({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let i=e.indexOf(n),a=e.indexOf(t);if(i>-1&&a>-1)return`${a-i+1} commits...`}return"Specific commit\u2026"}let nD={default:{variant:"default",leadingVisual:G.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}},nR=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,p,g,y,x,v,_,j=(0,c.c)(56),{onRangeUpdated:N,commits:C,lastReviewOid:S,variant:I}=e,k=void 0===I?"default":I,{endOid:L,startOid:T,baseRefOid:E}=(0,eN.Xv)(),D=(0,eN.ww)();j[0]!==C?(t=C.map(nA),j[0]=C,j[1]=t):t=j[1];let R=t,A=R[R.length-1],O=!!S&&T===S&&L===A,[P,F]=(0,b.useState)(!1),[M,$]=(0,b.useState)(!1);e:{if(!T){n=void 0;break e}if(T===E){n=R[0];break e}let e=R.findIndex(e=>e===T);if(e<0){n=void 0;break e}n=R[e+1]}let B=n;j[2]!==L||j[3]!==B||j[4]!==T?(i=nT({endOid:L,startOid:T,firstCommitInRange:B}),j[2]=L,j[3]=B,j[4]=T,j[5]=i):i=j[5];let V=i;j[6]!==R||j[7]!==L||j[8]!==B?(a=nE({endOid:L,firstCommitInRange:B,commitOids:R}),j[6]=R,j[7]=L,j[8]=B,j[9]=a):a=j[9];let q=a,{sendPullRequestAnalyticsEvent:H}=(0,U.q)();j[10]!==H?(s=()=>{H("commits_menu.select_commit","COMMITS_MENU_ITEM"),F(!1),$(!0)},j[10]=H,j[11]=s):s=j[11];let K=s,W=(f.cg?.innerWidth??1e3)<543;j[12]!==N?(r=()=>{N({type:"unfiltered"})},j[12]=N,j[13]=r):r=j[13];let z=r;j[14]!==N?(l=e=>{$(!1),N(e)},j[14]=N,j[15]=l):l=j[15];let Q=l;j[16]!==H?(d=e=>{F(e),e&&H("commits_menu.open","COMMITS_MENU")},j[16]=H,j[17]=d):d=j[17];let J=d,Y=W?void 0:nD[k].leadingVisual,X=nD[k];j[18]!==V||j[19]!==Y||j[20]!==X.variant?(u=(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(Z.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:Y,size:"small",variant:X.variant,trailingAction:G.TriangleDownIcon,children:V})}),j[18]=V,j[19]=Y,j[20]=X.variant,j[21]=u):u=j[21];let ee=!D;j[22]!==z||j[23]!==ee?(m=(0,o.jsx)(w.l.Item,{selected:ee,onSelect:z,children:nL}),j[22]=z,j[23]=ee,j[24]=m):m=j[24],j[25]!==E||j[26]!==O||j[27]!==Q||j[28]!==A||j[29]!==S?(h=S&&A&&S!==A&&(0,o.jsx)(w.l.Item,{selected:O,onSelect:()=>Q({type:"range",fromPRBase:S===E,baseOid:S,endOid:A}),children:"Changes since your last review"}),j[25]=E,j[26]=O,j[27]=Q,j[28]=A,j[29]=S,j[30]=h):h=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(w.l.Divider,{}),j[31]=p):p=j[31];let et=D&&!O;return j[32]!==q||j[33]!==K||j[34]!==et?(g=(0,o.jsx)(w.l.Item,{selected:et,onSelect:K,children:q}),j[32]=q,j[33]=K,j[34]=et,j[35]=g):g=j[35],j[36]!==m||j[37]!==h||j[38]!==g?(y=(0,o.jsx)(eG.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[m,h,p,g]})}),j[36]=m,j[37]=h,j[38]=g,j[39]=y):y=j[39],j[40]!==J||j[41]!==P||j[42]!==u||j[43]!==y?(x=(0,o.jsxs)(eG.W,{open:P,onOpenChange:J,children:[u,y]}),j[40]=J,j[41]=P,j[42]=u,j[43]=y,j[44]=x):x=j[44],j[45]!==E||j[46]!==R||j[47]!==C||j[48]!==L||j[49]!==Q||j[50]!==M||j[51]!==T?(v=M&&(0,o.jsx)(nk,{baseRefOid:E||"",commitOids:R,commits:C,endOid:L,startOid:T,onClose:()=>$(!1),onRangeUpdated:Q}),j[45]=E,j[46]=R,j[47]=C,j[48]=L,j[49]=Q,j[50]=M,j[51]=T,j[52]=v):v=j[52],j[53]!==x||j[54]!==v?(_=(0,o.jsxs)(o.Fragment,{children:[x,v]}),j[53]=x,j[54]=v,j[55]=_):_=j[55],_}:function({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:i="default"}){let{endOid:a,startOid:s,baseRefOid:r}=(0,eN.Xv)(),l=(0,eN.ww)(),d=(0,b.useMemo)(()=>t.map(e=>e.oid),[t]),c=d[d.length-1],u=!!n&&s===n&&a===c,[m,h]=(0,b.useState)(!1),[p,g]=(0,b.useState)(!1),y=(0,b.useMemo)(()=>{if(!s)return;if(s===r)return d[0];let e=d.findIndex(e=>e===s);if(!(e<0))return d[e+1]},[r,d,s]),x=nT({endOid:a,startOid:s,firstCommitInRange:y}),v=nE({endOid:a,firstCommitInRange:y,commitOids:d}),{sendPullRequestAnalyticsEvent:_}=(0,U.q)(),j=(f.cg?.innerWidth??1e3)<543,N=t=>{g(!1),e(t)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eG.W,{open:m,onOpenChange:e=>{h(e),e&&_("commits_menu.open","COMMITS_MENU")},children:[(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(Z.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:j?void 0:nD[i].leadingVisual,size:"small",variant:nD[i].variant,trailingAction:G.TriangleDownIcon,children:x})}),(0,o.jsx)(eG.W.Overlay,{side:"outside-bottom",width:"small",children:(0,o.jsxs)(w.l,{selectionVariant:"single",children:[(0,o.jsx)(w.l.Item,{selected:!l,onSelect:()=>{e({type:"unfiltered"})},children:nL}),n&&c&&n!==c&&(0,o.jsx)(w.l.Item,{selected:u,onSelect:()=>N({type:"range",fromPRBase:n===r,baseOid:n,endOid:c}),children:"Changes since your last review"}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Item,{selected:l&&!u,onSelect:()=>{_("commits_menu.select_commit","COMMITS_MENU_ITEM"),h(!1),g(!0)},children:v})]})})]}),p&&(0,o.jsx)(nk,{baseRefOid:r||"",commitOids:d,commits:t,endOid:a,startOid:s,onClose:()=>g(!1),onRangeUpdated:N})]})};function nA(e){return e.oid}try{nR.displayName||(nR.displayName="CommitsDropdown")}catch{}let nO=(0,d.Z6)()?function(e){let t,n=(0,c.c)(4);if((0,no.u)("new_pr_files_commit_selector")){let t;return n[0]!==e?(t=(0,o.jsx)(nF,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,o.jsx)(nP,{...e}),n[2]=e,n[3]=t):t=n[3],t}:function(e){return(0,no.u)("new_pr_files_commit_selector")?(0,o.jsx)(nF,{...e}):(0,o.jsx)(nP,{...e})},nP=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(10),{ownerLogin:a,repositoryName:s,pullRequestNumber:r,commits:l,lastReviewOid:d,variant:u}=e,m=(0,no.u)("combined_pr_changes_route");i[0]!==m||i[1]!==a||i[2]!==r||i[3]!==s?(t=e=>{let t;if(m)if("unfiltered"===e.type)t=(0,eO.tvs)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eO.zLJ)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eO.zLJ)({owner:a,repo:s,number:r,head:e.oid});else if("unfiltered"===e.type)t=(0,eO.jrm)({owner:a,repo:s,number:r});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eO.nSV)({owner:a,repo:s,number:r,base:n,head:e.endOid})}else t=(0,eO.yIb)({owner:a,repo:s,number:r,commit:e.oid});window.location.href=t},i[0]=m,i[1]=a,i[2]=r,i[3]=s,i[4]=t):t=i[4];let h=t;return i[5]!==l||i[6]!==d||i[7]!==h||i[8]!==u?(n=(0,o.jsx)(nR,{commits:l,lastReviewOid:d,onRangeUpdated:h,variant:u}),i[5]=l,i[6]=d,i[7]=h,i[8]=u,i[9]=n):n=i[9],n}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let r=(0,no.u)("combined_pr_changes_route");return(0,o.jsx)(nR,{commits:i,lastReviewOid:a,onRangeUpdated:i=>{let a;if(r)if("unfiltered"===i.type)a=(0,eO.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eO.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eO.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eO.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eO.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eO.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},variant:s})},nF=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(69),{ownerLogin:v,repositoryName:_,pullRequestNumber:j,commits:w,lastReviewOid:N,variant:C}=e,{endOid:S,startOid:I,baseRefOid:k}=(0,eN.Xv)(),L=(0,eN.ww)(),T=(0,no.u)("combined_pr_changes_route");x[0]!==w?(t=w.map(nM),x[0]=w,x[1]=t):t=x[1];let E=t;e:{if(!I){n=void 0;break e}if(I===k){n=E[0];break e}let e=E.findIndex(e=>e===I);if(e<0){n=void 0;break e}n=E[e+1]}let D=n;x[2]!==S||x[3]!==D||x[4]!==I?(i=nT({endOid:S,startOid:I,firstCommitInRange:D}),x[2]=S,x[3]=D,x[4]=I,x[5]=i):i=x[5];let R=i;t:{let e,t;if(!I||!S){a=void 0;break t}let n=I?E.indexOf(I)+1:-1;x[6]!==E||x[7]!==S?(e=S?E.indexOf(S):-1,x[6]=E,x[7]=S,x[8]=e):e=x[8];let i=e;if(n<0||i<0){a=void 0;break t}x[9]!==i||x[10]!==n?(t={start:n,end:i},x[9]=i,x[10]=n,x[11]=t):t=x[11],a=t}let A=a;x[12]!==A?(s=()=>A,x[12]=A,x[13]=s):s=x[13];let[O,P]=(0,b.useState)(s);n:{let e;if(!O){let e;x[14]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,x[14]=e):e=x[14],r=e;break n}x[15]!==E||x[16]!==O.end||x[17]!==O.start?(e=new Set(E.slice(O.start,O.end+1)),x[15]=E,x[16]=O.end,x[17]=O.start,x[18]=e):e=x[18],r=e}let F=r;if(x[19]!==E||x[20]!==w||x[21]!==S||x[22]!==L||x[23]!==N||x[24]!==F||x[25]!==I){let e,t,n;l=[];let i=`${w.length} commit${1!==w.length?"s":""}`,a=!L;x[27]!==i||x[28]!==a?(e={id:"all-commits",label:"All commits",description:i,descriptionVariant:"block",selectionVariant:"single",selected:a},x[27]=i,x[28]=a,x[29]=e):e=x[29],l.push(e);let s=w[w.length-1]?.oid,r=!1,o=!1;if(N)if(s)if(N===s)t="No new commits since last review",r=!0;else{let e=E.indexOf(N),n=e>=0?E.length-e-1:w.length;t=`${n} commit${1!==n?"s":""}`,o=I===N&&S===s}else t="No commits available",r=!0;else t="No previous review found",r=!0;for(let[e,i]of(x[30]!==o||x[31]!==t||x[32]!==r?(n={id:"changes-since-review",label:"Changes since your last review",description:t,descriptionVariant:"block",selectionVariant:"single",selected:o,disabled:r},x[30]=o,x[31]=t,x[32]=r,x[33]=n):n=x[33],l.push(n),w.entries()))l.push({id:i.oid,label:i.messageHeadline,description:`${i.actorLogin} committed ${(0,np.V)(new Date(i.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:F.has(i.oid),groupId:1,groupTitle:0===e?"Select specific commits":void 0,trailingVisual:i.shortOid});x[19]=E,x[20]=w,x[21]=S,x[22]=L,x[23]=N,x[24]=F,x[25]=I,x[26]=l}else l=x[26];let M=l;x[34]!==T||x[35]!==v||x[36]!==j||x[37]!==_?(d=e=>{let t;if(T)if("unfiltered"===e.type)t=(0,eO.tvs)({owner:v,repo:_,number:j});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eO.zLJ)({owner:v,repo:_,number:j,base:n,head:e.endOid})}else t=(0,eO.zLJ)({owner:v,repo:_,number:j,head:e.oid});else if("unfiltered"===e.type)t=(0,eO.jrm)({owner:v,repo:_,number:j});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eO.nSV)({owner:v,repo:_,number:j,base:n,head:e.endOid})}else t=(0,eO.nSV)({owner:v,repo:_,number:j,head:e.oid});window.location.href=t},x[34]=T,x[35]=v,x[36]=j,x[37]=_,x[38]=d):d=x[38];let $=d;x[39]!==k||x[40]!==w||x[41]!==N||x[42]!==$?(u=e=>{if("all-commits"===e.id)$({type:"unfiltered"});else if("changes-since-review"===e.id&&N){let e=w[w.length-1]?.oid;e&&$({type:"range",fromPRBase:N===k,baseOid:N,endOid:e})}},x[39]=k,x[40]=w,x[41]=N,x[42]=$,x[43]=u):u=x[43];let B=u;x[44]!==E||x[45]!==F||x[46]!==O?(m=e=>{let t,n=E.indexOf(e.id),i=F.has(e.id)?"removed":"added";if(O){if(O.start!==O.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=function(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}(n,O.start,O.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;P(t)},x[44]=E,x[45]=F,x[46]=O,x[47]=m):m=x[47];let V=m;x[48]!==k||x[49]!==E||x[50]!==A?.end||x[51]!==A?.start||x[52]!==$||x[53]!==O?(h=()=>{let e,t;O&&(O.start!==A?.start||O.end!==A?.end)&&((O.start>0||O.end<E.length-1)&&(e=O.start>0?E[O.start-1]:k,t=E[O.end]),e&&t?O.start===O.end?$({type:"single",oid:t}):$({type:"range",fromPRBase:e===k,baseOid:e,endOid:t}):$({type:"unfiltered"}))},x[48]=k,x[49]=E,x[50]=A?.end,x[51]=A?.start,x[52]=$,x[53]=O,x[54]=h):h=x[54],A?.start,A?.end;let U=h;x[55]!==A?(f=()=>{P(A)},x[55]=A,x[56]=f):f=x[56];let q=f,H="condensed"===C?void 0:G.VersionsIcon,K="condensed"===C?"invisible":"default";return x[57]!==H||x[58]!==K?(p={size:"small",leadingVisual:H,variant:K,trailingAction:G.TriangleDownIcon},x[57]=H,x[58]=K,x[59]=p):p=x[59],x[60]===Symbol.for("react.memo_cache_sentinel")?(g={height:"large"},x[60]=g):g=x[60],x[61]!==R||x[62]!==M||x[63]!==U||x[64]!==q||x[65]!==V||x[66]!==B||x[67]!==p?(y=(0,o.jsx)(ny,{buttonProps:p,anchorLabel:R,dialogProps:g,items:M,onSingleSelect:B,onMultiSelect:V,onApply:U,onCancel:q,variant:"modal",title:"Select commits to view"}),x[61]=R,x[62]=M,x[63]=U,x[64]=q,x[65]=V,x[66]=B,x[67]=p,x[68]=y):y=x[68],y}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){let{endOid:r,startOid:l,baseRefOid:d}=(0,eN.Xv)(),c=(0,eN.ww)(),u=(0,no.u)("combined_pr_changes_route"),m=(0,b.useMemo)(()=>i.map(e=>e.oid),[i]),h=(0,b.useMemo)(()=>{if(!l)return;if(l===d)return m[0];let e=m.findIndex(e=>e===l);if(!(e<0))return m[e+1]},[d,m,l]),f=nT({endOid:r,startOid:l,firstCommitInRange:h}),p=(0,b.useMemo)(()=>{if(!l||!r)return;let e=l?m.indexOf(l)+1:-1,t=r?m.indexOf(r):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},[l,r,m]),[g,y]=(0,b.useState)(()=>p),x=(0,b.useMemo)(()=>g?new Set(m.slice(g.start,g.end+1)):new Set,[g,m]),v=(0,b.useMemo)(()=>{let e,t=[];t.push({id:"all-commits",label:"All commits",description:`${i.length} commit${1!==i.length?"s":""}`,descriptionVariant:"block",selectionVariant:"single",selected:!c});let n=i[i.length-1]?.oid,s=!1,o=!1;if(a)if(n)if(a===n)e="No new commits since last review",s=!0;else{let t=m.indexOf(a),s=t>=0?m.length-t-1:i.length;e=`${s} commit${1!==s?"s":""}`,o=l===a&&r===n}else e="No commits available",s=!0;else e="No previous review found",s=!0;for(let[n,a]of(t.push({id:"changes-since-review",label:"Changes since your last review",description:e,descriptionVariant:"block",selectionVariant:"single",selected:o,disabled:s}),i.entries()))t.push({id:a.oid,label:a.messageHeadline,description:`${a.actorLogin} committed ${(0,np.V)(new Date(a.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:x.has(a.oid),groupId:1,groupTitle:0===n?"Select specific commits":void 0,trailingVisual:a.shortOid});return t},[i,c,a,l,r,x,m]),_=(0,b.useCallback)(i=>{let a;if(u)if("unfiltered"===i.type)a=(0,eO.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eO.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eO.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eO.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eO.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eO.nSV)({owner:e,repo:t,number:n,head:i.oid});window.location.href=a},[e,t,n,u]),j=(0,b.useCallback)((e,t,n,i)=>{let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}},[]),w=(0,b.useCallback)(e=>{let t,n=m.indexOf(e.id),i=x.has(e.id)?"removed":"added";if(g){if(g.start!==g.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=j(n,g.start,g.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;y(t)},[m,x,g,j,y]),N=(0,b.useCallback)(()=>{let e,t;g&&(g.start!==p?.start||g.end!==p?.end)&&((g.start>0||g.end<m.length-1)&&(e=g.start>0?m[g.start-1]:d,t=m[g.end]),e&&t?g.start===g.end?_({type:"single",oid:t}):_({type:"range",fromPRBase:e===d,baseOid:e,endOid:t}):_({type:"unfiltered"}))},[g,p?.start,p?.end,m,d,_]),C=(0,b.useCallback)(()=>{y(p)},[y,p]);return(0,o.jsx)(ny,{buttonProps:{size:"small",leadingVisual:"condensed"===s?void 0:G.VersionsIcon,variant:"condensed"===s?"invisible":"default",trailingAction:G.TriangleDownIcon},anchorLabel:f,dialogProps:{height:"large"},items:v,onSingleSelect:e=>{if("all-commits"===e.id)_({type:"unfiltered"});else if("changes-since-review"===e.id&&a){let e=i[i.length-1]?.oid;e&&_({type:"range",fromPRBase:a===d,baseOid:a,endOid:e})}},onMultiSelect:w,onApply:N,onCancel:C,variant:"modal",title:"Select commits to view"})};function nM(e){return e.oid}try{nO.displayName||(nO.displayName="ChangesSelector")}catch{}try{nP.displayName||(nP.displayName="OldChangesSelector")}catch{}try{nF.displayName||(nF.displayName="NewChangesSelector")}catch{}var n$=n(33644),nB=n(2694),nV=n(81070),nU=n(33195);let nq="PullRequestFilesToolbar-module__is-stuck--pCXhL",nG="PullRequestFilesToolbar-module__show-when-stuck--ONyyF",nH="PullRequestFilesToolbar-module__hide-when-stuck-large--jRjpF",nK="PullRequestFilesToolbar-module__pr-title-details--NZamC",nW="PullRequestFilesToolbar-module__pr-sticky-title--Fu24T",nz="PullRequestFilesToolbar-module__file-controls--XN2fA",nQ="PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo",nZ="PullRequestFilesToolbar-module__file-controls-divider--oWuSw",nJ="PullRequestFilesToolbar-module__toolbar--bXrnB",nY="PullRequestFilesToolbar-module__simple-toolbar--q_1hU";var nX=n(21968),n0=n(34261),n1=n(89155);let n2=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,k.Kp)(),{updateWhitespace:s}=(0,k.yo)();return i[0]!==a?(e=async e=>{let{hideWhitespace:t}=e,n=`${a}/page_data/${ee.uT.updateWhitespacePreference}`,i=await (0,ei.q$)(n,{method:"POST",body:{w:+!!t}}),s=await (0,ei.hp)(i);return(0,ei.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e.ignoreWhitespace)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,en.n)(n)}:function(){let e=(0,k.Kp)(),{updateWhitespace:t}=(0,k.yo)();return(0,en.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${ee.uT.updateWhitespacePreference}`,i=await (0,ei.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,ei.hp)(i);return(0,ei.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})};var n3=n(73783),n4=n(81355),n5=n(61583);let n6=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(14),s=(0,k.mU)(),r=(0,k.$W)(s),{selectedPathDigest:l}=(0,n4.U)();a[0]!==r||a[1]!==l?(e=l?r.findIndex(e=>e.pathDigest===l):0,a[0]=r,a[1]=l,a[2]=e):e=a[2];let o=e,d=n7;a[3]!==o||a[4]!==r?(t=()=>{if(r.length>0){let e;e=o<=0?r.length-1:o-1;let t=r[e];t&&d(t.pathDigest)}},a[3]=o,a[4]=r,a[5]=t):t=a[5];let u=t;a[6]!==o||a[7]!==r?(n=()=>{if(r.length>0){let e;e=o>=r.length-1||o<0?0:o+1;let t=r[e];t&&d(t.pathDigest)}},a[6]=o,a[7]=r,a[8]=n):n=a[8];let m=n,h=o>=0?o:void 0;return a[9]!==m||a[10]!==u||a[11]!==l||a[12]!==h?(i={navigateToPrevious:u,navigateToNext:m,currentPathDigest:l,currentIndex:h},a[9]=m,a[10]=u,a[11]=l,a[12]=h,a[13]=i):i=a[13],i}:function(){let e=(0,k.mU)(),t=(0,k.$W)(e),{selectedPathDigest:n}=(0,n4.U)(),i=(0,b.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),a=(0,b.useCallback)(e=>{(0,n5.pk)(`diff-${e}`),(0,S.kd)(window.location.href)},[]);return{navigateToPrevious:(0,b.useCallback)(()=>{if(t.length>0){let e;e=i<=0?t.length-1:i-1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),navigateToNext:(0,b.useCallback)(()=>{if(t.length>0){let e;e=i>=t.length-1||i<0?0:i+1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),currentPathDigest:n,currentIndex:i>=0?i:void 0}};function n7(e){(0,n5.pk)(`diff-${e}`),(0,S.kd)(window.location.href)}var n8=n(19415);let n9="SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",ie="SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",it="SingleFileModeOnboardingPopover-module__Heading--BRcrc";function ii(e){return(e??[]).filter(e=>!e.dismissed)}let ia=(0,d.Z6)()?function(e,t){let n,i=(0,c.c)(5),a=ii(t);if(i[0]!==a||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=a.filter(t),i[0]=a,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}:function(e,t){return 0===ii(t).filter(t=>t.name===e).length},is=(0,d.Z6)()?function(e,t){let n,i,a=(0,c.c)(5),s=ia(e,t);a[0]!==s||a[1]!==e?(n=()=>{(0,e7.M3)()&&!s&&(0,ec.DI)((0,eO.VB1)({noticeName:e}),{method:"POST"})},a[0]=s,a[1]=e,a[2]=n):n=a[2];let r=n;return a[3]!==r?(i={dismissNotice:r},a[3]=r,a[4]=i):i=a[4],i}:function(e,t){let n=ia(e,t);return{dismissNotice:(0,b.useCallback)(()=>{(0,e7.M3)()&&!n&&(0,ec.DI)((0,eO.VB1)({noticeName:e}),{method:"POST"})},[n,e])}},ir="single_file_mode",il=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(12),{userNotices:m}=e,h=ia(ir,m),f=(0,k.j5)(),[p,g]=(0,b.useState)(!0),{dismissNotice:y}=is(ir,m);u[0]!==y?(t=()=>{y(),g(!1)},u[0]=y,u[1]=t):t=u[1];let x=t;return!f||h?null:(u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("d-flex flex-column gap-2",ie),i=(0,o.jsx)(R.A,{as:"h3",variant:"small",className:it,children:"You're in single-file mode"}),a=(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),u[2]=n,u[3]=i,u[4]=a):(n=u[2],i=u[3],a=u[4]),u[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("strong",{children:"Previous"}),u[5]=s):s=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsxs)("p",{children:["Use the ",s," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),u[6]=r):r=u[6],u[7]!==x?(l=(0,o.jsxs)(n8.A.Content,{className:n,children:[i,a,r,(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Z.Q,{onClick:x,children:"OK, got it"})})]}),u[7]=x,u[8]=l):l=u[8],u[9]!==p||u[10]!==l?(d=(0,o.jsx)(n8.A,{className:n9,open:p,children:l}),u[9]=p,u[10]=l,u[11]=d):d=u[11],d)}:function({userNotices:e}){let t=ia(ir,e),n=(0,k.j5)(),[i,a]=(0,b.useState)(!0),{dismissNotice:s}=is(ir,e);return!n||t?null:(0,o.jsx)(n8.A,{className:n9,open:i,children:(0,o.jsxs)(n8.A.Content,{className:(0,v.$)("d-flex flex-column gap-2",ie),children:[(0,o.jsx)(R.A,{as:"h3",variant:"small",className:it,children:"You're in single-file mode"}),(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,o.jsxs)("p",{children:["Use the ",(0,o.jsx)("strong",{children:"Previous"})," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(Z.Q,{onClick:()=>{s(),a(!1)},children:"OK, got it"})})]})})};try{il.displayName||(il.displayName="SingleFileModeOnboardingPopover")}catch{}var io=n(44569);let id=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{userNotices:l}=e,d=(0,io.zw)(),{navigateToPrevious:u,navigateToNext:m}=n6();return r[0]!==u?(t=(0,o.jsx)(H.K,{icon:G.ChevronUpIcon,"aria-label":d?"Previous file (K)":"Previous file",size:"small",onClick:u,"data-hotkey":"k"}),r[0]=u,r[1]=t):t=r[1],r[2]!==m?(n=(0,o.jsx)(H.K,{icon:G.ChevronDownIcon,"aria-label":d?"Next file (J)":"Next file",size:"small",onClick:m,"data-hotkey":"j"}),r[2]=m,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(i=(0,o.jsxs)(n3.A,{children:[t,n]}),r[4]=t,r[5]=n,r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(il,{userNotices:l}),r[7]=l,r[8]=a):a=r[8],r[9]!==i||r[10]!==a?(s=(0,o.jsxs)("div",{className:"position-relative",children:[i,a]}),r[9]=i,r[10]=a,r[11]=s):s=r[11],s}:function({userNotices:e}){let t=(0,io.zw)(),{navigateToPrevious:n,navigateToNext:i}=n6();return(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsxs)(n3.A,{children:[(0,o.jsx)(H.K,{icon:G.ChevronUpIcon,"aria-label":t?"Previous file (K)":"Previous file",size:"small",onClick:n,"data-hotkey":"k"}),(0,o.jsx)(H.K,{icon:G.ChevronDownIcon,"aria-label":t?"Next file (J)":"Next file",size:"small",onClick:i,"data-hotkey":"j"})]}),(0,o.jsx)(il,{userNotices:e})]})};try{id.displayName||(id.displayName="ReviewNavigationButtonGroup")}catch{}let ic=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,_,j,N,C=(0,c.c)(50),{pageLimits:S,pullRequest:I,hideWhitespace:L,onUpdateWhitespace:T,additionalPreferences:E}=e,[D,R]=(0,b.useState)(!1),[A,O]=(0,b.useState)(!1),[P,F]=(0,b.useState)(!1),[M,$]=(0,b.useState)(!1),B=(0,b.useRef)(null),V=(0,k.wI)(),q=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:K}=(0,U.q)();C[0]!==V?(t=V?Object.values(V):[],C[0]=V,C[1]=t):t=C[1];let W=t,z=W.length;C[2]!==K?(n=()=>{K("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eU(),R(!0),F(!1)},C[2]=K,C[3]=n):n=C[3];let Q=n;C[4]!==K?(i=()=>{K("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eU(),O(!0),F(!1)},C[4]=K,C[5]=i):i=C[5];let Z=i;return C[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(H.K,{ref:B,icon:G.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),C[6]=a):a=C[6],C[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CommentDiscussionIcon,{})}),C[7]=s):s=C[7],C[8]!==q?(r=q>0&&(0,o.jsx)(w.l.TrailingVisual,{children:q}),C[8]=q,C[9]=r):r=C[9],C[10]!==Q||C[11]!==r?(l=(0,o.jsxs)(w.l.Item,{onSelect:Q,children:[s,"Comments",r]}),C[10]=Q,C[11]=r,C[12]=l):l=C[12],C[13]!==Z||C[14]!==z?(d=z>0&&(0,o.jsxs)(w.l.Item,{onSelect:Z,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.AlertIcon,{})}),"Alerts",(0,o.jsx)(w.l.TrailingVisual,{children:z})]}),C[13]=Z,C[14]=z,C[15]=d):d=C[15],C[16]!==l||C[17]!==d?(u=(0,o.jsxs)(w.l.Group,{children:[l,d]}),C[16]=l,C[17]=d,C[18]=u):u=C[18],C[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(w.l.Divider,{}),C[19]=m):m=C[19],C[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.GearIcon,{})}),C[20]=h):h=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsxs)(w.l.Item,{children:[h,"Settings",(0,o.jsx)(w.l.TrailingVisual,{children:(0,o.jsx)(G.ChevronRightIcon,{})})]})}),C[21]=f):f=C[21],C[22]!==E||C[23]!==L||C[24]!==T?(p=(0,o.jsx)(eG.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(w.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:T,defaultHideWhitespace:L,additionalPreferences:E})})}),C[22]=E,C[23]=L,C[24]=T,C[25]=p):p=C[25],C[26]!==M||C[27]!==p?(g=(0,o.jsx)(w.l.Group,{children:(0,o.jsxs)(eG.W,{open:M,onOpenChange:$,children:[f,p]})}),C[26]=M,C[27]=p,C[28]=g):g=C[28],C[29]!==g||C[30]!==u?(y=(0,o.jsx)(eG.W.Overlay,{align:"end",children:(0,o.jsxs)(w.l,{children:[u,m,g]})}),C[29]=g,C[30]=u,C[31]=y):y=C[31],C[32]!==P||C[33]!==y?(x=(0,o.jsxs)(eG.W,{open:P,onOpenChange:F,children:[a,y]}),C[32]=P,C[33]=y,C[34]=x):x=C[34],C[35]===Symbol.for("react.memo_cache_sentinel")?(v=()=>R(!1),C[35]=v):v=C[35],C[36]!==D||C[37]!==S||C[38]!==I.id||C[39]!==I.pathName?(_=(0,o.jsx)(tf,{isOpen:D,pageLimits:S,pathName:I.pathName,pullRequestId:I.id,toggleSidesheetRef:B,onClose:v}),C[36]=D,C[37]=S,C[38]=I.id,C[39]=I.pathName,C[40]=_):_=C[40],C[41]!==A||C[42]!==W||C[43]!==S||C[44]!==z?(j=z>0&&(0,o.jsx)(tj,{annotations:W,isOpen:A,pageLimits:S,returnFocusRef:B,onClose:()=>O(!1)}),C[41]=A,C[42]=W,C[43]=S,C[44]=z,C[45]=j):j=C[45],C[46]!==x||C[47]!==_||C[48]!==j?(N=(0,o.jsxs)(o.Fragment,{children:[x,_,j]}),C[46]=x,C[47]=_,C[48]=j,C[49]=N):N=C[49],N}:function({pageLimits:e,pullRequest:t,hideWhitespace:n,onUpdateWhitespace:i,additionalPreferences:a}){let[s,r]=(0,b.useState)(!1),[l,d]=(0,b.useState)(!1),[c,u]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),f=(0,b.useRef)(null),p=(0,k.wI)(),g=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:y}=(0,U.q)(),x=p?Object.values(p):[],v=x.length,_=(0,b.useCallback)(()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),eU(),r(!0),u(!1)},[y]),j=(0,b.useCallback)(()=>{y("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),eU(),d(!0),u(!1)},[y]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eG.W,{open:c,onOpenChange:u,children:[(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(H.K,{ref:f,icon:G.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),(0,o.jsx)(eG.W.Overlay,{align:"end",children:(0,o.jsxs)(w.l,{children:[(0,o.jsxs)(w.l.Group,{children:[(0,o.jsxs)(w.l.Item,{onSelect:_,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CommentDiscussionIcon,{})}),"Comments",g>0&&(0,o.jsx)(w.l.TrailingVisual,{children:g})]}),v>0&&(0,o.jsxs)(w.l.Item,{onSelect:j,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.AlertIcon,{})}),"Alerts",(0,o.jsx)(w.l.TrailingVisual,{children:v})]})]}),(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{children:(0,o.jsxs)(eG.W,{open:m,onOpenChange:h,children:[(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsxs)(w.l.Item,{children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.GearIcon,{})}),"Settings",(0,o.jsx)(w.l.TrailingVisual,{children:(0,o.jsx)(G.ChevronRightIcon,{})})]})}),(0,o.jsx)(eG.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(w.l,{children:(0,o.jsx)(ns.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:i,defaultHideWhitespace:n,additionalPreferences:a})})})]})})]})})]}),(0,o.jsx)(tf,{isOpen:s,pageLimits:e,pathName:t.pathName,pullRequestId:t.id,toggleSidesheetRef:f,onClose:()=>r(!1)}),v>0&&(0,o.jsx)(tj,{annotations:x,isOpen:l,pageLimits:e,returnFocusRef:f,onClose:()=>d(!1)})]})};try{ic.displayName||(ic.displayName="ToolbarMoreMenu")}catch{}let iu=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(9),{changeGroupsPreferenceAvailable:r,showChangeGroups:l,onShowChangeGroupsChange:d}=e,{sendPullRequestAnalyticsEvent:u}=(0,U.q)();if(!r)return;s[0]!==d||s[1]!==u||s[2]!==l?(t=()=>{let e=!l;u(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),d(e)},s[0]=d,s[1]=u,s[2]=l,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(w.l.Divider,{}),s[4]=n):n=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(w.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"}),s[5]=i):i=s[5],s[6]!==m||s[7]!==l?(a=(0,o.jsxs)(o.Fragment,{children:[n,(0,o.jsx)(w.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(w.l.Item,{selected:l,onSelect:m,children:["Show changes by group",i]})})]}),s[6]=m,s[7]=l,s[8]=a):a=s[8],a}:function({changeGroupsPreferenceAvailable:e,showChangeGroups:t,onShowChangeGroupsChange:n}){let{sendPullRequestAnalyticsEvent:i}=(0,U.q)();if(e)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{}),(0,o.jsx)(w.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(w.l.Item,{selected:t,onSelect:()=>{let e=!t;i(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),n(e)},children:["Show changes by group",(0,o.jsx)(w.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]})};try{iu.displayName||(iu.displayName="ChangeGroupsPreferences")}catch{}var im=n(3585);function ih(e){let t=new Map;if(!e)return t;for(let[n,i]of Object.entries(e))for(let e of Object.values(i))for(let i of e?.threads??[])for(let e of i.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}function ip(e,t){if(!e||0===t.length)return[];let n=ih(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);t&&i.push({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:t.path,bodyHTML:t.comment.bodyHTML})}return i}var ig=n(3252);function iy(e,t){if(!e||0===t.length)return[];let n=ih(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);if(!t)continue;let{comment:a,path:s}=t,r=(0,ig.T)(a.body);r&&!(e.suggestionIndex>=r.length)&&i.push({threadId:String(e.commentDatabaseId),path:s,suggestion:r})}return i}var ix=n(88008);let iv=(0,d.Z6)()?function(e,t){let n,i,a,s=(0,c.c)(11),r=(0,et.e)(ee.uT.submitSuggestedChanges),l=(0,k.WK)(),o=(0,k.qL)(),{clearSuggestionBatch:d}=(0,k.xJ)();return s[0]!==r||s[1]!==o||s[2]!==l?(n=async e=>{let{currentOid:t,message:n}=e,i=iy(o,l.activeBatch);if(0===i.length)throw Error("No valid suggestions found in batch");let a=await (0,ec.Sr)(r,{method:"POST",headers:{Accept:"application/json"},body:{changes:i,currentOid:t,message:n}}),s=await (0,ei.hp)(a);return(0,ei.R)(a,s),s},s[0]=r,s[1]=o,s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==t||s[6]!==e?(i=()=>{d(),(0,ix.hW)(e,t),f.cg?.location.reload()},s[4]=d,s[5]=t,s[6]=e,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(a={mutationFn:n,onSuccess:i},s[8]=n,s[9]=i,s[10]=a):a=s[10],(0,en.n)(a)}:function(e,t){let n=(0,et.e)(ee.uT.submitSuggestedChanges),i=(0,k.WK)(),a=(0,k.qL)(),{clearSuggestionBatch:s}=(0,k.xJ)();return(0,en.n)({mutationFn:async({currentOid:e,message:t})=>{let s=iy(a,i.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,ec.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),l=await (0,ei.hp)(r);return(0,ei.R)(r,l),l},onSuccess:()=>{s(),(0,ix.hW)(e,t),f.cg?.location.reload()}})},ib=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(8),a=(0,k.Kp)(),{updateChangeGroupPreference:s}=(0,k.wL)(),{updateDiffFilter:r}=(0,k.or)();return i[0]!==a?(e=async e=>{let{showChangeGroups:t}=e,n=`${a}/page_data/${ee.uT.updateShowChangeGroupsPreference}`,i=await (0,ei.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),s=await (0,ei.hp)(i);return(0,ei.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s||i[3]!==r?(t=e=>{let{showChangeGroups:t}=e;s(t),t||r({activeChangeGroupId:void 0})},i[2]=s,i[3]=r,i[4]=t):t=i[4],i[5]!==e||i[6]!==t?(n={mutationFn:e,onMutate:t},i[5]=e,i[6]=t,i[7]=n):n=i[7],(0,en.n)(n)}:function(){let e=(0,k.Kp)(),{updateChangeGroupPreference:t}=(0,k.wL)(),{updateDiffFilter:n}=(0,k.or)();return(0,en.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${ee.uT.updateShowChangeGroupsPreference}`,i=await (0,ei.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),a=await (0,ei.hp)(i);return(0,ei.R)(i,a),a},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})};var i_=n(39837);let ij=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(13),{bodyHtml:l,isLoading:d,onClose:u}=e,m=(0,b.useRef)(null),h=(0,b.useRef)(null);r[0]!==l?(t=l.includes("No description provided"),r[0]=l,r[1]=t):t=r[1];let f=t;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen",regular:"right",wide:"right"},r[2]=n):n=r[2],r[3]!==u?(i=e=>{let{dialogLabelId:t}=e;return(0,o.jsx)(y.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(y.l.Title,{id:t,children:"Overview"}),(0,o.jsx)(H.K,{ref:m,"aria-label":"Close overview panel",icon:G.XIcon,variant:"invisible",onClick:u})]})})},r[3]=u,r[4]=i):i=r[4],r[5]!==l||r[6]!==f||r[7]!==d?(a=(0,o.jsx)("div",{className:"p-4",children:d?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}):(0,o.jsx)("div",{className:f?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(i_.A,{verifiedHTML:l})})}),r[5]=l,r[6]=f,r[7]=d,r[8]=a):a=r[8],r[9]!==u||r[10]!==i||r[11]!==a?(s=(0,o.jsx)(y.l,{initialFocusRef:m,position:n,returnFocusRef:h,onClose:u,renderHeader:i,children:a}),r[9]=u,r[10]=i,r[11]=a,r[12]=s):s=r[12],s}:function({bodyHtml:e,isLoading:t,onClose:n}){let i=(0,b.useRef)(null),a=(0,b.useRef)(null),s=e.includes("No description provided");return(0,o.jsx)(y.l,{initialFocusRef:i,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,onClose:n,renderHeader:({dialogLabelId:e})=>(0,o.jsx)(y.l.Header,{className:"p-3",children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,o.jsx)(y.l.Title,{id:e,children:"Overview"}),(0,o.jsx)(H.K,{ref:i,"aria-label":"Close overview panel",icon:G.XIcon,variant:"invisible",onClick:n})]})}),children:(0,o.jsx)("div",{className:"p-4",children:t?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(A.A,{})}):(0,o.jsx)("div",{className:s?"d-flex flex-justify-start":"d-flex flex-justify-center",children:(0,o.jsx)(i_.A,{verifiedHTML:e})})})})};try{ij.displayName||(ij.displayName="OverviewSidePanel")}catch{}let iw=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,et.e)(ee.uT.description);return t[0]!==n?(e={queryKey:[ee.uT.description,n],queryFn:async()=>{let e=await (0,ec.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},staleTime:1/0},t[0]=n,t[1]=e):e=t[1],(0,ed.I)(e)}:function(){let e=(0,et.e)(ee.uT.description);return(0,ed.I)({queryKey:[ee.uT.description,e],queryFn:async()=>{let t=await (0,ec.QJ)(e);if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.json()},staleTime:1/0})},iN=(0,d.Z6)()?function(e){let t,n=(0,c.c)(1),{refetch:i}=iw();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={body_updated:!0},n[0]=t):t=n[0],(0,nr.og)(e,i,t)}:function(e){let{refetch:t}=iw();(0,nr.og)(e,t,{body_updated:!0})},iC=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{aliveChannel:r}=e,[l,d]=(0,b.useState)(!1),u=(0,b.useRef)(null),{sendPullRequestAnalyticsEvent:m}=(0,U.q)(),{data:h,isLoading:f}=iw();iN(r);let p=h?.bodyHtml||'<p class="text-italic">No description provided.</p>';return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(H.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:G.InfoIcon,size:"small",variant:"invisible"}),s[0]=t):t=s[0],s[1]!==m?(n=(0,o.jsx)(H.K,{ref:u,"aria-label":"Open overview side panel",icon:G.InfoIcon,size:"small",onClick:()=>{m("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),eU(),d(!0)}}),s[1]=m,s[2]=n):n=s[2],s[3]!==p||s[4]!==f||s[5]!==l?(i=l&&(0,o.jsx)(ij,{bodyHtml:p,isLoading:f,onClose:()=>d(!1)}),s[3]=p,s[4]=f,s[5]=l,s[6]=i):i=s[6],s[7]!==n||s[8]!==i?(a=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:t,children:[n,i]})}),s[7]=n,s[8]=i,s[9]=a):a=s[9],a}:function({aliveChannel:e}){let[t,n]=(0,b.useState)(!1),i=(0,b.useRef)(null),{sendPullRequestAnalyticsEvent:a}=(0,U.q)(),{data:s,isLoading:r}=iw();iN(e);let l=s?.bodyHtml||'<p class="text-italic">No description provided.</p>';return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(H.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:G.InfoIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(H.K,{ref:i,"aria-label":"Open overview side panel",icon:G.InfoIcon,size:"small",onClick:()=>{a("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),eU(),n(!0)}}),t&&(0,o.jsx)(ij,{bodyHtml:l,isLoading:r,onClose:()=>n(!1)})]})})};try{iC.displayName||(iC.displayName="OpenOverviewSidePanelButton")}catch{}let iS=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(24);f[0]!==e?({aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l,userNotices:d,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=a,f[5]=s,f[6]=r,f[7]=l,f[8]=d):(t=f[1],n=f[2],i=f[3],a=f[4],s=f[5],r=f[6],l=f[7],d=f[8]);let{data:p}=(0,n0.W)(),{pullRequest:g}=p;f[9]!==t||f[10]!==n||f[11]!==i||f[12]!==s||f[13]!==r||f[14]!==l?(u={aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l},f[9]=t,f[10]=n,f[11]=i,f[12]=s,f[13]=r,f[14]=l,f[15]=u):u=f[15],(0,n0.W)(u),(0,n1.F)(t),f[16]!==i||f[17]!==g?(m={...i,...g},f[16]=i,f[17]=g,f[18]=m):m=f[18];let y=m;return f[19]!==a||f[20]!==s||f[21]!==y||f[22]!==d?(h=(0,o.jsx)(iI,{repository:s,pullRequest:y,userNotices:d,...a}),f[19]=a,f[20]=s,f[21]=y,f[22]=d,f[23]=h):h=f[23],h}:function({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,userNotices:r,...l}){let{data:{pullRequest:d}}=(0,n0.W)();(0,n0.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,n1.F)(e);let c={...n,...d};return(0,o.jsx)(iI,{repository:t,pullRequest:c,userNotices:r,...l})},iI=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,_,j,w,C,S,I,L,T,E,D,R,A,O,F,M,$,B,V,U,q,G,H,K,W,z,Q,J=(0,c.c)(149),{changeGroupsPreferenceAvailable:Y,commits:X,currentUserLogin:ee,fileFilter:et,isFileTreeExpanded:en,lastReviewOid:ei,pageLimits:ea,pullRequest:es,repository:er,shouldShowViewedFilesCount:el,totalFilesCount:eo,treeToggleElement:ed,userNotices:ec}=e,eu=(0,no.u)("batch_suggested_changes"),em=(0,no.u)("pull_request_overview_panel"),{mutate:eh}=n2(),{clearSuggestionBatch:ef,removeSuggestionFromBatch:ep}=(0,k.xJ)(),{mutate:eg}=iv(es.pathName,es.comparison.headOid),{mutate:ey}=ib(),ex=(0,k.WA)(),ev=es.pathName,{hideWhitespace:eb,fullDiff:e_}=(0,k.L3)(),[ej,ew]=(0,b.useState)(!1),eN=el||!en,[eC,eS]=(0,b.useState)(!1),eI=(0,k.j5)(),ek=(0,k.RH)(),eL=(0,k.WK)(),eT=(0,k.qL)(),[eE,eD]=(0,b.useState)(!1),eR=(0,k.Kp)(),eA=(0,k.L3)(),eO=ip(eT,eL.activeBatch),eP=eO.length;J[0]!==eh?(t=e=>{eh({hideWhitespace:e})},J[0]=eh,J[1]=t):t=J[1];let eF=t;J[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&ew(!e[0].isIntersecting)},J[2]=n):n=J[2];let[eM,e$]=(0,nB.B)(n);J[3]!==eA.fullDiff.headOid||J[4]!==eR||J[5]!==ep||J[6]!==eL.activeBatch?(i=e=>{ep(e),(0,ix.CE)(eR,eA.fullDiff.headOid,eL.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},J[3]=eA.fullDiff.headOid,J[4]=eR,J[5]=ep,J[6]=eL.activeBatch,J[7]=i):i=J[7];let eB=i;J[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eD(!0)},J[8]=a):a=J[8];let eU=a;J[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{eD(!1)},J[9]=s):s=J[9];let eq=s;J[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{eS(!0)},J[10]=r):r=J[10];let eG=r;J[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{eS(!1)},J[11]=l):l=J[11];let eH=l;J[12]!==ef||J[13]!==eA.fullDiff.headOid||J[14]!==eq||J[15]!==eR?(d=()=>{ef(),(0,ix.hW)(eR,eA.fullDiff.headOid),eq(),eS(!1)},J[12]=ef,J[13]=eA.fullDiff.headOid,J[14]=eq,J[15]=eR,J[16]=d):d=J[16];let eK=d;J[17]!==eg||J[18]!==e_.headOid||J[19]!==eq?(u=(e,t,n)=>{eg({message:e,currentOid:e_.headOid},{onSuccess:()=>{eq(),n()},onError:e=>{t(e)}})},J[17]=eg,J[18]=e_.headOid,J[19]=eq,J[20]=u):u=J[20];let eW=u;J[21]!==ey?(m=e=>{ey({showChangeGroups:e})},J[21]=ey,J[22]=m):m=J[22];let ez=m,eQ=eO.map(ik);J[23]===Symbol.for("react.memo_cache_sentinel")?(h={visibility:"hidden",height:"1px"},J[23]=h):h=J[23],J[24]!==eM||J[25]!==e$?(f=(0,o.jsx)(nV.X,{sx:h,onObserve:eM,onUnobserve:e$}),J[24]=eM,J[25]=e$,J[26]=f):f=J[26];let eZ=ej&&nq;J[27]!==eZ?(p=(0,v.$)(n$.A.stickyHeader,nJ,eZ),J[27]=eZ,J[28]=p):p=J[28],J[29]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),J[29]=g):g=J[29],J[30]!==ed?(y=(0,o.jsx)("div",{children:ed}),J[30]=ed,J[31]=y):y=J[31],J[32]!==es.state?(x=(0,o.jsx)("div",{className:nG,children:(0,o.jsx)(nU.u,{state:es.state})}),J[32]=es.state,J[33]=x):x=J[33],J[34]!==X||J[35]!==ei||J[36]!==es.number||J[37]!==er.name||J[38]!==er.ownerLogin?(_=(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nO,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name})}),J[34]=X,J[35]=ei,J[36]=es.number,J[37]=er.name,J[38]=er.ownerLogin,J[39]=_):_=J[39],J[40]===Symbol.for("react.memo_cache_sentinel")?(j=(0,v.$)(nG,"min-width-0"),w=(0,v.$)("d-flex mb-n1",nK),J[40]=j,J[41]=w):(j=J[40],w=J[41]);let eJ=es.title;J[42]===Symbol.for("react.memo_cache_sentinel")?(C=(0,v.$)("f5 text-bold overflow-hidden no-wrap",nW),J[42]=C):C=J[42],J[43]!==es.title?(S=(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:C,children:es.title})}),J[43]=es.title,J[44]=S):S=J[44],J[45]!==es.title||J[46]!==S?(I=(0,o.jsx)(P.m,{type:"label",direction:"s",text:eJ,children:S}),J[45]=es.title,J[46]=S,J[47]=I):I=J[47],J[48]!==es.number?(L=(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",es.number]}),J[48]=es.number,J[49]=L):L=J[49],J[50]!==I||J[51]!==L?(T=(0,o.jsxs)("div",{className:w,children:[I,L]}),J[50]=I,J[51]=L,J[52]=T):T=J[52],J[53]!==X||J[54]!==ei||J[55]!==es.number||J[56]!==er.name||J[57]!==er.ownerLogin?(E=(0,o.jsx)(nO,{commits:X,lastReviewOid:ei,ownerLogin:er.ownerLogin,pullRequestNumber:es.number,repositoryName:er.name,variant:"condensed"}),J[53]=X,J[54]=ei,J[55]=es.number,J[56]=er.name,J[57]=er.ownerLogin,J[58]=E):E=J[58],J[59]===Symbol.for("react.memo_cache_sentinel")?(D=(0,v.$)("d-none d-lg-flex flex-items-center min-width-0",nK),J[59]=D):D=J[59],J[60]===Symbol.for("react.memo_cache_sentinel")?(R=(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),J[60]=R):R=J[60],J[61]!==es.author||J[62]!==es.baseBranch||J[63]!==es.commitsCount||J[64]!==es.headBranch||J[65]!==es.headRepositoryName||J[66]!==es.headRepositoryOwnerLogin||J[67]!==es.id||J[68]!==es.isInAdvisoryRepo||J[69]!==es.mergedBy||J[70]!==es.mergedByName||J[71]!==es.number||J[72]!==es.state||J[73]!==er.id||J[74]!==er.name||J[75]!==er.ownerLogin?(A=(0,o.jsxs)("div",{className:D,children:[R,(0,o.jsx)(nX.O,{author:es.author,baseBranch:es.baseBranch,baseRepositoryOwnerLogin:er.ownerLogin,baseRepositoryName:er.name,commitsCount:es.commitsCount,headBranch:es.headBranch,headRepositoryOwnerLogin:es.headRepositoryOwnerLogin,headRepositoryName:es.headRepositoryName,isInAdvisoryRepo:es.isInAdvisoryRepo,mergedBy:es.mergedBy,mergedByName:es.mergedByName,state:es.state,pullRequestId:es.id,pullRequestNumber:es.number,repositoryId:er.id})]}),J[61]=es.author,J[62]=es.baseBranch,J[63]=es.commitsCount,J[64]=es.headBranch,J[65]=es.headRepositoryName,J[66]=es.headRepositoryOwnerLogin,J[67]=es.id,J[68]=es.isInAdvisoryRepo,J[69]=es.mergedBy,J[70]=es.mergedByName,J[71]=es.number,J[72]=es.state,J[73]=er.id,J[74]=er.name,J[75]=er.ownerLogin,J[76]=A):A=J[76],J[77]!==E||J[78]!==A?(O=(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[E,A]}),J[77]=E,J[78]=A,J[79]=O):O=J[79],J[80]!==T||J[81]!==O?(F=(0,o.jsxs)(tI.B,{direction:"vertical",gap:"none",className:j,children:[T,O]}),J[80]=T,J[81]=O,J[82]=F):F=J[82],J[83]!==y||J[84]!==x||J[85]!==_||J[86]!==F?(M=(0,o.jsxs)(tI.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[y,x,_,F]}),J[83]=y,J[84]=x,J[85]=_,J[86]=F,J[87]=M):M=J[87],J[88]!==ev||J[89]!==es.aliveChannel?($=(0,o.jsx)(nu,{aliveChannel:es.aliveChannel,pathName:ev}),J[88]=ev,J[89]=es.aliveChannel,J[90]=$):$=J[90],J[91]!==el||J[92]!==eo?(B=el&&(0,o.jsx)(eV,{totalFilesCount:eo}),J[91]=el,J[92]=eo,J[93]=B):B=J[93];let eY=!en&&et;return J[94]!==eI||J[95]!==eo||J[96]!==ec?(V=eI&&eo>1&&(0,o.jsx)("div",{className:nQ,children:(0,o.jsx)(id,{userNotices:ec})}),J[94]=eI,J[95]=eo,J[96]=ec,J[97]=V):V=J[97],J[98]!==B||J[99]!==eY||J[100]!==V?(U=(0,o.jsxs)("div",{className:nz,children:[B,eY,V]}),J[98]=B,J[99]=eY,J[100]=V,J[101]=U):U=J[101],J[102]!==eN?(q=eN&&(0,o.jsx)("div",{className:nZ,"data-testid":"file-controls-divider"}),J[102]=eN,J[103]=q):q=J[103],J[104]!==eu||J[105]!==Y||J[106]!==ee||J[107]!==eU||J[108]!==eG||J[109]!==eb||J[110]!==en||J[111]!==ek||J[112]!==ez||J[113]!==eF||J[114]!==em||J[115]!==ea||J[116]!==es||J[117]!==er||J[118]!==ex||J[119]!==eP||J[120]!==ec?(G=ek&&eu?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z.Q,{variant:"danger",size:"small",onClick:eG,children:"Discard batch"}),(0,o.jsxs)(Z.Q,{variant:"primary",size:"small",onClick:eU,children:["Commit suggestions ",(0,o.jsx)(N.A,{className:"ml-1 color-fg-inherit",children:eP})]})]}):(0,o.jsxs)(o.Fragment,{children:[em&&(0,o.jsx)(iC,{aliveChannel:es.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tg,{pageLimits:ea,pullRequest:es,isFileTreeExpanded:en})}),(0,o.jsx)(tN,{className:"d-none d-sm-flex",pageLimits:ea,isFileTreeExpanded:en}),ee&&(0,o.jsx)(nt,{currentUserLogin:ee,pullRequest:es,repository:er}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:eF,defaultHideWhitespace:eb,small:!0,userNotices:ec,additionalPreferences:(0,o.jsx)(iu,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:ez})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(ic,{pageLimits:ea,pullRequest:es,hideWhitespace:eb,onUpdateWhitespace:eF,additionalPreferences:(0,o.jsx)(iu,{changeGroupsPreferenceAvailable:Y,showChangeGroups:ex,onShowChangeGroupsChange:ez})})})]}),J[104]=eu,J[105]=Y,J[106]=ee,J[107]=eU,J[108]=eG,J[109]=eb,J[110]=en,J[111]=ek,J[112]=ez,J[113]=eF,J[114]=em,J[115]=ea,J[116]=es,J[117]=er,J[118]=ex,J[119]=eP,J[120]=ec,J[121]=G):G=J[121],J[122]!==$||J[123]!==U||J[124]!==q||J[125]!==G?(H=(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:[$,U,q,G]}),J[122]=$,J[123]=U,J[124]=q,J[125]=G,J[126]=H):H=J[126],J[127]!==p||J[128]!==M||J[129]!==H?(K=(0,o.jsxs)(tI.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:p,children:[g,M,H]}),J[127]=p,J[128]=M,J[129]=H,J[130]=K):K=J[130],J[131]!==eW||J[132]!==eq||J[133]!==eK||J[134]!==eB||J[135]!==eE||J[136]!==eL.activeBatch.length||J[137]!==eQ?(W=eE&&eQ.length>0&&(0,o.jsx)(im.$,{authorLogins:[],batchSize:eL.activeBatch.length,onClose:eq,onCommit:eW,defaultCommitMessage:"Apply suggestions from code review",suggestions:eQ,onRemoveSuggestion:eB,onDiscardBatch:eK}),J[131]=eW,J[132]=eq,J[133]=eK,J[134]=eB,J[135]=eE,J[136]=eL.activeBatch.length,J[137]=eQ,J[138]=W):W=J[138],J[139]!==eK||J[140]!==eH||J[141]!==eC||J[142]!==eP?(z=(0,o.jsx)(nf.G,{isOpen:eC,onConfirm:eK,onCancel:eH,suggestionsCount:eP}),J[139]=eK,J[140]=eH,J[141]=eC,J[142]=eP,J[143]=z):z=J[143],J[144]!==f||J[145]!==K||J[146]!==W||J[147]!==z?(Q=(0,o.jsxs)(o.Fragment,{children:[f,K,W,z]}),J[144]=f,J[145]=K,J[146]=W,J[147]=z,J[148]=Q):Q=J[148],Q}:function({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:i,isFileTreeExpanded:a,lastReviewOid:s,pageLimits:r,pullRequest:l,repository:d,shouldShowViewedFilesCount:c,totalFilesCount:u,treeToggleElement:m,userNotices:h}){let f=(0,no.u)("batch_suggested_changes"),p=(0,no.u)("pull_request_overview_panel"),{mutate:g}=n2(),{clearSuggestionBatch:y,removeSuggestionFromBatch:x}=(0,k.xJ)(),{mutate:_}=iv(l.pathName,l.comparison.headOid),{mutate:j}=ib(),w=(0,k.WA)(),C=l.pathName,{hideWhitespace:S,fullDiff:I}=(0,k.L3)(),[L,T]=(0,b.useState)(!1),E=c||!a,[D,R]=(0,b.useState)(!1),A=(0,k.j5)(),O=(0,k.RH)(),F=(0,k.WK)(),M=(0,k.qL)(),[$,B]=(0,b.useState)(!1),V=(0,k.Kp)(),U=(0,k.L3)(),q=ip(M,F.activeBatch),G=q.length,H=e=>{g({hideWhitespace:e})},[K,W]=(0,nB.B)(e=>{e[0]&&T(!e[0].isIntersecting)}),z=(0,b.useCallback)(e=>{x(e),(0,ix.CE)(V,U.fullDiff.headOid,F.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},[x,F,V,U]),Q=(0,b.useCallback)(()=>{B(!0)},[]),J=(0,b.useCallback)(()=>{B(!1)},[]),Y=(0,b.useCallback)(()=>{R(!0)},[]),X=(0,b.useCallback)(()=>{R(!1)},[]),ee=(0,b.useCallback)(()=>{y(),(0,ix.hW)(V,U.fullDiff.headOid),J(),R(!1)},[y,V,U,J]),et=(0,b.useCallback)((e,t,n)=>{_({message:e,currentOid:I.headOid},{onSuccess:()=>{J(),n()},onError:e=>{t(e)}})},[I,_,J]),en=e=>{j({showChangeGroups:e})},ei=q.map(e=>({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nV.X,{sx:{visibility:"hidden",height:"1px"},onObserve:K,onUnobserve:W}),(0,o.jsxs)(tI.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,v.$)(n$.A.stickyHeader,nJ,L&&nq),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,o.jsxs)(tI.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,o.jsx)("div",{children:m}),(0,o.jsx)("div",{className:nG,children:(0,o.jsx)(nU.u,{state:l.state})}),(0,o.jsx)("div",{className:nH,children:(0,o.jsx)(nO,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name})}),(0,o.jsxs)(tI.B,{direction:"vertical",gap:"none",className:(0,v.$)(nG,"min-width-0"),children:[(0,o.jsxs)("div",{className:(0,v.$)("d-flex mb-n1",nK),children:[(0,o.jsx)(P.m,{type:"label",direction:"s",text:l.title,children:(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:(0,v.$)("f5 text-bold overflow-hidden no-wrap",nW),children:l.title})})}),(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",l.number]})]}),(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,o.jsx)(nO,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name,variant:"condensed"}),(0,o.jsxs)("div",{className:(0,v.$)("d-none d-lg-flex flex-items-center min-width-0",nK),children:[(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,o.jsx)(nX.O,{author:l.author,baseBranch:l.baseBranch,baseRepositoryOwnerLogin:d.ownerLogin,baseRepositoryName:d.name,commitsCount:l.commitsCount,headBranch:l.headBranch,headRepositoryOwnerLogin:l.headRepositoryOwnerLogin,headRepositoryName:l.headRepositoryName,isInAdvisoryRepo:l.isInAdvisoryRepo,mergedBy:l.mergedBy,mergedByName:l.mergedByName,state:l.state,pullRequestId:l.id,pullRequestNumber:l.number,repositoryId:d.id})]})]})]})]}),(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:[(0,o.jsx)(nu,{aliveChannel:l.aliveChannel,pathName:C}),(0,o.jsxs)("div",{className:nz,children:[c&&(0,o.jsx)(eV,{totalFilesCount:u}),!a&&i,A&&u>1&&(0,o.jsx)("div",{className:nQ,children:(0,o.jsx)(id,{userNotices:h})})]}),E&&(0,o.jsx)("div",{className:nZ,"data-testid":"file-controls-divider"}),O&&f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z.Q,{variant:"danger",size:"small",onClick:Y,children:"Discard batch"}),(0,o.jsxs)(Z.Q,{variant:"primary",size:"small",onClick:Q,children:["Commit suggestions ",(0,o.jsx)(N.A,{className:"ml-1 color-fg-inherit",children:G})]})]}):(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)(iC,{aliveChannel:l.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tg,{pageLimits:r,pullRequest:l,isFileTreeExpanded:a})}),(0,o.jsx)(tN,{className:"d-none d-sm-flex",pageLimits:r,isFileTreeExpanded:a}),n&&(0,o.jsx)(nt,{currentUserLogin:n,pullRequest:l,repository:d}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(ns.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:H,defaultHideWhitespace:S,small:!0,userNotices:h,additionalPreferences:(0,o.jsx)(iu,{changeGroupsPreferenceAvailable:e,showChangeGroups:w,onShowChangeGroupsChange:en})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(ic,{pageLimits:r,pullRequest:l,hideWhitespace:S,onUpdateWhitespace:H,additionalPreferences:(0,o.jsx)(iu,{changeGroupsPreferenceAvailable:e,showChangeGroups:w,onShowChangeGroupsChange:en})})})]})]})]}),$&&ei.length>0&&(0,o.jsx)(im.$,{authorLogins:[],batchSize:F.activeBatch.length,onClose:J,onCommit:et,defaultCommitMessage:"Apply suggestions from code review",suggestions:ei,onRemoveSuggestion:z,onDiscardBatch:ee}),(0,o.jsx)(nf.G,{isOpen:D,onConfirm:ee,onCancel:X,suggestionsCount:G})]})};function ik(e){return{commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}}try{iS.displayName||(iS.displayName="LivePullRequestFilesToolbar")}catch{}try{iI.displayName||(iI.displayName="PullRequestFilesToolbar")}catch{}function iL(e,t){(0,b.useMemo)(()=>{if(e&&t){for(let n of t)if(n.markersMap)for(let t in n.markersMap){let i=n.markersMap[t];if(i?.threads)for(let n of i.threads){let i=function(e,t){if("FILE"===e)return;let n=e[0];if(!iE(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];iE(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:iT[n],startLine:a,startDiffSide:iT[s],isOutdated:!!t.outdatedReason}}(t,n),a=e.threads[Number(n.id)];if(a&&i){let{isOutdated:e,...t}=i;a.positioning=i,a.subject=t}}}}},[t,e])}let iT={L:"LEFT",R:"RIGHT"};function iE(e){return"L"===e||"R"===e}let iD="DiffComparisonViewer-module__Container--nndHZ",iR="DiffComparisonViewer-module__HiddenPane--pMKU7",iA="DiffComparisonViewer-module__PaneContain--PQMad",iO="DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",iP="DiffComparisonViewer-module__RegularTreeToggle--_Zt7h",iF="DiffComparisonViewer-module__MobileTreeToggle--lAOrS",iM="DiffComparisonViewer-module__Pane--FbQgQ",i$="DiffComparisonViewer-module__WideExpanded--a6hBe",iB="DiffComparisonViewer-module__WideCollapsed--nAjUj",iV="DiffComparisonViewer-module__CompactHidden--NQ1CL",iU="DiffComparisonViewer-module__CompactOverlay--ZnZLv",iq="DiffComparisonViewer-module__CompactInline--jndVg",iG="DiffComparisonViewer-module__Content--Cv2ab",iH="DiffComparisonViewer-module__SkeletonWrapper--eZhhq",iK="DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ";var iW=n(70138),iz=n(24798),iQ=n(50129);function iZ({basePath:e,selectedRange:t}){return[ee.uT.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}let iJ=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(17),{basePath:o,headSha:d,baseSha:u,shouldFetch:m}=e;if(l[0]!==o||l[1]!==u||l[2]!==d){let e=new URLSearchParams;u===d?e.append("range",d??""):u&&d?e.append("range",`${u}..${d}`):d&&e.append("range",d),t=o,n=ee.uT.baseComparisonInfo,i=e.toString(),l[0]=o,l[1]=u,l[2]=d,l[3]=t,l[4]=n,l[5]=i}else t=l[3],n=l[4],i=l[5];let h=`${t}/page_data/${n}?${i}`,f=u??"base-sha-not-provided";l[6]!==o||l[7]!==d||l[8]!==f?(a=iZ({basePath:o,selectedRange:{baseOid:f,headOid:d}}),l[6]=o,l[7]=d,l[8]=f,l[9]=a):a=l[9];let p=a;return l[10]!==h||l[11]!==d?(s=async()=>{if(!d)return;let e=await (0,ec.QJ)(h);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},l[10]=h,l[11]=d,l[12]=s):s=l[12],l[13]!==p||l[14]!==m||l[15]!==s?(r={queryKey:p,queryFn:s,staleTime:1/0,enabled:m},l[13]=p,l[14]=m,l[15]=s,l[16]=r):r=l[16],(0,ed.I)(r)}:function({basePath:e,headSha:t,baseSha:n,shouldFetch:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${ee.uT.baseComparisonInfo}?${a.toString()}`,r=iZ({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,ed.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,ec.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:i})},iY=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(37),{fileFilter:_,isFileTreeExpanded:j,shouldShowViewedFilesCount:w,totalFilesCount:N,treeToggleElement:C,userNotices:S}=e;x[0]===Symbol.for("react.memo_cache_sentinel")?(t=["line-spacing"],x[0]=t):t=x[0];let I=t,[L,T]=(0,b.useState)(!1),E=(0,k.j5)(),D=w||!j;x[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&T(!e[0].isIntersecting)},x[1]=n):n=x[1];let[R,A]=(0,nB.B)(n);x[2]===Symbol.for("react.memo_cache_sentinel")?(i={visibility:"hidden",height:"1px"},x[2]=i):i=x[2],x[3]!==R||x[4]!==A?(a=(0,o.jsx)(nV.X,{sx:i,onObserve:R,onUnobserve:A}),x[3]=R,x[4]=A,x[5]=a):a=x[5];let O=L&&nq;x[6]!==O?(s=(0,v.$)(n$.A.stickyHeader,nY,O),x[6]=O,x[7]=s):s=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),x[8]=r):r=x[8],x[9]!==C?(l=(0,o.jsx)(tI.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:C})}),x[9]=C,x[10]=l):l=x[10],x[11]!==w||x[12]!==N?(d=w&&(0,o.jsx)(eV,{totalFilesCount:N}),x[11]=w,x[12]=N,x[13]=d):d=x[13];let P=!j&&_;return x[14]!==E||x[15]!==N||x[16]!==S?(u=E&&N>1&&(0,o.jsx)("div",{className:nQ,children:(0,o.jsx)(id,{userNotices:S})}),x[14]=E,x[15]=N,x[16]=S,x[17]=u):u=x[17],x[18]!==P||x[19]!==u||x[20]!==d?(m=(0,o.jsxs)("div",{className:nz,children:[d,P,u]}),x[18]=P,x[19]=u,x[20]=d,x[21]=m):m=x[21],x[22]!==D?(h=D&&(0,o.jsx)("div",{className:nZ,"data-testid":"file-controls-divider"}),x[22]=D,x[23]=h):h=x[23],x[24]!==S?(f=(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:I,userNotices:S}),x[24]=S,x[25]=f):f=x[25],x[26]!==m||x[27]!==h||x[28]!==f?(p=(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:[m,h,f]}),x[26]=m,x[27]=h,x[28]=f,x[29]=p):p=x[29],x[30]!==p||x[31]!==s||x[32]!==l?(g=(0,o.jsxs)(tI.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:s,children:[r,l,p]}),x[30]=p,x[31]=s,x[32]=l,x[33]=g):g=x[33],x[34]!==g||x[35]!==a?(y=(0,o.jsxs)(o.Fragment,{children:[a,g]}),x[34]=g,x[35]=a,x[36]=y):y=x[36],y}:function({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:i,treeToggleElement:a,userNotices:s}){let[r,l]=(0,b.useState)(!1),d=(0,k.j5)(),c=n||!t,[u,m]=(0,nB.B)(e=>{e[0]&&l(!e[0].isIntersecting)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nV.X,{sx:{visibility:"hidden",height:"1px"},onObserve:u,onUnobserve:m}),(0,o.jsxs)(tI.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,v.$)(n$.A.stickyHeader,nY,r&&nq),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,o.jsx)(tI.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:a})}),(0,o.jsxs)(tI.B,{direction:"horizontal",align:"center",children:[(0,o.jsxs)("div",{className:nz,children:[n&&(0,o.jsx)(eV,{totalFilesCount:i}),!t&&e,d&&i>1&&(0,o.jsx)("div",{className:nQ,children:(0,o.jsx)(id,{userNotices:s})})]}),c&&(0,o.jsx)("div",{className:nZ,"data-testid":"file-controls-divider"}),(0,o.jsx)(ns.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"],userNotices:s})]})]})]})};try{iY.displayName||(iY.displayName="BasicDiffComparisonViewToolbar")}catch{}var iX=n(8624),i0=n(94195),i1=n(54571),i2=n(71833);let i3=(0,d.Z6)()?function(e,t,n,i){let a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(34);x[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],x[0]=a):a=x[0];let[v]=(0,i1.I)(i6,!0,a),_=(0,b.useRef)(null),j=(0,b.useRef)(null),w=t?"expanded":"collapsed";x[1]!==w?(s={wideMode:w,compactMode:"none"},x[1]=w,x[2]=s):s=x[2];let[N,C]=(0,b.useState)(s);x[3]!==i?(r=()=>{C(i5),(0,i2.B)(!0,i),requestAnimationFrame(()=>_.current?.focus())},x[3]=i,x[4]=r):r=x[4];let S=r;x[5]!==i?(l=()=>{C({wideMode:"collapsed",compactMode:"none"}),(0,i2.B)(!1,i),requestAnimationFrame(()=>_.current?.focus())},x[5]=i,x[6]=l):l=x[6];let I=l;x[7]!==n?(d=()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i0.nn)(t)>i0.Gy.large&&(e="inline")}C(t=>({...t,compactMode:e})),requestAnimationFrame(()=>j.current?.focus())},x[7]=n,x[8]=d):d=x[8];let k=d;x[9]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{C(i4),requestAnimationFrame(()=>j.current?.focus())},x[9]=u):u=x[9];let L=u,T="expanded"===N.wideMode,E="expanded"===N.wideMode?"Collapse file tree":"Expand file tree";x[10]!==I||x[11]!==S||x[12]!==N.wideMode?(m=()=>{"expanded"===N.wideMode?I():S()},x[10]=I,x[11]=S,x[12]=N.wideMode,x[13]=m):m=x[13],x[14]!==e||x[15]!==T||x[16]!==E||x[17]!==m?(h=(0,o.jsx)(iX.L,{expanded:T,alignment:"left",ariaLabel:E,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:_,className:iP,onToggleExpanded:m,size:"small"}),x[14]=e,x[15]=T,x[16]=E,x[17]=m,x[18]=h):h=x[18];let D=h,R="none"!==N.compactMode,A="none"!==N.compactMode?"Collapse file tree":"Expand file tree";x[19]!==k||x[20]!==N.compactMode?(f=()=>{"none"!==N.compactMode?L():k()},x[19]=k,x[20]=N.compactMode,x[21]=f):f=x[21],x[22]!==e||x[23]!==R||x[24]!==A||x[25]!==f?(p=(0,o.jsx)(iX.L,{expanded:R,alignment:"left",ariaLabel:A,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:j,className:iF,onToggleExpanded:f,size:"small"}),x[22]=e,x[23]=R,x[24]=A,x[25]=f,x[26]=p):p=x[26];let O=p;x[27]!==O||x[28]!==D?(g=(0,o.jsxs)(o.Fragment,{children:[O,D]}),x[27]=O,x[28]=D,x[29]=g):g=x[29];let P=g,F=v&&!t;return x[30]!==F||x[31]!==P||x[32]!==N?(y={splitPagePaneHidden:F,treeViewState:N,collapseMobileTree:L,treeToggleElement:P},x[30]=F,x[31]=P,x[32]=N,x[33]=y):y=x[33],y}:function(e,t,n,i){let[a]=(0,i1.I)(()=>!1,!0,[]),s=(0,b.useRef)(null),r=(0,b.useRef)(null),[l,d]=(0,b.useState)({wideMode:t?"expanded":"collapsed",compactMode:"none"}),c=(0,b.useCallback)(()=>{d(e=>({...e,wideMode:"expanded"})),(0,i2.B)(!0,i),requestAnimationFrame(()=>s.current?.focus())},[i]),u=(0,b.useCallback)(()=>{d({wideMode:"collapsed",compactMode:"none"}),(0,i2.B)(!1,i),requestAnimationFrame(()=>s.current?.focus())},[i]),m=(0,b.useCallback)(()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i0.nn)(t)>i0.Gy.large&&(e="inline")}d(t=>({...t,compactMode:e})),requestAnimationFrame(()=>r.current?.focus())},[n]),h=(0,b.useCallback)(()=>{d(e=>({...e,compactMode:"none"})),requestAnimationFrame(()=>r.current?.focus())},[]),f=(0,b.useMemo)(()=>(0,o.jsx)(iX.L,{expanded:"expanded"===l.wideMode,alignment:"left",ariaLabel:"expanded"===l.wideMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,className:iP,onToggleExpanded:()=>{"expanded"===l.wideMode?u():c()},size:"small"}),[l.wideMode,e,u,c]),p=(0,b.useMemo)(()=>(0,o.jsx)(iX.L,{expanded:"none"!==l.compactMode,alignment:"left",ariaLabel:"none"!==l.compactMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,className:iF,onToggleExpanded:()=>{"none"!==l.compactMode?h():m()},size:"small"}),[l.compactMode,e,h,m]);return{splitPagePaneHidden:a&&!t,treeViewState:l,collapseMobileTree:h,treeToggleElement:(0,b.useMemo)(()=>(0,o.jsxs)(o.Fragment,{children:[p,f]}),[p,f])}};function i4(e){return{...e,compactMode:"none"}}function i5(e){return{...e,wideMode:"expanded"}}function i6(){return!1}let i7=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,et.e)(ee.uT.generateChangeGroups),{updateChangeGroupGeneration:s}=(0,k.wL)();return i[0]!==a?(e=async()=>{let e=await (0,ei.q$)(a,{method:"POST"}),t=await (0,ei.hp)(e);return(0,ei.R)(e,t),t},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,en.n)(n)}:function(){let e=(0,et.e)(ee.uT.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,k.wL)();return(0,en.n)({mutationFn:async()=>{let t=await (0,ei.q$)(e,{method:"POST"}),n=await (0,ei.hp)(t);return(0,ei.R)(t,n),n},onSuccess:e=>{t(e)}})},i8=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{changeGroupsEnabled:s}=e,r=(0,k.gt)(),l=(0,k.iY)(),o=!!(l&&l.length>0),d=(0,no.u)("generate_groups_on_files_view"),{mutate:u}=i7(),m=(0,k.Fl)();a[0]!==m?(t=m&&(em(m.state)||!eu(m.state)),a[0]=m,a[1]=t):t=a[1];let h=t,f=(0,eN.ww)(),p=(0,b.useRef)(!1);a[2]!==r||a[3]!==s||a[4]!==u||a[5]!==o||a[6]!==f||a[7]!==h||a[8]!==d?(n=()=>{p.current||!d||!s||!r||o||f||h||(u(),p.current=!0)},i=[r,d,u,o,h,f,s],a[2]=r,a[3]=s,a[4]=u,a[5]=o,a[6]=f,a[7]=h,a[8]=d,a[9]=n,a[10]=i):(n=a[9],i=a[10]),(0,b.useEffect)(n,i)}:function({changeGroupsEnabled:e}){let t=(0,k.gt)(),n=(0,k.iY)(),i=!!(n&&n.length>0),a=(0,no.u)("generate_groups_on_files_view"),{mutate:s}=i7(),r=(0,k.Fl)(),l=r&&(em(r.state)||!eu(r.state)),o=(0,eN.ww)(),d=(0,b.useRef)(!1);(0,b.useEffect)(()=>{d.current||!a||!e||!t||i||o||l||(s(),d.current=!0)},[t,a,s,i,l,o,e])};var i9=n(59523),ae=n(65123),at=n(66358);let an=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(17),{pullRequestBasePath:r,className:l,diffPath:d,viewerLogin:u}=e,m=(0,b.useId)();s[0]!==r||s[1]!==d?(t={basePath:r,diffPath:d},s[0]=r,s[1]=d,s[2]=t):t=s[2];let h=(0,I.o5)(t);if(!h)return null;let{isOwnedByViewer:f,owners:p,ruleLineNumber:g,ruleUrl:y}=h.data;if(!(f||p.length>0))return null;s[3]!==f||s[4]!==p||s[5]!==g||s[6]!==u?(n=ai(f,p,g,u),s[3]=f,s[4]=p,s[5]=g,s[6]=u,s[7]=n):n=s[7];let x=n;return s[8]!==l||s[9]!==f||s[10]!==y||s[11]!==m?(i=y?(0,o.jsx)(O.A,{"aria-labelledby":m,href:y,className:l,muted:!f,children:(0,o.jsx)(G.ShieldLockIcon,{})}):(0,o.jsx)(G.ShieldLockIcon,{className:l}),s[8]=l,s[9]=f,s[10]=y,s[11]=m,s[12]=i):i=s[12],s[13]!==i||s[14]!==x||s[15]!==m?(a=(0,o.jsx)(P.m,{id:m,"aria-label":x,text:x,children:i}),s[13]=i,s[14]=x,s[15]=m,s[16]=a):a=s[16],a}:function({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){let a=(0,b.useId)(),s=(0,I.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:l,ruleLineNumber:d,ruleUrl:c}=s.data;if(!(r||l.length>0))return null;let u=ai(r,l,d,i);return(0,o.jsx)(P.m,{id:a,"aria-label":u,text:u,children:c?(0,o.jsx)(O.A,{"aria-labelledby":a,href:c,className:t,muted:!r,children:(0,o.jsx)(G.ShieldLockIcon,{})}):(0,o.jsx)(G.ShieldLockIcon,{className:t})})};function ai(e,t,n,i){let a="Owned by ",s=t;return e&&(a+="you",i&&(s=t.filter(e=>e!==`@${i}`)),s.length>0&&(a+=" along with ")),a+=s.join(", "),n&&(a+=` (from CODEOWNERS line ${n})`),a}try{an.displayName||(an.displayName="CodeownersBadge")}catch{}var aa=n(78252),as=n(31675);let ar="BlobActionsMenu-module__hiddenIcon--EJrTU",al=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(46),{oid:y,path:x,repo:v,branchName:b,isViewable:_,isDeleteable:j,isEditable:N,shouldShowEditOptions:C,copilotDiffChatProps:S,returnToPullRequestPath:I,onCommentOnFile:k,onCopyPath:L,onExpandLines:T,areLinesExpanded:E,richDiffToggle:D,codeownersText:R,codeownersUrl:A}=e,O=void 0===j||j,P=void 0===N||N,F=void 0===C||C;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(H.K,{icon:G.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),g[0]=t):t=g[0],g[1]!==D?(n=D?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-medium-up"],onSelect:D.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:D.isRichDiff?ar:void 0,children:(0,o.jsx)(G.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-medium-up"],onSelect:D.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:D.isRichDiff?void 0:ar,children:(0,o.jsx)(G.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-medium-up"]})]}),g[1]=D,g[2]=n):n=g[2],g[3]!==S?(i=S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aa.$,{...S}),(0,o.jsx)(w.l.Divider,{})]}),g[3]=S,g[4]=i):i=g[4],g[5]!==k?(a=k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:k,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]})]}),g[5]=k,g[6]=a):a=g[6],g[7]!==L?(s=L&&(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:L,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CopyIcon,{})}),"Copy file name"]}),g[7]=L,g[8]=s):s=g[8],g[9]!==E||g[10]!==T?(r=T&&(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:T,children:[(0,o.jsx)(w.l.LeadingVisual,{children:E?(0,o.jsx)(G.FoldIcon,{}):(0,o.jsx)(G.UnfoldIcon,{})}),(0,o.jsx)("span",{children:E?"Collapse non-diff lines":"Expand all lines"})]}),g[9]=E,g[10]=T,g[11]=r):r=g[11],g[12]!==L||g[13]!==T?(l=(L||T)&&(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]}),g[12]=L,g[13]=T,g[14]=l):l=g[14],g[15]!==y||g[16]!==x||g[17]!==v.name||g[18]!==v.ownerLogin?(d=(0,eO.nD_)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:y}),g[15]=y,g[16]=x,g[17]=v.name,g[18]=v.ownerLogin,g[19]=d):d=g[19];let M=void 0===_||_?void 0:"Action unavailable";return g[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.EyeIcon,{})}),g[20]=u):u=g[20],g[21]!==d||g[22]!==M?(m=(0,o.jsxs)(w.l.LinkItem,{href:d,inactiveText:M,children:[u,"View file"]}),g[21]=d,g[22]=M,g[23]=m):m=g[23],g[24]!==b||g[25]!==O||g[26]!==P||g[27]!==x||g[28]!==v.name||g[29]!==v.ownerLogin||g[30]!==I||g[31]!==F?(h=b&&F&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.LinkItem,{href:(0,eO.Nyd)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b,returnToPrPath:I}),inactiveText:P?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(w.l.LinkItem,{variant:"danger",href:(0,eO.Y65)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b}),inactiveText:O?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.TrashIcon,{})}),"Delete file"]})]}),g[24]=b,g[25]=O,g[26]=P,g[27]=x,g[28]=v.name,g[29]=v.ownerLogin,g[30]=I,g[31]=F,g[32]=h):h=g[32],g[33]!==R||g[34]!==A?(f=R&&A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{className:as.A["hide-on-desktop"],href:A,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.ShieldLockIcon,{})}),R]})]}),g[33]=R,g[34]=A,g[35]=f):f=g[35],g[36]!==r||g[37]!==l||g[38]!==m||g[39]!==h||g[40]!==f||g[41]!==n||g[42]!==i||g[43]!==a||g[44]!==s?(p=(0,o.jsxs)(eG.W,{children:[t,(0,o.jsx)(eG.W.Overlay,{children:(0,o.jsxs)(w.l,{children:[n,i,a,s,r,l,m,h,f]})})]}),g[36]=r,g[37]=l,g[38]=m,g[39]=h,g[40]=f,g[41]=n,g[42]=i,g[43]=a,g[44]=s,g[45]=p):p=g[45],p}:function({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:l=!0,copilotDiffChatProps:d,returnToPullRequestPath:c,onCommentOnFile:u,onCopyPath:m,onExpandLines:h,areLinesExpanded:f,richDiffToggle:p,codeownersText:g,codeownersUrl:y}){return(0,o.jsxs)(eG.W,{children:[(0,o.jsx)(eG.W.Anchor,{children:(0,o.jsx)(H.K,{icon:G.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,o.jsx)(eG.W.Overlay,{children:(0,o.jsxs)(w.l,{children:[p?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?ar:void 0,children:(0,o.jsx)(G.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?void 0:ar,children:(0,o.jsx)(G.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-medium-up"]})]}),d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aa.$,{...d}),(0,o.jsx)(w.l.Divider,{})]}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:u,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]})]}),m&&(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:m,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.CopyIcon,{})}),"Copy file name"]}),h&&(0,o.jsxs)(w.l.Item,{className:as.A["hide-on-desktop"],onSelect:h,children:[(0,o.jsx)(w.l.LeadingVisual,{children:f?(0,o.jsx)(G.FoldIcon,{}):(0,o.jsx)(G.UnfoldIcon,{})}),(0,o.jsx)("span",{children:f?"Collapse non-diff lines":"Expand all lines"})]}),(m||h)&&(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{href:(0,eO.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.EyeIcon,{})}),"View file"]}),i&&l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(w.l.LinkItem,{href:(0,eO.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:c}),inactiveText:r?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(w.l.LinkItem,{variant:"danger",href:(0,eO.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.l.Divider,{className:as.A["hide-on-desktop"]}),(0,o.jsxs)(w.l.LinkItem,{className:as.A["hide-on-desktop"],href:y,children:[(0,o.jsx)(w.l.LeadingVisual,{children:(0,o.jsx)(G.ShieldLockIcon,{})}),g]})]})]})})]})};try{al.displayName||(al.displayName="BlobActionsMenu")}catch{}let ao="MarkAsViewedButton-module__viewed--czELS",ad="MarkAsViewedButton-module__iconOnly--tQ1ah",ac=(0,d.Z6)()?function(e,t){let n,i,a,s,r=(0,c.c)(10),{onSuccess:l,onError:o}=t,d=`${e}/file_review`;return r[0]!==d?(n=async e=>{let{viewedStatus:t,path:n}=e,i=await (0,ec.Sr)(`${d}`,{method:t?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:n,viewed:t?"viewed":void 0,_method:t?void 0:"delete"}}),a=await i.json();if(i.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:i.status})},r[0]=d,r[1]=n):n=r[1],r[2]!==l?(i=()=>{l()},r[2]=l,r[3]=i):i=r[3],r[4]!==o?(a=e=>{o(e)},r[4]=o,r[5]=a):a=r[5],r[6]!==n||r[7]!==i||r[8]!==a?(s={mutationFn:n,onSuccess:i,onError:a},r[6]=n,r[7]=i,r[8]=a,r[9]=s):s=r[9],(0,en.n)(s)}:function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,en.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,ec.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})},au=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(27),{basePath:u,inactive:m,inactiveTooltip:h,path:f,setIsCollapsed:p}=e,g=void 0!==m&&m,y=(0,k.Mv)(f);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:ah,onError:am},d[0]=t):t=d[0];let{mutate:x}=ac(u,t),{setDiffViewed:b}=(0,k.Ud)(),_=(0,k.j5)(),{navigateToNext:j}=n6();d[1]!==g||d[2]!==_||d[3]!==y||d[4]!==j||d[5]!==f||d[6]!==b||d[7]!==p||d[8]!==x?(n=()=>{g||(x({viewedStatus:!y,path:f}),b(f,!y),_?j():p(!y))},d[1]=g,d[2]=_,d[3]=y,d[4]=j,d[5]=f,d[6]=b,d[7]=p,d[8]=x,d[9]=n):n=d[9];let w=n;d[10]!==y?(i=y?(0,o.jsx)(G.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),d[10]=y,d[11]=i):i=d[11];let N=i,C=y?"Viewed":"Not Viewed";d[12]!==N?(a=()=>N,d[12]=N,d[13]=a):a=d[13];let S=y&&ao;d[14]!==S?(s=(0,v.$)(S,ad),d[14]=S,d[15]=s):s=d[15],d[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:as.A["hide-on-mobile"],children:"Viewed"}),d[16]=r):r=d[16],d[17]!==w||d[18]!==g||d[19]!==y||d[20]!==C||d[21]!==a||d[22]!==s?(l=(0,o.jsx)(Z.Q,{"aria-pressed":y,"aria-label":C,inactive:g,size:"small",variant:"default",leadingVisual:a,className:s,onClick:w,children:r}),d[17]=w,d[18]=g,d[19]=y,d[20]=C,d[21]=a,d[22]=s,d[23]=l):l=d[23];let I=l;if(!g||!h)return I;{let e;return d[24]!==I||d[25]!==h?(e=(0,o.jsx)(P.m,{text:h,children:I}),d[24]=I,d[25]=h,d[26]=e):e=d[26],e}}:function({basePath:e,inactive:t=!1,inactiveTooltip:n,path:i,setIsCollapsed:a}){let s=(0,k.Mv)(i),{mutate:r}=ac(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:l}=(0,k.Ud)(),d=(0,k.j5)(),{navigateToNext:c}=n6(),u=(0,b.useCallback)(()=>{t||(r({viewedStatus:!s,path:i}),l(i,!s),d?c():a(!s))},[r,t,s,i,l,d,c,a]),m=(0,b.useMemo)(()=>s?(0,o.jsx)(G.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),h=(0,o.jsx)(Z.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,v.$)(s&&ao,ad),onClick:u,children:(0,o.jsx)("span",{className:as.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,o.jsx)(P.m,{text:n,children:h}):h};function am(){}function ah(){}try{au.displayName||(au.displayName="MarkAsViewedButton")}catch{}var af=n(79634);function ap({basePath:e,selectedRange:t,path:n}){return[ee.uT.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}let ag=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{basePath:s,path:r}=e,l=(0,k.L3)();a[0]!==s||a[1]!==l||a[2]!==r?(t=ap({basePath:s,path:r,...l}),a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3];let o=t;a[4]!==s||a[5]!==l||a[6]!==r?(n={path:r,basePath:s,...l,signal:void 0},a[4]=s,a[5]=l,a[6]=r,a[7]=n):n=a[7];let d=n;return a[8]!==d||a[9]!==o?(i={fetcher:ay,key:o,args:d},a[8]=d,a[9]=o,a[10]=i):i=a[10],i}:function({basePath:e,path:t}){let n=(0,k.L3)();return{fetcher:ay,key:ap({basePath:e,path:t,...n}),args:{path:t,basePath:e,...n,signal:void 0}}};async function ay({basePath:e,fullDiff:t,selectedRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${ee.uT.richDiff}?${s.toString()}`;try{let e=await (0,ec.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,ei.hp)(e);return(0,ei.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var ax=n(15697);function av(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function ab({basePath:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,diffLines:s,path:r,isSelected:l=!1,reviewed:d,...c}){let u=(0,k.JA)(),{fetchContextLines:m}=(0,k.QV)(),h=(0,k.L3)().hideWhitespace?"1":"0",p=ag({basePath:e,path:r}),g=(0,b.useRef)(null),y=(0,b.useRef)(null),{helpUrl:x}=(0,af.X)(),_=(0,k.kN)(r),{updateAllFilesCollapsedStatus:j,updateFileCollapsedStatus:w}=(0,k.JR)(),N=(0,eN.ww)(),C=(0,k.GR)(),[L,T]=(0,b.useState)(!1),[E,D]=(0,b.useState)(c.richDiff?.defaultToRichDiff??!1),R=(0,k.Fm)(r),A=(0,k.ne)(r),O=(0,I.dG)({basePath:e}),P=(0,I.hG)({diffPath:r,codeownersData:O?.data}),F=(0,b.useMemo)(()=>A?A[e6.zW]?.threads??[]:[],[A]),M=(0,b.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let l=!1;for(let t of e)if(l){if(i.push(t),av(t,r.endLine)&&(l=!1,!(r=a[++s])))break}else av(t,r.startLine)&&(l=!0,i.push(r.headerLine),i.push(t));return i}(s,u,r):s,[u,r,s]),$=(0,b.useCallback)(()=>{w(r,!1)},[r,w]),B=(0,b.useCallback)(()=>{C()&&_&&$()},[_,$,C]),V=(0,b.useCallback)(()=>{(0,S.K3)(),B()},[B]),U=(0,b.useCallback)(()=>{(0,n5.o9)()===c.pathDigest&&_&&$()},[c.pathDigest,$,_]),q=(0,b.useCallback)(()=>{B(),U()},[B,U]);(0,b.useEffect)(()=>{q()},[]),(0,b.useEffect)(()=>(f.cg?.addEventListener("hashchange",q),()=>{f.cg?.removeEventListener("hashchange",q)}),[q]);let K=(0,b.useCallback)((e,t,n)=>{if(n&&n.altKey)j(e);else{if(w(t,e),!e)return;f.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();!e||e.top<62&&f.cg?.scrollTo({top:e.top+f.cg.scrollY-62})})}},[j,w]),W=(0,b.useRef)((0,ax.B)({diffSummary:R})),[z,Q]=(0,b.useState)(!1),Z=(0,b.useCallback)(async e=>{V(),W.current.push(e),m({contextLineRanges:W.current,path:r,w:h})},[V,m,r,h]),J=(0,b.useCallback)(async()=>{await m({contextLineRanges:[],path:r})},[m,r]),Y=(0,b.useMemo)(()=>{if(c.isBinary||c.isSubmodule||c.isTooBig||(0,i9.dK)({linesChanged:c.linesChanged,newTreeEntry:c.newTreeEntry,oldTreeEntry:c.oldTreeEntry,status:c.status,truncatedReason:c.truncatedReason}))return!1;if(z)return!0;if(0===M.length)return!1;if((M[1]?.blobLineNumber||0)>1)return!0;let e=M.length,t=M[e-1]?.blobLineNumber||0,n=c.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[c.isBinary,c.isSubmodule,c.isTooBig,c.linesChanged,c.newTreeEntry,c.oldTreeEntry,c.status,c.truncatedReason,M,z]),X=(0,b.useCallback)(async()=>{let e,t;W.current=[],z||W.current.push({start:1,end:Math.max(c.oldTreeEntry?.lineCount??0,c.newTreeEntry?.lineCount??0)});let n=document.activeElement;await m({contextLineRanges:W.current,path:r,w:h}),Q(!z),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[z,c.oldTreeEntry?.lineCount,c.newTreeEntry?.lineCount,m,r,h]),ee=(0,b.useCallback)(()=>D(!E),[E]),et=(0,b.useMemo)(()=>c.richDiff?.canToggleRichDiff?{richDiff:c.richDiff,isRichDiff:E,onToggle:ee}:void 0,[c.richDiff,E,ee]),en=(0,b.useMemo)(()=>P&&(P.isOwnedByViewer||P.owners.length>0)?ai(P.isOwnedByViewer,P.owners,void 0,c.currentUser.login):void 0,[P,c.currentUser.login]),ei=(0,b.useMemo)(()=>P?.ruleUrl,[P]),ea=(0,b.useMemo)(()=>c.currentUser.canComment?()=>T(!0):void 0,[c.currentUser.canComment]),es=(0,b.useCallback)(()=>navigator.clipboard?.writeText(r),[r]),er=(0,b.useMemo)(()=>Y?X:void 0,[Y,X]),el=(0,b.useMemo)(()=>({richDiff:c.richDiff,showRichDiff:E,onToggleRichDiff:D,queryConfig:p}),[c.richDiff,E,p]),eo=(0,b.useMemo)(()=>{let e=new Set([]);return u&&e.add(at.YR.diffStats).add(at.YR.expandLines),N&&e.add(at.YR.markAsViewed),e},[u,N]),{disabledFeatures:ed,disabledReasons:ec}=(0,b.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(at.YR.markAsViewed),t.set(at.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,o.jsx)(ae.oO,{loadDiff:J,...c,addFileCommentButtonRef:y,basePath:e,diffManuallyExpanded:t,fileComments:F,hiddenFeatures:eo,isAddingFileComment:L,isSelected:l,leftSideContent:(0,o.jsx)(b.Suspense,{children:(0,o.jsx)(an,{className:(0,v.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",as.A["hide-on-mobile"]),diffPath:r,pullRequestBasePath:e,viewerLogin:c.currentUser.login})}),rightSideContent:(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!eo.has(at.YR.markAsViewed)&&(0,o.jsx)(au,{path:r,basePath:e,inactive:ed.has(at.YR.markAsViewed)||!!u,inactiveTooltip:ec.get(at.YR.markAsViewed),setIsCollapsed:e=>K(e,r)}),c.currentUser.canComment&&(0,o.jsx)(H.K,{ref:y,icon:G.CommentIcon,"aria-label":"Comment on this file","aria-expanded":L,variant:"invisible",size:"small",onClick:()=>T(!0),className:as.A["hide-on-mobile"]}),(0,o.jsx)(al,{oid:"REMOVED"===c.status&&c.oldCommitOid?c.oldCommitOid:c.newCommitOid||"",path:r,repo:{name:i||c.repository.name,ownerLogin:a||c.repository.ownerLogin},isViewable:!c.isSubmodule,isDeleteable:!c.isSubmodule,isEditable:!c.isSubmodule,shouldShowEditOptions:c.currentUser.shouldDisplayEditOptions,branchName:n,returnToPullRequestPath:e,onCommentOnFile:ea,onCopyPath:es,onExpandLines:er,areLinesExpanded:z,richDiffToggle:et,codeownersText:en,codeownersUrl:ei})]}),canExpandOrCollapseLines:Y,expandAllContextLines:X,hasExpandedAllRanges:z,addInjectedContextLines:Z,onToggleCollapse:(e,t)=>K(t,r,e),path:r,ref:g,setIsAddingFileComment:T,collapsed:_,helpUrl:x,linesAdded:R?.linesAdded||c.linesAdded||0,linesChanged:R?.linesChanged||c.linesChanged||0,linesDeleted:R?.linesDeleted||c.linesDeleted||0,diffLines:M,richDiffState:el})}try{ab.displayName||(ab.displayName="PullRequestDiff")}catch{}let a_=(0,b.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(9),{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}=e;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==r||n[4]!==l||n[5]!==d||n[6]!==u||n[7]!==m?(t=(0,o.jsx)(ae.Ao,{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}),n[0]=i,n[1]=a,n[2]=s,n[3]=r,n[4]=l,n[5]=d,n[6]=u,n[7]=m,n[8]=t):t=n[8],t}:function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l}){return(0,o.jsx)(ae.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l})});try{a_.displayName||(a_.displayName="PullRequestDiffEntryErrorFallback")}catch{}var aj=n(81945),aw=n(29731),aN=n(8431);let aC=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(15),{ariaLabel:h,testId:f,id:p,approximateLineCount:g}=e,{data:y}=(0,m.ID)(),x=(y?.lineSpacing==="compact"?20:25)*(void 0===g?5:g);return u[0]!==f?(t=(0,aw.G)(f),u[0]=f,u[1]=t):t=u[1],u[2]!==x?(n={minHeight:x},u[2]=x,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),a=(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),s=(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),r=(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),u[4]=i,u[5]=a,u[6]=s,u[7]=r):(i=u[4],a=u[5],s=u[6],r=u[7]),u[8]!==n?(l=(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:n,children:[i,a,s,r]})}),u[8]=n,u[9]=l):l=u[9],u[10]!==h||u[11]!==p||u[12]!==t||u[13]!==l?(d=(0,o.jsx)("div",{className:aN.A.diffTargetable,role:"region","aria-label":h,...t,id:p,children:l}),u[10]=h,u[11]=p,u[12]=t,u[13]=l,u[14]=d):d=u[14],d}:function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5}){let{data:a}=(0,m.ID)(),s=a?.lineSpacing==="compact"?20:25;return(0,o.jsx)("div",{className:aN.A.diffTargetable,role:"region","aria-label":e,...(0,aw.G)(t),id:n,children:(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:s*i},children:[(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{aC.displayName||(aC.displayName="DiffEntryLoadingSkeleton")}catch{}var aS=n(50683),aI=n(19976),ak=n(73189),aL=n(21132);let aT=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(tc.E,{border:!1,spacious:!0,children:(0,o.jsx)(tc.E.Heading,{children:"No files matched your search"})})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(tc.E,{border:!1,spacious:!0,children:(0,o.jsx)(tc.E.Heading,{children:"No files matched your search"})})})};try{aT.displayName||(aT.displayName="FilesChangedFilterBlankSlate")}catch{}let aE=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(70),{diffEntryPathDigest:u,basePath:m,currentUser:h,diffManuallyExpanded:f,filteredDiffSummaries:p,headBranchName:g,headRepoName:y,headRepoOwner:x,isSelectingLineOrRange:_,pullRequestGlobalRelayId:j,repository:w,onScrollToAndFocusEntry:N}=e,C=(0,k.m9)()||u,S=(0,k.mY)();if(d[0]!==C||d[1]!==S){let e;d[3]!==C?(e=e=>e.pathDigest===C,d[3]=C,d[4]=e):e=d[4],t=S.find(e),d[0]=C,d[1]=S,d[2]=t}else t=d[2];let I=t,L=(0,k.Fm)(I?.path||""),T=I?.path||"",E=(0,k.jT)(T),R=(0,k.j5)(),A=(0,b.useRef)(!1);d[5]!==N||d[6]!==I?.loadingStatus||d[7]!==C?(n=()=>{A.current||I?.loadingStatus===aL.s.Loaded&&(N(C,{focusPathName:!0}),A.current=!0)},d[5]=N,d[6]=I?.loadingStatus,d[7]=C,d[8]=n):n=d[8];let O=I?.loadingStatus;if(d[9]!==_||d[10]!==N||d[11]!==C||d[12]!==O?(i=[_,N,O,C],d[9]=_,d[10]=N,d[11]=C,d[12]=O,d[13]=i):i=d[13],(0,b.useEffect)(n,i),!p.some(e=>e.path===T)){let e;return d[14]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aT,{}),d[14]=e):e=d[14],e}if(I&&I.loadingStatus!==aL.s.Loaded){let e,t,n,i,a=`Loading ${T}`,s=`eager-load-${T}`,r=`diff-${T}`;d[15]!==a||d[16]!==s||d[17]!==r?(e=(0,o.jsx)(aC,{ariaLabel:a,testId:s,approximateLineCount:5,id:r}),d[15]=a,d[16]=s,d[17]=r,d[18]=e):e=d[18];let l=e,c=`diff-${T}`;d[19]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(aN.A.diffTargetable,aN.A.diff),d[19]=t):t=d[19];let u=`${C}_${T}`,m=`#diff-${C}`,h=L?.linesAdded??0,f=L?.linesChanged??0,p=L?.linesDeleted??0;return d[20]!==T||d[21]!==R||d[22]!==m||d[23]!==h||d[24]!==f||d[25]!==p?(n=(0,o.jsx)("div",{className:aN.A.diffHeaderWrapper,children:(0,o.jsx)(aS.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:m,canToggleRichDiff:!1,linesAdded:h,linesChanged:f,linesDeleted:p,newPath:T,patchStatus:"",path:T,onToggleExpandAllLines:ak.l,onToggleFileCollapsed:ak.l,onToggleDiffDisplay:ak.l,isInSingleFileMode:R})}),d[20]=T,d[21]=R,d[22]=m,d[23]=h,d[24]=f,d[25]=p,d[26]=n):n=d[26],d[27]!==l||d[28]!==c||d[29]!==u||d[30]!==n?(i=(0,o.jsxs)("div",{role:"region",id:c,className:t,"data-targeted":!1,"data-hpc":!0,children:[n,l]},u),d[27]=l,d[28]=c,d[29]=u,d[30]=n,d[31]=i):i=d[31],i}if(!E){let e;return d[32]!==T||d[33]!==u?(e=(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:T,pathDigest:u,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),d[32]=T,d[33]=u,d[34]=e):e=d[34],e}d[35]!==E?(a=(0,o.jsx)(a_,{...E}),d[35]=E,d[36]=a):a=d[36];let P=E.reviewed??!1;return d[37]!==m||d[38]!==E.diffLines||d[39]!==E.diffSize||d[40]!==E.helpUrl||d[41]!==E.isBinary||d[42]!==E.isTooBig||d[43]!==E.linesAdded||d[44]!==E.linesChanged||d[45]!==E.linesDeleted||d[46]!==E.newCommitOid||d[47]!==E.newTreeEntry||d[48]!==E.objectId||d[49]!==E.oldCommitOid||d[50]!==E.oldTreeEntry||d[51]!==E.path||d[52]!==E.pathDigest||d[53]!==E.richDiff||d[54]!==E.status||d[55]!==E.submodule||d[56]!==E.truncatedReason||d[57]!==h||d[58]!==f||d[59]!==g||d[60]!==y||d[61]!==x||d[62]!==j||d[63]!==w||d[64]!==P?(s=(0,o.jsx)(ab,{basePath:m,changeType:E.status,currentUser:h,diffLines:E.diffLines,diffManuallyExpanded:f,diffSize:E.diffSize,headBranchName:g,headRepoName:y,headRepoOwner:x,helpUrl:E.helpUrl,isBinary:E.isBinary,isSelected:!1,isTooBig:E.isTooBig,linesAdded:E.linesAdded,linesChanged:E.linesChanged,linesDeleted:E.linesDeleted,newCommitOid:E.newCommitOid,newTreeEntry:E.newTreeEntry,objectId:E.objectId,oldCommitOid:E.oldCommitOid,oldTreeEntry:E.oldTreeEntry,path:E.path,pathDigest:E.pathDigest,pullRequestGlobalRelayId:j,repository:w,reviewed:P,richDiff:E.richDiff,status:E.status,submodule:E.submodule,truncatedReason:E.truncatedReason}),d[37]=m,d[38]=E.diffLines,d[39]=E.diffSize,d[40]=E.helpUrl,d[41]=E.isBinary,d[42]=E.isTooBig,d[43]=E.linesAdded,d[44]=E.linesChanged,d[45]=E.linesDeleted,d[46]=E.newCommitOid,d[47]=E.newTreeEntry,d[48]=E.objectId,d[49]=E.oldCommitOid,d[50]=E.oldTreeEntry,d[51]=E.path,d[52]=E.pathDigest,d[53]=E.richDiff,d[54]=E.status,d[55]=E.submodule,d[56]=E.truncatedReason,d[57]=h,d[58]=f,d[59]=g,d[60]=y,d[61]=x,d[62]=j,d[63]=w,d[64]=P,d[65]=s):s=d[65],d[66]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(aI.nq,{}),d[66]=r):r=d[66],d[67]!==a||d[68]!==s?(l=(0,o.jsxs)(D.t,{fallback:a,children:[s,r]}),d[67]=a,d[68]=s,d[69]=l):l=d[69],l}:function({diffEntryPathDigest:e,basePath:t,currentUser:n,diffManuallyExpanded:i,filteredDiffSummaries:a,headBranchName:s,headRepoName:r,headRepoOwner:l,isSelectingLineOrRange:d,pullRequestGlobalRelayId:c,repository:u,onScrollToAndFocusEntry:m}){let h=(0,k.m9)()||e,f=(0,k.mY)().find(e=>e.pathDigest===h),p=(0,k.Fm)(f?.path||""),g=f?.path||"",y=(0,k.jT)(g),x=(0,k.j5)(),_=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{_.current||f?.loadingStatus===aL.s.Loaded&&(m(h,{focusPathName:!0}),_.current=!0)},[d,m,f?.loadingStatus,h]),!a.some(e=>e.path===g))return(0,o.jsx)(aT,{});if(f&&f.loadingStatus!==aL.s.Loaded){let e=(0,o.jsx)(aC,{ariaLabel:`Loading ${g}`,testId:`eager-load-${g}`,approximateLineCount:5,id:`diff-${g}`});return(0,o.jsxs)("div",{role:"region",id:`diff-${g}`,className:(0,v.$)(aN.A.diffTargetable,aN.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,o.jsx)("div",{className:aN.A.diffHeaderWrapper,children:(0,o.jsx)(aS.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${h}`,canToggleRichDiff:!1,linesAdded:p?.linesAdded??0,linesChanged:p?.linesChanged??0,linesDeleted:p?.linesDeleted??0,newPath:g,patchStatus:"",path:g,onToggleExpandAllLines:ak.l,onToggleFileCollapsed:ak.l,onToggleDiffDisplay:ak.l,isInSingleFileMode:x})}),e]},`${h}_${g}`)}return y?(0,o.jsxs)(D.t,{fallback:(0,o.jsx)(a_,{...y}),children:[(0,o.jsx)(ab,{basePath:t,changeType:y.status,currentUser:n,diffLines:y.diffLines,diffManuallyExpanded:i,diffSize:y.diffSize,headBranchName:s,headRepoName:r,headRepoOwner:l,helpUrl:y.helpUrl,isBinary:y.isBinary,isSelected:!1,isTooBig:y.isTooBig,linesAdded:y.linesAdded,linesChanged:y.linesChanged,linesDeleted:y.linesDeleted,newCommitOid:y.newCommitOid,newTreeEntry:y.newTreeEntry,objectId:y.objectId,oldCommitOid:y.oldCommitOid,oldTreeEntry:y.oldTreeEntry,path:y.path,pathDigest:y.pathDigest,pullRequestGlobalRelayId:c,repository:u,reviewed:y.reviewed??!1,richDiff:y.richDiff,status:y.status,submodule:y.submodule,truncatedReason:y.truncatedReason}),(0,o.jsx)(aI.nq,{})]}):(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:g,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{aE.displayName||(aE.displayName="SingleFileModePullRequestDiffEntry")}catch{}let aD=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(tc.E,{border:!1,spacious:!0,children:[(0,o.jsx)(tc.E.Heading,{children:"No changes to show"}),(0,o.jsx)(tc.E.Description,{children:"This commit does not include any file changes"})]})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(tc.E,{border:!1,spacious:!0,children:[(0,o.jsx)(tc.E.Heading,{children:"No changes to show"}),(0,o.jsx)(tc.E.Description,{children:"This commit does not include any file changes"})]})})};try{aD.displayName||(aD.displayName="EmptyPullRequestBlankSlate")}catch{}let aR=(0,d.Z6)()?function(){let e,t,n,i,a,s,r=(0,c.c)(14),l=(0,b.useRef)(!0),{selectedFullDiffHash:o}=(0,n4.U)();r[0]!==o?(e=(0,n5.jU)(o)??void 0,r[0]=o,r[1]=e):e=r[1];let d=e;r[2]!==o?(t=(0,n5.yI)(o),r[2]=o,r[3]=t):t=r[3];let u=t;r[4]===Symbol.for("react.memo_cache_sentinel")?(n=new Map,r[4]=n):n=r[4];let m=(0,b.useRef)(n);r[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>m.current,r[5]=i):i=r[5];let h=i;r[6]!==u||r[7]!==o?(a=(e,t)=>{let{focusPathName:n}=void 0===t?{}:t,i=h().get(e);if(!i)return;let a=i,s=i.querySelector("button");if(n&&(s=i.querySelector("a")),u){let e=o.split("-")[0],t=i.querySelector(`[data-line-anchor=diff-${e}]`);t&&(s=a=t)}else l.current||(a=null);if(a){let e=f.cg?.scrollY??0,t=a.getBoundingClientRect().top+e-57-60;f.cg?.scrollTo({top:t,left:0})}s&&s.focus(),l.current=!1},r[6]=u,r[7]=o,r[8]=a):a=r[8];let p=a;return r[9]!==u||r[10]!==p||r[11]!==o||r[12]!==d?(s={onScrollToAndFocusEntry:p,selectedFullDiffHash:o,selectedPathDigest:d,isSelectingLineOrRange:u,getTargetableEntriesMap:h},r[9]=u,r[10]=p,r[11]=o,r[12]=d,r[13]=s):s=r[13],s}:function(){let e=(0,b.useRef)(!0),{selectedFullDiffHash:t}=(0,n4.U)(),n=(0,n5.jU)(t)??void 0,i=(0,n5.yI)(t),a=(0,b.useRef)(new Map),s=(0,b.useCallback)(()=>a.current,[]);return{onScrollToAndFocusEntry:(0,b.useCallback)((n,{focusPathName:a}={})=>{let r=s().get(n);if(!r)return;let l=r,o=r.querySelector("button");if(a&&(o=r.querySelector("a")),i){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(o=l=n)}else e.current||(l=null);if(l){let e=f.cg?.scrollY??0,t=l.getBoundingClientRect().top+e-57-60;f.cg?.scrollTo({top:t,left:0})}o&&o.focus(),e.current=!1},[s,i,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:i,getTargetableEntriesMap:s}},aA=(0,b.memo)(function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l}){let d=(0,k.HZ)(),c=(0,b.useMemo)(()=>Object.values(d??{}).filter(e=>null!==e),[d])[0],u=(0,k.m9)(),{onScrollToAndFocusEntry:m,getTargetableEntriesMap:h,isSelectingLineOrRange:f}=aR(),p=(0,k.qg)(),g=(0,k.uh)()[0],y=(0,k.zK)(),x=(0,k.mF)(),{navigateToSelectedComment:v,navigateToSelectedAnnotation:_,handleHashUpdate:j}=(0,k.Lh)(),{setSelectedHash:w}=(0,n4.U)(),N=(0,b.useRef)(!0),C=(0,k.mY)().find(e=>e.pathDigest===u),{loadMore:I}=(0,k.pV)(),L=(0,b.useCallback)(()=>{y?v(y):x&&!isNaN(Number(x))?_(Number(x)):u&&C?I(C):!u&&g?.pathDigest&&(w(g.pathDigest),(0,S.Zu)(`diff-${g.pathDigest}`))},[g?.pathDigest,I,_,v,x,y,u,C,w]);if((0,b.useEffect)(()=>{N.current&&(L(),N.current=!1)},[]),(0,b.useEffect)(()=>{let e=()=>{j()};return j(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[j]),0===p)return(0,o.jsx)(aD,{});if(0===n.length)return(0,o.jsx)(aT,{});let T=u||c?.pathDigest||g?.pathDigest;return T?(0,o.jsx)("div",{ref:e=>{let t=h();e?t.set(T,e):t.delete(T)},children:(0,o.jsx)(aE,{diffEntryPathDigest:T,basePath:e,currentUser:t,diffManuallyExpanded:!1,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:l,onScrollToAndFocusEntry:m,isSelectingLineOrRange:f})}):null});try{aA.displayName||(aA.displayName="SingleFileModeDiffEntryNavigator")}catch{}let aO=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(4),{lines:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:t,children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"})})}),a[1]=n):n=a[1],a[2]!==s?(i=(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[n,(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:s||5}).map(aP)})]}),a[2]=s,a[3]=i):i=a[3],i}:function({lines:e}){return(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})};function aP(e,t){return(0,o.jsx)(aj.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`)}try{aO.displayName||(aO.displayName="EntireDiffLoadingSkeleton")}catch{}let aF=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(15),{progressiveDiffEntry:r,approximateLineCount:l}=e,d=void 0===l?5:l,{loadMore:u}=(0,k.pV)(),m=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[h,f]=(0,b.useState)(!1);s[0]!==h||s[1]!==u||s[2]!==r||s[3]!==m?(t=e=>{e[0]?.isIntersecting&&!h&&(f(!0),u(r,{preferAnySoloEntry:!m}))},s[0]=h,s[1]=u,s[2]=r,s[3]=m,s[4]=t):t=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(n={rootMargin:"-72px"},s[5]=n):n=s[5];let[p,g]=(0,nB.B)(t,n),y=`Loading ${r.path}`,x=`lazy-load-${r.path}`,v=`diff-${r.pathDigest}`;return s[6]!==d||s[7]!==y||s[8]!==x||s[9]!==v?(i=(0,o.jsx)(aC,{ariaLabel:y,testId:x,id:v,approximateLineCount:d}),s[6]=d,s[7]=y,s[8]=x,s[9]=v,s[10]=i):i=s[10],s[11]!==p||s[12]!==i||s[13]!==g?(a=(0,o.jsx)(nV.X,{onObserve:p,onUnobserve:g,children:i}),s[11]=p,s[12]=i,s[13]=g,s[14]=a):a=s[14],a}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,k.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,b.useState)(!1),[r,l]=(0,nB.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,o.jsx)(nV.X,{onObserve:r,onUnobserve:l,children:(0,o.jsx)(aC,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{aF.displayName||(aF.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let aM=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(10),{progressiveDiffEntry:s,approximateLineCount:r}=e,l=void 0===r?5:r,{loadMore:d}=(0,k.pV)(),u=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");a[0]!==d||a[1]!==s||a[2]!==u?(t=()=>{d(s,{preferAnySoloEntry:!u})},n=[d,s,u],a[0]=d,a[1]=s,a[2]=u,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,b.useEffect)(t,n);let m=`Loading ${s.path}`,h=`eager-load-${s.path}`,f=`diff-${s.pathDigest}`;return a[5]!==l||a[6]!==m||a[7]!==h||a[8]!==f?(i=(0,o.jsx)(aC,{ariaLabel:m,testId:h,id:f,approximateLineCount:l}),a[5]=l,a[6]=m,a[7]=h,a[8]=f,a[9]=i):i=a[9],i}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,k.pV)(),i=(0,no.u)("pulls-files-skip-prefer-any-solo-entry");return(0,b.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,o.jsx)(aC,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{aM.displayName||(aM.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let a$=(0,b.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(5),{progressiveDiffEntry:i,approximateLineCount:a}=e,s=void 0===a?5:a,r=`Loading ${i.path}`,l=`hidden-load-${i.path}`,d=`diff-${i.pathDigest}`;return n[0]!==s||n[1]!==r||n[2]!==l||n[3]!==d?(t=(0,o.jsx)(aC,{ariaLabel:r,testId:l,id:d,approximateLineCount:s}),n[0]=s,n[1]=r,n[2]=l,n[3]=d,n[4]=t):t=n[4],t}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,o.jsx)(aC,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{a$.displayName||(a$.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let aB=(0,b.memo)(aU,(e,t)=>e.basePath===t.basePath&&e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing),aV=(0,d.Z6)();function aU(e){return aV?function(e){let t,n,i,a,s,r=(0,c.c)(70),{basePath:l,currentUser:d,diffManuallyExpanded:u,headBranchName:m,headRepoName:h,headRepoOwner:p,isSelected:g,isSelectingLineOrRange:y,onScrollToAndFocusEntry:x,progressiveDiffEntry:_,pullRequestGlobalRelayId:j,repository:w,testRenderFn:N}=e,C=void 0!==y&&y,S=(0,k.jT)(_.path),I=(0,k.Fm)(_.path),L=(0,k.j5)();N&&N();let T=(0,b.useRef)(!1);if(r[0]!==g||r[1]!==C||r[2]!==x||r[3]!==_.pathDigest||r[4]!==_.renderMode?(t=()=>{if(!T.current){if(!T.current&&void 0===g){let e=f.fV.hash??"",t=(0,n5.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==_.pathDigest&&(T.current=!0)}if(g&&"HIDE"!==_.renderMode&&(!C||"RENDER"===_.renderMode)){let e=f.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;T.current=!0,x(_.pathDigest)}}},n=[g,C,x,_.pathDigest,_.renderMode],r[0]=g,r[1]=C,r[2]=x,r[3]=_.pathDigest,r[4]=_.renderMode,r[5]=t,r[6]=n):(t=r[5],n=r[6]),(0,b.useEffect)(t,n),"HIDE"===_.renderMode||"LAZY_AUTO_LOAD"===_.renderMode||"EAGER_AUTO_LOAD"===_.renderMode){let e,t,n,i;r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),r[7]=e):e=r[7];let a=e,s=I?.linesChanged??5;if((I?.changeType==="REMOVED"||I?.changeType==="DELETED")&&(s=5),"HIDE"===_.renderMode){let e;r[8]!==s||r[9]!==_?(e=(0,o.jsx)(a$,{progressiveDiffEntry:_,approximateLineCount:s}),r[8]=s,r[9]=_,r[10]=e):e=r[10],a=e}else if("LAZY_AUTO_LOAD"===_.renderMode){let e;r[11]!==s||r[12]!==_?(e=(0,o.jsx)(aF,{progressiveDiffEntry:_,approximateLineCount:s}),r[11]=s,r[12]=_,r[13]=e):e=r[13],a=e}else if("EAGER_AUTO_LOAD"===_.renderMode){let e;r[14]!==s||r[15]!==_?(e=(0,o.jsx)(aM,{progressiveDiffEntry:_,approximateLineCount:s}),r[14]=s,r[15]=_,r[16]=e):e=r[16],a=e}let l=`diff-${_.pathDigest}`;r[17]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(aN.A.diffTargetable,aN.A.diff),r[17]=t):t=r[17];let d=g??!1,c=`${_.pathDigest}_${_.path}`,u=`#diff-${_.pathDigest}`,m=I?.linesAdded??0,h=I?.linesChanged??0,f=I?.linesDeleted??0;return r[18]!==L||r[19]!==_.path||r[20]!==m||r[21]!==h||r[22]!==f||r[23]!==u?(n=(0,o.jsx)("div",{className:aN.A.diffHeaderWrapper,children:(0,o.jsx)(aS.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:u,canToggleRichDiff:!1,linesAdded:m,linesChanged:h,linesDeleted:f,newPath:_.path,patchStatus:"",path:_.path,onToggleExpandAllLines:ak.l,onToggleFileCollapsed:ak.l,onToggleDiffDisplay:ak.l,isInSingleFileMode:L})}),r[18]=L,r[19]=_.path,r[20]=m,r[21]=h,r[22]=f,r[23]=u,r[24]=n):n=r[24],r[25]!==a||r[26]!==n||r[27]!==l||r[28]!==d||r[29]!==c?(i=(0,o.jsxs)("div",{role:"region",id:l,className:t,"data-targeted":d,children:[n,a]},c),r[25]=a,r[26]=n,r[27]=l,r[28]=d,r[29]=c,r[30]=i):i=r[30],i}if(!S){let e;return r[31]!==_.path||r[32]!==_.pathDigest?(e=(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:_.path,pathDigest:_.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),r[31]=_.path,r[32]=_.pathDigest,r[33]=e):e=r[33],e}r[34]!==S?(i=(0,o.jsx)(a_,{...S}),r[34]=S,r[35]=i):i=r[35];let E=g??!1,R=S.reviewed??!1;return r[36]!==l||r[37]!==d||r[38]!==S.diffLines||r[39]!==S.diffSize||r[40]!==S.helpUrl||r[41]!==S.isBinary||r[42]!==S.isSubmodule||r[43]!==S.isTooBig||r[44]!==S.linesAdded||r[45]!==S.linesChanged||r[46]!==S.linesDeleted||r[47]!==S.newCommitOid||r[48]!==S.newTreeEntry||r[49]!==S.objectId||r[50]!==S.oldCommitOid||r[51]!==S.oldTreeEntry||r[52]!==S.path||r[53]!==S.pathDigest||r[54]!==S.richDiff||r[55]!==S.status||r[56]!==S.submodule||r[57]!==S.truncatedReason||r[58]!==u||r[59]!==m||r[60]!==h||r[61]!==p||r[62]!==j||r[63]!==w||r[64]!==E||r[65]!==R?(a=(0,o.jsx)(ab,{basePath:l,changeType:S.status,currentUser:d,diffLines:S.diffLines,diffManuallyExpanded:u,diffSize:S.diffSize,headBranchName:m,headRepoName:h,headRepoOwner:p,helpUrl:S.helpUrl,isBinary:S.isBinary,isSelected:E,isSubmodule:S.isSubmodule,isTooBig:S.isTooBig,linesAdded:S.linesAdded,linesChanged:S.linesChanged,linesDeleted:S.linesDeleted,newCommitOid:S.newCommitOid,newTreeEntry:S.newTreeEntry,objectId:S.objectId,oldCommitOid:S.oldCommitOid,oldTreeEntry:S.oldTreeEntry,path:S.path,pathDigest:S.pathDigest,pullRequestGlobalRelayId:j,repository:w,reviewed:R,richDiff:S.richDiff,status:S.status,submodule:S.submodule,truncatedReason:S.truncatedReason}),r[36]=l,r[37]=d,r[38]=S.diffLines,r[39]=S.diffSize,r[40]=S.helpUrl,r[41]=S.isBinary,r[42]=S.isSubmodule,r[43]=S.isTooBig,r[44]=S.linesAdded,r[45]=S.linesChanged,r[46]=S.linesDeleted,r[47]=S.newCommitOid,r[48]=S.newTreeEntry,r[49]=S.objectId,r[50]=S.oldCommitOid,r[51]=S.oldTreeEntry,r[52]=S.path,r[53]=S.pathDigest,r[54]=S.richDiff,r[55]=S.status,r[56]=S.submodule,r[57]=S.truncatedReason,r[58]=u,r[59]=m,r[60]=h,r[61]=p,r[62]=j,r[63]=w,r[64]=E,r[65]=R,r[66]=a):a=r[66],r[67]!==i||r[68]!==a?(s=(0,o.jsx)(D.t,{fallback:i,children:a}),r[67]=i,r[68]=a,r[69]=s):s=r[69],s}(e):function({basePath:e,currentUser:t,diffManuallyExpanded:n,headBranchName:i,headRepoName:a,headRepoOwner:s,isSelected:r,isSelectingLineOrRange:l=!1,onScrollToAndFocusEntry:d,progressiveDiffEntry:c,pullRequestGlobalRelayId:u,repository:m,testRenderFn:h}){let p=(0,k.jT)(c.path),g=(0,k.Fm)(c.path),y=(0,k.j5)();h&&h();let x=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{if(!x.current){if(!x.current&&void 0===r){let e=f.fV.hash??"",t=(0,n5.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==c.pathDigest&&(x.current=!0)}if(r&&"HIDE"!==c.renderMode&&(!l||"RENDER"===c.renderMode)){let e=f.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;x.current=!0,d(c.pathDigest)}}},[r,l,d,c.pathDigest,c.renderMode]),"HIDE"===c.renderMode||"LAZY_AUTO_LOAD"===c.renderMode||"EAGER_AUTO_LOAD"===c.renderMode){let e=(0,o.jsx)(o.Fragment,{}),t=g?.linesChanged??5;return(g?.changeType==="REMOVED"||g?.changeType==="DELETED")&&(t=5),"HIDE"===c.renderMode?e=(0,o.jsx)(a$,{progressiveDiffEntry:c,approximateLineCount:t}):"LAZY_AUTO_LOAD"===c.renderMode?e=(0,o.jsx)(aF,{progressiveDiffEntry:c,approximateLineCount:t}):"EAGER_AUTO_LOAD"===c.renderMode&&(e=(0,o.jsx)(aM,{progressiveDiffEntry:c,approximateLineCount:t})),(0,o.jsxs)("div",{role:"region",id:`diff-${c.pathDigest}`,className:(0,v.$)(aN.A.diffTargetable,aN.A.diff),"data-targeted":r??!1,children:[(0,o.jsx)("div",{className:aN.A.diffHeaderWrapper,children:(0,o.jsx)(aS.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${c.pathDigest}`,canToggleRichDiff:!1,linesAdded:g?.linesAdded??0,linesChanged:g?.linesChanged??0,linesDeleted:g?.linesDeleted??0,newPath:c.path,patchStatus:"",path:c.path,onToggleExpandAllLines:ak.l,onToggleFileCollapsed:ak.l,onToggleDiffDisplay:ak.l,isInSingleFileMode:y})}),e]},`${c.pathDigest}_${c.path}`)}return p?(0,o.jsx)(D.t,{fallback:(0,o.jsx)(a_,{...p}),children:(0,o.jsx)(ab,{basePath:e,changeType:p.status,currentUser:t,diffLines:p.diffLines,diffManuallyExpanded:n,diffSize:p.diffSize,headBranchName:i,headRepoName:a,headRepoOwner:s,helpUrl:p.helpUrl,isBinary:p.isBinary,isSelected:r??!1,isSubmodule:p.isSubmodule,isTooBig:p.isTooBig,linesAdded:p.linesAdded,linesChanged:p.linesChanged,linesDeleted:p.linesDeleted,newCommitOid:p.newCommitOid,newTreeEntry:p.newTreeEntry,objectId:p.objectId,oldCommitOid:p.oldCommitOid,oldTreeEntry:p.oldTreeEntry,path:p.path,pathDigest:p.pathDigest,pullRequestGlobalRelayId:u,repository:m,reviewed:p.reviewed??!1,richDiff:p.richDiff,status:p.status,submodule:p.submodule,truncatedReason:p.truncatedReason})}):(0,o.jsx)(a_,{linesAdded:0,linesChanged:0,linesDeleted:0,path:c.path,pathDigest:c.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}(e)}try{aB.displayName||(aB.displayName="ProgressivePullRequestDiffEntry")}catch{}try{aU.displayName||(aU.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}let aq="PullRequestDiffsAnimation-module__wrapper--j5QjR",aG="PullRequestDiffsAnimation-module__imageContainer--ISOgX",aH="PullRequestDiffsAnimation-module__image--MMHno",aK="PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",aW="PullRequestDiffsAnimation-module__animatedImage--yjDlC",az="PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y";var aQ=n(69895);let aZ=n.p+"mona-hifive-first-frame-0d428028d4d7.png",aJ=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",aY=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",aX=(0,d.Z6)()?()=>{let e,t,n,i,a,s,r,l,d=(0,c.c)(12),u=(0,aQ.j)(),m=(0,b.useRef)(null),h=(0,b.useRef)(null);d[0]!==u?(e=e=>{e?(e=>{let t;if(u)return;let n=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(t=setTimeout(()=>{i.target.style.display="none",m.current&&(m.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return h.current=n,n.observe(e),()=>{n.disconnect(),t&&clearTimeout(t)}})(e):h.current&&(h.current.disconnect(),h.current=null)},d[0]=u,d[1]=e):e=d[1];let f=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)("img",{src:aY,alt:"GIF of two octocats high fiving each other",className:(0,v.$)(aH,aW),ref:m}),d[2]=t):t=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)(aH,aK),d[3]=n):n=d[3],d[4]!==f?(i=(0,o.jsx)("img",{src:aZ,alt:"Two octocats",className:n,ref:f}),d[4]=f,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)("img",{src:aJ,alt:"Two octocats high fiving each other",className:(0,v.$)(aH,az)}),d[6]=a):a=d[6],d[7]!==i?(s=(0,o.jsxs)("div",{className:aG,children:[t,i,a]}),d[7]=i,d[8]=s):s=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"}),d[9]=r):r=d[9],d[10]!==s?(l=(0,o.jsxs)("div",{className:aq,children:[s,r]}),d[10]=s,d[11]=l):l=d[11],l}:()=>{let e=(0,aQ.j)(),t=(0,b.useRef)(null),n=(0,b.useRef)(null);return(0,o.jsxs)("div",{className:aq,children:[(0,o.jsxs)("div",{className:aG,children:[(0,o.jsx)("img",{src:aY,alt:"GIF of two octocats high fiving each other",className:(0,v.$)(aH,aW),ref:t}),(0,o.jsx)("img",{src:aZ,alt:"Two octocats",className:(0,v.$)(aH,aK),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,o.jsx)("img",{src:aJ,alt:"Two octocats high fiving each other",className:(0,v.$)(aH,az)})]}),(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},a0=(0,b.memo)(aX);try{aX.displayName||(aX.displayName="PullRequestDiffsAnimationComponent")}catch{}try{a0.displayName||(a0.displayName="PullRequestDiffsAnimation")}catch{}let a1=(0,b.memo)(a3),a2=(0,d.Z6)();function a3(e){return a2?function(e){let t,n,i,a,s,r=(0,c.c)(40),{basePath:l,currentUser:d,filteredDiffSummaries:u,headBranchName:m,headRepoName:h,headRepoOwner:f,onSetFilterState:p,pullRequestGlobalRelayId:g,repository:y,showPullRequestGroups:x}=e,[v]=(0,b.useState)(!1),_=(0,b.useRef)(null),j=(0,k.$W)(u),w=(0,k.JA)(),{onScrollToAndFocusEntry:N,getTargetableEntriesMap:C,selectedPathDigest:S,isSelectingLineOrRange:I}=aR(),L=(0,k.qg)(),T=j.length>=15;if(0===L){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aD,{}),r[0]=e):e=r[0],e}if(0===u.length){let e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aT,{}),r[1]=e):e=r[1],e}if(r[2]!==w||r[3]!==p||r[4]!==x?(t=x&&w?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(O.A,{href:"",onClick:e=>{e.preventDefault(),p({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",w.name]}),w.description?.trim()?(0,o.jsx)("p",{children:w.description}):null]}):null,r[2]=w,r[3]=p,r[4]=x,r[5]=t):t=r[5],r[6]!==l||r[7]!==d||r[8]!==j||r[9]!==v||r[10]!==C||r[11]!==m||r[12]!==h||r[13]!==f||r[14]!==I||r[15]!==N||r[16]!==g||r[17]!==y||r[18]!==S){let e;r[20]!==l||r[21]!==d||r[22]!==v||r[23]!==C||r[24]!==m||r[25]!==h||r[26]!==f||r[27]!==I||r[28]!==N||r[29]!==g||r[30]!==y||r[31]!==S?(e=e=>(0,o.jsx)("div",{ref:t=>{let n=C();t?n.set(e.pathDigest,t):n.delete(e.pathDigest)},children:(0,o.jsx)(aB,{basePath:l,currentUser:d,diffManuallyExpanded:v,headBranchName:m,headRepoName:h,headRepoOwner:f,pullRequestGlobalRelayId:g,isSelected:void 0===S?void 0:e.pathDigest===S,isSelectingLineOrRange:I,onScrollToAndFocusEntry:N,progressiveDiffEntry:e,repository:y})},e.pathDigest),r[20]=l,r[21]=d,r[22]=v,r[23]=C,r[24]=m,r[25]=h,r[26]=f,r[27]=I,r[28]=N,r[29]=g,r[30]=y,r[31]=S,r[32]=e):e=r[32],n=j.map(e),r[6]=l,r[7]=d,r[8]=j,r[9]=v,r[10]=C,r[11]=m,r[12]=h,r[13]=f,r[14]=I,r[15]=N,r[16]=g,r[17]=y,r[18]=S,r[19]=n}else n=r[19];return r[33]!==T?(i=T&&(0,o.jsx)(a0,{}),r[33]=T,r[34]=i):i=r[34],r[35]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(aI.nq,{}),r[35]=a):a=r[35],r[36]!==t||r[37]!==n||r[38]!==i?(s=(0,o.jsxs)("div",{ref:_,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[t,n,i,a]}),r[36]=t,r[37]=n,r[38]=i,r[39]=s):s=r[39],s}(e):function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:d,showPullRequestGroups:c}){let[u,m]=(0,b.useState)(!1),h=(0,b.useRef)(null),f=(0,k.$W)(n),p=(0,k.JA)(),{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:v}=aR(),_=(0,k.qg)(),j=f.length;return 0===_?(0,o.jsx)(aD,{}):0===n.length?(0,o.jsx)(aT,{}):(0,o.jsxs)("div",{ref:h,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[c&&p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(O.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",p.name]}),p.description?.trim()?(0,o.jsx)("p",{children:p.description}):null]}):null,f.map(n=>(0,o.jsx)("div",{ref:e=>{let t=y();e?t.set(n.pathDigest,e):t.delete(n.pathDigest)},children:(0,o.jsx)(aB,{basePath:e,currentUser:t,diffManuallyExpanded:u,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:l,isSelected:void 0===x?void 0:n.pathDigest===x,isSelectingLineOrRange:v,onScrollToAndFocusEntry:g,progressiveDiffEntry:n,repository:d})},n.pathDigest)),j>=15&&(0,o.jsx)(a0,{}),(0,o.jsx)(aI.nq,{})]})}(e)}try{a1.displayName||(a1.displayName="PullRequestDiffsList")}catch{}try{a3.displayName||(a3.displayName="PullRequestDiffsListUnmemoized")}catch{}var a4=n(51220);function a5({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:l,repository:d,showPullRequestGroups:c}){let[u,m]=(0,b.useState)(!1),h=(0,b.useRef)(null),[f,p]=(0,b.useState)(0),g=(0,k.$W)(n),y=(0,k.JA)(),{selectedPathDigest:x}=aR(),v=(0,k.qg)(),_=(0,k.l0)(),{loadMore:j}=(0,k.pV)(),w=(0,k.HZ)(),N=(0,k._M)(),C=g.length;(0,b.useEffect)(()=>{h.current&&p(h.current.offsetTop)},[]);let S=(0,a4.XW)({count:g.length,estimateSize:e=>{let n=g[e];if(!n)return 0;let i=_[n.path],a=5;return i?.linesChanged&&(a=i.linesChanged),("compact"===t.lineSpacing?20:25)*a+75},overscan:3,scrollMargin:f,gap:16}),I=S.getVirtualItems();return((0,b.useEffect)(()=>{let e,t=I.at(-1);if(t){if(t.index>=N-1){let n=g[t.index];n&&(e=requestIdleCallback(()=>j(n),{timeout:100}))}if(e)return()=>cancelIdleCallback(e)}},[I,g,j,N]),0===v)?(0,o.jsx)(aD,{}):0===n.length?(0,o.jsx)(aT,{}):(0,o.jsxs)("div",{ref:h,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[c&&y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(O.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",y.name]}),y.description?.trim()?(0,o.jsx)("p",{children:y.description}):null]}):null,(0,o.jsx)("div",{style:{height:`${S.getTotalSize()}px`,width:"100%",position:"relative"},children:I.map(n=>{let r=g[n.index];if(!r)return null;let c=n.index===g.length-1,m={position:"absolute",top:0,left:0,transform:`translateY(${n.start-S.options.scrollMargin}px)`,marginBottom:c?0:"16px"};if("NotLoaded"===r.loadingStatus){let e=_[r.path],t=5;return e?.linesChanged&&(t=e.linesChanged),(e?.changeType==="REMOVED"||e?.changeType==="DELETED")&&(t=5),(0,o.jsx)("div",{style:m,ref:S.measureElement,"data-index":n.index,children:(0,o.jsx)(aC,{ariaLabel:`Loading ${r.path}`,testId:`lazy-load-${r.path}`,id:`diff-${r.pathDigest}`,approximateLineCount:t})},n.key)}let h=w[r.path];return h?(0,o.jsx)("div",{style:m,ref:S.measureElement,"data-index":n.index,children:(0,o.jsx)(ab,{basePath:e,changeType:h.status,currentUser:t,diffLines:h.diffLines,diffManuallyExpanded:u,diffSize:h.diffSize,headerStickyOffset:-(n.start-S.options.scrollMargin),headBranchName:i,headRepoName:a,headRepoOwner:s,helpUrl:h.helpUrl,isBinary:h.isBinary,isSelected:void 0===x?void 0:h.pathDigest===x,isSubmodule:h.isSubmodule,isTooBig:h.isTooBig,linesAdded:h.linesAdded,linesChanged:h.linesChanged,linesDeleted:h.linesDeleted,newCommitOid:h.newCommitOid,newTreeEntry:h.newTreeEntry,objectId:h.objectId,oldCommitOid:h.oldCommitOid,oldTreeEntry:h.oldTreeEntry,path:h.path,pathDigest:h.pathDigest,pullRequestGlobalRelayId:l,repository:d,reviewed:h.reviewed??!1,richDiff:h.richDiff,status:h.status,submodule:h.submodule,truncatedReason:h.truncatedReason})},n.key):null})}),C>=15&&(0,o.jsx)(a0,{}),(0,o.jsx)(aI.nq,{})]})}try{a5.displayName||(a5.displayName="PullRequestVirtualizedDiffsList")}catch{}var a6=n(48926),a7=n(43147),a8=n(13071),a9=n(3536),se=n(68534);let st=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,b,_,j,w,N,S,I=(0,c.c)(74),{commit:k,pullRequest:L,commits:T,repository:E}=e;I[0]!==T?(t=void 0===T?[]:T,I[0]=T,I[1]=t):t=I[1];let D=t,{helpUrl:R}=(0,af.X)(),A=(0,C.Z)();e:{let e,t,i;if(0===D.length){let e;I[2]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},I[2]=e):e=I[2],n=e;break e}let a=k.oid,s=D.findIndex(e=>e.oid===a);if(-1===s){let e;I[3]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},I[3]=e):e=I[3],n=e;break e}let r=s>0?D[s-1]:null,l=s<D.length-1?D[s+1]:null,o=L?.number||0;if(I[4]!==l||I[5]!==r||I[6]!==E.name||I[7]!==E.ownerLogin||I[8]!==o){let n={owner:E.ownerLogin,repo:E.name,number:o};e=r?(0,eO.zLJ)({...n,head:r.oid}):null,t=l?(0,eO.zLJ)({...n,head:l.oid}):null,I[4]=l,I[5]=r,I[6]=E.name,I[7]=E.ownerLogin,I[8]=o,I[9]=e,I[10]=t}else e=I[9],t=I[10];let d=t;I[11]!==d||I[12]!==e?(i={prevCommitUrl:e,nextCommitUrl:d,canNavigate:!0},I[11]=d,I[12]=e,I[13]=i):i=I[13],n=i}let{prevCommitUrl:P,nextCommitUrl:F,canNavigate:M}=n,$=k.oid;I[14]!==$||I[15]!==E.name||I[16]!==E.ownerLogin?(i=(0,eO.$Qz)({owner:E.ownerLogin,repo:E.name,commitish:$}),I[14]=$,I[15]=E.name,I[16]=E.ownerLogin,I[17]=i):i=I[17];let B=(0,a9.I)(`${i}/deferred_commit_data`);return I[18]!==k.shortMessageMarkdown?(a=(0,o.jsx)(tn.JR,{html:k.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),I[18]=k.shortMessageMarkdown,I[19]=a):a=I[19],I[20]!==k.bodyMessageHtml?(s=k.bodyMessageHtml&&(0,o.jsx)(tn.JR,{html:k.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"}),I[20]=k.bodyMessageHtml,I[21]=s):s=I[21],I[22]!==a||I[23]!==s?(r=(0,o.jsxs)("div",{className:"flex-1",children:[a,s]}),I[22]=a,I[23]=s,I[24]=r):r=I[24],I[25]!==M||I[26]!==A||I[27]!==F||I[28]!==P?(l=M&&(0,o.jsxs)("div",{className:"d-flex",children:[P?(0,o.jsx)(H.K,{as:"button",onClick:()=>A(P),icon:G.ChevronLeftIcon,"aria-label":"Previous commit",size:"small",variant:"invisible"}):(0,o.jsx)(H.K,{as:"button",icon:G.ChevronLeftIcon,"aria-label":"Previous commit",size:"small",disabled:!0,variant:"invisible"}),F?(0,o.jsx)(H.K,{as:"button",onClick:()=>A(F),icon:G.ChevronRightIcon,"aria-label":"Next commit",size:"small",variant:"invisible"}):(0,o.jsx)(H.K,{as:"button",icon:G.ChevronRightIcon,"aria-label":"Next commit",size:"small",disabled:!0,variant:"invisible"})]}),I[25]=M,I[26]=A,I[27]=F,I[28]=P,I[29]=l):l=I[29],I[30]!==$||I[31]!==E?(d=(0,eO.IO9)({repo:E,action:"tree",commitish:$}),I[30]=$,I[31]=E,I[32]=d):d=I[32],I[33]!==d?(u=(0,o.jsx)(Z.Q,{as:O.A,href:d,leadingVisual:G.FileCodeIcon,size:"small",children:"Browse files"}),I[33]=d,I[34]=u):u=I[34],I[35]!==u||I[36]!==l?(m=(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 ml-2",children:[l,u]}),I[35]=u,I[36]=l,I[37]=m):m=I[37],I[38]!==m||I[39]!==r?(h=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[r,m]}),I[38]=m,I[39]=r,I[40]=h):h=I[40],I[41]===Symbol.for("react.memo_cache_sentinel")?(f={fontColor:"fg.default"},I[41]=f):f=I[41],I[42]!==k.oid||I[43]!==B||I[44]!==R||I[45]!==E?(p=(0,o.jsx)(a8.C,{deferredData:B,oid:k.oid,repo:E,helpUrl:R}),I[42]=k.oid,I[43]=B,I[44]=R,I[45]=E,I[46]=p):p=I[46],I[47]!==k||I[48]!==E||I[49]!==p?(g=(0,o.jsx)("div",{children:(0,o.jsx)(a6.j,{commit:k,repo:E,settings:f,textVariant:"muted",children:p})}),I[47]=k,I[48]=E,I[49]=p,I[50]=g):g=I[50],I[51]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)("span",{className:"color-fg-muted",children:"Commit"}),I[51]=y):y=I[51],I[52]!==$||I[53]!==E.name||I[54]!==E.ownerLogin?(x=(0,eO.$Qz)({owner:E.ownerLogin,repo:E.name,commitish:$}),I[52]=$,I[53]=E.name,I[54]=E.ownerLogin,I[55]=x):x=I[55],I[56]!==$?(v=(0,se.F)($),I[56]=$,I[57]=v):v=I[57],I[58]!==v?(b=(0,o.jsx)("code",{children:v}),I[58]=v,I[59]=b):b=I[59],I[60]!==x||I[61]!==b?(_=(0,o.jsx)(O.A,{href:x,className:"Link--primary",children:b}),I[60]=x,I[61]=b,I[62]=_):_=I[62],I[63]!==$?(j=(0,o.jsx)(a7.w,{sha:$,direction:"sw"}),I[63]=$,I[64]=j):j=I[64],I[65]!==_||I[66]!==j?(w=(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[y,_,j]}),I[65]=_,I[66]=j,I[67]=w):w=I[67],I[68]!==g||I[69]!==w?(N=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between p-3 f5",children:[g,w]}),I[68]=g,I[69]=w,I[70]=N):N=I[70],I[71]!==h||I[72]!==N?(S=(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[h,N]}),I[71]=h,I[72]=N,I[73]=S):S=I[73],S}:function({commit:e,pullRequest:t,commits:n=[],repository:i}){let{helpUrl:a}=(0,af.X)(),s=(0,C.Z)(),{prevCommitUrl:r,nextCommitUrl:l,canNavigate:d}=(0,b.useMemo)(()=>{if(0===n.length)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let a=e.oid,s=n.findIndex(e=>e.oid===a);if(-1===s)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let r=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null,o={owner:i.ownerLogin,repo:i.name,number:t?.number||0};return{prevCommitUrl:r?(0,eO.zLJ)({...o,head:r.oid}):null,nextCommitUrl:l?(0,eO.zLJ)({...o,head:l.oid}):null,canNavigate:!0}},[n,e,t,i]),c=e.oid,u=(0,a9.I)(`${(0,eO.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:c})}/deferred_commit_data`);return(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(tn.JR,{html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),e.bodyMessageHtml&&(0,o.jsx)(tn.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"})]}),(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 ml-2",children:[d&&(0,o.jsxs)("div",{className:"d-flex",children:[r?(0,o.jsx)(H.K,{as:"button",onClick:()=>s(r),icon:G.ChevronLeftIcon,"aria-label":"Previous commit",size:"small",variant:"invisible"}):(0,o.jsx)(H.K,{as:"button",icon:G.ChevronLeftIcon,"aria-label":"Previous commit",size:"small",disabled:!0,variant:"invisible"}),l?(0,o.jsx)(H.K,{as:"button",onClick:()=>s(l),icon:G.ChevronRightIcon,"aria-label":"Next commit",size:"small",variant:"invisible"}):(0,o.jsx)(H.K,{as:"button",icon:G.ChevronRightIcon,"aria-label":"Next commit",size:"small",disabled:!0,variant:"invisible"})]}),(0,o.jsx)(Z.Q,{as:O.A,href:(0,eO.IO9)({repo:i,action:"tree",commitish:c}),leadingVisual:G.FileCodeIcon,size:"small",children:"Browse files"})]})]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between p-3 f5",children:[(0,o.jsx)("div",{children:(0,o.jsx)(a6.j,{commit:e,repo:i,settings:{fontColor:"fg.default"},textVariant:"muted",children:(0,o.jsx)(a8.C,{deferredData:u,oid:e.oid,repo:i,helpUrl:a})})}),(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,o.jsx)("span",{className:"color-fg-muted",children:"Commit"}),(0,o.jsx)(O.A,{href:(0,eO.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:c}),className:"Link--primary",children:(0,o.jsx)("code",{children:(0,se.F)(c)})}),(0,o.jsx)(a7.w,{sha:c,direction:"sw"})]})]})]})};try{st.displayName||(st.displayName="PullRequestCommitHeader")}catch{}let sn=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(20),{basePath:s,baseSha:r,forceUnifiedView:l,headSha:d,initialData:u,treeCollapsedByDefault:m,treeEnableInlineCompactMode:h,userCanComment:p,useChangeGroups:g,useInlineComments:y,useEditOptions:x,useFileTree:v,useAdvancedToolbar:b,useBasicToolbar:_}=e,j=g??!1,w=y??!1,N=x??!1,C=v??!1,S=b??!1,I=_??!1,k=p??!0,L=l??!1,T=m??!1,E=h??!1;a[0]!==j||a[1]!==E||a[2]!==w||a[3]!==N||a[4]!==C||a[5]!==S||a[6]!==I||a[7]!==k||a[8]!==L||a[9]!==T?(t={useChangeGroups:j,useInlineComments:w,useEditOptions:N,useFileTree:C,useAdvancedToolbar:S,useBasicToolbar:I,userCanComment:k,forceUnifiedView:L,treeCollapsedByDefault:T,treeEnableInlineCompactMode:E},a[0]=j,a[1]=E,a[2]=w,a[3]=N,a[4]=C,a[5]=S,a[6]=I,a[7]=k,a[8]=L,a[9]=T,a[10]=t):t=a[10];let D=t,R=u?u.pullRequest.comparison.headOid:d,A=u?u.pullRequest.comparison.baseOid:r;if(!R)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let O=!u;a[11]!==s||a[12]!==A||a[13]!==R||a[14]!==O?(n={basePath:s,headSha:R,baseSha:A,shouldFetch:O},a[11]=s,a[12]=A,a[13]=R,a[14]=O,a[15]=n):n=a[15];let{data:P,isLoading:F}=iJ(n),M=u??P;return a[16]!==D||a[17]!==M||a[18]!==F?(i=(0,o.jsx)(o.Fragment,{children:M&&!F?(0,o.jsx)(iQ.Kg,{basePageDataUrl:M.pullRequest.pathName,children:(0,o.jsx)(eN.Dp,{baseRefOid:M.pullRequest.comparison.baseOid,path:f.fV.pathname??"",commits:M.commits,children:(0,o.jsx)(iW.v,{initData:M,children:(0,o.jsx)(si,{...M,configOpts:D})})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iH,children:(0,o.jsx)("div",{className:iK,children:(0,o.jsx)(aj.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aO,{lines:4}),(0,o.jsx)(aO,{lines:8}),(0,o.jsx)(aO,{lines:5})]})]})}),a[16]=D,a[17]=M,a[18]=F,a[19]=i):i=a[19],i}:function({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,treeCollapsedByDefault:s,treeEnableInlineCompactMode:r,userCanComment:l,useChangeGroups:d,useInlineComments:c,useEditOptions:u,useFileTree:m,useAdvancedToolbar:h,useBasicToolbar:p}){let g=(0,b.useMemo)(()=>({useChangeGroups:d??!1,useInlineComments:c??!1,useEditOptions:u??!1,useFileTree:m??!1,useAdvancedToolbar:h??!1,useBasicToolbar:p??!1,userCanComment:l??!0,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1,treeEnableInlineCompactMode:r??!1}),[d,c,u,m,h,p,l,n,s,r]),y=a?a.pullRequest.comparison.headOid:i,x=a?a.pullRequest.comparison.baseOid:t;if(!y)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:v,isLoading:_}=iJ({basePath:e,headSha:y,baseSha:x,shouldFetch:!a}),j=a??v;return(0,o.jsx)(o.Fragment,{children:j&&!_?(0,o.jsx)(iQ.Kg,{basePageDataUrl:j.pullRequest.pathName,children:(0,o.jsx)(eN.Dp,{baseRefOid:j.pullRequest.comparison.baseOid,path:f.fV.pathname??"",commits:j.commits,children:(0,o.jsx)(iW.v,{initData:j,children:(0,o.jsx)(si,{...j,configOpts:g})})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iH,children:(0,o.jsx)("div",{className:iK,children:(0,o.jsx)(aj.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(aO,{lines:4}),(0,o.jsx)(aO,{lines:8}),(0,o.jsx)(aO,{lines:5})]})]})})},si=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,f,_,j,w,N,C,S,T,E,D,R,A,O,P,F=(0,c.c)(111),{codeowners:M,commit:$,commits:B,configOpts:V,diffSummaries:U,fileFilter:q,pullRequest:G,repository:H,markers:K,pageLimits:W,urls:z,user:Q,isSingleFileMode:Z}=e;iL(K,U),(0,g.L)(!0);let J=sr(Q),Y=(0,no.u)("pull_request_files_virtualization");F[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:ss,onError:sa},F[0]=t):t=F[0];let{mutate:X}=(0,u.U)(t),{data:ee}=(0,m.ID)(J);F[1]!==ee?.commentsPreference||F[2]!==X?(n=()=>{X({commentsPreference:ee?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},F[1]=ee?.commentsPreference,F[2]=X,F[3]=n):n=F[3],ee?.commentsPreference;let et=n;ee?.commentsPreference,ee?.lineSpacing,ee?.splitPreference;let en=Q.currentUserAvatarUrl||"",ei=Q.currentUserLogin||"",ea=V.forceUnifiedView?"unified":ee?.splitPreference??"unified",es=V.useInlineComments??!1,er=V.useEditOptions??!1,el=ee?.lineSpacing??"relaxed",eo=V.userCanComment&&Q.canComment,ed=ee?.commentsPreference??"visible";F[4]!==ed||F[5]!==en||F[6]!==ei||F[7]!==ea||F[8]!==es||F[9]!==er||F[10]!==el||F[11]!==eo||F[12]!==Q.canApplySuggestion||F[13]!==Q.hasCopilotAccess||F[14]!==Q.tabSize?(i={avatarURL:en,login:ei,tabSize:Q.tabSize,splitPreference:ea,shouldDisplayComments:es,shouldDisplayEditOptions:er,lineSpacing:el,canComment:eo,canApplySuggestion:Q.canApplySuggestion,commentsPreference:ed,hasCopilotAccess:Q.hasCopilotAccess},F[4]=ed,F[5]=en,F[6]=ei,F[7]=ea,F[8]=es,F[9]=er,F[10]=el,F[11]=eo,F[12]=Q.canApplySuggestion,F[13]=Q.hasCopilotAccess,F[14]=Q.tabSize,F[15]=i):i=F[15];let ec=i,{splitPagePaneHidden:eu,treeViewState:em,treeToggleElement:eh,collapseMobileTree:ef}=i3(ek,Q.isFileTreeExpanded&&!V.treeCollapsedByDefault,V.treeEnableInlineCompactMode,ec);F[16]!==M||F[17]!==G.pathName?(a={basePath:G.pathName},M&&(a.initialData=M),F[16]=M,F[17]=G.pathName,F[18]=a):a=F[18];let{data:ep}=(0,I.dG)(a),{setCodeowners:eg}=(0,k.wh)();F[19]!==ep||F[20]!==eg?(s=()=>{eg(ep)},r=[ep,eg],F[19]=ep,F[20]=eg,F[21]=s,F[22]=r):(s=F[21],r=F[22]),(0,b.useEffect)(s,r);let ey=(0,k.qg)(),ex=(0,k.I8)(),{updateDiffFilter:ev}=(0,k.or)();F[23]!==q.initialState||F[24]!==ev?(l=()=>{ev({...q.initialState,unselectedFileExtensions:new Set(q.initialState.unselectedFileExtensions)})},d=[ev,q.initialState],F[23]=q.initialState,F[24]=ev,F[25]=l,F[26]=d):(l=F[25],d=F[26]),(0,b.useEffect)(l,d);let eb=(0,k.mU)();F[27]!==ev?(f=e=>{ev(e,!0)},F[27]=ev,F[28]=f):f=F[28];let e_=f;F[29]!==ef||F[30]!==em.compactMode?(_=()=>{"none"!==em.compactMode&&ef()},F[29]=ef,F[30]=em.compactMode,F[31]=_):_=F[31];let ej=_,ew="expanded"!==em.wideMode?"small":"medium";F[32]!==ec.login||F[33]!==ex||F[34]!==q.menuOptions||F[35]!==e_||F[36]!==G.pathName||F[37]!==ew?(j=(0,o.jsx)(L,{basePath:G.pathName,fileFilterMenuOptions:q.menuOptions,fileFilterState:ex,setFileFilterState:e_,viewerLogin:ec.login,filterSize:ew}),F[32]=ec.login,F[33]=ex,F[34]=q.menuOptions,F[35]=e_,F[36]=G.pathName,F[37]=ew,F[38]=j):j=F[38];let eN=j,eS=(0,k.gt)(),eI=U.length>0,eT=V.useChangeGroups&&eS&&eI;F[39]!==eT?(w={changeGroupsEnabled:eT},F[39]=eT,F[40]=w):w=F[40],i8(w);let{aliveChannel:eE,bannersData:eD}=(0,iz.o)();F[41]!==et?(N=(0,o.jsx)(p.ak,{commands:{"commit-diff-view:collapse-expand-comments":et}}),F[41]=et,F[42]=N):N=F[42],F[43]!==eN||F[44]!==eE||F[45]!==eT||F[46]!==eD||F[47]!==ef||F[48]!==B||F[49]!==V.useAdvancedToolbar||F[50]!==V.useBasicToolbar||F[51]!==ey||F[52]!==eb||F[53]!==ej||F[54]!==e_||F[55]!==W||F[56]!==G||F[57]!==H||F[58]!==eh||F[59]!==em.compactMode||F[60]!==em.wideMode||F[61]!==z||F[62]!==Q?(C=V.useAdvancedToolbar||V.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[V.useAdvancedToolbar&&(0,o.jsx)(iS,{changeGroupsPreferenceAvailable:eT,commits:B,currentUserLogin:Q.currentUserLogin,fileFilter:eN,isFileTreeExpanded:"expanded"===em.wideMode,lastReviewOid:Q.lastReviewOid,pageLimits:W,pullRequest:G,repository:H,shouldShowViewedFilesCount:Q.shouldShowViewedFilesCount,totalFilesCount:ey,treeToggleElement:eh,bannersData:eD,urls:z,user:Q,aliveChannel:eE}),V.useBasicToolbar&&(0,o.jsx)(iY,{fileFilter:eN,isFileTreeExpanded:"expanded"===em.wideMode,shouldShowViewedFilesCount:Q.shouldShowViewedFilesCount,totalFilesCount:ey,treeToggleElement:eh,userNotices:Q.userNotices}),"overlay"===em.compactMode&&(0,o.jsx)(y.l,{onClose:()=>ef(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(eL,{allowPullRequestGroups:eT,fileFilter:eN,filteredDiffs:eb,onFileSelected:ej,onSetFilterState:e_})})]}):null,F[43]=eN,F[44]=eE,F[45]=eT,F[46]=eD,F[47]=ef,F[48]=B,F[49]=V.useAdvancedToolbar,F[50]=V.useBasicToolbar,F[51]=ey,F[52]=eb,F[53]=ej,F[54]=e_,F[55]=W,F[56]=G,F[57]=H,F[58]=eh,F[59]=em.compactMode,F[60]=em.wideMode,F[61]=z,F[62]=Q,F[63]=C):C=F[63],F[64]!==eN||F[65]!==eT||F[66]!==V.useBasicToolbar||F[67]!==V.useFileTree||F[68]!==eb||F[69]!==ej||F[70]!==e_||F[71]!==eu||F[72]!==em.compactMode||F[73]!==em.wideMode?(S=V.useFileTree?(0,o.jsx)(x.O7.Pane,{position:"start",sticky:!0,offsetHeader:V.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,v.$)(iM,eu&&iR,"expanded"===em.wideMode&&i$,"collapsed"===em.wideMode&&iB,"none"===em.compactMode&&iV,"overlay"===em.compactMode&&iU,"inline"===em.compactMode&&iq,iO),divider:{regular:"inline"===em.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==em.compactMode,children:(0,o.jsx)(eL,{allowPullRequestGroups:eT,className:(0,v.$)(eC,iA),fileFilter:eN,filteredDiffs:eb,onFileSelected:ej,onSetFilterState:e_})}):null,F[64]=eN,F[65]=eT,F[66]=V.useBasicToolbar,F[67]=V.useFileTree,F[68]=eb,F[69]=ej,F[70]=e_,F[71]=eu,F[72]=em.compactMode,F[73]=em.wideMode,F[74]=S):S=F[74];let eR="inline"===em.compactMode;F[75]!==eR?(T={narrow:!1,regular:eR},F[75]=eR,F[76]=T):T=F[76];let eA="expanded"===em.wideMode&&i$;return F[77]!==eA?(E=(0,v.$)(iG,eA),F[77]=eA,F[78]=E):E=F[78],F[79]!==$||F[80]!==B||F[81]!==G||F[82]!==H?(D=$&&(0,o.jsx)(st,{commit:$,pullRequest:G,commits:B,repository:H}),F[79]=$,F[80]=B,F[81]=G,F[82]=H,F[83]=D):D=F[83],F[84]!==W||F[85]!==H||F[86]!==z?(R=(0,o.jsx)(eP,{pageLimits:W,repository:H,urls:z}),F[84]=W,F[85]=H,F[86]=z,F[87]=R):R=F[87],F[88]!==ec||F[89]!==eb||F[90]!==e_||F[91]!==Y||F[92]!==Z||F[93]!==G.globalRelayId||F[94]!==G.headBranch||F[95]!==G.headRepositoryName||F[96]!==G.headRepositoryOwnerLogin||F[97]!==G.pathName||F[98]!==H?(A=Y?(0,o.jsx)(a5,{basePath:G.pathName,currentUser:ec,headBranchName:G.headBranch,headRepoName:G.headRepositoryName,headRepoOwner:G.headRepositoryOwnerLogin,onSetFilterState:e_,pullRequestGlobalRelayId:G.globalRelayId,filteredDiffSummaries:eb,repository:H,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:Z?(0,o.jsx)(aA,{basePath:G.pathName,currentUser:ec,filteredDiffSummaries:eb,headBranchName:G.headBranch,headRepoName:G.headRepositoryName,headRepoOwner:G.headRepositoryOwnerLogin,pullRequestGlobalRelayId:G.globalRelayId,repository:H}):(0,o.jsx)(a1,{basePath:G.pathName,currentUser:ec,headBranchName:G.headBranch,headRepoName:G.headRepositoryName,headRepoOwner:G.headRepositoryOwnerLogin,onSetFilterState:e_,pullRequestGlobalRelayId:G.globalRelayId,filteredDiffSummaries:eb,repository:H,showPullRequestGroups:!0})}),F[88]=ec,F[89]=eb,F[90]=e_,F[91]=Y,F[92]=Z,F[93]=G.globalRelayId,F[94]=G.headBranch,F[95]=G.headRepositoryName,F[96]=G.headRepositoryOwnerLogin,F[97]=G.pathName,F[98]=H,F[99]=A):A=F[99],F[100]!==T||F[101]!==E||F[102]!==D||F[103]!==R||F[104]!==A?(O=(0,o.jsxs)(x.O7.Content,{as:"div",width:"full",hidden:T,padding:"none",className:E,children:[D,R,A]}),F[100]=T,F[101]=E,F[102]=D,F[103]=R,F[104]=A,F[105]=O):O=F[105],F[106]!==N||F[107]!==C||F[108]!==S||F[109]!==O?(P=(0,o.jsxs)(o.Fragment,{children:[N,C,S,O]}),F[106]=N,F[107]=C,F[108]=S,F[109]=O,F[110]=P):P=F[110],P}:function({codeowners:e,commit:t,commits:n,configOpts:i,diffSummaries:a,fileFilter:s,pullRequest:r,repository:l,markers:d,pageLimits:c,urls:f,user:_,isSingleFileMode:j}){iL(d,a),(0,g.L)(!0);let w=sr(_),N=(0,no.u)("pull_request_files_virtualization"),{mutate:C}=(0,u.U)({onSuccess:()=>{},onError:()=>{}}),{data:S}=(0,m.ID)(w),T=(0,b.useCallback)(()=>{C({commentsPreference:S?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},[S?.commentsPreference,C]),E=(0,b.useMemo)(()=>({avatarURL:_.currentUserAvatarUrl||"",login:_.currentUserLogin||"",tabSize:_.tabSize,splitPreference:i.forceUnifiedView?"unified":S?.splitPreference??"unified",shouldDisplayComments:i.useInlineComments??!1,shouldDisplayEditOptions:i.useEditOptions??!1,lineSpacing:S?.lineSpacing??"relaxed",canComment:i.userCanComment&&_.canComment,canApplySuggestion:_.canApplySuggestion,commentsPreference:S?.commentsPreference??"visible",hasCopilotAccess:_.hasCopilotAccess}),[i.forceUnifiedView,i.useEditOptions,i.useInlineComments,i.userCanComment,S?.commentsPreference,S?.lineSpacing,S?.splitPreference,_.canApplySuggestion,_.canComment,_.currentUserAvatarUrl,_.currentUserLogin,_.hasCopilotAccess,_.tabSize]),{splitPagePaneHidden:D,treeViewState:R,treeToggleElement:A,collapseMobileTree:O}=i3(ek,_.isFileTreeExpanded&&!i.treeCollapsedByDefault,i.treeEnableInlineCompactMode,E),P={basePath:r.pathName};e&&(P.initialData=e);let{data:F}=(0,I.dG)(P),{setCodeowners:M}=(0,k.wh)();(0,b.useEffect)(()=>{M(F)},[F,M]);let $=(0,k.qg)(),B=(0,k.I8)(),{updateDiffFilter:V}=(0,k.or)();(0,b.useEffect)(()=>{V({...s.initialState,unselectedFileExtensions:new Set(s.initialState.unselectedFileExtensions)})},[V,s.initialState]);let U=(0,k.mU)(),q=(0,b.useCallback)(e=>{V(e,!0)},[V]),G=(0,b.useCallback)(()=>{"none"!==R.compactMode&&O()},[O,R.compactMode]),H=(0,b.useMemo)(()=>(0,o.jsx)(L,{basePath:r.pathName,fileFilterMenuOptions:s.menuOptions,fileFilterState:B,setFileFilterState:q,viewerLogin:E.login,filterSize:"expanded"!==R.wideMode?"small":"medium"}),[r.pathName,s.menuOptions,B,q,E.login,R.wideMode]),K=(0,k.gt)(),W=a.length>0,z=i.useChangeGroups&&K&&W;i8({changeGroupsEnabled:z});let{aliveChannel:Q,bannersData:Z}=(0,iz.o)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.ak,{commands:{"commit-diff-view:collapse-expand-comments":T}}),i.useAdvancedToolbar||i.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[i.useAdvancedToolbar&&(0,o.jsx)(iS,{changeGroupsPreferenceAvailable:z,commits:n,currentUserLogin:_.currentUserLogin,fileFilter:H,isFileTreeExpanded:"expanded"===R.wideMode,lastReviewOid:_.lastReviewOid,pageLimits:c,pullRequest:r,repository:l,shouldShowViewedFilesCount:_.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:A,bannersData:Z,urls:f,user:_,aliveChannel:Q}),i.useBasicToolbar&&(0,o.jsx)(iY,{fileFilter:H,isFileTreeExpanded:"expanded"===R.wideMode,shouldShowViewedFilesCount:_.shouldShowViewedFilesCount,totalFilesCount:$,treeToggleElement:A,userNotices:_.userNotices}),"overlay"===R.compactMode&&(0,o.jsx)(y.l,{onClose:()=>O(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(eL,{allowPullRequestGroups:z,fileFilter:H,filteredDiffs:U,onFileSelected:G,onSetFilterState:q})})]}):null,i.useFileTree?(0,o.jsx)(x.O7.Pane,{position:"start",sticky:!0,offsetHeader:i.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,v.$)(iM,D&&iR,"expanded"===R.wideMode&&i$,"collapsed"===R.wideMode&&iB,"none"===R.compactMode&&iV,"overlay"===R.compactMode&&iU,"inline"===R.compactMode&&iq,iO),divider:{regular:"inline"===R.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==R.compactMode,children:(0,o.jsx)(eL,{allowPullRequestGroups:z,className:(0,v.$)(eC,iA),fileFilter:H,filteredDiffs:U,onFileSelected:G,onSetFilterState:q})}):null,(0,o.jsxs)(x.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:"inline"===R.compactMode},padding:"none",className:(0,v.$)(iG,"expanded"===R.wideMode&&i$),children:[t&&(0,o.jsx)(st,{commit:t,pullRequest:r,commits:n,repository:l}),(0,o.jsx)(eP,{pageLimits:c,repository:l,urls:f}),N?(0,o.jsx)(a5,{basePath:r.pathName,currentUser:E,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:q,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:U,repository:l,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:j?(0,o.jsx)(aA,{basePath:r.pathName,currentUser:E,filteredDiffSummaries:U,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,pullRequestGlobalRelayId:r.globalRelayId,repository:l}):(0,o.jsx)(a1,{basePath:r.pathName,currentUser:E,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:q,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:U,repository:l,showPullRequestGroups:!0})})]})]})};function sa(){}function ss(){}let sr=(0,d.Z6)()?function(e){let t,n=(0,c.c)(5),i=(0,m.C0)(e.viewSettings.splitPreference),a=(0,m.Qn)(e.viewSettings.hideWhitespace);return n[0]!==e.viewSettings.commentsPreference||n[1]!==e.viewSettings.lineSpacing||n[2]!==i||n[3]!==a?(t={hideWhitespace:a,splitPreference:i,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference},n[0]=e.viewSettings.commentsPreference,n[1]=e.viewSettings.lineSpacing,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}:function(e){let t=(0,m.C0)(e.viewSettings.splitPreference),n=(0,m.Qn)(e.viewSettings.hideWhitespace);return(0,b.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])},sl=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(7);return a[0]!==e.className?(t=(0,v.$)(iD,e.className),a[0]=e.className,a[1]=t):t=a[1],a[2]!==e.children?(n=(0,o.jsx)(x.O7,{children:e.children}),a[2]=e.children,a[3]=n):n=a[3],a[4]!==t||a[5]!==n?(i=(0,o.jsx)("div",{className:t,children:n}),a[4]=t,a[5]=n,a[6]=i):i=a[6],i}:function(e){return(0,o.jsx)("div",{className:(0,v.$)(iD,e.className),children:(0,o.jsx)(x.O7,{children:e.children})})},so=Object.assign({},{Container:sl,Header:x.O7.Header,Viewer:sn});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{sn.displayName||(sn.displayName="BaseDiffComparisonViewer")}catch{}try{si.displayName||(si.displayName="InternalDiffComparisonViewer")}catch{}try{(l=FilterFilterComponent).displayName||(l.displayName="FilterFilterComponent")}catch{}try{sl.displayName||(sl.displayName="Container")}catch{}try{so.displayName||(so.displayName="DiffComparisonViewer")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>r});var i=n(68273),a=n(21728),s=n(76648);let r=(0,i.Z6)()?function(){let e,t=(0,a.c)(7),n=(0,s.B)()??{};if(n&&"header"in n)return n.header;let{aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c}=n;return t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==o||t[4]!==d||t[5]!==c?(e={aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c},t[0]=i,t[1]=l,t[2]=r,t[3]=o,t[4]=d,t[5]=c,t[6]=e):e=t[6],e}:function(){let e=(0,s.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(21728),a=n(23967);function s(e){let t,n,s=(0,i.c)(7),{language:r,value:l}=e;s[0]!==r||s[1]!==l?(t=function({language:e,value:t}){var n,i;let s,r=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,r),indentWithTabs:"tab"===r,lineWrapping:(i=e,s=(0,a.vL)(i),s?.wrap??!1)}}({language:r,value:l}),s[0]=r,s[1]=l,s[2]=t):t=s[2];let o=t;return s[3]!==o.indentUnit||s[4]!==o.indentWithTabs||s[5]!==o.lineWrapping?(n={indentUnit:o.indentUnit,indentWithTabs:o.indentWithTabs,lineWrapping:o.lineWrapping},s[3]=o.indentUnit,s[4]=o.indentWithTabs,s[5]=o.lineWrapping,s[6]=n):n=s[6],n}},26410:(e,t,n)=>{n.d(t,{J:()=>v,F:()=>y});var i=n(74848),a=n(96540),s=n(39111),r=n(96459),l=n(96379),o=n(84268),d=n(19579),c=n(72511),u=n(5524),m=n(81960),h=n(11196),f=n(98755),p=n(38621),g=n(34164);function y(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:f,sshUrl:g,sshCertificatesRequired:y,sshCertificatesAvailable:b,ghCliUrl:_,newSshKeyUrl:j,setProtocolPath:w}=e.protocolInfo,{defaultProtocol:N}=e.protocolInfo,[C,S]=(0,a.useState)(N),[I,k]=(0,a.useState)(""),{cloneUrl:L,visualStudioCloneUrl:T,showVisualStudioCloneButton:E,showXcodeCloneButton:D,xcodeCloneUrl:R,zipballUrl:A}=e.platformInfo,O=(0,s.X)(["windows","mac"]),P=(0,s.X)(["mac"]),F=(0,r.Z)(),M="mt-2 fgColor-muted text-normal",$=(0,a.useCallback)(e=>{if(C!==e){S(e);let t=new FormData;t.set("protocol_selector",e),(0,l.DI)(w,{method:"post",body:t})}},[C,S,w]),B=(0,a.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>$("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>$("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>$("gh_cli")}),e},[t,$,n]),V=(0,a.useMemo)(()=>{let e=[];return O&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:L,icon:p.DesktopDownloadIcon}),O&&E&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:T}),P&&D&&e.push({name:"xcode",text:"Open with Xcode",url:R}),e.push({name:"zip",text:"Download ZIP",url:A,icon:p.FileZipIcon}),e},[L,P,O,E,D,T,R,A]);return(0,i.jsx)("div",{children:"githubDesktop"===I?(0,i.jsx)(x,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===I?(0,i.jsx)(x,{platform:"Visual Studio"}):"xcode"===I?(0,i.jsx)(x,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(p.TerminalIcon,{className:"mr-2"}),(0,i.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,i.jsx)(h.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,i.jsx)(o.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,i.jsx)(p.QuestionIcon,{className:"mr-1"})})})]}),(0,i.jsx)(d.O,{"aria-label":"Remote URL selector",className:"LocalTab-module__UnderlineNav--epbgw",children:B.map(e=>(0,i.jsx)(d.O.Item,{"aria-current":C===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,i.jsx)("p",{className:M,children:"Clone using the web URL."})]}):"ssh"===C?(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsxs)(c.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,i.jsx)(o.A,{inline:!0,href:j,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,i.jsx)(v,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:g}),(0,i.jsx)("p",{className:M,children:y?"Use a password-protected SSH certificate.":b?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:_}),(0,i.jsxs)("p",{className:M,children:["Work fast with our official CLI."," ",(0,i.jsx)(o.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,i.jsx)(u.l,{variant:"inset",className:"border-top",children:V.map(e=>"zip"===e.name?(0,i.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name):(0,i.jsxs)(u.l.Item,{onSelect:t=>{k(e.name),t.preventDefault(),F(e.url)},children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function x({platform:e,href:t}){return(0,i.jsxs)("div",{className:(0,g.$)("p-3","LocalTab-module__PlatformContents--rz1GK"),children:[(0,i.jsx)(m.A,{as:"h4",variant:"small",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,i.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,i.jsx)(o.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function v({buttonAriaLabel:e="Copy URL to clipboard",inputId:t,inputLabel:n,url:a}){return(0,i.jsxs)("div",{className:(0,g.$)("d-flex mb-2","LocalTab-module__CloneContainer--fne3C"),children:[(0,i.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,i.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:a,readOnly:!0,style:{flexGrow:1}}),(0,i.jsx)(f.T,{className:(0,g.$)("ml-1 mr-0","LocalTab-module__CopyToClipboardButton--G8eJx"),textToCopy:a,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{y.displayName||(y.displayName="LocalTab")}catch{}try{x.displayName||(x.displayName="LaunchingPlatformContents")}catch{}try{v.displayName||(v.displayName="CloneUrl")}catch{}},26956:(e,t,n)=>{n.d(t,{Zf:()=>j});var i=n(74848),a=n(21728),s=n(82156),r=n(34164),l=n(96540);let o="ContentView-module__sectionGrid--unHY4";function d(e){let t,n,s,o,d,u,m=(0,a.c)(15),{children:h,width:f,noHeader:p}=e;if(m[0]!==h){for(let e of(t=[],n=[],l.Children.toArray(h)))l.isValidElement(e)&&e.type===c?t.push(e):n.push(e);m[0]=h,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[3]!==p?(s=(0,r.$)("ContentView-module__contentContainer--q5UcY",{"ContentView-module__noHeader--EociJ":p}),m[3]=p,m[4]=s):s=m[4];let g="small"===f,y="medium"===f;return m[5]!==g||m[6]!==y?(o=(0,r.$)("ContentView-module__content--kzPet",{"ContentView-module__small--r1fwP":g,"ContentView-module__medium--TcCTp":y}),m[5]=g,m[6]=y,m[7]=o):o=m[7],m[8]!==t||m[9]!==n||m[10]!==o?(d=(0,i.jsxs)("div",{className:o,children:[t,n]}),m[8]=t,m[9]=n,m[10]=o,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(u=(0,i.jsx)("div",{className:"ContentView-module__scrollContainer--_BylN",children:(0,i.jsx)("div",{className:s,children:d})}),m[12]=s,m[13]=d,m[14]=u):u=m[14],u}function c(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__banner--rgHMe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceHeader--DEEHs",children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ContentView-module__section--avH_l",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("section",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function h(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h1",{className:"ContentView-module__serviceTitle--PbOYe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("p",{className:"ContentView-module__serviceDescription--ZNDZz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function p(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceActions--IucKo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h2",{className:"ContentView-module__sectionTitle--MkQwz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__sectionGridEmpty--oxnzj",children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n,s,r=(0,a.c)(8),{children:d,loading:c}=e;if(void 0!==c&&c){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:o,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(_)}),r[0]=e):e=r[0],e}if(r[1]!==d){let e=l.Children.toArray(d);t=e.find(b),n=e.filter(v),r[1]=d,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,i.jsx)("div",{className:o,children:u}),r[6]=u,r[7]=s):s=r[7],s}function v(e){return!(l.isValidElement(e)&&e.type===y)}function b(e){return l.isValidElement(e)&&e.type===y}function _(e,t){return(0,i.jsx)(s.f,{className:"ContentView-module__skeletonCard--e4yHy"},t)}x.Empty=y,m.Title=g,m.Grid=x;let j={Title:h,Description:f,Actions:p,Container:d,Banner:c,Header:u,Section:m};j.displayName="ContentView",d.displayName="ContentView.Container",c.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",h.displayName="ContentView.Title",f.displayName="ContentView.Description",p.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",x.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},27011:(e,t,n)=>{n.d(t,{JA:()=>V,YL:()=>U,qL:()=>ea,wI:()=>B,gt:()=>Q,xW:()=>G,wL:()=>W,a_:()=>K,TV:()=>H,iY:()=>q,wh:()=>eo,kN:()=>ec,JR:()=>ed,L3:()=>x,yo:()=>v,HZ:()=>em,_M:()=>eh,$W:()=>ep,jT:()=>eu,QV:()=>ef,or:()=>ex,I8:()=>ey,l0:()=>C,Ud:()=>I,uh:()=>k,Fm:()=>L,qg:()=>S,mU:()=>T,GR:()=>O,SM:()=>X,it:()=>el,q6:()=>ev,j5:()=>b,RH:()=>eN,Fl:()=>z,Lh:()=>R,ne:()=>J,an:()=>ei,rP:()=>et,_N:()=>es,ys:()=>er,pV:()=>eg,mY:()=>E,Yp:()=>j,Kp:()=>w,r$:()=>_,GK:()=>N,zK:()=>A,mF:()=>P,m9:()=>D,WA:()=>Z,WK:()=>ej,xJ:()=>ew,Nk:()=>eC,_W:()=>ee,Qb:()=>en,BI:()=>Y,Mv:()=>eb,gi:()=>e_});var i=n(68273),a=n(21728),s=n(96540),r=n(70466),l=n(59914),o=n(70138),d=n(82603),c=n(71317),u=n(35311);let m="UNABLE_TO_GENERATE",h="NOT_GENERATED_YET";var f=n(69599);let p=[],g=[],y={threads:p,annotations:g},x=(0,i.Z6)()?()=>(0,o.n)(eS):()=>(0,o.n)(e=>e.comparisonInfo),v=(0,i.Z6)()?()=>(0,o.n)(eI):()=>(0,o.n)(e=>e.comparisonInfoActions),b=(0,i.Z6)()?()=>(0,o.n)(ek):()=>(0,o.n)(e=>e.isSingleFileMode),_=(0,i.Z6)()?()=>(0,o.n)(eL):()=>(0,o.n)(e=>e.pullRequest.id),j=(0,i.Z6)()?()=>(0,o.n)(eT):()=>(0,o.n)(e=>e.pullRequest),w=(0,i.Z6)()?()=>(0,o.n)(eE):()=>(0,o.n)(e=>e.pullRequest.basePath);(0,i.Z6)()||(()=>(0,o.n)(e=>e.pullRequestActions));let N=(0,i.Z6)()?()=>(0,o.n)(eD):()=>(0,o.n)(e=>e.repository),C=(0,i.Z6)()?()=>(0,o.n)(eR):()=>(0,o.n)(e=>e.diffSummaries),S=(0,i.Z6)()?()=>(0,o.n)(eA):()=>(0,o.n)(e=>Object.values(e.diffSummaries).length??0),I=(0,i.Z6)()?()=>(0,o.n)(eO):()=>(0,o.n)(e=>e.diffSummariesActions);(0,i.Z6)()||(()=>(0,o.n)((0,l.k)(e=>Object.values(e.diffSummaries).map(e=>e.path))));let k=(0,i.Z6)()?()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=$([eP],eF,r.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)($([e=>e.diffSummaries],e=>Object.values(e),r.x)),L=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffSummaries[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffSummaries[e]);(0,i.Z6)(),()=>F().hiddenFiles;let T=((0,i.Z6)(),()=>F().filteredDiffSummaries),E=(0,i.Z6)()?()=>(0,o.n)(eM):()=>(0,o.n)(e=>e.entries),D=(0,i.Z6)()?()=>(0,o.n)(e$):()=>(0,o.n)(e=>e.selectedPathDigest);(0,i.Z6)()||(()=>(0,o.n)(e=>e.progressiveDiffsActions.updateSelectedPathDigest));let R=(0,i.Z6)()?()=>(0,o.n)(eB):()=>(0,o.n)(e=>e.markerAndDiffNavigationActions),A=(0,i.Z6)()?()=>(0,o.n)(eV):()=>(0,o.n)(e=>e.markerAndDiffNavigation.commentId);(0,i.Z6)()||(()=>(0,o.n)(e=>e.markerAndDiffNavigation.getCommentId));let O=(0,i.Z6)()?()=>(0,o.n)(eU):()=>(0,o.n)(e=>e.markerAndDiffNavigation.getMarkerId),P=(0,i.Z6)()?()=>(0,o.n)(eq):()=>(0,o.n)(e=>e.markerAndDiffNavigation.markerId),F=(0,i.Z6)()?()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=$([eG,eH,eK,eW,ez],eQ,r.x),t[0]=e):e=t[0],(0,o.n)(e)}:()=>(0,o.n)($([e=>e.diffSummaries,e=>e.codeowners,e=>e.diffFilter.state,e=>e.diffFilter.filtersInteractedWith,e=>e.changeGroupGeneration.changeGroups],(e,t,n,i,a)=>{let s=new Map,r=[],l=a.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;M(i,n,e,o)?(r.push(i),s.set(i.path,!1)):s.set(i.path,!0)}if(i){let e=r.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:s,filteredDiffSummaries:r}},r.x));function M(e,t,n,i){return(!i||!!i.has(e.path))&&e.path.toLowerCase().includes(t.filterText.toLowerCase())&&!t.unselectedFileExtensions.has((0,u.QC)(e.path))&&(t.showDeletedFiles||"REMOVED"!==e.changeType&&"DELETED"!==e.changeType)&&(!t.showOnlyManifestFiles||!!e.isManifestFile)&&(!t.showOnlyOwnedFiles||n)&&(t.showViewedFiles||!e.markedAsViewed)&&(t.showVendoredFiles||!e.isVendored)}function $(e,t,n){let i,a;return s=>{let r=e.map(e=>e(s));if(i&&n(r,i))return a;let l=t(...r);return i=r,a=l,l}}let B=(0,i.Z6)()?()=>(0,o.n)((0,l.k)(eY)):()=>(0,o.n)((0,l.k)(e=>Object.values(e.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??g)))),V=(0,i.Z6)()?()=>(0,o.n)(eX):()=>(0,o.n)(e=>{let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}),U=(0,i.Z6)()?()=>(0,o.n)(e0):()=>(0,o.n)(e=>e.diffFilter.state.activeChangeGroupId),q=(0,i.Z6)()?()=>(0,o.n)(e1):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroups),G=(0,i.Z6)()?()=>(0,o.n)(e2):()=>(0,o.n)(e=>e.changeGroupGeneration),H=(0,i.Z6)()?()=>(0,o.n)(e3):()=>(0,o.n)(e=>e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null),K=(0,i.Z6)()?()=>(0,o.n)(e4):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroupGenerationChannel),W=(0,i.Z6)()?()=>(0,o.n)(e5):()=>(0,o.n)(e=>e.changeGroupGenerationActions),z=(0,i.Z6)()?()=>(0,o.n)(e6):()=>(0,o.n)(e=>e.changeGroupGeneration.latestChangeGroupOrchestration),Q=(0,i.Z6)()?()=>(0,o.n)(e7):()=>(0,o.n)(e=>e.changeGroupGeneration.canAccessChangeGroups),Z=(0,i.Z6)()?()=>(0,o.n)(e8):()=>(0,o.n)(e=>e.showChangeGroupPreference),J=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.markers?.[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>t.markers?.[e])),Y=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(te),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i},n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??p)),i=[];if(!e)return n;for(let t of e)if(n){for(let e of n)if(Number(e.id)===t){i.push(e);break}}return i})),X=(0,i.Z6)()?()=>(0,o.n)(tt):()=>(0,o.n)(e=>e.getThread),ee=(0,i.Z6)()?(e,t,n)=>{let i,s=(0,a.c)(4);return s[0]!==t||s[1]!==n||s[2]!==e?(i=i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e),s[0]=t,s[1]=n,s[2]=e,s[3]=i):i=s[3],(0,o.n)(i)}:(e,t,n)=>(0,o.n)(i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e)),et=(0,i.Z6)()?(e,t)=>{let n,i=(0,a.c)(3);return i[0]!==e||i[1]!==t?(n=$([n=>n.markers?.[e]?.[t]],tn,r.x),i[0]=e,i[1]=t,i[2]=n):n=i[2],(0,o.n)(n)}:(e,t)=>(0,o.n)($([n=>n.markers?.[e]?.[t]],e=>{let t=e?.threads??p,n=e?.annotations??g;return t.length||n.length?{threads:t,annotations:n}:y},r.x)),en=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=Object.values(t.markers||{}).flatMap(ta).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(ts).reduce(tr,0):0},n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>{let n=Object.values(t.markers||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??p)).filter(t=>t&&(!e||e.includes(parseInt(t.id))));return n?n.filter(e=>!e.isResolved&&!e.positioning?.isOutdated).reduce((e,t)=>e+(t.commentsData?.comments?.length??0),0):0}),ei=(0,i.Z6)()?()=>(0,o.n)(tl):()=>(0,o.n)(e=>e.markersActions),ea=(0,i.Z6)()?()=>(0,o.n)(to):()=>(0,o.n)(e=>e.markers),es=(0,i.Z6)()?()=>(0,o.n)(td):()=>(0,o.n)(e=>e.pendingReviewActions),er=(0,i.Z6)()?()=>(0,o.n)(tc):()=>(0,o.n)(e=>e.pendingReview),el=(0,i.Z6)()?()=>(0,o.n)(tu):()=>(0,o.n)(e=>(e.pendingReview?.pendingReviewIDs?.length??0)>0),eo=(0,i.Z6)()?()=>(0,o.n)(tm):()=>(0,o.n)(e=>e.codeownersActions),ed=(0,i.Z6)()?()=>(0,o.n)(th):()=>(0,o.n)(e=>e.filesCollapsedStatusActions),ec=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.collapsedFilesMap?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.collapsedFilesMap?.[e]??!1),eu=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffEntries?.[e]??null,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffEntries?.[e]??null),em=(0,i.Z6)()?()=>(0,o.n)(tf):()=>(0,o.n)(e=>e.diffEntries),eh=(0,i.Z6)()?()=>(0,o.n)(tp):()=>(0,o.n)(e=>Object.keys(e.diffEntries).length),ef=(0,i.Z6)()?()=>(0,o.n)(tg):()=>(0,o.n)(e=>e.diffEntriesActions),ep=(0,i.Z6)()?e=>{let t,n,i=(0,a.c)(4);i[0]!==e?(t=new Set(e.map(ty)),i[0]=e,i[1]=t):t=i[1];let s=t;return i[2]!==s?(n=e=>e.entries.filter(e=>s.has(e.path)),i[2]=s,i[3]=n):n=i[3],(0,o.n)((0,l.k)(n))}:e=>{let t=(0,s.useMemo)(()=>new Set(e.map(e=>e.path)),[e]);return(0,o.n)((0,l.k)(e=>e.entries.filter(e=>t.has(e.path))))},eg=(0,i.Z6)()?()=>(0,o.n)(tx):()=>(0,o.n)(e=>e.progressiveDiffsActions),ey=(0,i.Z6)()?()=>(0,o.n)(tv):()=>(0,o.n)(e=>e.diffFilter.state),ex=(0,i.Z6)()?()=>(0,o.n)(tb):()=>(0,o.n)(e=>e.diffFilterActions),ev=(0,i.Z6)()?()=>(0,o.n)(t_):()=>(0,o.n)(e=>{let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}),eb=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.summariesViewedStatus?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.summariesViewedStatus?.[e]??!1),e_=(0,i.Z6)()?()=>(0,o.n)(tj):()=>(0,o.n)(e=>e.summariesViewedCount),ej=(0,i.Z6)()?()=>(0,o.n)(tw):()=>(0,o.n)(e=>e.suggestionBatch),ew=(0,i.Z6)()?()=>(0,o.n)(tN):()=>(0,o.n)(e=>e.suggestionBatchActions),eN=(0,i.Z6)()?()=>(0,o.n)(tC):()=>(0,o.n)(e=>e.suggestionBatch.isSuggestionBatchPending),eC=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex));function eS(e){return e.comparisonInfo}function eI(e){return e.comparisonInfoActions}function ek(e){return e.isSingleFileMode}function eL(e){return e.pullRequest.id}function eT(e){return e.pullRequest}function eE(e){return e.pullRequest.basePath}function eD(e){return e.repository}function eR(e){return e.diffSummaries}function eA(e){return Object.values(e.diffSummaries).length??0}function eO(e){return e.diffSummariesActions}function eP(e){return e.diffSummaries}function eF(e){return Object.values(e)}function eM(e){return e.entries}function e$(e){return e.selectedPathDigest}function eB(e){return e.markerAndDiffNavigationActions}function eV(e){return e.markerAndDiffNavigation.commentId}function eU(e){return e.markerAndDiffNavigation.getMarkerId}function eq(e){return e.markerAndDiffNavigation.markerId}function eG(e){return e.diffSummaries}function eH(e){return e.codeowners}function eK(e){return e.diffFilter.state}function eW(e){return e.diffFilter.filtersInteractedWith}function ez(e){return e.changeGroupGeneration.changeGroups}function eQ(e,t,n,i,a){let s=new Map,r=[],l=a.find(e=>e.id===n.activeChangeGroupId),o=l?.hunkPositions?new Set(Object.keys(l.hunkPositions)):void 0;for(let i of Object.values(e)){let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;M(i,n,e,o)?(r.push(i),s.set(i.path,!1)):s.set(i.path,!0)}if(i){let e=r.length,t=`${e} file${1===e?"":"s"} remain${1===e?"s":""}`;(0,c.k)(t,150)}return{hiddenFiles:s,filteredDiffSummaries:r}}function eZ(e){return e?.annotations??g}function eJ(e){return Object.values(e).flatMap(eZ)}function eY(e){return Object.values(e.markers||{}).flatMap(eJ)}function eX(e){let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}function e0(e){return e.diffFilter.state.activeChangeGroupId}function e1(e){return e.changeGroupGeneration.changeGroups}function e2(e){return e.changeGroupGeneration}function e3(e){return e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null}function e4(e){return e.changeGroupGeneration.changeGroupGenerationChannel}function e5(e){return e.changeGroupGenerationActions}function e6(e){return e.changeGroupGeneration.latestChangeGroupOrchestration}function e7(e){return e.changeGroupGeneration.canAccessChangeGroups}function e8(e){return e.showChangeGroupPreference}function e9(e){return e?.threads??p}function te(e){return Object.values(e).flatMap(e9)}function tt(e){return e.getThread}function tn(e){let t=e?.threads??p,n=e?.annotations??g;return t.length||n.length?{threads:t,annotations:n}:y}function ti(e){return e?.threads??p}function ta(e){return Object.values(e).flatMap(ti)}function ts(e){return!e.isResolved&&!e.positioning?.isOutdated}function tr(e,t){return e+(t.commentsData?.comments?.length??0)}function tl(e){return e.markersActions}function to(e){return e.markers}function td(e){return e.pendingReviewActions}function tc(e){return e.pendingReview}function tu(e){return(e.pendingReview?.pendingReviewIDs?.length??0)>0}function tm(e){return e.codeownersActions}function th(e){return e.filesCollapsedStatusActions}function tf(e){return e.diffEntries}function tp(e){return Object.keys(e.diffEntries).length}function tg(e){return e.diffEntriesActions}function ty(e){return e.path}function tx(e){return e.progressiveDiffsActions}function tv(e){return e.diffFilter.state}function tb(e){return e.diffFilterActions}function t_(e){let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}function tj(e){return e.summariesViewedCount}function tw(e){return e.suggestionBatch}function tN(e){return e.suggestionBatchActions}function tC(e){return e.suggestionBatch.isSuggestionBatchPending}},27912:(e,t,n)=>{n.d(t,{X:()=>I,P:()=>E});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),l=n(57919),o=n(69599),d=n(16070);let c="Layout-module__mainColumn--OFMVb",u="Layout-module__secondaryColumn--Ut9LZ",m="Header-module__column--ysX1b";var h=n(38621),f=n(26108),p=n(894);function g(){let e,t=(0,a.c)(2),{toggleSidebar:n}=(0,p.L)();return t[0]!==n?(e=(0,i.jsx)("div",{className:"SidebarToggle-module__sidebarToggleButton--NAVdU",children:(0,i.jsx)(f.K,{icon:h.ThreeBarsIcon,onClick:n,"aria-label":"Toggle sidebar"})}),t[0]=n,t[1]=e):e=t[1],e}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,r,l,o,d=(0,a.c)(10);return d[0]!==e?({children:t,className:n,...r}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r):(t=d[1],n=d[2],r=d[3]),d[4]!==n?(l=(0,s.$)(m,"Header-module__leftColumn--MghGY",n),d[4]=n,d[5]=l):l=d[5],d[6]!==t||d[7]!==r||d[8]!==l?(o=(0,i.jsx)("div",{className:l,...r,children:t}),d[6]=t,d[7]=r,d[8]=l,d[9]=o):o=d[9],o}function x(e){let t,n,r,l,o,d=(0,a.c)(10);return d[0]!==e?({children:t,className:n,...r}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r):(t=d[1],n=d[2],r=d[3]),d[4]!==n?(l=(0,s.$)(m,"Header-module__rightColumn--AckUb",n),d[4]=n,d[5]=l):l=d[5],d[6]!==t||d[7]!==r||d[8]!==l?(o=(0,i.jsx)("div",{className:l,...r,children:t}),d[6]=t,d[7]=r,d[8]=l,d[9]=o):o=d[9],o}function v(e){let t,n,r,o,d,c,u,m=(0,a.c)(20);m[0]!==e?({children:t,className:n,...r}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r):(t=m[1],n=m[2],r=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(o={leftColumn:y,rightColumn:x},m[4]=o):o=m[4];let[h]=(0,l.H)(t,o);if(h.leftColumn&&h.rightColumn){let e,t,a;return m[5]!==n?(e=(0,s.$)("Header-module__columnHeader--UxTKW",n),m[5]=n,m[6]=e):e=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(g,{}),m[7]=t):t=m[7],m[8]!==r||m[9]!==h.leftColumn||m[10]!==h.rightColumn||m[11]!==e?(a=(0,i.jsxs)("header",{className:e,...r,children:[t,h.leftColumn,h.rightColumn]}),m[8]=r,m[9]=h.leftColumn,m[10]=h.rightColumn,m[11]=e,m[12]=a):a=m[12],a}return m[13]!==n?(d=(0,s.$)("Header-module__header--tjtIT",n),m[13]=n,m[14]=d):d=m[14],m[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(g,{}),m[15]=c):c=m[15],m[16]!==t||m[17]!==r||m[18]!==d?(u=(0,i.jsxs)("header",{className:d,...r,children:[c,t]}),m[16]=t,m[17]=r,m[18]=d,m[19]=u):u=m[19],u}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{x.displayName||(x.displayName="HeaderRight")}catch{}try{v.displayName||(v.displayName="Header")}catch{}function b(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"HeaderToggleOnly-module__headerToggleOnly--wC7_E",children:(0,i.jsx)(g,{})}),t[0]=e):e=t[0],e}try{b.displayName||(b.displayName="HeaderToggleOnly")}catch{}var _=n(36523);function j(e){let t,n,l,o,d,c,u,m,p,g,y=(0,a.c)(29),{children:x,className:v,isVisible:b,isExpanded:j,sidebarRef:w,onToggle:N,"data-testid":C}=e,S=(0,_.L)(w),I=(0,r.useId)(),k=`${I}-copilot-navigation`;y[0]!==v||y[1]!==b?(t=(0,s.$)("Sidebar-module__container--onmDW",v,{"Sidebar-module__visible--NW0KW":b}),y[0]=v,y[1]=b,y[2]=t):t=y[2];let L=`${I}-copilot-navigation`;y[3]!==L?(n=(0,i.jsx)("h2",{id:L,className:"sr-only",children:"Copilot navigation"}),y[3]=L,y[4]=n):n=y[4],y[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("a",{href:"/",target:"_self",className:"Sidebar-module__githubLogo--qLZu3","aria-label":"GitHub homepage",children:(0,i.jsx)(h.MarkGithubIcon,{size:32})}),y[5]=l):l=y[5],y[6]!==N?(o=(0,i.jsx)(f.K,{icon:h.XIcon,variant:"invisible","aria-label":"Close sidebar",onClick:N,className:"Sidebar-module__toggleSidebarFloating--fQq3y"}),y[6]=N,y[7]=o):o=y[7],y[8]!==n||y[9]!==o?(d=(0,i.jsxs)("div",{className:"Sidebar-module__header--rIhJd",children:[n,l,o]}),y[8]=n,y[9]=o,y[10]=d):d=y[10],y[11]!==x||y[12]!==d?(c=(0,i.jsxs)("div",{className:"Sidebar-module__sidebar--u6QU6",children:[d,x]}),y[11]=x,y[12]=d,y[13]=c):c=y[13],y[14]!==j?(u=(0,s.$)("Sidebar-module__toggleSidebarVertical--_YU5M",{"Sidebar-module__isExpanded--TSJdT":j}),y[14]=j,y[15]=u):u=y[15];let T=b||j?"Condense sidebar":"Expand sidebar";return y[16]!==T?(m=(0,i.jsx)("span",{className:"sr-only",children:T}),y[16]=T,y[17]=m):m=y[17],y[18]!==N||y[19]!==m||y[20]!==u?(p=(0,i.jsx)("button",{className:u,onClick:N,tabIndex:-1,children:m}),y[18]=N,y[19]=m,y[20]=u,y[21]=p):p=y[21],y[22]!==C||y[23]!==S||y[24]!==k||y[25]!==p||y[26]!==t||y[27]!==c?(g=(0,i.jsxs)("aside",{"aria-labelledby":k,ref:S,className:t,"data-testid":C,children:[c,p]}),y[22]=C,y[23]=S,y[24]=k,y[25]=p,y[26]=t,y[27]=c,y[28]=g):g=y[28],g}try{j.displayName||(j.displayName="Sidebar")}catch{}function w(e){let t,n,r,l,o,d,c=(0,a.c)(16);if(c[0]!==e){let{children:i,className:a,onToggle:s,"data-testid":o,...d}=e;t=i,n=a,r=o,l=d,c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=l}else t=c[1],n=c[2],r=c[3],l=c[4];let{sidebarExpanded:u,sidebarVisible:m,toggleSidebar:h,sidebarRef:f}=(0,p.L)();return c[5]!==n?(o=(0,s.$)("Layout-module__sidebar--r6coV",n),c[5]=n,c[6]=o):o=c[6],c[7]!==t||c[8]!==r||c[9]!==l||c[10]!==u||c[11]!==f||c[12]!==m||c[13]!==o||c[14]!==h?(d=(0,i.jsx)(j,{className:o,isVisible:m,isExpanded:u,onToggle:h,sidebarRef:f,"data-testid":r,...l,children:t}),c[7]=t,c[8]=r,c[9]=l,c[10]=u,c[11]=f,c[12]=m,c[13]=o,c[14]=h,c[15]=d):d=c[15],d}function N(e){let t,n,r,l,o,d=(0,a.c)(11);d[0]!==e?({children:t,className:n,...r}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=r):(t=d[1],n=d[2],r=d[3]);let{mainColumn:m}=(0,p.L)(),h="left"===m?c:u;return d[4]!==n||d[5]!==h?(l=(0,s.$)("Layout-module__columnLeft--jY2aC",h,n),d[4]=n,d[5]=h,d[6]=l):l=d[6],d[7]!==t||d[8]!==r||d[9]!==l?(o=(0,i.jsx)("div",{className:l,"data-column-position":"left",...r,children:t}),d[7]=t,d[8]=r,d[9]=l,d[10]=o):o=d[10],o}function C(e){let t,n,r,l,o,d,m=(0,a.c)(13);m[0]!==e?({children:t,className:n,"data-testid":r,...l}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=l):(t=m[1],n=m[2],r=m[3],l=m[4]);let{mainColumn:h}=(0,p.L)(),f="right"===h?c:u;return m[5]!==n||m[6]!==f?(o=(0,s.$)("Layout-module__columnRight--WBwz7",f,n),m[5]=n,m[6]=f,m[7]=o):o=m[7],m[8]!==t||m[9]!==r||m[10]!==l||m[11]!==o?(d=(0,i.jsx)("div",{className:o,"data-testid":r,"data-column-position":"right",...l,children:t}),m[8]=t,m[9]=r,m[10]=l,m[11]=o,m[12]=d):d=m[12],d}function S(){let e,t=(0,a.c)(1);return(0,o.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"Layout-module__banner--b14up",children:(0,i.jsx)(d.Y0,{})}),t[0]=e):e=t[0],e):null}let I="(max-width: 1024px)",k="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function L(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(k);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function T(e){let t,n,o,d,c,u,m,h,f,g,_,j,T,E,D,R=(0,a.c)(30);R[0]!==e?({children:t,className:n,mainColumn:h,"data-testid":o,secondaryColumnState:m,resourcePanelState:u,faviconOverride:d,mobileSecondaryColumnDirection:f,...c}=e,R[0]=e,R[1]=t,R[2]=n,R[3]=o,R[4]=d,R[5]=c,R[6]=u,R[7]=m,R[8]=h,R[9]=f):(t=R[1],n=R[2],o=R[3],d=R[4],c=R[5],u=R[6],m=R[7],h=R[8],f=R[9]);let A=void 0===h?"left":h,O=void 0===f?"horizontal":f;R[10]===Symbol.for("react.memo_cache_sentinel")?(g={banner:S,header:v,sidebar:w,columnLeft:N,columnRight:C},R[10]=g):g=R[10];let[P]=(0,l.H)(t,g),F=function(e){if(!e||!(0,r.isValidElement)(e))return!1;let t=!1,n=!1,i=e.props.children;for(let e of r.Children.toArray(i))(0,r.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===x&&(n=!0));return t&&n}(P.header||null),M=!!P.columnLeft&&!P.columnRight||!P.columnLeft&&!!P.columnRight,$=!!P.columnLeft&&!!P.columnRight,B=!F&&!M,V=function(e,t,n){let i,s,l,o,d,c,u,m=(0,a.c)(27),[h,f]=(0,r.useState)(L),[p,g]=(0,r.useState)(!1),y=(0,r.useState)(!1),x=(0,r.useState)(!1),[v,b]=t??y,[_,j]=n??x;m[0]!==j||m[1]!==b?(i=e=>{e?(b(!1),j(!1)):g(!1)},m[0]=j,m[1]=b,m[2]=i):i=m[2];let w=function(e,t){let n,i,s,l=(0,a.c)(6);l[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,l[0]=e,l[1]=n):n=l[1];let[o,d]=(0,r.useState)(n);return l[2]!==t||l[3]!==e?(i=()=>{let n=window.matchMedia(e),i=e=>{d(e.matches),t&&t(e.matches)};return d(n.matches),n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},s=[e,t],l[2]=t,l[3]=e,l[4]=i,l[5]=s):(i=l[4],s=l[5]),(0,r.useEffect)(i,s),o}(I,i),N=(0,r.useRef)(null),C=(0,r.useRef)(null);m[3]!==w||m[4]!==h||m[5]!==p?(s=()=>{if(w)g(!p);else{let e=!h;f(e);if("undefined"!=typeof window)try{localStorage.setItem(k,JSON.stringify(e))}catch{}}},m[3]=w,m[4]=h,m[5]=p,m[6]=s):s=m[6];let S=s;m[7]!==v||m[8]!==j||m[9]!==b?(l=()=>{v&&j(!1),b(!v)},m[7]=v,m[8]=j,m[9]=b,m[10]=l):l=m[10];let T=l;m[11]!==_||m[12]!==j?(o=()=>{j(!_)},m[11]=_,m[12]=j,m[13]=o):o=m[13];let E=o;return m[14]!==p?(d=()=>{if(p&&C.current){let e=e=>{C.current&&!C.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},c=[p],m[14]=p,m[15]=d,m[16]=c):(d=m[15],c=m[16]),(0,r.useEffect)(d,c),m[17]!==w||m[18]!==e||m[19]!==_||m[20]!==v||m[21]!==h||m[22]!==p||m[23]!==E||m[24]!==T||m[25]!==S?(u={sidebarExpanded:h,sidebarVisible:p,toggleSidebar:S,secondaryColumnVisible:v,toggleSecondaryColumn:T,resourcePanelOpen:_,toggleResourcePanel:E,layoutBreakpoint:w,mainColumn:e,containerRef:N,sidebarRef:C},m[17]=w,m[18]=e,m[19]=_,m[20]=v,m[21]=h,m[22]=p,m[23]=E,m[24]=T,m[25]=S,m[26]=u):u=m[26],u}(A,m,u),{containerRef:U,secondaryColumnVisible:q,sidebarExpanded:G,resourcePanelOpen:H}=V,K=function(e,t){let n,i,s=(0,a.c)(6),[l,o]=(0,r.useState)(!1),d=(0,r.useRef)(void 0);return void 0!==s[0]||s[1]!==e.current?(n=()=>{if(!e.current)return;let t=new ResizeObserver(e=>{o(!0),d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{o(!1)},150)});return t.observe(e.current),()=>{t.disconnect(),d.current&&clearTimeout(d.current)}},s[0]=void 0,s[1]=e.current,s[2]=n):n=s[2],void 0!==s[3]||s[4]!==e?(i=[e,void 0],s[3]=void 0,s[4]=e,s[5]=i):i=s[5],(0,r.useEffect)(n,i),l}(U),W=p.M,z=(0,s.$)("Layout-module__container--qlyoa",B&&"Layout-module__panelView--l6qZ7",F&&"Layout-module__splitView--ldg6X",F&&"right"===A&&"Layout-module__mainColumnRight--Izd_P",q&&"Layout-module__secondaryColumnVisible--RdfK7",!q&&$&&"Layout-module__secondaryColumnHidden--y3gv6",H&&"Layout-module__resourcePanelOpen--vh9_8",M&&"Layout-module__monoView--z920C",!G&&"Layout-module__sidebarCondensed--m7Zsu",K&&"Layout-module__resizing--rf7h4","vertical"===O&&"Layout-module__verticalSecondaryColumn--O2DEP",n);return R[11]!==d?(_=d&&(0,i.jsx)("span",{"data-favicon-override":d,"data-testid":"favicon-override"}),R[11]=d,R[12]=_):_=R[12],R[13]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(S,{}),R[13]=j):j=R[13],R[14]!==P.header?(T=P.header||(0,i.jsx)(b,{}),R[14]=P.header,R[15]=T):T=R[15],R[16]!==U||R[17]!==o||R[18]!==c||R[19]!==P.columnLeft||R[20]!==P.columnRight||R[21]!==P.sidebar||R[22]!==z||R[23]!==_||R[24]!==T?(E=(0,i.jsxs)("div",{className:z,"data-testid":o,ref:U,...c,children:[_,j,P.sidebar,T,P.columnLeft,P.columnRight]}),R[16]=U,R[17]=o,R[18]=c,R[19]=P.columnLeft,R[20]=P.columnRight,R[21]=P.sidebar,R[22]=z,R[23]=_,R[24]=T,R[25]=E):E=R[25],R[26]!==V||R[27]!==W.Provider||R[28]!==E?(D=(0,i.jsx)(W.Provider,{value:V,children:E}),R[26]=V,R[27]=W.Provider,R[28]=E,R[29]=D):D=R[29],D}let E=Object.assign(T,{Banner:S,Sidebar:w,ColumnLeft:N,ColumnRight:C,Header:v,HeaderLeft:y,HeaderRight:x});try{w.displayName||(w.displayName="LayoutSidebar")}catch{}try{N.displayName||(N.displayName="ColumnLeft")}catch{}try{C.displayName||(C.displayName="ColumnRight")}catch{}try{S.displayName||(S.displayName="Banner")}catch{}try{I.displayName||(I.displayName="LAYOUT_BREAKPOINT")}catch{}try{T.displayName||(T.displayName="LayoutRoot")}catch{}try{E.displayName||(E.displayName="Layout")}catch{}},28177:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(74848),a=n(21728),s=n(38621);function r(e){let t,n=(0,a.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>C});var i=n(74848),a=n(21728),s=n(96540),r=n(34164),l=n(61526),o=n(40090);let d="ListBlock-module__list--YHbt4",c="ListBlock-module__item--xlbmd",u="ListBlock-module__itemContent--cacSg",m="ListBlock-module__itemClickable--AFcjc";function h(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__container--QbgMo",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function f(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__header--meKIf",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function p(e){let t,n,s,r,l=(0,a.c)(11);if(l[0]!==e?({children:t,loading:s,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=s):(t=l[1],n=l[2],s=l[3]),void 0!==s&&s){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(g),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,i.jsx)("ul",{className:d,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(r=(0,i.jsx)("ul",{className:d,...n,children:t}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r}function g(e,t){return(0,i.jsx)(v,{},t)}function y(e){let t,n,o,d=(0,a.c)(47),h=null,f=null,p=null,g=null,y=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===b?h=t:t.type===_?f=t:t.type===j?p=t:t.type===w?g=t:t.type===x&&(y=t));d[0]=e.children,d[1]=h,d[2]=f,d[3]=p,d[4]=g,d[5]=y}else h=d[1],f=d[2],p=d[3],g=d[4],y=d[5];d[6]!==p||d[7]!==h||d[8]!==g||d[9]!==f?(t=(0,i.jsxs)(i.Fragment,{children:[h,f,p,g]}),d[6]=p,d[7]=h,d[8]=g,d[9]=f,d[10]=t):t=d[10];let v=t;if("href"in e){let t,n,a,s,o,h;if(d[11]!==e?({href:t,isExternalLink:a,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=a):(t=d[12],n=d[13],a=d[14]),void 0!==a&&a){let e,a,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(u,m),d[15]=e):e=d[15],d[16]!==v||d[17]!==t||d[18]!==n?(a=(0,i.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:v}),d[16]=v,d[17]=t,d[18]=n,d[19]=a):a=d[19],d[20]!==y||d[21]!==a?(s=(0,i.jsxs)("li",{className:c,children:[a,y]}),d[20]=y,d[21]=a,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(u,m),d[23]=s):s=d[23],d[24]!==v||d[25]!==t||d[26]!==n?(o=(0,i.jsx)(l.N_,{...n,to:t,className:s,children:v}),d[24]=v,d[25]=t,d[26]=n,d[27]=o):o=d[27],d[28]!==y||d[29]!==o?(h=(0,i.jsxs)("li",{className:c,children:[o,y]}),d[28]=y,d[29]=o,d[30]=h):h=d[30],h}if("onClick"in e){let t,n,a,s,l;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.$)(u,m),d[34]=a):a=d[34],d[35]!==v||d[36]!==t||d[37]!==n?(s=(0,i.jsx)("button",{...n,className:a,onClick:t,children:v}),d[35]=v,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==y||d[40]!==s?(l=(0,i.jsxs)("li",{className:c,children:[s,y]}),d[39]=y,d[40]=s,d[41]=l):l=d[41],l}return d[42]!==v?(n=(0,i.jsx)("div",{className:u,children:v}),d[42]=v,d[43]=n):n=d[43],d[44]!==y||d[45]!==n?(o=(0,i.jsxs)("li",{className:c,children:[n,y]}),d[44]=y,d[45]=n,d[46]=o):o=d[46],o}function x(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__actions--LfUWo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c,children:(0,i.jsx)("div",{className:"ListBlock-module__skeletonItem--ZfJMT",children:(0,i.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function b(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__leadingVisual--tOjGr",children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h3",{className:"ListBlock-module__title--MZAST",children:s}),n[0]=s,n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__description--dTYnl",children:s}),n[0]=s,n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__metadata--gtl9k",children:s}),n[0]=s,n[1]=t):t=n[1],t}function N(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("li",{className:"ListBlock-module__emptyState--MymTD",children:s}),n[0]=s,n[1]=t):t=n[1],t}y.LeadingVisual=b,y.Title=_,y.Description=j,y.SecondaryDescription=w,y.Metadata=w,y.Actions=x,y.Skeleton=v;let C=h;C.Header=f,C.List=p,C.Item=y,C.EmptyState=N,C.displayName="ListBlock",f.displayName="ListBlock.Header",p.displayName="ListBlock.List",y.displayName="ListBlock.Item",b.displayName="ListBlock.Item.LeadingVisual",_.displayName="ListBlock.Item.Title",j.displayName="ListBlock.Item.Description",w.displayName="ListBlock.Item.Metadata",x.displayName="ListBlock.Item.Actions",v.displayName="ListBlock.Item.Skeleton",N.displayName="ListBlock.EmptyState";try{h.displayName||(h.displayName="ListBlock")}catch{}},31315:(e,t,n)=>{function i(e){return a(e)[0]}function a(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,a]=n.trim().split("=");e===i&&void 0!==a&&t.push({key:i,value:a})}return t}function s(e,t,n=null,i=!1,a="lax"){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let l="https:"===location.protocol?"; secure":"",o=n?`; expires=${n}`:"";!1===i&&(r=`.${r}`);try{document.cookie=`${e}=${t}; path=/; domain=${r}${o}${l}; samesite=${a}`}catch{}}function r(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let i=new Date(Date.now()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",s=`; expires=${i}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${s}${a}`}catch{}}n.d(t,{OR:()=>a,Ri:()=>i,TV:()=>s,Yj:()=>r})},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},31675:(e,t,n)=>{n.d(t,{A:()=>i});let i={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},33195:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(74848),a=n(68273),s=n(21728),r=n(46589),l=n(96540),o=n(34164);let d="PullRequestStateLabel-module__unlisted--pcrfP";var c=n(33578);let u=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(7),{className:l,state:u}=e,h=c.a[u];if(u===c.Q.Unlisted){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}),a[0]=e):e=a[0],e}a[1]!==l?(t=(0,o.$)("flex-self-start",l),a[1]=l,a[2]=t):t=a[2];let f=h.status;return a[3]!==h.description||a[4]!==t||a[5]!==f?(n=(0,i.jsx)(r.A,{className:t,status:f,children:h.description}),a[3]=h.description,a[4]=t,a[5]=f,a[6]=n):n=a[6],n}:function({className:e,state:t}){let n=(0,l.useMemo)(()=>c.a[t],[t]);return t===c.Q.Unlisted?(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}):(0,i.jsx)(r.A,{className:(0,o.$)("flex-self-start",e),status:n.status,children:n.description})},m=(0,a.Z6)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]}),t[0]=e):e=t[0],e}:function(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})};try{u.displayName||(u.displayName="PullRequestStateLabel")}catch{}try{m.displayName||(m.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(74848),a=n(21728),s=n(74807);function r(e){let t,n,r,l,o=(0,a.c)(8),{isRunning:d,messages:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},o[0]=t):t=o[0];let u=t,m=c||u,h=d?m.running:m.waiting,f=d?"thinking":"static";return o[1]!==f?(n=(0,i.jsx)(s.N,{animationType:f,loopAnimation:!0}),o[1]=f,o[2]=n):n=o[2],o[3]!==h?(r=(0,i.jsx)("div",{className:"RunningDisplay-module__text--nICc0",children:h}),o[3]=h,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(l=(0,i.jsxs)("div",{className:"RunningDisplay-module__container--dUZ8X",children:[n,r]}),o[5]=n,o[6]=r,o[7]=l):l=o[7],l}try{r.displayName||(r.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>u,f:()=>c});var i=n(68273),a=n(21728),s=n(65510),r=n(20622),l=n(53885),o=n(96379),d=n(50129);let c=(0,i.Z6)()?function(){let e,t=(0,a.c)(2),{basePageDataUrl:n}=(0,d.Yu)(),i=`basePageDataURL:${n}`;return t[0]!==i?(e=[r.uT.header,i],t[0]=i,t[1]=e):e=t[1],e}:function(){let{basePageDataUrl:e}=(0,d.Yu)();return[r.uT.header,`basePageDataURL:${e}`]},u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),d=(0,l.e)(r.uT.header),u=c();return i[0]!==d?(t=async()=>{let e=await (0,o.QJ)(d);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},i[0]=d,i[1]=t):t=i[1],i[2]!==e||i[3]!==u||i[4]!==t?(n={queryKey:u,queryFn:t,initialData:e,staleTime:1/0},i[2]=e,i[3]=u,i[4]=t,i[5]=n):n=i[5],(0,s.U)(n)}:function(e){let t=(0,l.e)(r.uT.header),n=c();return(0,s.U)({queryKey:n,queryFn:async()=>{let e=await (0,o.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>c,Y:()=>d});var i=n(21728),a=n(2635),s=n(33592),r=n(51213),l=n(72303),o=n(53419);function d(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==e||d[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,l.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",a=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:a,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=e,d[2]=u,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertToDraftIssue:m},d[4]=m,d[5]=n):n=d[5],n}function c(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==u||d[2]!==e?(t=async()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,l.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=u,d[2]=e,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertAllToDraftIssues:m},d[4]=m,d[5]=n):n=d[5],n}},35149:(e,t,n)=>{n.d(t,{KJ:()=>l,Ny:()=>r,s6:()=>o});var i=n(2635),a=n(73952),s=n(96540);function r(){let{messages:e}=(0,i.Pk)(),t=(0,a.B)(e);return(0,s.useMemo)(()=>t.flatMap(e=>e.mediaContent||[]),[t])}function l(e){let t=r();return e?o(e,t):""}function o(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}},36296:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(21728),a=n(8108),s=n(97665),r=n(93161),l=n(48057);function o(){let e,t=(0,i.c)(5),{mutateAsync:n}=(0,a.bB)(),{mutateAsync:o}=(0,a.e9)(),{mutateAsync:d}=(0,a._g)(),c=(0,s.jE)();return t[0]!==c||t[1]!==d||t[2]!==o||t[3]!==n?(e={createProgressHandler:(e,t)=>async i=>{switch(i.type){case"UPDATE_NODE_VALUE":await n({nodeID:i.nodeID,value:i.value,loopID:e,version:t});break;case"UPDATE_NODE_VALUE_PARTIAL":{let n=(0,l.wu)(e,t),a=c.getQueryData(n);if(a){let e={...a,nodes:{...a.nodes,[i.nodeID]:{...a.nodes[i.nodeID]??r.D,value:i.value}}};c.setQueryData(n,e)}break}case"UPDATE_NODE_ERROR":await o({nodeID:i.nodeID,error:i.error,loopID:e,version:t});break;case"SET_RUNNING":await d({nodeID:i.nodeID,loopID:e,version:t})}}},t[0]=c,t[1]=d,t[2]=o,t[3]=n,t[4]=e):e=t[4],e}},36472:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(13083),a=n(3038);function s({selectedLineRange:e,leftLines:t,rightLines:n}){let s=!!n,{startOrientation:r,endOrientation:l}=e,o=m(r).findIndex(t=>(0,a.a2)(t,e.startLineNumber,e.startOrientation)),d=m(l).findIndex(t=>(0,a.a2)(t,e.endLineNumber,e.endOrientation)),c=o>=0&&d>=0;function u(e){if(!c||(0,a.Po)(e))return!1;let t=m((0,i.XU)(e.type)).indexOf(e);return t>=o&&t<=d}function m(e){var a;return s&&"left"!==("string"==typeof(a=e)?a:(0,i.XU)(a.type))?n:t}let h=m("left").filter(e=>u(e));return{selectedRightLines:m("right").filter(e=>u(e)),selectedLeftLines:h}}},36729:(e,t,n)=>{n.d(t,{Vv:()=>a,Wr:()=>s,zW:()=>i});let i="FILE",a="empty-diff-line",s={Line:"line",Multiline:"multiline",File:"file"}},36903:(e,t,n)=>{n.d(t,{K3:()=>a,L2:()=>r,as:()=>s});var i=n(21728);function a(e){let t,n,a,s,r=(0,i.c)(12);if(r[0]!==e.language||r[1]!==e.value){let i,s,l=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),r[5]=i):i=r[5];let o=i;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=o.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(l),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=a}else t=r[2],n=r[3],a=r[4];return r[8]!==t||r[9]!==n||r[10]!==a?(s={linesOfCode:t,isPreviewable:n,size:a},r[8]=t,r[9]=n,r[10]=a,r[11]=s):s=r[11],s}function s(e){try{let t=e.replace(/#L\d+(-L\d+)?$/,""),n=new URL(t,window.location.origin);if(n.origin!==window.location.origin)return null;let i=n.pathname.split("/").filter(Boolean);if(i.length<4)return null;let a=i[0],s=i[1];if(!a||!s)return null;let r=i.slice(4).join("/");return{repoOwner:a,repoName:s,filePath:r}}catch{return null}}function r(e,t,n){return`${e} / ${t} / ${n.split("/").join(" / ")}`}},37193:(e,t,n)=>{n.d(t,{G:()=>ts,o:()=>tr});var i=n(74848),a=n(4817),s=n(96540),r=n(48881),l=n(85094),o=n(47970),d=n(21728),c=n(46665),u=n(26100),m=n(39876),h=n(51213),f=n(35247),p=n(23967),g=n(22072),y=n(53419),x=n(38621),v=n(69726),b=n(26108),_=n(34164),j=n(1747),w=n(36903);function N(e){let t,n,a,s=(0,d.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=a):a=s[3],a}try{N.displayName||(N.displayName="ExpandIcon")}catch{}let C="FileBlock-module__container--Dzsqa",S="FileBlock-module__header--AdNd3",I="FileBlock-module__language--hjnkp",k="FileBlock-module__name--PRLLi",L="FileBlock-module__previewCode--xp45Y",T="FileBlock-module__isClipped--g6E0E",E="FileBlock-module__expandIconContainer--re33w",D="FileBlock-module__insightsButtonContainer--QtzBn";function R(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function A(e){let t,n,l,o,A,P,F,M,$,B,V,U,q,G,H,K,W,z,Q,Z,J,Y,X,ee=(0,d.c)(97),{language:et,name:en,url:ei,code:ea,line:es,children:er,isClipped:el,isStreaming:eo,index:ed,startOffset:ec,endOffset:eu}=e,{message:em}=(0,c.V)();if(ee[0]!==en||ee[1]!==ei){let e=ei?(0,w.as)(ei):null;t=e?.repoOwner&&e?.repoName?(0,w.L2)(e.repoOwner,e.repoName,e.filePath):en,ee[0]=en,ee[1]=ei,ee[2]=t}else t=ee[2];let eh=t,{updateItem:ef,openItem:ep,openPreviewPane:eg,versionedItems:ey,getOpenItems:ex}=(0,j.xx)(),{messageIndex:ev,messageId:eb,messageTimestamp:e_,autoOpenPreviewPane:ej,markdown:ew,hasAutoOpenedPreviewPaneRef:eN,setHasAutoOpenedPreviewPane:eC}=(0,r.H)(),{name:eS}=(0,p.vL)(et),eI=`file:${en}`,ek=`${eI}#${ev}.${es}`,eL=!!ea;ee[3]!==eI||ee[4]!==ek||ee[5]!==ey?(n=(l=ey.get(eI)??[]).indexOf(ek),ee[3]=eI,ee[4]=ek,ee[5]=ey,ee[6]=n,ee[7]=l):(n=ee[6],l=ee[7]);let eT=n,eE=l.length>1&&-1!==eT?eT+1:null,eD=(0,s.useRef)(null);ee[8]!==em.references||ee[9]!==ei?(o=function(e,t){if(!f.W.fileBlockRefMatching||!e||!t)return;let n=R(e);return t.find(e=>R(e.url)===n)}(ei,em.references?.filter(O)),ee[8]=em.references,ee[9]=ei,ee[10]=o):o=ee[10];let eR=o;ee[11]!==eR||ee[12]!==ex||ee[13]!==ek||ee[14]!==ed||ee[15]!==ep||ee[16]!==eg?(A=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...f.W.fileBlockRefMatching?{isRepoFile:!!eR}:{}}),ep(ek,void 0===t||t||ex().length<1||0===ed),e&&eg(eD.current)},ee[11]=eR,ee[12]=ex,ee[13]=ek,ee[14]=ed,ee[15]=ep,ee[16]=eg,ee[17]=A):A=ee[17];let eA=A;ee[18]!==ea||ee[19]!==eR||ee[20]!==ek||ee[21]!==eo||ee[22]!==et||ee[23]!==ew||ee[24]!==eb||ee[25]!==e_||ee[26]!==en||ee[27]!==eL||ee[28]!==ef?(P=()=>{let e=ea?.trimEnd();eL&&eb!==h.Wp&&-1!==ew.indexOf(e)&&(f.W.fileBlockRefMatching?ef({messageId:eb,id:ek,language:et,name:en,value:ea,type:"file",timestamp:new Date(e_),isStreaming:eo,isUserEdited:!1,reference:(()=>{if(!eR)return;let e=function(e){if(!f.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(eR.url);return{type:"file",url:R(eR.url),path:eR.path,repoID:eR.repoID,repoOwner:e?.owner??eR.repoOwner??"",repoName:e?.name??eR.repoName??"",ref:eR.ref,commitOID:eR.commitOID}})()}):ef({messageId:eb,id:ek,language:et,name:en,value:ea,type:"file",timestamp:new Date(e_),isStreaming:eo,isUserEdited:!1}))},ee[18]=ea,ee[19]=eR,ee[20]=ek,ee[21]=eo,ee[22]=et,ee[23]=ew,ee[24]=eb,ee[25]=e_,ee[26]=en,ee[27]=eL,ee[28]=ef,ee[29]=P):P=ee[29],ee[30]!==ea||ee[31]!==eR||ee[32]!==ek||ee[33]!==ed||ee[34]!==eo||ee[35]!==et||ee[36]!==ew||ee[37]!==eb||ee[38]!==e_||ee[39]!==en||ee[40]!==eL||ee[41]!==ef||ee[42]!==ei?(F=[ea,et,eb,en,ei,ef,ek,eL,e_,eo,ew,eR,ed],ee[30]=ea,ee[31]=eR,ee[32]=ek,ee[33]=ed,ee[34]=eo,ee[35]=et,ee[36]=ew,ee[37]=eb,ee[38]=e_,ee[39]=en,ee[40]=eL,ee[41]=ef,ee[42]=ei,ee[43]=F):F=ee[43],(0,s.useEffect)(P,F),ee[44]!==ej||ee[45]!==eN||ee[46]!==eo||ee[47]!==eb||ee[48]!==eA||ee[49]!==eL||ee[50]!==eC?(M=()=>{eo&&eL&&eb!==h.Wp&&(eA(ej&&!eN.current,!1),eC(!0))},$=[eo,eL,eA,ej,eb,eN,eC],ee[44]=ej,ee[45]=eN,ee[46]=eo,ee[47]=eb,ee[48]=eA,ee[49]=eL,ee[50]=eC,ee[51]=M,ee[52]=$):(M=ee[51],$=ee[52]),(0,s.useEffect)(M,$);let[eO,eP]=(0,s.useState)(!1),{publicCodeReferences:eF,codeVulnerabilities:eM}=(0,m.R)(em.copilotAnnotations,ec,eu);ee[53]!==eA?(B=()=>eA(!0),ee[53]=eA,ee[54]=B):B=ee[54];let e$=`View file: ${en}`,eB=`chat-message-view-file-${en}`,eV=eo?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p.Yr.has(eS)?(0,i.jsx)(x.MarkdownIcon,{className:a.sX}):(0,i.jsx)(x.CodeIcon,{className:a.sX}),eU=f.W.copilotLinkableFilePaths?eh:en;ee[55]!==eU?(V=(0,i.jsx)("span",{className:k,children:eU}),ee[55]=eU,ee[56]=V):V=ee[56],ee[57]!==eE?(U=null!==eE&&(0,i.jsx)(u.g,{version:eE}),ee[57]=eE,ee[58]=U):U=ee[58],ee[59]!==I||ee[60]!==eV||ee[61]!==V||ee[62]!==U?(q=(0,i.jsxs)("div",{className:I,children:[eV,V,U]}),ee[59]=I,ee[60]=eV,ee[61]=V,ee[62]=U,ee[63]=q):q=ee[63],ee[64]===Symbol.for("react.memo_cache_sentinel")?(G=(0,i.jsx)("div",{className:E,children:(0,i.jsx)(N,{})}),ee[64]=G):G=ee[64],ee[65]!==S||ee[66]!==q?(H=(0,i.jsxs)("div",{className:S,children:[q,G]}),ee[65]=S,ee[66]=q,ee[67]=H):H=ee[67];let eq=el&&T;return ee[68]!==eq?(K=(0,_.$)(L,eq),ee[68]=eq,ee[69]=K):K=ee[69],ee[70]!==er?(W=(0,i.jsx)("code",{children:er}),ee[70]=er,ee[71]=W):W=ee[71],ee[72]!==K||ee[73]!==W?(z=(0,i.jsx)("pre",{className:K,"aria-hidden":!0,children:W}),ee[72]=K,ee[73]=W,ee[74]=z):z=ee[74],ee[75]!==C||ee[76]!==B||ee[77]!==e$||ee[78]!==eB||ee[79]!==H||ee[80]!==z?(Q=(0,i.jsxs)("button",{ref:eD,className:C,onClick:B,"aria-label":e$,"data-testid":eB,children:[H,z]}),ee[75]=C,ee[76]=B,ee[77]=e$,ee[78]=eB,ee[79]=H,ee[80]=z,ee[81]=Q):Q=ee[81],ee[82]!==eM||ee[83]!==eF.length||ee[84]!==eP?(Z=(eF.length>0||eM.length>0)&&(0,i.jsx)("div",{className:D,children:(0,i.jsx)(b.K,{variant:"invisible",size:"small",icon:x.ShieldIcon,"aria-label":"Code insights",onClick:()=>eP(!0)})}),ee[82]=eM,ee[83]=eF.length,ee[84]=eP,ee[85]=Z):Z=ee[85],ee[86]!==Q||ee[87]!==Z?(J=(0,i.jsxs)("div",{className:"position-relative",children:[Q,Z]}),ee[86]=Q,ee[87]=Z,ee[88]=J):J=ee[88],ee[89]!==eM||ee[90]!==eO||ee[91]!==eF||ee[92]!==eP?(Y=eO&&(0,i.jsx)(g.t,{publicCodeReferences:eF,codeVulnerabilities:eM,onClose:()=>eP(!1)}),ee[89]=eM,ee[90]=eO,ee[91]=eF,ee[92]=eP,ee[93]=Y):Y=ee[93],ee[94]!==J||ee[95]!==Y?(X=(0,i.jsxs)(i.Fragment,{children:[J,Y]}),ee[94]=J,ee[95]=Y,ee[96]=X):X=ee[96],X}function O(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{A.displayName||(A.displayName="FileBlock")}catch{}let P="data-fileblock-props",F=(0,l.F)(P),M=/^name=(?<name>[^\s]+)/,$=/^name=(?<name>[^\s]+)\n?/,B=/url=(?<url>[^\s]+)/,V={code:(e,t)=>{let n=(0,l.k)(e,P);return n?(0,i.jsx)(A,{...n,children:e.children}):t}};var U=n(50467);let q=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,l.F)(this.dataAttribute)}constructor(){(0,U._)(this,"transformMarkdown",e=>{(0,o.YR)(e,"code",e=>{let t,n=e.lang;if(!n)return;let i=(t=q.exec(e.meta??"")?.groups?.type??"").startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t;if(!i)return;let a={lang:n,type:i,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let s=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(s)},hChildren:[]}})}),(0,U._)(this,"transformHtml",e=>{(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,U._)(this,"reactComponents",{div:(e,t)=>{let n=(0,l.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var G=n(41682);let H=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(G.E,{...e})}};var K=n(10221);let W=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(K.m,{...e})}};var z=n(72534),Q=n(2635),Z=n(84268);function J(e){let t,n,a,l,o,c,u=(0,d.c)(28),{owner:m,repo:h,issueNumber:f,href:p,children:g}=e,{updateItem:x,openItem:v,openPreviewPane:b,items:_}=(0,j.xx)(),{messageId:w}=(0,r.H)(),N=(0,Q.A3)("messages"),C=(0,s.useRef)(null),S=Number(f),I=`issue:${m}/${h}/${S}`;u[0]!==I||u[1]!==_?(t=_.get(I),u[0]=I,u[1]=_,u[2]=t):t=u[2];let k=t;u[3]!==k?.name||u[4]!==w||u[5]!==N||u[6]!==S||u[7]!==m||u[8]!==h?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,l=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),o=l?.title;if(o)return o;let d=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),c=d?.data;return c?.title}(N,w,m,h,S)??k?.name??`Issue #${S}`,u[3]=k?.name,u[4]=w,u[5]=N,u[6]=S,u[7]=m,u[8]=h,u[9]=n):n=u[9];let L=n;return u[10]!==p||u[11]!==I||u[12]!==w||u[13]!==S||u[14]!==m||u[15]!==h||u[16]!==L||u[17]!==x?(a=()=>{m&&h&&x({messageId:w,name:L,number:S,owner:m,repo:h,id:I,href:p,type:"issue"})},l=[I,w,p,S,m,h,L,x],u[10]=p,u[11]=I,u[12]=w,u[13]=S,u[14]=m,u[15]=h,u[16]=L,u[17]=x,u[18]=a,u[19]=l):(a=u[18],l=u[19]),(0,s.useEffect)(a,l),u[20]!==I||u[21]!==v||u[22]!==b?(o=e=>{e.metaKey||e.ctrlKey||(v(I),b(C.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=I,u[21]=v,u[22]=b,u[23]=o):o=u[23],u[24]!==g||u[25]!==p||u[26]!==o?(c=(0,i.jsx)(Z.A,{ref:C,href:p,onClick:o,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=p,u[26]=o,u[27]=c):c=u[27],c}try{J.displayName||(J.displayName="IssueLinkBlock")}catch{}let Y="data-issuelink-props",X=(0,l.F)(Y),ee=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,et={span:(e,t)=>{let n=(0,l.k)(e,Y);return n?(0,i.jsx)(J,{...n}):t}};var en=n(69599),ei=n(77430),ea=n(10422),es=n(29731),er=n(62935),el=n(26607),eo=n(72538),ed=n(69497),ec=n(20382),eu=n(91865),em=n(93654),eh=n(97286);function ef(){return{}}function ep(){return[]}let eg="IssueListBlock-module__item--gmkkY",ey="IssueListBlock-module__content--bNFq8",ex="IssueListBlock-module__title--Di3wj",ev="IssueListBlock-module__description--Uf86U",eb="IssueListBlock-module__open--CQmwr",e_="IssueListBlock-module__draft--ymDJ6",ej="IssueListBlock-module__done--bWmcu",ew="IssueListBlock-module__closed--Iuz7v",eN=e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t};function eC(e){let t,n,a,s,r,l=(0,d.c)(8),{item:o,isStreaming:c}=e,u=o.author;return o.merged_at?(s=o.merged_at,r="Merged"):o.closed_at?(s=o.closed_at,r="Closed"):o.created_at&&(s=o.created_at,r="Opened"),l[0]!==s?(n=(t=s?new Date(s):null)&&isNaN(t.getTime()),l[0]=s,l[1]=t,l[2]=n):(t=l[1],n=l[2]),n&&(t=null),l[3]!==r||l[4]!==u||l[5]!==c||l[6]!==t?(a=u&&t||!c?(0,i.jsxs)("span",{className:ev,children:[u," ",u?r?.toLowerCase():r," ",t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(er.A,{date:t,format:"relative"})})]}):null,l[3]=r,l[4]=u,l[5]=c,l[6]=t,l[7]=a):a=l[7],a}let eS=e=>{try{let t=(0,ec.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(eN);return null}catch{return null}};function eI(e){let t,n,a,l,o,c,u,m=(0,d.c)(17),{data:h,type:f,isStreaming:p}=e;m[0]!==h?(t=()=>eS(h)??[],m[0]=h,m[1]=t):t=m[1];let[g,v]=(0,s.useState)(t),{updateItem:b,openItem:w,openPreviewPane:N}=(0,j.xx)(),{messageId:C}=(0,r.H)(),[S,I]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,en.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let k=n,L=(0,en.G7)("copilot_coding_agent_task_response"),T=function(){let e,t,n,i,a,s,r,l=(0,d.c)(13);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:em.ZL,queryFn:ep,enabled:!1,notifyOnChangeProps:["data"]},l[0]=e):e=l[0];let{data:o}=(0,eh.I)(e);l[1]!==o?(t=o||[],l[1]=o,l[2]=t):t=l[2],l[3]!==t?(n=(0,eu.ms)(t),l[3]=t,l[4]=n):n=l[4];let c=n;l[5]!==c?(i=["agent-sessions-pull-requests",c],l[5]=c,l[6]=i):i=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(a=["data"],l[7]=a):a=l[7],l[8]!==i?(s={queryKey:i,queryFn:ef,enabled:!1,notifyOnChangeProps:a},l[8]=i,l[9]=s):s=l[9];let{data:u}=(0,eh.I)(s);if(l[10]!==o||l[11]!==u){if(r=new Map,o&&o.length>0)for(let e of o){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,i={state:e.latest_session_state,title:n?.title};r.set(t,i)}l[10]=o,l[11]=u,l[12]=r}else r=l[12];return r}(),E=k&&S?g.slice(0,10):g,D=k&&g.length>10;m[3]!==h?(a=()=>v(e=>eS(h)??e),l=[h],m[3]=h,m[4]=a,m[5]=l):(a=m[4],l=m[5]),(0,s.useEffect)(a,l),(0,s.useEffect)(()=>{"issue"===f?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===f?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===f&&L&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[f,L]);let R=p&&"IssueListBlock-module__streaming--sTYSD";m[6]!==R?(o=(0,_.$)("IssueListBlock-module__list--hU3Jz",R),m[6]=R,m[7]=o):o=m[7];let A=E.map((e,t)=>{let n={...e,type:f};if("task"===f&&L&&e.url){let t=T.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let a=p&&t===E.length-1,{icon:s,colorClass:r}=function(e,t){let n,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,i.jsx)(x.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e_):"closed"===e.state&&e.draft&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Closed draft issue"}),n=e_):(a=(0,i.jsx)(x.IssueClosedIcon,{"aria-label":"Closed issue"}),n=ej):(a=(0,i.jsx)(x.IssueOpenedIcon,{"aria-label":"Open issue"}),n=eb);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(a=(0,i.jsx)(x.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e_):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(a=(0,i.jsx)(x.GitMergeIcon,{"aria-label":"Merged pull request"}),n=ej):(a=(0,i.jsx)(x.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=ew):(a=(0,i.jsx)(x.GitPullRequestIcon,{"aria-label":"Pull request"}),n=eb)}else"task"===e.type&&t&&("queued"===e.state?(a=(0,i.jsx)(x.ClockIcon,{"aria-label":"Task queued",className:"IssueListBlock-module__clockIcon--yllN9"}),n=eb):"pending"===e.state||"idle"===e.state?(a=(0,i.jsx)(x.DotFillIcon,{"aria-label":"Task pending",className:"IssueListBlock-module__dotFillIcon--jW2uo"}),n=eb):"running"===e.state||"in_progress"===e.state?(a=(0,i.jsx)(ea.gX,{animated:!0}),n=eb):"completed"===e.state||"waiting_for_user"===e.state?(a=(0,i.jsx)(x.CheckCircleFillIcon,{"aria-label":"Task completed",className:"IssueListBlock-module__checkCircleIcon--ZHYse"}),n=ej):"failed"===e.state||"timed_out"===e.state?(a=(0,i.jsx)(x.XCircleFillIcon,{"aria-label":"Task failed",className:"IssueListBlock-module__stopIcon--u2wRE"}),n=ew):"cancelled"===e.state&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Task cancelled",className:"IssueListBlock-module__skipIcon--glgzv"}),n=ew));return{icon:a,colorClass:n}}(n,L);return(0,i.jsx)("li",{className:eg,children:(0,i.jsxs)("div",{className:ey,children:[(0,i.jsx)("div",{className:(0,_.$)(r,"IssueListBlock-module__icon--qAaLP"),children:s}),(0,i.jsxs)("div",{className:"IssueListBlock-module__header--NtmSe",children:[a&&!n.title?null:(0,i.jsx)("a",{...(0,es.G)("issue-list-item-link"),href:n.url??"#",className:"IssueListBlock-module__link--fc5wy",onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:i,repo:a,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(i&&a&&s){let r=`issue:${i}/${a}/${s}`;b({messageId:C,name:n.title??`Issue #${s}`,number:s,owner:i,repo:a,id:r,href:t,type:"issue"}),w(r),N(e.currentTarget)}}else"task"===n.type&&L?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:ex,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,i.jsxs)("span",{className:"IssueListBlock-module__number--vsvJy",children:["#",n.number]})]}):void 0!==n.number?(0,i.jsxs)("span",{className:ex,children:["#",n.number]}):(0,i.jsx)("span",{className:(0,_.$)(ex,"IssueListBlock-module__unknownTitle--JszGm"),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,i.jsxs)("div",{className:"IssueListBlock-module__labels--xeeTb",children:[n.labels?.length?n.labels.map(eL):null,0!==n.comments&&void 0!==n.comments&&(0,i.jsxs)(el.A,{size:"small",variant:"secondary",children:[(0,i.jsx)(x.CommentIcon,{className:"IssueListBlock-module__labelIcon--g4B1V",size:12}),n.comments]})]})]}),"task"===n.type&&L?n.repository?(0,i.jsx)("div",{className:ev,children:n.repository}):null:(0,i.jsx)(eC,{item:n,isStreaming:a}),("task"!==n.type||!L)&&(0,i.jsx)("div",{className:"IssueListBlock-module__metadata--W4tCj",children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,i.jsx)("div",{className:"IssueListBlock-module__unassignedAvatar--RB1C7",role:"img","aria-label":"Unassigned",children:(0,i.jsx)(x.PersonIcon,{size:12})}):(0,i.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,i.jsx)(eo.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(ek)})})})]})},t)});return m[8]!==S||m[9]!==D||m[10]!==p||m[11]!==g?(c=D&&(0,i.jsx)("li",{className:eg,children:(0,i.jsx)("div",{className:(0,_.$)(ey,"IssueListBlock-module__toggleContent--NWbi1"),children:(0,i.jsxs)("button",{type:"button",className:(0,_.$)("IssueListBlock-module__toggleButton--C9dbQ",p&&"IssueListBlock-module__shimmer--xZ0Bt"),onClick:()=>I(!S),"aria-expanded":!S,"aria-controls":"issue-list",children:[(0,i.jsx)("span",{className:"IssueListBlock-module__toggleIcon--hynWs",children:S?(0,i.jsx)(x.UnfoldIcon,{size:16}):(0,i.jsx)(x.FoldIcon,{size:16})}),S?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=S,m[9]=D,m[10]=p,m[11]=g,m[12]=c):c=m[12],m[13]!==o||m[14]!==A||m[15]!==c?(u=(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{id:"issue-list",className:o,children:[A,c]})}),m[13]=o,m[14]=A,m[15]=c,m[16]=u):u=m[16],u}function ek(e){return(0,i.jsx)(ei.r,{src:e,alt:"Assignee avatar"},e)}function eL(e){return(0,i.jsx)(el.A,{size:"small",variant:"secondary",className:"IssueListBlock-module__label--tGgUZ",children:(0,i.jsx)(ed.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{eC.displayName||(eC.displayName="Description")}catch{}try{eI.displayName||(eI.displayName="ListBlock")}catch{}let eT=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eI,{...e})}};var eE=n(23284);let eD=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,i.jsx)(eE.t,{...e})}};var eR=n(5524),eA=n(35104),eO=n(13974);function eP(e){let t,n=(0,d.c)(3),{children:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==a?(t=(0,i.jsx)(i.Fragment,{children:a}),n[1]=a,n[2]=t):t=n[2],t}try{eP.displayName||(eP.displayName="SubtasksGroup")}catch{}var eF=n(35673),eM=n(57478),e$=n(94236);function eB(e){let t,n,a,s=(0,d.c)(10),{onConvertAllToDraftIssues:r,taskCount:l,title:o}=e;return s[0]!==l?(t=(0,i.jsx)(eM.A,{className:"ml-2 pb-1",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o?(n=l>0&&(0,i.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,i.jsxs)(e$.W,{children:[(0,i.jsx)(e$.W.Anchor,{children:(0,i.jsx)(b.K,{"aria-label":`Tasklist '${o}' options`,icon:x.KebabHorizontalIcon,variant:"invisible"})}),(0,i.jsx)(eF.UJ,{children:(0,i.jsx)(eR.l,{children:(0,i.jsx)(eR.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=l,s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==o?(a=(0,i.jsxs)(eR.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),s[6]=t,s[7]=n,s[8]=o,s[9]=a):a=s[9],a}try{eB.displayName||(eB.displayName="TasklistHeader")}catch{}var eV=n(97189),eU=n(7812),eq=n(65529);function eG(e){let t,n=(0,d.c)(4),{isStreaming:a,onClick:s,task:r}=e;return n[0]!==a||n[1]!==s||n[2]!==r?(t=(0,i.jsx)(eV.Fn,{children:(0,i.jsx)(eH,{isStreaming:a,onClick:s,task:r})}),n[0]=a,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function eH(e){let t,n,s,r,l,o,c=(0,d.c)(19),{isStreaming:m,onClick:h,task:f}=e,{pullRequest:p,isLoading:g}=(0,eq.as)(f),{versionedItems:y}=(0,j.xx)();c[0]!==f.id||c[1]!==y?(t=(0,eU.LU)(f.id,y),c[0]=f.id,c[1]=y,c[2]=t):t=c[2];let b=t;c[3]!==g||c[4]!==m||c[5]!==p?(n=()=>m||g?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p?.state==="merged"?(0,i.jsx)(x.CheckIcon,{}):p?(0,i.jsx)(x.GitPullRequestIcon,{}):(0,i.jsx)(x.TasklistIcon,{}),c[3]=g,c[4]=m,c[5]=p,c[6]=n):n=c[6];let _=n;return c[7]!==_?(s=(0,i.jsx)(eR.l.LeadingVisual,{children:_()}),c[7]=_,c[8]=s):s=c[8],c[9]!==b?(r=null!=b&&(0,i.jsx)(u.g,{version:b}),c[9]=b,c[10]=r):r=c[10],c[11]!==r?(l=(0,i.jsx)(eR.l.TrailingVisual,{children:r}),c[11]=r,c[12]=l):l=c[12],c[13]!==h||c[14]!==s||c[15]!==l||c[16]!==f.id||c[17]!==f.name?(o=(0,i.jsxs)(eR.l.Item,{onSelect:h,children:[s,f.name,l]},f.id),c[13]=h,c[14]=s,c[15]=l,c[16]=f.id,c[17]=f.name,c[18]=o):o=c[18],o}try{eG.displayName||(eG.displayName="TasklistItem")}catch{}try{eH.displayName||(eH.displayName="TasklistItemImpl")}catch{}let eK=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function eW({yaml:e,isStreaming:t}){let n=(0,eO.p)(t),a=(0,s.useRef)(new Set),{selectedThreadID:l}=(0,Q.Pk)(),{updateItem:o,openItem:d,openPreviewPane:c}=(0,j.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:h}=(0,r.H)(),f=(0,s.useRef)({name:"Tasklist",tasks:[]}),p=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,ec.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&eK(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,l);return null!=t?(f.current=t,t):f.current},[e,l]),g=(0,s.useMemo)(()=>p.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:i,...a}=e;return{...a,name:i,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[p,m,u,t]),{convertAllToDraftIssues:x}=(0,eA.W)(g.map(e=>e.tag)),v=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:i}=t;d(e.id,n),c(i?.currentTarget),h(!0)},[d,c,h]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let i=g[e];o(i),(t||n)&&!a.current.has(i.id)&&(a.current.add(i.id),v(i,{selectItem:0===e}))}},[t,n,v,g,o]);let b=(0,s.useCallback)((e,t)=>v(e,{event:t}),[v]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:l}),[l]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:l})},[n,g.length,l]);let _=g.map(e=>(0,i.jsx)(eG,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,i.jsx)("div",{className:"PlanningTasklistBlock-module__container--Vl4PK",children:(0,i.jsxs)(eR.l,{variant:"full",showDividers:!0,children:[(0,i.jsx)(eB,{onConvertAllToDraftIssues:x,taskCount:g.length,title:p?.name??"Tasklist"}),(0,i.jsx)(eP,{isStreaming:!!t,taskCount:g.length,children:_})]})})}try{eW.displayName||(eW.displayName="PlanningTasklistBlock")}catch{}let ez=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eW,{...e})}};var eQ=n(33592),eZ=n(86877),eJ=n(4175),eY=n(1903),eX=n(51933),e0=n(21373),e1=n(40090);let e2="PlanningQuestionsForm-module__container--Xi24c",e3="PlanningQuestionsForm-module__headerContainer--td62h",e4="PlanningQuestionsForm-module__headerSection--pbytI",e5="PlanningQuestionsForm-module__outlineSection--Tx0yi",e6="PlanningQuestionsForm-module__title2--Xmt0r",e7="PlanningQuestionsForm-module__questionContainer--Wr4q2",e8="PlanningQuestionsForm-module__footerContainer--Xpj2v";function e9({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:a,className:r}){let l=(0,s.useMemo)(()=>{let t={},n={};for(let[i,a]of e.questions.entries()){if(!a.suggestions||0===a.suggestions.length)continue;let e=a.suggestions[0];t[i]=e,n[i]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[o,d]=(0,s.useState)(l.initialAnswers),[c,u]=(0,s.useState)(l.initialSelectedSuggestions),[m,h]=(0,s.useState)(""),f=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...i}=t;return i}),d(n=>({...n,[e]:t}))},[]),p=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),d(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>o[t]?.trim())||m.trim(),[o,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,i]of e.questions.entries()){let e=o[t]?.trim();e&&n.push(`Question: ${i.question.trim()}
Answer: ${e}`)}let i=m.trim();i&&n.push(`Additional comments: ${i}`),0!==n.length&&a(n.join(`

`))},[o,e.questions,m,a]);return n?e.questions.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Open questions:"}),(0,i.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,i.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,i.jsxs)("div",{className:(0,_.$)(e2,r),children:[(0,i.jsx)("div",{className:e3,children:(0,i.jsxs)("div",{className:e4,children:[(0,i.jsx)(e1.r,{maxWidth:"50%",size:"titleLarge"}),(0,i.jsxs)("div",{className:e5,children:[(0,i.jsx)(e1.r,{maxWidth:"10%",size:"subtitle"}),(0,i.jsx)(e1.r,{maxWidth:"25%"}),(0,i.jsx)(e1.r,{maxWidth:"25%"}),(0,i.jsx)(e1.r,{maxWidth:"25%"})]})]})}),(0,i.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,i.jsx)(e1.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,i.jsxs)("div",{className:e7,children:[(0,i.jsx)(e1.r,{maxWidth:"80%",size:"subtitle"}),(0,i.jsx)(e1.r,{maxWidth:"70%",size:"bodyLarge"}),(0,i.jsx)(e1.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,i.jsxs)("div",{className:e8,children:[(0,i.jsx)(e1.r,{maxWidth:"15%",size:"titleLarge"}),(0,i.jsx)(e1.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,i.jsxs)("form",{className:(0,_.$)(e2,r),onSubmit:y,children:[(0,i.jsx)("div",{className:e3,children:(0,i.jsxs)("div",{className:e4,children:[(0,i.jsx)("div",{className:"PlanningQuestionsForm-module__title1--TtN_9",children:e.name}),e.outline.length>0&&(0,i.jsxs)("div",{className:e5,children:[(0,i.jsx)("div",{className:e6,children:"Outline"}),(0,i.jsx)("ul",{className:"PlanningQuestionsForm-module__outlineList--dnB7B",children:e.outline.map(e=>(0,i.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pt-3",children:(0,i.jsx)("div",{className:e6,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),a=t.suggestions||[];return(0,i.jsx)("div",{className:e7,children:(0,i.jsxs)(eZ.A,{className:"flex-self-stretch",children:[(0,i.jsx)(eZ.A.Label,{children:t.question}),(0,i.jsx)(eJ.Ay,{block:!0,onChange:e=>f(n,e.target.value),rows:1,value:o[n]||""}),a.length>0&&(0,i.jsxs)(eZ.A.Caption,{className:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",children:["Suggestions",(0,i.jsx)(eY.A,{className:"PlanningQuestionsForm-module__suggestions--rKk1X",children:a.map(e=>{let t=a.indexOf(e),s=c[n]===t;return(0,i.jsx)(eX.A,{as:"button",isSelected:s,onClick:()=>p(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,i.jsxs)(eZ.A,{className:"flex-self-stretch",children:[(0,i.jsx)(eZ.A.Label,{children:"Additional comments"}),(0,i.jsx)(eJ.Ay,{block:!0,onChange:e=>h(e.target.value),rows:3,value:m})]}),(0,i.jsx)("div",{className:e8,children:(0,i.jsx)(e0.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{e9.displayName||(e9.displayName="PlanningQuestionsForm")}catch{}let te=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function tt(e){let t,n,a,l,o,c,u=(0,d.c)(18),{yaml:m,isStreaming:h}=e,{selectedThreadID:f,messages:p,currentReferences:g}=(0,Q.Pk)(),{messageIndex:x}=(0,r.H)(),v=(0,eQ.b)();u[0]!==f||u[1]!==m?(t=((e,t)=>{try{var n=(0,ec.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&te(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,f),u[0]=f,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let _=n,j=p.length>x+1;u[5]!==g||u[6]!==v||u[7]!==_.questions.length||u[8]!==f?(a=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:f,totalQuestionsCount:_.questions.length});let t=v.getThreadById(f);v.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=v,u[7]=_.questions.length,u[8]=f,u[9]=a):a=u[9];let w=a;return u[10]!==f?(l=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:f}),o=[f],u[10]=f,u[11]=l,u[12]=o):(l=u[11],o=u[12]),(0,s.useEffect)(l,o),u[13]!==w||u[14]!==j||u[15]!==h||u[16]!==_?(c=(0,i.jsx)(e9,{className:"mb-3",questions:_,isStreaming:h,isReadOnly:j,onSubmitAnswers:w}),u[13]=w,u[14]=j,u[15]=h,u[16]=_,u[17]=c):c=u[17],c}try{tt.displayName||(tt.displayName="PlanningQuestionsBlock")}catch{}let tn=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tt,{...e})}};var ti=n(44095);let ta=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(ti._,{...e})}},ts=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,...c})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),h=(0,s.useMemo)(()=>{var e;return[...c.extensions??[],(e=[],{transformMarkdown:t=>(0,o.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&M.exec(e);if(n)return{name:n.groups?.name,code:t};let i=$.exec(t);return i?{name:i.groups?.name,code:t.replace($,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=B.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),l=6===r.length,o=l?r.join(`
`):`${r.join(`
`)}
`,d=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[F]:JSON.stringify({language:n,name:i,url:s,code:a,line:d,isStreaming:t.isStreaming??!1,isClipped:l,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&F in i.properties&&n.children.splice(t,1,i)}),reactComponents:V}),{transformMarkdown:e=>(0,o.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=ee.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[X]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,z.d)(e)})}}}),reactComponents:et},eT,eD,H,W,ez,tn,ta]},[c.extensions]);return(0,i.jsx)(r.A.Provider,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,l,d,u,m]),children:(0,i.jsx)(a.To,{...c,markdown:d,extensions:h,chatMode:"immersive",className:"MarkdownViewer-module__markdownOverrides--xtpOl"})})},tr=s.memo(ts);try{ts.displayName||(ts.displayName="MarkdownViewer")}catch{}try{tr.displayName||(tr.displayName="MemoizedMarkdownViewer")}catch{}},37212:(e,t,n)=>{n.d(t,{Bz:()=>r,NP:()=>l});var i=n(68273),a=n(99279),s=n(86320);n(13360);let r=a.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,s.Y)()]});function l(){return r.queries.mainQuery.makeQueryKey()}(0,i.Z6)()},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},37673:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(21728),s=n(88752),r=n(96540),l=n(62828),o=n(7812),d=n(1747);function c(e){let t,n,c,u,m,h=(0,a.c)(20),{className:f,messageId:p,messageIndex:g,messageTimestamp:y,references:x,size:v}=e;h[0]!==p||h[1]!==g||h[2]!==y?(t={messageId:p,messageIndex:g,messageTimestamp:y},h[0]=p,h[1]=g,h[2]=y,h[3]=t):t=h[3];let b=(0,l.I)(t),{updateItem:_,versionedItems:j}=(0,d.xx)();return h[4]!==p||h[5]!==g||h[6]!==y||h[7]!==x||h[8]!==_?(n=()=>{for(let e of x){let t=(0,o.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:p,timestamp:y});null!=t&&_(t)}},c=[p,g,y,x,_],h[4]=p,h[5]=g,h[6]=y,h[7]=x,h[8]=_,h[9]=n,h[10]=c):(n=h[9],c=h[10]),(0,r.useEffect)(n,c),h[11]!==g||h[12]!==j?(u=e=>(0,o.wt)(e,g,j),h[11]=g,h[12]=j,h[13]=u):u=h[13],h[14]!==f||h[15]!==b||h[16]!==x||h[17]!==v||h[18]!==u?(m=(0,i.jsx)(s.t,{references:x,onClickReference:b,size:v,className:f,getReferenceVersion:u}),h[14]=f,h[15]=b,h[16]=x,h[17]=v,h[18]=u,h[19]=m):m=h[19],m}try{c.displayName||(c.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>y,E:()=>g});var i=n(74848),a=n(21728),s=n(25641),r=n(35247),l=n(38621),o=n(96540),d=n(37673),c=n(7812),u=n(1747),m=n(37193);let h="TimelineEvents-module__icon--E6IJb",f="TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3";function p(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function g(e,t){return e.references?.some(e=>p(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function y(e){let t,n,s,r=(0,a.c)(10),{message:l,messageIndex:o,isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}=e;return r[0]!==l||r[1]!==o?(t=g(l)&&(0,i.jsx)(x,{message:l,messageIndex:o}),r[0]=l,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==c||r[5]!==d?(n=(0,i.jsx)(b,{isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}),r[3]=u,r[4]=c,r[5]=d,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function x(e){let t,n,r,f,p,g,y,x=(0,a.c)(24),{message:b,messageIndex:_}=e,{updateItem:j}=(0,u.xx)();if(x[0]!==b.createdAt||x[1]!==b.id||x[2]!==b.references||x[3]!==_||x[4]!==j?(t=()=>{if(b.references)for(let e of b.references){let t=(0,c.oR)({ref:e,messageIndex:_,messageId:b.id,timestamp:b.createdAt});null!=t&&j(t)}},n=[b.references,b.id,_,b.createdAt,j],x[0]=b.createdAt,x[1]=b.id,x[2]=b.references,x[3]=_,x[4]=j,x[5]=t,x[6]=n):(t=x[5],n=x[6]),(0,o.useEffect)(t,n),x[7]!==b.references){r=Symbol.for("react.early_return_sentinel");e:{let e=b.references?.filter(v);if(!e){r=void 0;break e}for(let t of(f=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||l.CheckIcon;f.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}x[7]=b.references,x[8]=r,x[9]=f}else r=x[8],f=x[9];return r!==Symbol.for("react.early_return_sentinel")?r:(x[10]!==b.createdAt||x[11]!==b.id||x[12]!==b.references||x[13]!==_?(p=b.references&&b.references.length>0&&(0,i.jsx)(d.K,{className:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH",messageId:b.id,messageTimestamp:b.createdAt,messageIndex:_,references:b.references,size:"medium"}),x[10]=b.createdAt,x[11]=b.id,x[12]=b.references,x[13]=_,x[14]=p):p=x[14],x[15]!==b.content||x[16]!==b.createdAt||x[17]!==b.id||x[18]!==_||x[19]!==f?(g=f.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,i.jsxs)("div",{className:"TimelineEvents-module__timelineEvent--FV3V3",children:[(0,i.jsx)(a,{className:h}),(0,i.jsx)(m.G,{autoOpenPreviewPane:!1,markdown:n,messageId:b.id,messageIndex:_,messageTimestamp:b.createdAt,accessibleHeader:(0,s.hV)("Timeline",b.content??"")})]},t)}),x[15]=b.content,x[16]=b.createdAt,x[17]=b.id,x[18]=_,x[19]=f,x[20]=g):g=x[20],x[21]!==p||x[22]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[p,g]}),x[21]=p,x[22]=g,x[23]=y):y=x[23],y)}function v(e){return p(e)}function b(e){let t,n,s,o=(0,a.c)(9),{isSharedMessage:d,isViewingSharedThread:c,isLatestMessage:u}=e;return o[0]!==d||o[1]!==c?(t=d&&!c&&(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(l.LinkIcon,{className:h})," Messages up to this point are included in shared link"]}),o[0]=d,o[1]=c,o[2]=t):t=o[2],o[3]!==u||o[4]!==c?(n=u&&r.W.copilotDuplicateThread&&c&&(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(l.RepoForkedIcon,{className:h})," Messages beyond this point will start a new private chat"]}),o[3]=u,o[4]=c,o[5]=n):n=o[5],o[6]!==t||o[7]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),o[6]=t,o[7]=n,o[8]=s):s=o[8],s}try{y.displayName||(y.displayName="TimelineEvents")}catch{}try{x.displayName||(x.displayName="UserMessageTimelineEvent")}catch{}try{b.displayName||(b.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i});let i=400,a="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{G:()=>c,og:()=>d});var i=n(68273),a=n(21728),s=n(40235),r=n(70170),l=n(70263),o=n(96540);let d=(0,i.Z6)()?function(e,t,n,i){c(e,t,n,i)}:function(e,t,n,i){c(e,t,n,i)},c=(0,i.Z6)()?function(e,t,n,i){let o,d,c,u=(0,a.c)(9),m=(0,l.A)();u[0]!==t||u[1]!==m?(o=()=>{m()&&t()},u[0]=t,u[1]=m,u[2]=o):o=u[2];let h=i??2e3;u[3]!==o||u[4]!==h?(d=(0,r.n)(o,h),u[3]=o,u[4]=h,u[5]=d):d=u[5];let f=d;u[6]!==f||u[7]!==n?(c=e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(f,e.wait||0);else window.setTimeout(f,e.wait||0)},u[6]=f,u[7]=n,u[8]=c):c=u[8];let p=c;(0,s.x)(e,p)}:function(e,t,n,i){let a=(0,l.A)(),d=(0,o.useMemo)(()=>(0,r.n)(()=>{a()&&t()},i??2e3),[a,t,i]),c=(0,o.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(d,e.wait||0);else window.setTimeout(d,e.wait||0)},[d,n]);(0,s.x)(e,c)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:a.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39111:(e,t,n)=>{n.d(t,{X:()=>a});var i=n(54571);function a(e){let t=e.join(","),[n]=(0,i.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},39344:(e,t,n)=>{n.d(t,{K:()=>S});var i=n(74848),a=n(21728),s=n(38621),r=n(57478),l=n(84268),o=n(51933),d=n(34164),c=n(96540);let u="IssueTree-module__tree--GQG9_",m="IssueTree-module__item--th4vZ",h="IssueTree-module__tokenContainer--mGoNS",f=c.createContext({hasTrailingVisuals:void 0}),p=c.createContext({level:0});function g(e){let t,n,s,l,o,d,m=(0,a.c)(17),{subIssueCount:h,subIssueHeaderText:p,hasTrailingVisuals:g,children:v}=e,b=void 0===p?"Sub-issues":p,_=void 0!==g&&g;if(m[0]!==v){let e=c.Children.toArray(v);n=e.find(x);let i=(t=e.filter(y)).length-1;if(i>=0&&c.isValidElement(t[i])){let e;m[3]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},m[3]=e):e=m[3],t[i]=c.cloneElement(t[i],e)}m[0]=v,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[4]!==_?(s={hasTrailingVisuals:_},m[4]=_,m[5]=s):s=m[5];let j=s,w=_||void 0;return m[6]!==t||m[7]!==h||m[8]!==b?(l=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"IssueTree-module__subHeader--BDblp",children:[b,(0,i.jsx)(r.A,{children:h})]}),(0,i.jsx)("ul",{role:"tree",className:u,children:t})]}),m[6]=t,m[7]=h,m[8]=b,m[9]=l):l=m[9],m[10]!==n||m[11]!==w||m[12]!==l?(o=(0,i.jsxs)("div",{className:"IssueTree-module__container--kYTT7","data-has-trailing-visual":w,children:[n,l]}),m[10]=n,m[11]=w,m[12]=l,m[13]=o):o=m[13],m[14]!==j||m[15]!==o?(d=(0,i.jsx)(f.Provider,{value:j,children:o}),m[14]=j,m[15]=o,m[16]=d):d=m[16],d}function y(e){return c.isValidElement(e)&&e.type===b}function x(e){return c.isValidElement(e)&&e.type===v}function v(e){let t,n,s,r=(0,a.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let l=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(m,"IssueTree-module__rootItem--hxb6j"),r[1]=n):n=r[1],r[2]!==e?(s=(0,i.jsx)(p.Provider,{value:l,children:(0,i.jsx)("div",{className:n,children:(0,i.jsx)(w,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function b(e){let t,n,s,r,l,o,d,h,f=(0,a.c)(19);f[0]!==e?({children:t,isLastBranch:n,...s}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=s):(t=f[1],n=f[2],s=f[3]);let g=c.Children.toArray(t),y=g.filter(j),x=g.filter(_),{level:v}=c.useContext(p),b=v+1;f[4]!==b?(r={level:b},f[4]=b,f[5]=r):r=f[5];let N=r,C=n&&0===y.length,S=y.length-1;if(n&&S>=0&&c.isValidElement(y[S])){let e;f[6]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},f[6]=e):e=f[6],y[S]=c.cloneElement(y[S],e)}let I=C||void 0;return f[7]!==x||f[8]!==s?(l=(0,i.jsx)(w,{...s,children:x}),f[7]=x,f[8]=s,f[9]=l):l=f[9],f[10]!==y?(o=y.length>0&&(0,i.jsx)("ul",{role:"group",className:u,children:y}),f[10]=y,f[11]=o):o=f[11],f[12]!==I||f[13]!==l||f[14]!==o?(d=(0,i.jsxs)("li",{role:"treeitem","aria-selected":"false",className:m,"data-is-last-rendered":I,children:[l,o]}),f[12]=I,f[13]=l,f[14]=o,f[15]=d):d=f[15],f[16]!==N||f[17]!==d?(h=(0,i.jsx)(p.Provider,{value:N,children:d}),f[16]=N,f[17]=d,f[18]=h):h=f[18],h}function _(e){return!(c.isValidElement(e)&&e.type===b)}function j(e){return c.isValidElement(e)&&e.type===b}function w(e){let t,n,s,r,o,d,u,m,h=(0,a.c)(29),{leadingVisual:g,title:y,description:x,trailingBadge:v,trailingVisual:b,href:_,onClick:j,blockedBy:w}=e,{level:C}=c.useContext(p),{hasTrailingVisuals:S}=c.useContext(f),I=null!=w&&w.length>0;h[0]!==C?(t={"--level":C},h[0]=C,h[1]=t):t=h[1];let k=!!j||void 0;h[2]!==C?(n=C>0&&(0,i.jsx)("div",{className:"IssueTree-module__spacer--Z4HHo"}),h[2]=C,h[3]=n):n=h[3],h[4]!==g?(s=(0,i.jsx)("div",{className:"IssueTree-module__leadingVisual--e_q3O",children:g}),h[4]=g,h[5]=s):s=h[5];let L=_?"a":j?"button":"span";return h[6]!==_||h[7]!==j||h[8]!==L||h[9]!==y?(r=(0,i.jsx)(l.A,{as:L,className:"IssueTree-module__title--v0mbM",href:_,onClick:j,children:y}),h[6]=_,h[7]=j,h[8]=L,h[9]=y,h[10]=r):r=h[10],h[11]!==r||h[12]!==v?(o=(0,i.jsxs)("div",{className:"IssueTree-module__content--Ko11D",children:[r,v]}),h[11]=r,h[12]=v,h[13]=o):o=h[13],h[14]!==w||h[15]!==x||h[16]!==I?(d=(null!=x||I)&&(0,i.jsxs)("div",{className:"IssueTree-module__description--b8yCi",children:[I&&(0,i.jsx)(N,{dependencyType:"Blocked by",blockedBy:w}),x]}),h[14]=w,h[15]=x,h[16]=I,h[17]=d):d=h[17],h[18]!==S||h[19]!==b?(u=S&&(0,i.jsx)("div",{className:"IssueTree-module__trailingVisual--SewMY",children:b}),h[18]=S,h[19]=b,h[20]=u):u=h[20],h[21]!==t||h[22]!==k||h[23]!==n||h[24]!==s||h[25]!==o||h[26]!==d||h[27]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"IssueTree-module__grid--hqjkj",style:t,"data-has-onclick":k,children:[n,s,o,d,u]})}),h[21]=t,h[22]=k,h[23]=n,h[24]=s,h[25]=o,h[26]=d,h[27]=u,h[28]=m):m=h[28],m}function N(e){let t,n,s=(0,a.c)(10),{dependencyType:r,blockedBy:d}=e;if(!d.length)return null;let c=d[0]?.href?"a":d[0]?.onClick?"button":"span",u=d[0]?.href,m=d[0]?.onClick,f=d[0]?.title,p=d[0]?.title;s[0]!==c||s[1]!==u||s[2]!==m||s[3]!==f||s[4]!==p?(t=(0,i.jsx)(l.A,{"data-testid":"blocked-by-link",className:"IssueTree-module__blockedBy--z0s4g",muted:!0,as:c,href:u,onClick:m,title:f,children:p}),s[0]=c,s[1]=u,s[2]=m,s[3]=f,s[4]=p,s[5]=t):t=s[5];let g=t;return s[6]!==d.length||s[7]!==g||s[8]!==r?(n=(0,i.jsx)(o.A,{size:"medium",className:"mr-2",leadingVisual:C,text:d.length>1?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r," ",d.length]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r,": ",g]})})}),s[6]=d.length,s[7]=g,s[8]=r,s[9]=n):n=s[9],n}function C(){return(0,i.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let S=Object.assign(g,{RootItem:v,Item:b});try{g.displayName||(g.displayName="Tree")}catch{}try{v.displayName||(v.displayName="TreeRootItem")}catch{}try{b.displayName||(b.displayName="TreeItem")}catch{}try{w.displayName||(w.displayName="TreeItemContent")}catch{}try{N.displayName||(N.displayName="IssueDependencies")}catch{}try{S.displayName||(S.displayName="IssueTree")}catch{}},39698:(e,t,n)=>{n.d(t,{i:()=>u});var i=n(68273),a=n(21728),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011);let u=(0,i.Z6)()?function(e,t){let n,i,u,h=(0,a.c)(11),f=(0,c.Kp)(),p=`${f}/page_data/${r.uT.unresolveThread}`,g=(0,l.jE)(),{updateThread:y}=(0,c.an)();return h[0]!==p?(n=async e=>{let{threadId:t}=e,n=await (0,s.q$)(p,{method:"POST",body:{threadId:t}});(0,s.R)(n)},h[0]=p,h[1]=n):n=h[1],h[2]!==f||h[3]!==e||h[4]!==t||h[5]!==g||h[6]!==y?(i=(n,i)=>(y(Number(i.threadId),e,t,m),g.invalidateQueries({queryKey:(0,d.XG)(f)})),h[2]=f,h[3]=e,h[4]=t,h[5]=g,h[6]=y,h[7]=i):i=h[7],h[8]!==n||h[9]!==i?(u={mutationFn:n,onSuccess:i},h[8]=n,h[9]=i,h[10]=u):u=h[10],(0,o.n)(u)}:function(e,t){let n=(0,c.Kp)(),i=`${n}/page_data/${r.uT.unresolveThread}`,a=(0,l.jE)(),{updateThread:u}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(i,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(i,s)=>(u(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!1,resolvedBy:void 0}}),a.invalidateQueries({queryKey:(0,d.XG)(n)}))})};function m(e){if(e)return{...e,isResolved:!1,resolvedBy:void 0}}},41682:(e,t,n)=>{n.d(t,{E:()=>w,t:()=>_});var i=n(74848),a=n(21728),s=n(26100),r=n(35247),l=n(72994),o=n(4817),d=n(53419),c=n(69726),u=n(20382),m=n(96540),h=n(7812),f=n(1747),p=n(28177),g=n(39344),y=n(35149),x=n(48881),v=n(7026),b=n(22841);let _={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e||"object"==typeof e&&null!=e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t}},j=e=>{try{let t=(0,u.Hh)(e);return _.fromUnknown(t)}catch{return null}};function w(e){let t,n,u,_,w,I,k,L,T,E,D,R,A,O,P,F,M,$,B,V=(0,a.c)(87),{yaml:U,isStreaming:q}=e,[G,H]=(0,m.useState)(q);V[0]!==q?(t=()=>{q&&H(!0)},n=[q],V[0]=q,V[1]=t,V[2]=n):(t=V[1],n=V[2]),(0,m.useEffect)(t,n);let{updateItem:K,openItem:W,openPreviewPane:z,closeItem:Q,versionedItems:Z,items:J}=(0,f.xx)(),{messageId:Y,messageIndex:X,autoOpenPreviewPane:ee,hasAutoOpenedPreviewPaneRef:et,setHasAutoOpenedPreviewPane:en}=(0,x.H)();U=(0,y.KJ)(U),V[3]===Symbol.for("react.memo_cache_sentinel")?(u={},V[3]=u):u=V[3];let ei=(0,v.M)(U,j,u);V[4]!==ei?(_=[ei],V[4]=ei,V[5]=_):_=V[5],V[6]!==q||V[7]!==_?(w={issues:_,isStreaming:q,isIssueTree:!1},V[6]=q,V[7]=_,V[8]=w):w=V[8],(0,b.s)(w),V[9]===Symbol.for("react.memo_cache_sentinel")?(I=[],V[9]=I):I=V[9],(0,m.useEffect)(S,I),V[10]!==q||V[11]!==ei.type?(k="new-issue",r.W.draftUpdateIssue&&(k=null==ei.type&&q?void 0:"draft-update-issue"===ei.type?"update-issue":"new-issue"),V[10]=q,V[11]=ei.type,V[12]=k):k=V[12];let ea=null!=ei.tag&&null!=k?`${k}:${ei.tag}#${X}`:void 0;V[13]!==ea||V[14]!==Z?(L=null!=ea?(0,h.LU)(ea,Z):null,V[13]=ea,V[14]=Z,V[15]=L):L=V[15];let es=L;V[16]!==ea||V[17]!==J?(T=null!=ea?J.get(ea):void 0,V[16]=ea,V[17]=J,V[18]=T):T=V[18];let er=T,el=ei.repository||null==k||er?.type!==k?ei.repository:er.repository||"";V[19]!==ee||V[20]!==et||V[21]!==ea||V[22]!==W||V[23]!==z||V[24]!==en?(E=e=>{let{selectItem:t,event:n}=e;null!=ea&&(W(ea,t),(t||ee&&!et.current)&&(z(n?.currentTarget),en(!0)),(0,d.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},V[19]=ee,V[20]=et,V[21]=ea,V[22]=W,V[23]=z,V[24]=en,V[25]=E):E=V[25];let eo=E;V[26]!==ei.projects?(D=(0,l.c)(ei.projects),V[26]=ei.projects,V[27]=D):D=V[27];let ed=D;V[28]!==Q||V[29]!==k||V[30]!==ea||V[31]!==q||V[32]!==ei.assignees||V[33]!==ei.body||V[34]!==ei.bodyVersion||V[35]!==ei.issueNumber||V[36]!==ei.issueType||V[37]!==ei.labels||V[38]!==ei.milestone||V[39]!==ei.parentTag||V[40]!==ei.tag||V[41]!==ei.template||V[42]!==ei.templateFormValues||V[43]!==ei.title||V[44]!==Y||V[45]!==ed||V[46]!==el||V[47]!==K?(R=()=>{null!=ea&&("update-issue"===k&&el&&ei.issueNumber&&Q(`issue:${el}/${ei.issueNumber}`),K({messageId:Y,name:ei.title??"",body:ei.body,bodyVersion:ei.bodyVersion,repository:el,id:ea,type:k,tag:ei.tag??"",parentTag:ei.parentTag,isStreaming:q,template:ei.template,issueType:ei.issueType,milestone:ei.milestone,assignees:ei.assignees?.sort(),labels:ei.labels?.sort(),projects:ed,rawProjectsInput:ed.map(C).filter(N).sort(),isUserEdited:!1,defaultValuesById:ei.templateFormValues??{},issueNumber:ei.issueNumber}))},V[28]=Q,V[29]=k,V[30]=ea,V[31]=q,V[32]=ei.assignees,V[33]=ei.body,V[34]=ei.bodyVersion,V[35]=ei.issueNumber,V[36]=ei.issueType,V[37]=ei.labels,V[38]=ei.milestone,V[39]=ei.parentTag,V[40]=ei.tag,V[41]=ei.template,V[42]=ei.templateFormValues,V[43]=ei.title,V[44]=Y,V[45]=ed,V[46]=el,V[47]=K,V[48]=R):R=V[48],V[49]!==Q||V[50]!==k||V[51]!==ea||V[52]!==q||V[53]!==ei.assignees||V[54]!==ei.body||V[55]!==ei.bodyVersion||V[56]!==ei.issueNumber||V[57]!==ei.issueType||V[58]!==ei.labels||V[59]!==ei.milestone||V[60]!==ei.parentTag||V[61]!==ei.projects||V[62]!==ei.tag||V[63]!==ei.template||V[64]!==ei.templateFormValues||V[65]!==ei.title||V[66]!==Y||V[67]!==ed||V[68]!==el||V[69]!==K?(A=[Q,k,ea,q,ei.assignees,ei.body,ei.bodyVersion,ei.issueNumber,ei.issueType,ei.labels,ei.milestone,ei.parentTag,ei.projects,ei.tag,ei.template,ei.templateFormValues,ei.title,Y,ed,el,K],V[49]=Q,V[50]=k,V[51]=ea,V[52]=q,V[53]=ei.assignees,V[54]=ei.body,V[55]=ei.bodyVersion,V[56]=ei.issueNumber,V[57]=ei.issueType,V[58]=ei.labels,V[59]=ei.milestone,V[60]=ei.parentTag,V[61]=ei.projects,V[62]=ei.tag,V[63]=ei.template,V[64]=ei.templateFormValues,V[65]=ei.title,V[66]=Y,V[67]=ed,V[68]=el,V[69]=K,V[70]=A):A=V[70],(0,m.useEffect)(R,A),V[71]!==G||V[72]!==ea||V[73]!==eo?(O=()=>{null!=ea&&G&&eo({selectItem:!0})},P=[ea,eo,G],V[71]=G,V[72]=ea,V[73]=eo,V[74]=O,V[75]=P):(O=V[74],P=V[75]),(0,m.useEffect)(O,P);let ec=ei.title??"";return V[76]!==q?(F=q?(0,i.jsx)(c.A,{size:"small",className:o.sX}):(0,i.jsx)(p.n,{type:"new-issue"}),V[76]=q,V[77]=F):F=V[77],V[78]!==es?(M=null!=es&&(0,i.jsx)(s.g,{"data-testid":"version-label",version:es}),V[78]=es,V[79]=M):M=V[79],V[80]!==eo?($=e=>eo({selectItem:!0,event:e}),V[80]=eo,V[81]=$):$=V[81],V[82]!==ec||V[83]!==F||V[84]!==M||V[85]!==$?(B=(0,i.jsx)(g.K,{subIssueCount:0,children:(0,i.jsx)(g.K.RootItem,{title:ec,leadingVisual:F,trailingBadge:M,onClick:$})}),V[82]=ec,V[83]=F,V[84]=M,V[85]=$,V[86]=B):B=V[86],B}function N(e){return""!==e}function C(e){return e.title||""}function S(){return(0,d.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{w.displayName||(w.displayName="DraftIssueBlock")}catch{}},42312:(e,t,n)=>{n.d(t,{KL:()=>o,U:()=>m});var i=n(74848),a=n(21728),s=n(71315),r=n(96540);let l=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function o(e){let t,n,o,m,h,f,p,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[x,v]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{v(t=>t.filter(t=>t!==e))},g[2]=o):o=g[2];let _=o;g[3]!==x?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=x.filter(u).sort(c);if(0===t.length)return;let n=t.findIndex(d),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},h=[x],g[3]=x,g[4]=m,g[5]=h):(m=g[4],h=g[5]),(0,r.useEffect)(m,h),g[6]===Symbol.for("react.memo_cache_sentinel")?(f={registerNavigableRef:b,unregisterNavigableRef:_},g[6]=f):f=g[6];let j=f;return g[7]!==y?(p=(0,i.jsx)(l.Provider,{value:j,children:y}),g[7]=y,g[8]=p):p=g[8],p}function d(e){return e.current?.contains(s.XC?.activeElement||null)}function c(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:o}=(0,r.useContext)(l);return n[0]!==s||n[1]!==o?(e=()=>(s(i),()=>{o(i)}),t=[s,o],n[0]=s,n[1]=o,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{l.displayName||(l.displayName="NavigableRefContext")}catch{}try{o.displayName||(o.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>d,aq:()=>o,qU:()=>l});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function l(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function o(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function d(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},43362:(e,t,n)=>{n.d(t,{Be:()=>s,Sl:()=>l,Wp:()=>a,YY:()=>d,jH:()=>o,wm:()=>r});var i=n(36729);function a(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function s(e){return e.reduce((e,t)=>(e[t.path]=!!t.markedAsViewed,e),{})}function r(e){let t=e.comments.map(e=>parseInt(e.threadId));return{id:e.id,pendingReviewIDs:t,comments:e.comments}}function l(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function o(e,t){if(!e)return;let n={};if(!t)return n;for(let a of t){if(!a.markersMap||0===Object.keys(a.markersMap).length)continue;let t=a.path,s={};for(let t in a.markersMap){let n=a.markersMap[t];if(!n?.threads&&!n?.annotations)continue;let r={threads:[],annotations:[]};if(n.annotations)for(let t of n.annotations){let n=e.annotations[Number(t.id)];n&&r.annotations.push(n)}if(n.threads)for(let i of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!u(n))return;let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];u(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:c[n],startLine:a,startDiffSide:c[s],isOutdated:!!t.outdatedReason}}(t,i),a=e.threads[Number(i.id)];a&&n&&(a={...a,positioning:n,subject:n}),a&&r.threads.push(a)}"FILE"===t?s[i.zW]=r:s[t]=r}n[t]=s}return n}function d(e){return{endLine:e.line,endDiffSide:e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",startLine:e.startLine??e.line,startDiffSide:e.startSide?e.startSide?.toLowerCase()==="right"?"RIGHT":"LEFT":e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",isOutdated:!1}}let c={L:"LEFT",R:"RIGHT"};function u(e){return"L"===e||"R"===e}},43883:(e,t,n)=>{n.d(t,{Gl:()=>s,TC:()=>d,ai:()=>r,eh:()=>o});var i=n(21067);let a={};function s(e,t){let n=t?.currency??"USD";return(a[n]||(a[n]=new Intl.NumberFormat((0,i.JK)(),{currency:n,style:"currency"}))).format(e)}function r(e,t){return new Intl.NumberFormat((0,i.JK)(),{maximumFractionDigits:t?.precision}).format(e)}let l=["k","m","b"];function o(e,t){let{suffix:n=!0,capping:i=1/0,precision:a=1}=t??{},s="",o=Math.min(i,e);if(n){let e=c(o);s=l[e-1]||"",o/=1e3**e}let d=r(o,{precision:a})+s;return e>i?`${d}+`:d}function d(e){if(e<=1e4)return 1;let t=c(e);return e/1e3**t>=10?0:1}function c(e){let t=Math.floor(Math.log(Math.max(Math.abs(e),1))/Math.log(1e3));return Math.min(l.length,t)}},44095:(e,t,n)=>{n.d(t,{_:()=>v,m:()=>b});var i=n(74848),a=n(21728),s=n(26100),r=n(2635),l=n(4817),o=n(53419),d=n(38621),c=n(69726),u=n(5524),m=n(96540),h=n(7812),f=n(1747),p=n(48881),g=n(13974),y=n(7026),x=n(20382);function v(e){let t,n,s,u,h,v,_,j,w,N,C=(0,a.c)(36),{yaml:S,isStreaming:I}=e,k=(0,g.p)(I),{selectedThreadID:L}=(0,r.Pk)(),{updateItem:T,openItem:E,openPreviewPane:D}=(0,f.xx)(),{messageId:R,messageIndex:A,messageTimestamp:O,setHasAutoOpenedPreviewPane:P}=(0,p.H)();C[0]!==L?(t=e=>((e,t)=>{try{var n=(0,x.Hh)(e);if("object"!=typeof n||null==n)return null;return"object"==typeof n&&null!==n&&"tag"in n&&"string"==typeof n.tag&&"name"in n&&"string"==typeof n.name&&"content"in n&&"string"==typeof n.content&&(!("repository"in n)||null==n.repository||"string"==typeof n.repository)&&1?n:null}catch{return(0,o.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,L),C[0]=L,C[1]=t):t=C[1];let F=t,M=(0,y.M)(S,F,null);e:{let e,t;if(!M){n=null;break e}let i=`planning-spec:${M.tag}#${A}`;C[2]!==O?(e=new Date(O),C[2]=O,C[3]=e):e=C[3],C[4]!==i||C[5]!==I||C[6]!==R||C[7]!==M.content||C[8]!==M.name||C[9]!==M.repository||C[10]!==M.tag||C[11]!==e?(t={name:M.name,tag:M.tag,repository:M.repository,content:M.content,messageId:R,id:i,type:"planning-spec",isUserEdited:!1,isStreaming:I,timestamp:e},C[4]=i,C[5]=I,C[6]=R,C[7]=M.content,C[8]=M.name,C[9]=M.repository,C[10]=M.tag,C[11]=e,C[12]=t):t=C[12],n=t}let $=n;C[13]!==E||C[14]!==D||C[15]!==P?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;E(e.id,n),D(),P(!0)},C[13]=E,C[14]=D,C[15]=P,C[16]=s):s=C[16];let B=s;C[17]!==I||C[18]!==k||C[19]!==B||C[20]!==$||C[21]!==T?(u=()=>{$&&(T($),(I||k)&&B($,{selectItem:!0}))},h=[I,k,B,$,T],C[17]=I,C[18]=k,C[19]=B,C[20]=$,C[21]=T,C[22]=u,C[23]=h):(u=C[22],h=C[23]),(0,m.useEffect)(u,h),C[24]!==B||C[25]!==$?(v=()=>{$&&B($)},C[24]=B,C[25]=$,C[26]=v):v=C[26];let V=v;C[27]!==L?(_=()=>(0,o.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:L}),j=[L],C[27]=L,C[28]=_,C[29]=j):(_=C[28],j=C[29]),(0,m.useEffect)(_,j),C[30]!==I?(w=()=>I?(0,i.jsx)(c.A,{size:"small",className:l.sX}):(0,i.jsx)(d.NoteIcon,{}),C[30]=I,C[31]=w):w=C[31];let U=w;return C[32]!==U||C[33]!==V||C[34]!==$?(N=(0,i.jsx)(b,{previewItem:$,onClick:V,getIcon:U}),C[32]=U,C[33]=V,C[34]=$,C[35]=N):N=C[35],N}function b(e){let t,n,r,l,o,c,m=(0,a.c)(16),{previewItem:p,onClick:g,getIcon:y}=e,{versionedItems:x}=(0,f.xx)();m[0]!==p||m[1]!==x?(t=p?(0,h.LU)(p.id,x):null,m[0]=p,m[1]=x,m[2]=t):t=m[2];let v=t;m[3]!==y?(n=y?.()||(0,i.jsx)(d.NoteIcon,{}),m[3]=y,m[4]=n):n=m[4],m[5]!==n?(r=(0,i.jsx)(u.l.LeadingVisual,{children:n}),m[5]=n,m[6]=r):r=m[6];let b=p?.name??"";return m[7]!==b?(l=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__title--d0IjJ",children:b}),m[7]=b,m[8]=l):l=m[8],m[9]!==v?(o=null!==v&&(0,i.jsx)(u.l.TrailingVisual,{children:(0,i.jsx)(s.g,{version:v})}),m[9]=v,m[10]=o):o=m[10],m[11]!==g||m[12]!==r||m[13]!==l||m[14]!==o?(c=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__container--UW6_s",children:(0,i.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,i.jsxs)(u.l.Item,{onSelect:g,className:"PlanningSpecBlock-module__item--lxgT1",children:[r,l,o]})})}),m[11]=g,m[12]=r,m[13]=l,m[14]=o,m[15]=c):c=m[15],c}try{v.displayName||(v.displayName="PlanningSpecBlock")}catch{}try{b.displayName||(b.displayName="PlanningSpecBlockDisplay")}catch{}},45270:(e,t,n)=>{n.d(t,{Dp:()=>h,ww:()=>p,Xv:()=>f});var i=n(74848),a=n(68273),s=n(21728),r=n(96540),l=n(61526);let o=/^(?<startOid>[a-fA-F0-9]{7,40})\.\.(?<endOid>[a-fA-F0-9]{7,40})$/,d=/^[a-fA-F0-9]{7,40}$/;function c(e){let t=e.match(o),n=t?.groups?.startOid,i=t?.groups?.endOid;return t&&n&&i?{startOid:n,endOid:i}:d.test(e)?{singleCommitOid:e}:void 0}var u=n(73282);let m=(0,r.createContext)({}),h=(0,a.Z6)()?function(e){let t,n,a,r,o=(0,s.c)(14),{baseRefOid:d,path:c,commits:h,children:f}=e;o[0]!==c?(t=(0,l.B6)(`${u.Yl}/*`,c),o[0]=c,o[1]=t):t=o[1];let p=null!==t;o[2]!==d||o[3]!==h||o[4]!==p||o[5]!==c?(n=p?y(c,d,h):g(c,d),o[2]=d,o[3]=h,o[4]=p,o[5]=c,o[6]=n):n=o[6];let{startOid:x,endOid:v}=n;o[7]!==d||o[8]!==v||o[9]!==x?(a={endOid:v,startOid:x,baseRefOid:d},o[7]=d,o[8]=v,o[9]=x,o[10]=a):a=o[10];let b=a;return o[11]!==f||o[12]!==b?(r=(0,i.jsx)(m.Provider,{value:b,children:f}),o[11]=f,o[12]=b,o[13]=r):r=o[13],r}:function({baseRefOid:e,path:t,commits:n,children:a}){let s=(0,r.useMemo)(()=>{let{startOid:i,endOid:a}=null!==(0,l.B6)(`${u.Yl}/*`,t)?y(t,e,n):g(t,e);return{endOid:a,startOid:i,baseRefOid:e}},[e,t,n]);return(0,i.jsx)(m.Provider,{value:s,children:a})},f=((0,a.Z6)(),()=>(0,r.useContext)(m)),p=(0,a.Z6)()?function(){let{endOid:e,startOid:t}=f();return!!e||!!t}:function(){let{endOid:e,startOid:t}=f();return!!e||!!t};function g(e,t){let n,i,a=e.split("/"),s=a[a.length-1];if(s){let e=c(s);e&&(n="startOid"in e?e.startOid:t,i="endOid"in e?e.endOid:e.singleCommitOid)}return{startOid:n,endOid:i}}function y(e,t,n){var i;let a=e.split("/"),s=a[a.length-1];if(!s)return{startOid:void 0,endOid:void 0};let r=c(s);return r?"startOid"in r?{startOid:r.startOid,endOid:r.endOid}:(i=r.singleCommitOid,{startOid:function(e,t,n){if(!n)return t;let i=n.findIndex(t=>t.oid===e);return -1===i||0===i?t:n[i-1]?.oid}(i,t,n),endOid:i}):{startOid:void 0,endOid:void 0}}try{m.displayName||(m.displayName="SelectedRefContext")}catch{}try{h.displayName||(h.displayName="SelectedRefContextProvider")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),l=n(38621);function o(e){return e.content}var d=n(90122),c=n(31629),u=n(39087),m=n(59370),h=n(53419),f=n(13647),p=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,h.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,d.Vq)(e),a="",s=e.metadata?.model;for await(let e of t.chatClient.getChatCompletion(i,s,t.signal))a+=e.content,e.usage&&(n=e.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e,t){let n=[];return e.metadata?.model&&t?.availableModels&&t.availableModels.length>0&&(t.availableModels.some(t=>t.id===e.metadata?.model)||n.push({error:`Prompt node uses unavailable model: ${e.metadata.model}`,errorType:s.T.UnavailableModel,involvedNodes:[e.id]})),n}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>l.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},i=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return i?{value:i.data??null}:{value:null}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>l.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:f.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content,e.id,t.signal);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e,t){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>l.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:f.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>l.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:f.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],i=void 0!==n?n:o(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e,t){let n=[],i=e.metadata;if("object"!=typeof i||!i)return n.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),n;switch(i.inputType){case"boolean":["true","false"].includes(e.content)||n.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof i.min&&n.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof i.max&&n.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(i.options)&&0!==i.options.length?i.options.includes(e.content)||n.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):n.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||n.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):n.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||n.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return n}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,c.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return p.j6;else return p.hO;return(0,u.J)(e,"icon")}return l.TypographyIcon},description:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>l.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:f.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e,t){let n=(0,i._)(this,g).get(e.type);return n?n.validate(e,t):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i);for(let a of t.isBlocking)e(a,n,i)}},YR:()=>function e(t,n){for(let i of(n(t),t.children))e(i,n)},u0:()=>l});var i=n(21728),a=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let i of(n.add(e),await t(e),e.children))await s(i,t,n);for(let i of e.blockedBy)await s(i,t,n);for(let i of e.isBlocking)await s(i,t,n)}}function r(e,t,n,i,a){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),l=n(r);if(null!=l){let t=s.get(l);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function l(){let e,t,n=(0,i.c)(6),{items:s,allOpenItems:l,versionedItems:f}=(0,a.xx)();n[0]!==l?(e=new Set(l),n[0]=l,n[1]=e):e=n[1];let p=e;return n[2]!==s||n[3]!==p||n[4]!==f?(t=r([...f.entries()].filter(h).map(e=>{let[,t]=e,n=t.find(e=>p.has(e));if(n)return s.get(n);let i=t.at(-1);return i?s.get(i):void 0}).filter(m),u,c,d,o),n[2]=s,n[3]=p,n[4]=f,n[5]=t):t=n[5],t}function o(e){return e.isBlockingTags}function d(e){return e.blockedByTags}function c(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function h(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Qk:()=>y,rR:()=>v,vx:()=>p,wu:()=>f});var i=n(21728),a=n(97286),s=n(99519),r=n(5533),l=n(33026),o=n(50050),d=n(99993);let c=[400,401,403,404];function u(){let{data:e}=(0,d._N)(h,"latest"),t=(0,o.Ud)(m);return t===l.qD||t===l.kj?e:t}function m(e){return e.version}function h(e){return e?.version}function f(e,t){return["execution",e,t]}function p(){let e,t=(0,i.c)(3),{data:n}=(0,d._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=f(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let{data:t}=(0,d._N)(x);return v(t??"",u()??"",e)}function x(e){return e?.id}function v(e,t,n){let o,d,c,u,m=(0,i.c)(14),h=(0,s.EY)();m[0]!==e||m[1]!==t?(o=f(e,t),m[0]=e,m[1]=t,m[2]=o):o=m[2],m[3]!==e||m[4]!==h||m[5]!==t?(d=async()=>{if(!e||!t)return null;let n=await h.getExecution(e,t,l.qD);if(!n.success){let e=Error("Error fetching execution.");throw e.cause=n.httpStatus,e}let i=n.data;return h.isExecutionRunning(i.id)!==(0,r.y)(i)?null:i},m[3]=e,m[4]=h,m[5]=t,m[6]=d):d=m[6];let p=!!e&&!!t;return m[7]!==n?(c=n&&{select:n},m[7]=n,m[8]=c):c=m[8],m[9]!==o||m[10]!==d||m[11]!==p||m[12]!==c?(u={queryKey:o,queryFn:d,enabled:p,...c,staleTime:3e5,retry:b},m[9]=o,m[10]=d,m[11]=p,m[12]=c,m[13]=u):u=m[13],(0,a.I)(u)}function b(e,t){return!("number"==typeof t.cause&&c.includes(t.cause))&&e<3}},48881:(e,t,n)=>{n.d(t,{A:()=>a,H:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{a.displayName||(a.displayName="ContentPreviewBlockContext")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(82590);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>x,Ud:()=>y});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),l=n(88431),o=n(96868),d=n(21728),c=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var h=n(53627);let f=(0,s.createContext)(new a.Lj(o.qB)),p=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,d.c)(9),[r]=(0,c.o)();a[0]!==r?(e=(0,u.hW)(r),a[0]=r,a[1]=e):e=a[1];let[l,o]=(0,s.useReducer)(m,e);return a[2]!==l?(t=()=>{let e=(0,u.Ts)(l);(0,h.MM)(e)},a[2]=l,a[3]=t):t=a[3],a[4]!==r||a[5]!==l?(n=[l,r],a[4]=r,a[5]=l,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==l?(i=[l,o],a[7]=l,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,l.N)(()=>{a.value=t},[t,a]);let o=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(f.Provider,{value:a,children:(0,i.jsx)(p.Provider,{value:o,children:e})})}function y(e){let t=(0,s.useContext)(f);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function x(){return(0,s.useContext)(p)}try{f.displayName||(f.displayName="LoopsStateContext")}catch{}try{p.displayName||(p.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},50393:(e,t,n)=>{n.d(t,{M:()=>s});let i=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),a=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');function s(e=!1){return Object.values(e?a:i)}},50625:(e,t,n)=>{n.d(t,{L:()=>m});var i=n(68273),a=n(21728),s=n(82075),r=n(96540);let{getItem:l,removeItem:o,setItem:d}=(0,s.D)("localStorage"),c=(e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:s}=e;if(t)return`PullRequest:${s}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${s}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function u(e,t){let n=l(e),i=!!n?.text?.trim();return(0,r.useEffect)(()=>{i&&t?.(n)},[i]),{hasPersistedComment:i,removePersistedCommentFromStorage:()=>{o(e),i=!1,n=null}}}(0,i.GV)();let m=(0,i.GV)()?function(e){let t,n,i,s,r=(0,a.c)(16),{diffSide:l,filePath:o,handlePersistedCommentExists:m,line:h,subjectId:f,threadId:p,fileLevelComment:g}=e;e:{let e;if(p){t=p;break e}r[0]!==l||r[1]!==g||r[2]!==o||r[3]!==h||r[4]!==f||r[5]!==p?(e=p??c({diffSide:l,filePath:o,line:h,subjectId:f},g),r[0]=l,r[1]=g,r[2]=o,r[3]=h,r[4]=f,r[5]=p,r[6]=e):e=r[6],t=e}let y=t,{hasPersistedComment:x,removePersistedCommentFromStorage:v}=u(y,m);r[7]!==y?(n=e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(y,t)},r[7]=y,r[8]=n):n=r[8];let b=n;r[9]!==f?(i=e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:f},e.shouldBeFileLevelComment),t)},r[9]=f,r[10]=i):i=r[10];let _=i;return r[11]!==x||r[12]!==_||r[13]!==b||r[14]!==v?(s={hasPersistedComment:x,persistCommentToStorage:b,persistCommentOnGivenLineToStorage:_,removePersistedCommentFromStorage:v},r[11]=x,r[12]=_,r[13]=b,r[14]=v,r[15]=s):s=r[15],s}:function({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:a,threadId:s,fileLevelComment:l}){let o=(0,r.useMemo)(()=>s||(s??c({diffSide:e,filePath:t,line:i,subjectId:a},l)),[e,t,i,a,s,l]),{hasPersistedComment:m,removePersistedCommentFromStorage:h}=u(o,n);return{hasPersistedComment:m,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(o,t)},persistCommentOnGivenLineToStorage:e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:a},e.shouldBeFileLevelComment),t)},removePersistedCommentFromStorage:h}}},51391:(e,t,n)=>{n.d(t,{Aj:()=>u,EV:()=>d,KV:()=>m,M6:()=>o,bo:()=>l,sB:()=>c});var i=n(36472),a=n(3038),s=n(61583),r=n(71315);function l(e){return`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}function o({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}function d({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:s}){let r,o=new Set([]);if(0===t.length)return{selectedLineKeys:o};if(!s)return{selectedLineKeys:new Set([])};let{startLineNumber:d,startOrientation:c,endLineNumber:u,endOrientation:m}=s,h=t;if(n){let e=(0,a.Mk)(t);h=e.leftLines,r=e.rightLines}let f={diffAnchor:e,endLineNumber:u??d,endOrientation:m??c,startLineNumber:d,startOrientation:c},p=(0,i.A)({selectedLineRange:f,leftLines:h,rightLines:r});for(let e=0;e<p.selectedLeftLines.length;e++){let t=p.selectedLeftLines[e];t&&!(0,a.Po)(t)&&o.add(l(t))}for(let e=0;e<p.selectedRightLines.length;e++){let t=p.selectedRightLines[e];t&&!(0,a.Po)(t)&&o.add(l(t))}return{selectedLineKeys:o,startOrientation:c,selectedLineRange:f}}function c(e){let t;for(t of e);return t}function u(e){return e.values().next().value}function m(e){let t=(0,s.EW)(r.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,a=t[4]?"L"===t[4]?"left":"right":void 0,l=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:a??n,endLineNumber:l??i,startOrientation:n,startLineNumber:i}}},51587:(e,t,n)=>{n.d(t,{N:()=>s});var i=n(79634),a=n(96540);let s=()=>{let e=(0,i.X)();return(0,a.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),l=n(16213),o=n(91348),d=n(45363),c=n(21046),u=n(90122),m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,h),chatClient:(0,i._)(this,f),codeExecutor:(0,i._)(this,p),signal:t,onPartialResult:n,execution:e};return d.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n,i){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,f,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,h,t),(0,s._)(this,f,n),(0,s._)(this,p,i)}};var g=n(33026),y=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,w=new WeakMap,N=new WeakMap,C=new WeakSet,S=new WeakSet,I=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,o.FT)((0,i._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,S,L).call(this,n,e,t)))}stop(e){(0,i._)(this,N).abort(),e((0,i._)(this,_))}constructor(e,t,n,i,r){(0,l._)(this,C),(0,l._)(this,S),(0,l._)(this,I),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,N,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,x,i),(0,s._)(this,v,r),(0,s._)(this,b,e),(0,s._)(this,_,t),(0,s._)(this,j,(0,o.f0)(e.nodes)),(0,s._)(this,w,new Map),(0,s._)(this,N,new AbortController)}};function k(){return(0,i._)(this,N).signal.aborted}async function L(e,t,n){let a=(0,i._)(this,w).get(e.id);if(a)return a;let s=(0,r._)(this,I,T).call(this,e,t,n);return(0,i._)(this,w).set(e.id,s),s}async function T(e,t,n){if((0,r._)(this,C,k).call(this))return null;let a=await n((0,i._)(this,b).id,(0,i._)(this,b).version||g.kj,(0,i._)(this,_));if(!a.success)throw Error("Unable to load execution");let s=a.data,l=s.nodes[e.id]?.value;if(l)return l;let o=[...new Set((0,i._)(this,j).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(o.map(async e=>[e.id,await (0,r._)(this,S,L).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,C,k).call(this))return null;let h=Object.fromEntries(m);try{let n,a,l=(a=(n={...e}).content,"string"==typeof a&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,c.vV)(`Node with ID "${i}" not found in node map`),e;let l=r;if(a){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(e,a);if(null!==t)l=t;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`)}return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(a,h,d.C.requiresCodeEvaluation(e.type))),n),o=new NodeRunner(l,(0,i._)(this,y),(0,i._)(this,x),(0,i._)(this,v));await t({type:"SET_RUNNING",nodeID:e.id});let m=async n=>{(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:f}=await o.run(s,(0,i._)(this,N).signal,m);return(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:f}),f}catch(n){var f;return(0,r._)(this,C,k).call(this)||await t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(f=n)instanceof Error?f.message:"string"==typeof f?f:"object"==typeof f?JSON.stringify(f):""}),null}}var E=n(43134),D=n(76746),R=n(53419),A=n(49835),O=new WeakMap,P=new WeakMap,F=new WeakMap,M=new WeakMap,$=new WeakMap,B=new WeakMap,V=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,i._)(this,O).getLoop(e,t)}getAllLoops(){return(0,i._)(this,O).listLoops()}getLoopVersions(e){return(0,i._)(this,O).listLoopVersions(e)}createLoop(e){return(0,i._)(this,O).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,O).getLoop(e,g.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,O).updateLoop(e,g.kj,a)}async deleteLoop(e){return(0,E._T)(e),(0,i._)(this,O).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,O).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,O).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,i._)(this,O).getLoop(e,g.qD);return t.success?(0,i._)(this,O).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,O).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,O).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,O).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,O).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,l]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===l.value&&r.nodes[s].error===l.error||await (0,i._)(this,O).updateNodeExecution(e,t,n,s,l);return await (0,i._)(this,O).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,$).get(e)}getRunningExecutions(){return(0,i._)(this,B)}async runPipeline(e,t,n,a){if((0,D.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,P),(0,i._)(this,F),(0,i._)(this,M));(0,i._)(this,$).set(t,s),(0,i._)(this,B).add(t);try{await s.run(n,a),(0,R.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,R.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,$).delete(t),(0,i._)(this,B).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,$).get(e);n&&(n.stop(t),(0,i._)(this,$).delete(e),(0,i._)(this,B).delete(e),(0,R.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,O).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,O).unshareLoop(e)}constructor(e,t,n,i){(0,l._)(this,V),(0,a._)(this,O,{writable:!0,value:void 0}),(0,a._)(this,P,{writable:!0,value:void 0}),(0,a._)(this,F,{writable:!0,value:void 0}),(0,a._)(this,M,{writable:!0,value:void 0}),(0,a._)(this,$,{writable:!0,value:new Map}),(0,a._)(this,B,{writable:!0,value:new A.yy}),(0,r._)(this,V,U).call(this),(0,s._)(this,O,e),(0,s._)(this,P,t),(0,s._)(this,F,n),(0,s._)(this,M,i)}};function U(){indexedDB.deleteDatabase("copilot-pipes")}},57244:(e,t,n)=>{n.d(t,{N:()=>aW});var i,a,s,r,l=n(21728),o=n(50467),d=n(74848),c=n(11267),u=n(33592),m=n(17593),h=n(76143),f=n(69599),p=n(26956),g=n(27912),y=n(79634),x=n(91747),v=n(46251),b=n(84268),_=n(96540),j=n(97189),w=n(76977),N=n(47865),C=n(79064);function S(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,i=n.selectedBranch||"",a=n.selectedCustomAgent||"";t.current(n.text,e,i,a)}else t.current(e,null,"","")}catch{t.current(e,null,"","")}}var I=n(93654),k=n(60284),L=n(64894),T=n(76720),E=n(38621),D=n(94011),R=n(77430),A=n(30459),O=n(84078),P=n(56149),F=n(94236),M=n(5524);let $="AgentsBlankslateBanner-module__banner--DpsVX";var B=n(25641),V=n(47723);function U({enterprise:e,requestableOrgs:t,adminableOrgs:n}){let i=!!e?.isAdmin,a=!!e?.policyDisabled,s=t.length+n.length,r=t.find(e=>e.requestedAccess),l=n.length>0?n[0]:t[0],[o,c]=(0,_.useState)(void 0!==r?r:l),[u,m]=(0,_.useState)(o?.isAdmin||!1),[h,f]=(0,_.useState)(o?.requestedAccess||!1),[p,g]=(0,_.useState)(!1),[y,x]=(0,_.useState)(!1),[v,b]=(0,_.useState)(!1),[j,w]=(0,_.useState)(null),N=u&&!a||i,C=s>1&&!i&&!h,{sendClickAnalyticsEvent:S}=(0,A.S)(),I=(0,_.useCallback)(e=>{S({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_blankslate;`})},[S]),k=(0,_.useCallback)(async()=>{if(o){b(!1),w(null);try{h?(await (0,D.Hy)(o.name),I("request_removed")):(await (0,D.Rp)(o.name),w(`Request sent to ${o.name}.`),I("request")),f(!h)}catch{b(!0),w(`An error occurred while ${h?"removing":"sending"} your feature request. Please try again later.`)}finally{g(!1)}}},[h,o,I]);(0,_.useEffect)(()=>{p&&k()},[k,p]),(0,_.useEffect)(()=>{y&&(async()=>{try{e&&i?(I("enterprise_enable"),window.location.href=(0,V.Wt)(e.name)):o&&(await (0,D.pf)(o.name),w(`Feature enabled for ${o.name}. It may take a few minutes for changes to take effect.`),I("org_enable"))}catch{b(!0),w("An error occurred while enabling the feature. Please try again later.")}})()},[y,i,I]);let L=1===s&&o&&!a?(0,d.jsxs)(d.Fragment,{children:["Access to Copilot coding agent has been disabled by ",(0,d.jsx)("span",{className:"text-bold",children:o.name}),"."]}):`Access to Copilot coding agent has been disabled by your ${a?"enterprise":"organizations"}.`;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(O.l,{variant:"warning",title:"Copilot coding agent access request",hideTitle:!0,className:$,"data-testid":"agents-access-request-banner",primaryAction:(0,d.jsx)(q,{canOpenMenu:C,canEnableFeature:N,accessRequested:h,isEnabling:y,isRequesting:p,setIsEnabling:x,setIsRequesting:g,setIsOrgAdmin:m,setCurrentOrg:c,adminableOrgs:n,requestableOrgs:t,setNotice:w}),children:(0,d.jsx)(O.l.Description,{children:L})}),j&&(0,d.jsx)("span",{className:`AgentsBlankslateBanner-module__notice--wwdWQ ${v?"AgentsBlankslateBanner-module__error--j2QU3":""}`,"data-testid":"access-request-notice",children:j})]})}function q({adminableOrgs:e,requestableOrgs:t,canOpenMenu:n,canEnableFeature:i,accessRequested:a,isEnabling:s,isRequesting:r,setCurrentOrg:l,setIsOrgAdmin:o,setIsEnabling:c,setIsRequesting:u,setNotice:m}){let[h,f]=(0,_.useState)(!1),p=(0,_.useRef)(null),g=(0,_.useRef)(null),y=(0,_.useId)(),x=`agents-access-banner-action-portal-${y}`;return(0,_.useEffect)(()=>{g.current&&(0,P.cw)(g.current,x)},[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(O.l.PrimaryAction,{onClick:n?()=>{m(null),f(!h)}:()=>{i?c(!0):u(!0)},className:!i&&a?"AgentsBlankslateBanner-module__removeAccessButton--eEjZy":"",trailingAction:n?E.TriangleDownIcon:void 0,inactive:s,loading:r,ref:p,children:i?"Enable feature":a?"Remove request":"Request access"}),(0,d.jsx)("div",{ref:g,children:(0,d.jsx)(F.W,{open:h,onOpenChange:f,anchorRef:p,children:(0,d.jsx)(F.W.Overlay,{align:"end",portalContainerName:x,width:"small",children:(0,d.jsxs)(M.l,{children:[e.length>0&&(0,d.jsxs)(M.l.Group,{children:[(0,d.jsx)(M.l.GroupHeading,{children:"Select organization to enable access"}),(0,d.jsx)(G,{orgs:e,setCurrentOrg:l,setIsOrgAdmin:o,setStatus:c})]}),t.length>0&&e.length>0&&(0,d.jsx)(M.l.Divider,{}),t.length>0&&(0,d.jsxs)(M.l.Group,{children:[(0,d.jsx)(M.l.GroupHeading,{children:"Select organization to request access"}),(0,d.jsx)(G,{orgs:t,setCurrentOrg:l,setIsOrgAdmin:o,setStatus:u})]})]})})})})]})}function G({orgs:e,setCurrentOrg:t,setIsOrgAdmin:n,setStatus:i}){return e.map(e=>(0,d.jsxs)(M.l.Item,{onSelect:()=>{t(e),n(e.isAdmin),i(!0)},children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(R.r,{src:e.avatarUrl,square:!0})}),e.name]},e.name))}function H(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(O.l,{variant:"warning",title:"Copilot coding agent access disabled",className:`${$} AgentsBlankslateBanner-module__basic--nJzrr`,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,d.jsx)(O.l.Description,{children:"Access to Copilot coding agent has been disabled by your administrator."})}),t[0]=e):e=t[0],e}function K(){let e,t,n=(0,l.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(O.l.PrimaryAction,{as:"a",href:B.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(O.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${$} AgentsBlankslateBanner-module__upsell--XAdj_`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,d.jsx)(O.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{U.displayName||(U.displayName="AccessRequestBanner")}catch{}try{q.displayName||(q.displayName="RequestAccessAction")}catch{}try{G.displayName||(G.displayName="OrgActionList")}catch{}try{H.displayName||(H.displayName="AccessDisabledBanner")}catch{}try{K.displayName||(K.displayName="UpgradeBanner")}catch{}function W(e){let t,n,i,a,s,r,o,c,u,m,h=(0,l.c)(20),{hasCEorCBAccess:g,memberRequestEntities:y}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("copilot_agents_blankslate_mem_requests"),h[0]=t):t=h[0];let x=t;h[1]!==y?.orgs?.requestable?(n=y?.orgs?.requestable||[],h[1]=y?.orgs?.requestable,h[2]=n):n=h[2];let v=n;h[3]!==y?.orgs?.adminable?(i=y?.orgs?.adminable||[],h[3]=y?.orgs?.adminable,h[4]=i):i=h[4];let b=i,_=v.length+b.length>0,j=x&&y&&(_||y.enterprise);return h[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,d.jsx)(T.E.Visual,{children:(0,d.jsx)(E.AgentIcon,{size:24})}),s=(0,d.jsx)(T.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),r=(0,d.jsx)(T.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),o=(0,d.jsx)(T.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),h[5]=a,h[6]=s,h[7]=r,h[8]=o):(a=h[5],s=h[6],r=h[7],o=h[8]),h[9]!==b||h[10]!==g||h[11]!==y||h[12]!==v||h[13]!==j?(c=!0===g&&(j?(0,d.jsx)(U,{enterprise:y.enterprise,requestableOrgs:v,adminableOrgs:b}):(0,d.jsx)(H,{})),h[9]=b,h[10]=g,h[11]=y,h[12]=v,h[13]=j,h[14]=c):c=h[14],h[15]!==g?(u=!1===g&&(0,d.jsx)(K,{}),h[15]=g,h[16]=u):u=h[16],h[17]!==c||h[18]!==u?(m=(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(p.Zf.Container,{width:"large",children:(0,d.jsxs)(T.E,{size:"medium",className:"AgentsBlankslate-module__blankslate--h3RJ8",children:[a,s,r,o,c,u]})})}),h[17]=c,h[18]=u,h[19]=m):m=h[19],m}try{W.displayName||(W.displayName="AgentsBlankslate")}catch{}function z(e){let t,n,i,a,s=(0,l.c)(10),{problemStatement:r,handleRetry:o,handleDismiss:c}=e,u=r??"";s[0]!==u?(t=function(e,t=50,n=2){let i=t*n;return e.length<=i?e:`${e.substring(0,i).trim()}...`}(u,20,1),s[0]=u,s[1]=t):t=s[1];let m=t,h=`Failed to create a task for '${m}'. Please try again.`;return s[2]!==c?(n=(0,d.jsx)(O.l.SecondaryAction,{onClick:c,children:"Dismiss"}),s[2]=c,s[3]=n):n=s[3],s[4]!==o?(i=(0,d.jsx)(O.l.PrimaryAction,{onClick:o,children:"Retry"}),s[4]=o,s[5]=i):i=s[5],s[6]!==h||s[7]!==n||s[8]!==i?(a=(0,d.jsx)(O.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:h,secondaryAction:n,primaryAction:i}),s[6]=h,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}try{z.displayName||(z.displayName="TaskCreationFailedBanner")}catch{}var Q=n(30388);let Z="TaskList-module__button--FzNZb",J="TaskList-module__counter--suSM7";var Y=n(62935);let X="TaskListItem-module__description--GUKJ9";var ee=n(67154),et=n(82595);let en="PullRequestDiffSummaryText-module__prDiffSummary--EzG14";function ei(e){let t,n,i,a,s,r,o,c=(0,l.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(c[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),c[0]=u.lines_added,c[1]=t):t=c[1],c[2]!==t?(n=(0,d.jsxs)("span",{"aria-hidden":"true",className:`${en} PullRequestDiffSummaryText-module__added--I0cdZ`,children:["+",t]}),c[2]=t,c[3]=n):n=c[3],c[4]!==u.lines_deleted?(i=u.lines_deleted.toLocaleString(),c[4]=u.lines_deleted,c[5]=i):i=c[5],c[6]!==i?(a=(0,d.jsxs)("span",{"aria-hidden":"true",className:`${en} PullRequestDiffSummaryText-module__deleted--M94wu`,children:["-",i]}),c[6]=i,c[7]=a):a=c[7],c[8]!==u.lines_added||c[9]!==u.lines_deleted?(s=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),c[8]=u.lines_added,c[9]=u.lines_deleted,c[10]=s):s=c[10],c[11]!==s?(r=(0,d.jsx)("span",{className:"sr-only",children:s}),c[11]=s,c[12]=r):r=c[12],c[13]!==n||c[14]!==a||c[15]!==r?(o=(0,d.jsxs)(v.B,{direction:"horizontal",gap:"condensed",children:[n,a,r]}),c[13]=n,c[14]=a,c[15]=r,c[16]=o):o=c[16],o):null}try{ei.displayName||(ei.displayName="PullRequestDiffSummaryText")}catch{}var ea=n(44334),es=n(62189),er=n(45244);let el=e=>{let t,n,i,a=(0,l.c)(7),{text:s}=e,[r,o]=(0,_.useState)(null),[c,u]=(0,_.useState)("none");a[0]!==r||a[1]!==s?(t=()=>{if(null===r)return void o(s);if(s!==r){u("exiting");let e=setTimeout(()=>{o(s),u("entering")},400);return()=>clearTimeout(e)}},n=[s,r],a[0]=r,a[1]=s,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,_.useEffect)(t,n);let m=`TaskListItem-module__fadeText--giNoG ${"entering"===c?"TaskListItem-module__entering--aB9fl":"exiting"===c?"TaskListItem-module__exiting--m4Koz":null}`;return a[4]!==r||a[5]!==m?(i=(0,d.jsx)("span",{className:m,children:r}),a[4]=r,a[5]=m,a[6]=i):i=a[6],i};function eo(e){let t,n,i,a,s,r,o,c,u,m,h,f=(0,l.c)(39),{state:p,revisionCount:g,startedAt:y,prState:v,prUrl:b,prTitle:j,prNwo:w,prNumber:N,prGlobalId:C,prInMergeQueue:S,prDiffSummary:I}=e,[k,L]=(0,_.useState)(null),[T,E]=(0,_.useState)(!1);f[0]!==S||f[1]!==v||f[2]!==p?(t="merged"===v?"Merged":"closed"===v?"Closed":S?"Queued to merge":p&&(0,ee.wG)(p)||"",f[0]=S,f[1]=v,f[2]=p,f[3]=t):t=f[3];let D=t;f[4]!==S||f[5]!==v||f[6]!==p?(n=(0,ea.T)(v,S,p),f[4]=S,f[5]=v,f[6]=p,f[7]=n):n=f[7];let R=n;f[8]!==k||f[9]!==R?(i=()=>{if(!k)return void L(R);if(k.icon!==R.icon){E(!0);let e=setTimeout(()=>{L(R),E(!1)},300);return()=>clearTimeout(e)}},a=[R,k],f[8]=k,f[9]=R,f[10]=i,f[11]=a):(i=f[10],a=f[11]),(0,_.useEffect)(i,a);let A=g>0?`${g} revision${g>1?"s":""} \xb7 `:null,O=b,P=(0,x.u)("copilot_swe_agent_progress_commands");if(P){let e;f[12]!==C?(e=(0,es.U)(C),f[12]=C,f[13]=e):e=f[13],O=e}let F=!P,M=`TaskListItem-module__iconTransition--h8TDX ${T?"TaskListItem-module__fadeOut--TTRa9":""}`;return f[14]!==R||f[15]!==M?(s=(0,d.jsx)(Q.qJ.Item.LeadingVisual,{children:(0,d.jsx)(et.I,{...R,className:M})}),f[14]=R,f[15]=M,f[16]=s):s=f[16],f[17]!==j?(r=(0,d.jsx)(Q.qJ.Item.Title,{children:j}),f[17]=j,f[18]=r):r=f[18],f[19]!==I||f[20]!==p?(o=p&&"in_progress"!==p&&I&&(0,d.jsx)(Q.qJ.Item.Actions,{children:(0,d.jsx)(ei,{prDiffSummary:I})}),f[19]=I,f[20]=p,f[21]=o):o=f[21],f[22]!==y?(c=(0,d.jsx)(Y.A,{format:"micro",datetime:y}),f[22]=y,f[23]=c):c=f[23],f[24]!==D?(u=(0,d.jsx)(el,{text:D}),f[24]=D,f[25]=u):u=f[25],f[26]!==N||f[27]!==w||f[28]!==A||f[29]!==c||f[30]!==u?(m=(0,d.jsx)(Q.qJ.Item.Description,{children:(0,d.jsxs)("span",{className:X,children:[w,"#",N," \xb7 started ",c," ago \xb7"," ",A,u]})}),f[26]=N,f[27]=w,f[28]=A,f[29]=c,f[30]=u,f[31]=m):m=f[31],f[32]!==m||f[33]!==F||f[34]!==s||f[35]!==r||f[36]!==o||f[37]!==O?(h=(0,d.jsxs)(Q.qJ.Item,{href:O,isExternalLink:F,children:[s,r,o,m]}),f[32]=m,f[33]=F,f[34]=s,f[35]=r,f[36]=o,f[37]=O,f[38]=h):h=f[38],h}function ed(e){let t,n,i,a,s=(0,l.c)(7),{repositoryNwo:r}=e,o=`Creating task in ${r}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(Q.qJ.Item.LeadingVisual,{children:(0,d.jsx)(et.I,{icon:E.DotFillIcon,color:"var(--fgColor-attention)"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.jsx)(Q.qJ.Item.Title,{children:(0,d.jsx)(er.b,{className:"fgColor-muted",children:"Creating task"})}),s[1]=n):n=s[1],s[2]!==r?(i=(0,d.jsxs)(Q.qJ.Item.Description,{children:[(0,d.jsx)("span",{className:X,children:r})," \xb7 Initializing pull request\u2026"]}),s[2]=r,s[3]=i):i=s[3],s[4]!==o||s[5]!==i?(a=(0,d.jsxs)(Q.qJ.Item,{"aria-label":o,children:[t,n,i]}),s[4]=o,s[5]=i,s[6]=a):a=s[6],a}try{el.displayName||(el.displayName="FadeText")}catch{}try{eo.displayName||(eo.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(Q.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{ed.displayName||(ed.displayName="OptimisticTaskListItem")}catch{}function ec(e){let t,n=(0,l.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,d.jsx)(Q.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,d.jsxs)(Q.qJ.EmptyState,{children:[(0,d.jsx)(E.AlertIcon,{size:24}),(0,d.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,d.jsx)(Q.qJ.EmptyState,{children:(0,d.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,d.jsx)(d.Fragment,{children:i.map(eu)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function eu(e){return e.isOptimistic?(0,d.jsx)(ed,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,d.jsx)(eo,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ec.displayName||(ec.displayName="OpenTaskList")}catch{}function em(e){let t,n,i=(0,l.c)(5),{tasks:a,isError:s}=e;return i[0]!==s||i[1]!==a?(t=s?(0,d.jsxs)(Q.qJ.EmptyState,{children:[(0,d.jsx)(E.AlertIcon,{size:24}),(0,d.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,d.jsx)(Q.qJ.EmptyState,{children:(0,d.jsx)("p",{children:"No closed tasks yet."})}):a.map(eh),i[0]=s,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,d.jsx)(Q.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function eh(e){return(0,d.jsx)(eo,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{em.displayName||(em.displayName="ClosedTaskList")}catch{}function ef(e){let t,n,i,a,s,r,o,c,u,m,h,f=(0,l.c)(31),{tasks:p,isError:g,activeTab:y,setActiveTab:x}=e;f[0]!==p?(t=p.filter(eg),f[0]=p,f[1]=t):t=f[1];let v=t;f[2]!==p?(n=p.filter(ep),f[2]=p,f[3]=n):n=f[3];let b=n;f[4]!==x?(i=()=>x("open"),f[4]=x,f[5]=i):i=f[5];let _="open"===y;f[6]!==v.length?(a=(0,d.jsx)("span",{className:J,children:v.length}),f[6]=v.length,f[7]=a):a=f[7],f[8]!==i||f[9]!==_||f[10]!==a?(s=(0,d.jsxs)("button",{onClick:i,role:"tab","aria-selected":_,"aria-controls":"tasks-list",id:"open-tab",className:Z,children:["Open ",a]}),f[8]=i,f[9]=_,f[10]=a,f[11]=s):s=f[11],f[12]!==x?(r=()=>x("closed"),f[12]=x,f[13]=r):r=f[13];let j="closed"===y;return f[14]!==b.length?(o=(0,d.jsx)("span",{className:J,children:b.length}),f[14]=b.length,f[15]=o):o=f[15],f[16]!==r||f[17]!==j||f[18]!==o?(c=(0,d.jsxs)("button",{onClick:r,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"closed-tab",className:Z,children:["Closed ",o]}),f[16]=r,f[17]=j,f[18]=o,f[19]=c):c=f[19],f[20]!==c||f[21]!==s?(u=(0,d.jsx)(Q.qJ.Header,{children:(0,d.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:"TaskList-module__filterButtons--DNyGe",children:[s,c]})}),f[20]=c,f[21]=s,f[22]=u):u=f[22],f[23]!==y||f[24]!==b||f[25]!==g||f[26]!==v?(m="open"===y?(0,d.jsx)(ec,{tasks:v,isError:g}):(0,d.jsx)(em,{tasks:b,isError:g}),f[23]=y,f[24]=b,f[25]=g,f[26]=v,f[27]=m):m=f[27],f[28]!==u||f[29]!==m?(h=(0,d.jsxs)(Q.qJ,{children:[u,m]}),f[28]=u,f[29]=m,f[30]=h):h=f[30],h}function ep(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function eg(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{ef.displayName||(ef.displayName="TaskList")}catch{}function ey(){let e,t,n,i=(0,l.c)(7),{agentsEnabled:a,hasCEorCBAccess:s,memberRequestEntities:r}=(0,y.X)();i[0]!==a?(e=(0,f.G7)("copilot_chat_agents_empty_state")&&!a,i[0]=a,i[1]=e):e=i[1];let o=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(g.P.Sidebar,{children:(0,d.jsx)(c.U,{})}),i[2]=t):t=i[2],i[3]!==s||i[4]!==r||i[5]!==o?(n=(0,d.jsx)(j.Fn,{children:(0,d.jsxs)(g.P,{"data-testid":"agents-layout",children:[t,(0,d.jsx)(g.P.ColumnLeft,{children:o?(0,d.jsx)(W,{hasCEorCBAccess:s,memberRequestEntities:r}):(0,d.jsx)(ex,{})})]})}),i[3]=s,i[4]=r,i[5]=o,i[6]=n):n=i[6],n}function ex(){let e,t,n,i,a,s,r,o,c,h,f,g,b,j,T,E,D,R,A,O,P,F,M=(0,l.c)(38),[$,B]=(0,_.useState)("open"),{sessionsPollingInterval:V,showCopilotCodingAgentPremiumRequestsBanner:U,tasks:q,pullRequestsMap:G}=(0,y.X)(),H=(0,x.u)("copilot_agent_task_list_v2");M[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],M[0]=e):e=M[0];let[K,W]=(0,_.useState)(e);(0,w._)(),M[1]!==G||M[2]!==q||M[3]!==V?(t={sessionsPollingInterval:V,initialTasks:q,initialPullRequestsMap:G},M[1]=G,M[2]=q,M[3]=V,M[4]=t):t=M[4];let{tasks:Q,isError:Z}=(0,I.si)(t);M[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{W(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},M[5]=n):n=M[5];let{createTask:J}=(0,N.Z)(n),Y=(0,u.b)();M[6]===Symbol.for("react.memo_cache_sentinel")?(i=[],M[6]=i):i=M[6],(0,_.useEffect)(ev,i),M[7]!==Y?(a=()=>{Y.selectThread(null,{includeThreads:!1,clearTopic:!0})},s=[Y],M[7]=Y,M[8]=a,M[9]=s):(a=M[8],s=M[9]),(0,_.useEffect)(a,s),M[10]!==J||M[11]!==Y?(r=async(e,t,n,i,a,s)=>{let r=e.trim();""!==r&&n&&""!==n.trim()&&(t?(B("open"),J({nwo:t.nameWithOwner,problemStatement:r,baseRef:n,eventType:"agents_page",eventContent:r,customAgent:i,model:s})):Y.sendChatMessage({content:r,thread:null,references:[]}))},M[10]=J,M[11]=Y,M[12]=r):r=M[12];let X=r;P=(0,l.c)(5),F=(0,_.useRef)(X),P[0]!==X?(D=()=>{F.current=X},R=[X],P[0]=X,P[1]=D,P[2]=R):(D=P[1],R=P[2]),(0,_.useEffect)(D,R),P[3]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{let e=C.Jt.getTaskEntrypointMessage();e&&(C.Jt.setTaskEntrypointMessage(null),S(e.message,F))},O=[],P[3]=A,P[4]=O):(A=P[3],O=P[4]),(0,_.useEffect)(A,O),M[13]!==J||M[14]!==K?(o=e=>{let t=K[e];t&&(W(t=>t.filter((t,n)=>n!==e)),J({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},M[13]=J,M[14]=K,M[15]=o):o=M[15];let ee=o,[et,en]=(0,_.useState)(!1);return M[16]!==et||M[17]!==U?(c=U&&!et&&(0,d.jsx)(p.Zf.Banner,{children:(0,d.jsx)(L.C,{onBannerDismiss:()=>en(!0)})}),M[16]=et,M[17]=U,M[18]=c):c=M[18],M[19]===Symbol.for("react.memo_cache_sentinel")?(h=(0,d.jsxs)(p.Zf.Header,{children:[(0,d.jsx)(p.Zf.Title,{children:"Agents"}),(0,d.jsx)(p.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),M[19]=h):h=M[19],M[20]!==X?(f=(0,d.jsx)(k.Q,{handleUserSubmit:X}),M[20]=X,M[21]=f):f=M[21],M[22]!==K||M[23]!==ee?(g=K.length>0&&(0,d.jsx)(v.B,{direction:"vertical",className:"AgentsView-module__failedTaskCreationBanners--bUn1A",children:K.map((e,t)=>(0,d.jsx)(z,{problemStatement:e?.problemStatement,handleRetry:()=>ee(t),handleDismiss:()=>{W(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),M[22]=K,M[23]=ee,M[24]=g):g=M[24],M[25]!==f||M[26]!==g?(b=(0,d.jsxs)(p.Zf.Section,{children:[f,g]}),M[25]=f,M[26]=g,M[27]=b):b=M[27],M[28]!==$||M[29]!==Z||M[30]!==H||M[31]!==Q?(j=(0,d.jsx)(p.Zf.Section,{children:H?(0,d.jsx)(m.f,{title:"Recent sessions",initialResultCount:25,showPillMenu:!0}):(0,d.jsx)(ef,{tasks:Q,isError:Z,activeTab:$,setActiveTab:B})}),M[28]=$,M[29]=Z,M[30]=H,M[31]=Q,M[32]=j):j=M[32],M[33]===Symbol.for("react.memo_cache_sentinel")?(T=(0,d.jsx)(eb,{}),M[33]=T):T=M[33],M[34]!==b||M[35]!==j||M[36]!==c?(E=(0,d.jsxs)(p.Zf.Container,{noHeader:!0,width:"small",children:[c,h,b,j,T]}),M[34]=b,M[35]=j,M[36]=c,M[37]=E):E=M[37],E}function ev(){(0,h.D)("Agents \xb7 GitHub Copilot")}function eb(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("div",{className:"AgentsView-module__copilotDisclosure--lAild",children:(0,d.jsxs)("p",{className:"AgentsView-module__copilotDisclosureText--myF9L",children:[(0,d.jsx)(b.A,{href:"https://docs.github.com/copilot/responsible-use/copilot-coding-agent",target:"_blank",rel:"noopener noreferrer",muted:!0,inline:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]})}),t[0]=e):e=t[0],e}try{ey.displayName||(ey.displayName="AgentsViewWrapper")}catch{}try{ex.displayName||(ex.displayName="AgentsView")}catch{}try{eb.displayName||(eb.displayName="CopilotDisclosure")}catch{}var e_=n(55248);let ej=/\/copilot\/agents/,ew=`${B.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t,n=!1){(0,o._)(this,"id",V.Dv),(0,o._)(this,"displayName",V.Ff),(0,o._)(this,"createTaskFromInput",void 0),(0,o._)(this,"handleUserSubmitRef",void 0),(0,o._)(this,"agentsEnabled",void 0),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:"agents-view",Component:ey,routes:[ej]}]),(0,o._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:E.AgentIcon,isNew:!0,order:0,enabled:()=>this.agentsEnabled,disabledAction:e=>{e(ew,{preventTurbo:!0})},execute:async(e,t,n)=>!(this.agentsEnabled&&t.selectedThreadID&&(0,f.G7)("copilot_immersive_task_within_chat_thread"))&&(this.agentsEnabled&&this.createTaskFromInput&&this.handleUserSubmitRef?S(e,this.handleUserSubmitRef):(C.Jt.setTaskEntrypointMessage(e),n(ew,{preventTurbo:!0})),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"]}),(0,o._)(this,"navigationItems",[{id:V.Dv,displayName:"Agents",href:V.pr,icon:e_.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t,this.agentsEnabled=n}};var eN=n(24469);function eC(e){let t,n,i,a=(0,l.c)(12),{headSha:s,basePath:r,isSessionRunning:o,isSessionReadonly:c,agentDisplayName:u}=e,m=void 0===u?"Agent":u;a[0]!==m||a[1]!==c||a[2]!==o?(t=o&&(0,d.jsx)(O.l,{variant:"info",title:`${m} is working`,description:c?`${m} code review in progress.`:`${m} is still working. Changes will automatically appear once they have been committed to the branch.`,hideTitle:!0,icon:(0,d.jsx)(E.InfoIcon,{}),className:"PullRequestFilesChangedPreview-module__banner--KQCNJ"}),a[0]=m,a[1]=c,a[2]=o,a[3]=t):t=a[3];let h=!c;return a[4]!==r||a[5]!==s||a[6]!==c||a[7]!==h?(n=(0,d.jsx)(eN.b.Container,{children:(0,d.jsx)(eN.b.Viewer,{headSha:s,basePath:r,forceUnifiedView:!0,treeEnableInlineCompactMode:!0,useFileTree:!0,useBasicToolbar:!0,useInlineComments:c,userCanComment:h},r)}),a[4]=r,a[5]=s,a[6]=c,a[7]=h,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,d.jsxs)("div",{className:"PullRequestFilesChangedPreview-module__container--mKeOB",children:[t,n]}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}try{eC.displayName||(eC.displayName="PullRequestFilesChangedPreview")}catch{}function eS(e){let t,n=(0,l.c)(6),{reference:i}=e,{headSha:a,basePath:s,isSessionRunning:r,isSessionReadonly:o,agentDisplayName:c}=i;return n[0]!==c||n[1]!==s||n[2]!==a||n[3]!==o||n[4]!==r?(t=(0,d.jsx)(eC,{headSha:a,basePath:s,isSessionRunning:r,isSessionReadonly:o,agentDisplayName:c}),n[0]=c,n[1]=s,n[2]=a,n[3]=o,n[4]=r,n[5]=t):t=n[5],t}try{eS.displayName||(eS.displayName="PullRequestFilesChangedPluginPreview")}catch{}var eI=n(70840),ek=n(39837),eL=n(35247),eT=n(72579),eE=n(16051),eD=n(81960),eR=n(98755),eA=n(99896),eO=n(10422),eP=n(25407),eF=n(96379);let eM="PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",e$="PullRequestOverviewPreview-module__separator--EAqT5",eB="PullRequestOverviewPreview-module__summaryHeader--KeZPa",eV="PullRequestOverviewPreview-module__summaryMetadata--R418e",eU="PullRequestOverviewPreview-module__modelDisplay--HH7SO",eq="PullRequestOverviewPreview-module__modelIcon--NuGXS";function eG(e){let t,n,i,a,s,r,o,c,u=(0,l.c)(22),{headSha:m,repositoryNwo:h,commitAliveChannel:f}=e;u[0]!==h?(t=h?.split("/")??[],u[0]=h,u[1]=t):t=u[1];let[p,g]=t,y=void 0===p?"":p,x=void 0===g?"":g;u[2]!==x||u[3]!==y?(n={ownerLogin:y,name:x},u[2]=x,u[3]=y,u[4]=n):n=u[4];let[v,b]=function(e,t){let n,i,a=(0,l.c)(6),[s,r]=(0,_.useState)();a[0]!==e||a[1]!==t?(n=async()=>{if(!e||!t)return void r(void 0);let n=(0,eP.vki)(t,e),i=await (0,eF.lS)(n);i.ok&&r(await i.json())},a[0]=e,a[1]=t,a[2]=n):n=a[2];let o=n;return a[3]!==s||a[4]!==o?(i=[s,o],a[3]=s,a[4]=o,a[5]=i):i=a[5],i}(m,n);u[5]!==f?(i={stateChannel:f,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},u[5]=f,u[6]=i):i=u[6];let j=i;if(u[7]!==j||u[8]!==b?(a={channels:j,refetchQuery:b},u[7]=j,u[8]=b,u[9]=a):a=u[9],(0,eO.cY)(a),u[10]!==b||u[11]!==m||u[12]!==h?(s=()=>{m&&h&&b()},r=[m,h,b],u[10]=b,u[11]=m,u[12]=h,u[13]=s,u[14]=r):(s=u[13],r=u[14]),(0,_.useEffect)(s,r),!m||!h||!v||0===v.checkRuns.length)return null;u[15]!==v?(o=()=>{if(!v?.checkRuns)return"";let e=v.checkRuns.length,t=v.checkRuns.filter(eH).length;return`${t}/${e}`},u[15]=v,u[16]=o):o=u[16];let w=o,N=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(v?.checksHeaderState||""),C=w();return u[17]!==v||u[18]!==b||u[19]!==N||u[20]!==C?(c=(0,d.jsx)("span",{className:"PullRequestOverviewPreview-module__checksButton--yqdFS",children:(0,d.jsx)(eA.B6,{statusRollup:N,combinedStatus:v,onWillOpenPopup:b,size:"small",variant:"default",descriptionText:C})}),u[17]=v,u[18]=b,u[19]=N,u[20]=C,u[21]=c):c=u[21],c}function eH(e){return"success"===e.state}try{eG.displayName||(eG.displayName="ChecksStatusButton")}catch{}var eK=n(88984),eW=n(55127),ez=n.n(eW);function eQ(e){let t,n,i,a,s,r,o,c,u,m,h,p,g,y,x,v,_,j,w,N,C,S,I,k=(0,l.c)(70),{title:L,number:T,body:D,bodyHTML:A,repositoryNwo:O,baseRef:P,headRef:F,headSha:M,sessionState:$,sessionUpdatedAt:B,sessionCount:U,premiumRequestCount:q,model:G,availableModels:H,isSingleSessionView:K,commitAliveChannel:W}=e;k[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("mission_control_use_body_html"),k[0]=t):t=k[0];let z=t;if(k[1]!==G)n=G&&G.startsWith(V.an)?G.slice(V.an.length):G,k[1]=G,k[2]=n;else n=k[2];let Q=n;k[3]!==H||k[4]!==Q?(i=eL.W.codingAgentModelSelection&&Q?H?.find(e=>e.id===Q):null,k[3]=H,k[4]=Q,k[5]=i):i=k[5];let Z=i;k[6]!==$?(a=()=>{if(!$)return null;switch($){case"completed":return(0,d.jsx)(E.CheckCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",size:16});case"failed":case"timed_out":return(0,d.jsx)(E.XCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconFailed--bZUms",size:16});case"in_progress":return(0,d.jsx)(eK.w,{});default:return null}},k[6]=$,k[7]=a):a=k[7];let J=a;k[8]!==$||k[9]!==B?(s=()=>(0,d.jsxs)("span",{className:eM,children:["completed"===$&&(0,d.jsx)("span",{children:"Completed"}),"failed"===$&&(0,d.jsx)("span",{children:"Failed"}),"timed_out"===$&&(0,d.jsx)("span",{children:"Timed out"}),"in_progress"===$&&(0,d.jsx)("span",{children:"Started"}),B&&(0,d.jsx)(Y.A,{date:new Date(B),tense:"past"})]}),k[8]=$,k[9]=B,k[10]=s):s=k[10];let X=s;k[11]!==P||k[12]!==F||k[13]!==O?(r=()=>(0,d.jsxs)(d.Fragment,{children:[O&&(0,d.jsx)(b.A,{href:`/${O}`,className:"PullRequestOverviewPreview-module__repositoryName--O0p8d",children:O}),P&&F&&(0,d.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",children:[(0,d.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",children:[(0,d.jsx)(eT.A,{href:`/${O}/tree/${P}`,children:P}),(0,d.jsx)(E.ArrowLeftIcon,{}),(0,d.jsx)(eT.A,{href:`/${O}/tree/${F}`,children:F})]}),(0,d.jsx)("span",{className:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",children:(0,d.jsx)(eR.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:F})})]})]}),k[11]=P,k[12]=F,k[13]=O,k[14]=r):r=k[14];let ee=r;k[15]!==L?(o=(0,d.jsx)("span",{children:L}),k[15]=L,k[16]=o):o=k[16];let et=`/${O}/pull/${T}`;k[17]!==T||k[18]!==et?(c=(0,d.jsxs)(b.A,{className:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",href:et,children:["#",T]}),k[17]=T,k[18]=et,k[19]=c):c=k[19],k[20]!==o||k[21]!==c?(u=(0,d.jsx)(eE.z.TitleArea,{children:(0,d.jsx)(eE.z.Title,{className:"PullRequestOverviewPreview-module__titleContainer--lTxTc",as:"h1",children:(0,d.jsxs)("span",{children:[o," ",c]})})}),k[20]=o,k[21]=c,k[22]=u):u=k[22],k[23]!==J?(m=J(),k[23]=J,k[24]=m):m=k[24],k[25]!==X?(h=X(),k[25]=X,k[26]=h):h=k[26],k[27]!==m||k[28]!==h?(p=(0,d.jsxs)("span",{className:eM,children:[m,h]}),k[27]=m,k[28]=h,k[29]=p):p=k[29],k[30]!==O||k[31]!==B?(g=B&&O&&(0,d.jsx)("span",{className:e$,children:" \xb7 "}),k[30]=O,k[31]=B,k[32]=g):g=k[32],k[33]!==ee?(y=ee(),k[33]=ee,k[34]=y):y=k[34];let en=M||"",ei=O||"";k[35]!==W||k[36]!==en||k[37]!==ei?(x=(0,d.jsx)(eG,{headSha:en,repositoryNwo:ei,commitAliveChannel:W}),k[35]=W,k[36]=en,k[37]=ei,k[38]=x):x=k[38],k[39]!==p||k[40]!==g||k[41]!==y||k[42]!==x?(v=(0,d.jsx)(eE.z.Description,{children:(0,d.jsxs)("div",{className:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",children:[p,g,y,x]})}),k[39]=p,k[40]=g,k[41]=y,k[42]=x,k[43]=v):v=k[43],k[44]!==u||k[45]!==v?(_=(0,d.jsxs)(eE.z,{children:[u,v]}),k[44]=u,k[45]=v,k[46]=_):_=k[46];let ea=eL.W.codingAgentModelSelection?!K&&q>0&&void 0!==U&&U>0?eB:"PullRequestOverviewPreview-module__summaryHeaderModelOnly--KXbJj":eB;return k[47]===Symbol.for("react.memo_cache_sentinel")?(j=(0,d.jsx)(eD.A,{as:"h2",className:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",children:"Summary"}),k[47]=j):j=k[47],k[48]!==K||k[49]!==G||k[50]!==Z||k[51]!==q||k[52]!==U||k[53]!==B||k[54]!==Q?(w=eL.W.codingAgentModelSelection?!K&&q>0&&void 0!==U&&U>0?(0,d.jsxs)("div",{className:eV,children:[G&&""!==G&&(0,d.jsxs)("span",{className:eU,children:[Z?.logoURL?(0,d.jsx)(R.r,{alt:`${Z.vendor} logo`,square:!0,size:18,src:Z.logoURL,className:eq}):(0,d.jsx)(E.CopilotIcon,{className:eq}),(0,d.jsx)("span",{children:Z?.displayName||Q})]}),(0,d.jsxs)("span",{children:[G&&""!==G&&(0,d.jsx)("span",{className:e$,children:" \xb7 "}),U," ",ez()("session",U)]}),q&&(0,d.jsxs)("span",{children:[(0,d.jsx)("span",{className:e$,children:" \xb7 "}),q," premium ",ez()("request",q)]}),B&&(0,d.jsxs)("span",{children:[(0,d.jsx)("span",{className:e$,children:" \xb7 "}),"Last updated ",(0,d.jsx)(Y.A,{date:new Date(B),tense:"past"})]})]}):(0,d.jsx)("div",{className:eV,children:G&&""!==G&&(0,d.jsxs)("span",{className:eU,children:[Z?.logoURL?(0,d.jsx)(R.r,{alt:`${Z.vendor} logo`,square:!0,size:18,src:Z.logoURL,className:eq}):(0,d.jsx)(E.CopilotIcon,{className:eq}),(0,d.jsx)("span",{children:Z?.displayName||Q})]})}):(0,d.jsx)("div",{className:eV,children:!K&&q>0&&void 0!==U&&U>0&&(0,d.jsxs)(d.Fragment,{children:[U," ",ez()("session",U),q&&(0,d.jsxs)("span",{children:[" ","\xb7 ",q," premium ",ez()("request",q)]}),B&&(0,d.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,d.jsx)(Y.A,{date:new Date(B),tense:"past"})]})]})}),k[48]=K,k[49]=G,k[50]=Z,k[51]=q,k[52]=U,k[53]=B,k[54]=Q,k[55]=w):w=k[55],k[56]!==ea||k[57]!==w?(N=(0,d.jsxs)("div",{className:ea,children:[j,w]}),k[56]=ea,k[57]=w,k[58]=N):N=k[58],k[59]!==D||k[60]!==A||k[61]!==T||k[62]!==O?(C=(0,d.jsx)("div",{className:"PullRequestOverviewPreview-module__summaryContent--YREy7",children:z&&A?(0,d.jsx)("div",{className:"PullRequestOverviewPreview-module__markdownBody--BLhsD",children:(0,d.jsx)(ek.A,{verifiedHTML:A})}):D?(0,d.jsx)(eI.G,{content:{value:D,name:`pull-request-${T}-${O}.md`},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,d.jsx)("p",{className:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t",children:"No description provided."})}),k[59]=D,k[60]=A,k[61]=T,k[62]=O,k[63]=C):C=k[63],k[64]!==N||k[65]!==C?(S=(0,d.jsxs)("div",{className:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",children:[N,C]}),k[64]=N,k[65]=C,k[66]=S):S=k[66],k[67]!==_||k[68]!==S?(I=(0,d.jsxs)("div",{className:"PullRequestOverviewPreview-module__container--BrFOa",children:[_,S]}),k[67]=_,k[68]=S,k[69]=I):I=k[69],I}try{eQ.displayName||(eQ.displayName="PullRequestOverviewPreview")}catch{}function eZ(e){let t,n=(0,l.c)(2),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i?(t=(0,d.jsx)(eQ,{...i}),n[0]=i,n[1]=t):t=n[1],t)}try{eZ.displayName||(eZ.displayName="PullRequestOverviewPluginPreview")}catch{}var eJ=n(1747),eY=n(21502),eX=n(42312),e0=n(61526),e1=n(86101),e2=n(53419),e3=n(26108);function e4(e){let t,n=(0,l.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,s=(0,eX.U)();return n[0]!==s||n[1]!==i||n[2]!==a?(t=!i&&(0,d.jsx)(e3.K,{icon:E.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a(),(0,e2.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:s}),n[0]=s,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{e4.displayName||(e4.displayName="PreviewPaneButton")}catch{}var e5=n(19199),e6=n(26410),e7=n(99223),e8=n(13107),e9=n(71315);function te(e,t){let n=`git clone https://github.com/${t}.git && code ${t.split("/")[1]}`;window.open(e,"_self"),navigator.clipboard&&navigator.clipboard.writeText(n)}function tt(e,t,n,i){let a=`https://github.com/${t}.git`;return`${e}://GitHub.copilot-chat/openAgentSession?id=${n}&type=copilot&url=${encodeURIComponent(a)}&branch=${encodeURIComponent(i)}`}let tn=(e,t,n)=>()=>{te(tt("vscode",e,t,n),e)},ti=(e,t,n)=>()=>{te(tt("vscode-insiders",e,t,n),e)},ta=(e,t)=>()=>{let n;te((n=e9.cg?.location.origin||"https://github.com",`x-github-client://openRepo/${n}/${e}?pr=${t}`),e)};function ts(e){let t,n,i,a,s,r,o,c,u,m,h=(0,l.c)(30),{pull:p,session:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("open_agent_session_in_vscode_insiders"),h[0]=t):t=h[0];let y=t;h[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("open_agent_session_in_vscode_stable"),h[1]=n):n=h[1];let x=n;h[2]!==p.global_relay_id||h[3]!==p.head_ref_name||h[4]!==p.repository_nwo?(i=tn(p.repository_nwo,p.global_relay_id,p.head_ref_name),h[2]=p.global_relay_id,h[3]=p.head_ref_name,h[4]=p.repository_nwo,h[5]=i):i=h[5];let v=i;h[6]!==p.global_relay_id||h[7]!==p.head_ref_name||h[8]!==p.repository_nwo?(a=ti(p.repository_nwo,p.global_relay_id,p.head_ref_name),h[6]=p.global_relay_id,h[7]=p.head_ref_name,h[8]=p.repository_nwo,h[9]=a):a=h[9];let b=a;h[10]!==p.number||h[11]!==p.repository_nwo?(s=ta(p.repository_nwo,p.number),h[10]=p.number,h[11]=p.repository_nwo,h[12]=s):s=h[12];let _=s;h[13]!==p.head_ref_name||h[14]!==p.repository_id?(r=(0,e8.QS)(p.repository_id,p.head_ref_name),h[13]=p.head_ref_name,h[14]=p.repository_id,h[15]=r):r=h[15];let j=r;h[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,e7.k)(),h[16]=o):o=h[16];let w=o,N=!!j;h[17]!==g?(c=!!g&&(0,ee.v5)(g),h[17]=g,h[18]=c):c=h[18];let C=c,S=g?.id;return h[19]!==_||h[20]!==v||h[21]!==b||h[22]!==C||h[23]!==p.url||h[24]!==S?(u=(0,d.jsx)(tr,{pullURL:p.url,onOpenInVSCode:v,onOpenInVSCodeInsiders:b,onOpenInGitHubDesktop:_,showVSCodeStable:x,showVSCodeInsiders:y,isSessionActive:C,sessionId:S}),h[19]=_,h[20]=v,h[21]=b,h[22]=C,h[23]=p.url,h[24]=S,h[25]=u):u=h[25],h[26]!==j||h[27]!==N||h[28]!==u?(m=(0,d.jsx)(e5.n,{primary:!1,size:"small",isEnterprise:w,showCodespacesTab:N,codespacesPath:j,localTab:u}),h[26]=j,h[27]=N,h[28]=u,h[29]=m):m=h[29],m}function tr(e){let t,n,i,a,s,r,o,c,u,m,h=(0,l.c)(21),{pullURL:f,onOpenInVSCode:p,onOpenInVSCodeInsiders:g,onOpenInGitHubDesktop:y,showVSCodeInsiders:x,showVSCodeStable:v,isSessionActive:_,sessionId:j}=e,w=`gh agent-task view ${j||f} --log${_?" --follow":""}`;return h[0]!==p||h[1]!==v?(t=v&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(M.l.Item,{onSelect:p,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.VscodeIcon,{})}),"Open in VS Code"]})}),h[0]=p,h[1]=v,h[2]=t):t=h[2],h[3]!==g||h[4]!==x?(n=x&&(0,d.jsxs)(M.l.Item,{onSelect:g,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.VscodeIcon,{})}),"Open in VS Code Insiders"]}),h[3]=g,h[4]=x,h[5]=n):n=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.DesktopDownloadIcon,{})}),h[6]=i):i=h[6],h[7]!==y?(a=(0,d.jsxs)(M.l.Item,{onSelect:y,children:[i,"Open with GitHub Desktop"]}),h[7]=y,h[8]=a):a=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,d.jsx)(M.l.Divider,{}),h[9]=s):s=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(r=(0,d.jsxs)("div",{className:"OpenInMenu-module__cliHeader--ggn5w",children:[(0,d.jsx)(E.TerminalIcon,{className:"fgColor-muted"}),(0,d.jsx)("span",{children:"GitHub CLI"})]}),h[10]=r):r=h[10],h[11]!==w?(o=(0,d.jsx)(e6.J,{buttonAriaLabel:"Copy GitHub agent-task command to clipboard",inputId:"github-cli",inputLabel:"GitHub CLI command",url:w}),h[11]=w,h[12]=o):o=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,d.jsxs)("p",{className:"text-small fgColor-muted mb-0",children:["Work fast with our official CLI."," ",(0,d.jsxs)(b.A,{inline:!0,href:"https://cli.github.com",target:"_blank",children:["Learn more",(0,d.jsx)("span",{className:"sr-only",children:" about the GitHub CLI"})]})]}),h[13]=c):c=h[13],h[14]!==o?(u=(0,d.jsx)("ul",{children:(0,d.jsxs)("li",{className:"OpenInMenu-module__cliSection--nAe4Q",children:[r,o,c]})}),h[14]=o,h[15]=u):u=h[15],h[16]!==t||h[17]!==n||h[18]!==a||h[19]!==u?(m=(0,d.jsxs)(M.l,{children:[t,n,a,s,u]}),h[16]=t,h[17]=n,h[18]=a,h[19]=u,h[20]=m):m=h[20],m}try{ts.displayName||(ts.displayName="OpenInMenu")}catch{}try{tr.displayName||(tr.displayName="CustomLocalTab")}catch{}var tl=n(21373);function to(e){let t,n,i=(0,l.c)(6),{pullUrl:a,taskId:s}=e;i[0]!==a||i[1]!==s?(t=()=>{(0,e2.BI)("agent_sessions.task_view",{target:"VIEW_PULL_REQUEST_BUTTON",pull_url:a,task_id:s})},i[0]=a,i[1]=s,i[2]=t):t=i[2];let r=t;return i[3]!==r||i[4]!==a?(n=(0,d.jsx)(tl.Q,{as:"a",href:a,target:"_self",leadingVisual:E.GitPullRequestIcon,variant:"primary",size:"small",onClick:r,children:"View pull request"}),i[3]=r,i[4]=a,i[5]=n):n=i[5],n}try{to.displayName||(to.displayName="ViewPullRequestButton")}catch{}var td=n(77274),tc=n(54508);function tu({surveyDialogRef:e,feedbackDialogRef:t,initialRatingRef:n,ratingOptions:i,source:a,onClose:s,onSubmitted:r}){let l=(0,_.useCallback)(async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={subject:`mission-control:${a}`,rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:"immersive"};try{(await (0,eF.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok?null!=e&&r?.(e):n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},[a,r]),o=(0,_.useCallback)(e=>{"no-thanks"===e?t.current?.openDialog(n.current):(null!=n.current&&l(n.current,""),s?.("dismiss"))},[t,n,l,s]),c=(0,_.useCallback)(e=>{"dismiss"===e&&n.current&&l(n.current,""),s?.(e)},[n,l,s]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tc.E,{ref:e,onClose:o}),(0,d.jsx)(td.NE,{ref:t,options:i,onSubmit:l,onClose:c})]})}function tm(e,t){let n,i,a,s,r=(0,l.c)(7),o=(0,_.useRef)(null),c=(0,_.useRef)(null),u=(0,_.useRef)(void 0);r[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("copilot_mission_control_interview_survey"),r[0]=n):n=r[0];let m=n;r[1]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{u.current=e,m?o.current?.openDialog():c.current?.openDialog(e)},r[1]=i):i=r[1];let h=i;r[2]!==t||r[3]!==e?(a=n=>(0,d.jsx)(tu,{surveyDialogRef:o,feedbackDialogRef:c,initialRatingRef:u,ratingOptions:t,source:e,...n}),r[2]=t,r[3]=e,r[4]=a):a=r[4];let p=a;return r[5]!==p?(s={openFeedback:h,FeedbackDialog:p},r[5]=p,r[6]=s):s=r[6],s}try{tu.displayName||(tu.displayName="FeedbackDialog")}catch{}try{(a=DialogComponent).displayName||(a.displayName="DialogComponent")}catch{}let th=[{name:"Hate it",value:"VERY_NEGATIVE",icon:td.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:td.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:td.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:td.mN,color:"verySatisfied"}];function tf(){let e,t,n,i,a=(0,l.c)(9),{openFeedback:s,FeedbackDialog:r}=tm("task-header",th);a[0]!==s?(e=()=>s(),a[0]=s,a[1]=e):e=a[1];let o=e;return a[2]!==o?(t=(0,d.jsx)(tl.Q,{variant:"link",className:"f6",onClick:o,children:"Give feedback"}),a[2]=o,a[3]=t):t=a[3],a[4]!==r?(n=(0,d.jsx)(r,{}),a[4]=r,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,d.jsxs)(d.Fragment,{children:[t,n]}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i}try{tf.displayName||(tf.displayName="FeedbackButton")}catch{}var tp=n(2635);function tg(e){let t,n,i,a,s,r,o,c,u,m,h,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L=(0,l.c)(57),{pull:T}=e;L[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("open_agent_session_in_vscode_insiders"),L[0]=t):t=L[0];let D=t;L[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("open_agent_session_in_vscode_stable"),L[1]=n):n=L[1];let R=n;L[2]!==T.global_relay_id||L[3]!==T.head_ref_name||L[4]!==T.repository_nwo?(i=tn(T.repository_nwo,T.global_relay_id,T.head_ref_name),L[2]=T.global_relay_id,L[3]=T.head_ref_name,L[4]=T.repository_nwo,L[5]=i):i=L[5];let A=i;L[6]!==T.global_relay_id||L[7]!==T.head_ref_name||L[8]!==T.repository_nwo?(a=ti(T.repository_nwo,T.global_relay_id,T.head_ref_name),L[6]=T.global_relay_id,L[7]=T.head_ref_name,L[8]=T.repository_nwo,L[9]=a):a=L[9];let O=a;L[10]!==T.number||L[11]!==T.repository_nwo?(s=ta(T.repository_nwo,T.number),L[10]=T.number,L[11]=T.repository_nwo,L[12]=s):s=L[12];let P=s;if(L[13]!==T.head_ref_name||L[14]!==T.repository_id){let e,t;e=T.repository_id,t=T.head_ref_name,r=()=>{let n=(0,e8.QS)(e,t);n&&window.open(n,"_self")},L[13]=T.head_ref_name,L[14]=T.repository_id,L[15]=r}else r=L[15];let $=r,{openFeedback:B,FeedbackDialog:V}=tm("task-header",th),U=(0,tp.A3)("optedInToUserFeedback");L[16]!==B?(o=()=>B(),L[16]=B,L[17]=o):o=L[17];let q=o;L[18]!==T.url?(c=()=>{window.open(T.url,"_blank")},L[18]=T.url,L[19]=c):c=L[19];let G=c;L[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,e7.k)(),L[20]=u):u=L[20];let H=u;L[21]!==T.head_ref_name||L[22]!==T.repository_id?(m=(0,e8.QS)(T.repository_id,T.head_ref_name),L[21]=T.head_ref_name,L[22]=T.repository_id,L[23]=m):m=L[23];let K=!!m&&!H;return L[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,d.jsx)(F.W.Anchor,{children:(0,d.jsx)(e3.K,{icon:E.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),L[24]=h):h=L[24],L[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.GitPullRequestIcon,{})}),L[25]=p):p=L[25],L[26]!==G?(g=(0,d.jsxs)(M.l.Item,{onSelect:G,children:[p,"View pull request"]}),L[26]=G,L[27]=g):g=L[27],L[28]!==q||L[29]!==U?(y=U&&(0,d.jsxs)(M.l.Item,{onSelect:q,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.CommentIcon,{})}),"Give feedback"]}),L[28]=q,L[29]=U,L[30]=y):y=L[30],L[31]===Symbol.for("react.memo_cache_sentinel")?(x=(0,d.jsx)(M.l.Divider,{}),L[31]=x):x=L[31],L[32]===Symbol.for("react.memo_cache_sentinel")?(v=(0,d.jsx)(M.l.GroupHeading,{children:"Open in"}),L[32]=v):v=L[32],L[33]!==A?(b=R&&(0,d.jsxs)(M.l.Item,{onSelect:A,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.VscodeIcon,{})}),"Open in VS Code"]}),L[33]=A,L[34]=b):b=L[34],L[35]!==O?(_=D&&(0,d.jsxs)(M.l.Item,{onSelect:O,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.VscodeIcon,{})}),"Open in VS Code Insiders"]}),L[35]=O,L[36]=_):_=L[36],L[37]===Symbol.for("react.memo_cache_sentinel")?(j=(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.DesktopDownloadIcon,{})}),L[37]=j):j=L[37],L[38]!==P?(w=(0,d.jsxs)(M.l.Item,{onSelect:P,children:[j,"Checkout with GitHub Desktop"]}),L[38]=P,L[39]=w):w=L[39],L[40]!==$||L[41]!==K?(N=K&&(0,d.jsxs)(M.l.Item,{onSelect:$,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.TerminalIcon,{})}),"Open in Codespaces"]}),L[40]=$,L[41]=K,L[42]=N):N=L[42],L[43]!==b||L[44]!==_||L[45]!==w||L[46]!==N?(C=(0,d.jsxs)(M.l.Group,{children:[v,b,_,w,N]}),L[43]=b,L[44]=_,L[45]=w,L[46]=N,L[47]=C):C=L[47],L[48]!==g||L[49]!==y||L[50]!==C?(S=(0,d.jsxs)(F.W,{children:[h,(0,d.jsx)(F.W.Overlay,{align:"end",children:(0,d.jsxs)(M.l,{children:[g,y,x,C]})})]}),L[48]=g,L[49]=y,L[50]=C,L[51]=S):S=L[51],L[52]!==V?(I=(0,d.jsx)(V,{}),L[52]=V,L[53]=I):I=L[53],L[54]!==S||L[55]!==I?(k=(0,d.jsxs)(d.Fragment,{children:[S,I]}),L[54]=S,L[55]=I,L[56]=k):k=L[56],k}try{tg.displayName||(tg.displayName="TaskHeaderMobileMenu")}catch{}var ty=n(50129),tx=n(79684);function tv(e){let t,n,i=(0,l.c)(4),{pull:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(tx.B.Item,{href:"/copilot/agents",children:"Agents"}),i[0]=t):t=i[0];let s=!a,r=a?.title;return i[1]!==s||i[2]!==r?(n=(0,d.jsxs)(tx.B,{children:[t,(0,d.jsx)(tx.B.Item,{loading:s,children:r})]}),i[1]=s,i[2]=r,i[3]=n):n=i[3],n}try{tv.displayName||(tv.displayName="TaskBreadcrumbs")}catch{}var tb=n(34164);function t_(e){let t,n,i,a,s,r,o,c=(0,l.c)(19),{pull:u,session:m,isContentPreviewOpen:h,openPreviewPane:f}=e,p=`/${u?.repository_nwo}/pull/${u?.number}`,g=(0,tp.A3)("optedInToUserFeedback");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tb.$)("TaskHeader-module__container--mszgP"),c[0]=t):t=c[0],c[1]!==u?(n=(0,d.jsx)("div",{className:"TaskHeader-module__leftControls--gPjSp",children:(0,d.jsx)(tv,{pull:u})}),c[1]=u,c[2]=n):n=c[2],c[3]!==g||c[4]!==u||c[5]!==m?(i=u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"TaskHeader-module__desktopButtons--bONYA",children:[g&&(0,d.jsx)(tf,{}),(0,d.jsx)(ts,{pull:u,session:m}),(0,d.jsx)(to,{pullUrl:u.url,taskId:u.global_relay_id})]}),(0,d.jsx)("div",{className:"TaskHeader-module__mobileMenu--CAeut",children:(0,d.jsx)(tg,{pull:u})})]}),c[3]=g,c[4]=u,c[5]=m,c[6]=i):i=c[6],c[7]!==h||c[8]!==f?(a=(0,d.jsx)(e4,{isContentPreviewOpen:h,openPreviewPane:f}),c[7]=h,c[8]=f,c[9]=a):a=c[9],c[10]!==i||c[11]!==a?(s=(0,d.jsx)("div",{className:"TaskHeader-module__rightControls--ujKcE",children:(0,d.jsxs)(v.B,{direction:"horizontal",align:"center",gap:"condensed",children:[i,a]})}),c[10]=i,c[11]=a,c[12]=s):s=c[12],c[13]!==n||c[14]!==s?(r=(0,d.jsxs)("div",{className:t,children:[n,s]}),c[13]=n,c[14]=s,c[15]=r):r=c[15],c[16]!==p||c[17]!==r?(o=(0,d.jsx)(ty.Kg,{basePageDataUrl:p,children:r}),c[16]=p,c[17]=r,c[18]=o):o=c[18],o}try{t_.displayName||(t_.displayName="TaskHeader")}catch{}var tj=n(51213),tw=n(79196),tN=n(7812),tC=n(57478);let tS=_.createContext(void 0);function tI(e){let t,n,i=(0,l.c)(7),{currentUser:a,currentUserIsSessionOwner:s,children:r}=e,o=!s;i[0]!==a||i[1]!==s||i[2]!==o?(t={currentUser:a,currentUserIsSessionOwner:s,isSingleSessionView:o},i[0]=a,i[1]=s,i[2]=o,i[3]=t):t=i[3];let c=t;return i[4]!==r||i[5]!==c?(n=(0,d.jsxs)(tS.Provider,{value:c,children:[" ",r," "]}),i[4]=r,i[5]=c,i[6]=n):n=i[6],n}function tk(){let e=_.useContext(tS);if(!e)throw Error("useCurrentUser must be used within a CurrentUserProvider");return e}try{tS.displayName||(tS.displayName="CurrentUserContext")}catch{}try{tI.displayName||(tI.displayName="CurrentUserProvider")}catch{}let tL=(0,_.createContext)(void 0);function tT(e){let t,n,i=(0,l.c)(5),{pull:a,children:s}=e;i[0]!==a?(t={pull:a},i[0]=a,i[1]=t):t=i[1];let r=t;return i[2]!==s||i[3]!==r?(n=(0,d.jsx)(tL.Provider,{value:r,children:s}),i[2]=s,i[3]=r,i[4]=n):n=i[4],n}try{tL.displayName||(tL.displayName="PullContext")}catch{}try{tT.displayName||(tT.displayName="PullContextProvider")}catch{}var tE=n(97286);async function tD(e,t){if(!e)throw Error("No globalID provided");let n=new URL(`/copilot/tasks/pull/${e}`,window.location.origin);t&&n.searchParams.set("session_id",t);let i=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw Error(`Failed to fetch task payload for ${e}`);return await i.json()}let tR=["pull","sessions","currentUser","currentUserCanPush","steeringEnabled","logsPollingInterval","sessionsPollingInterval"];function tA(){let e,t,n,i,a=(0,l.c)(11),s=(0,y.X)(),{globalID:r}=(0,e0.g)(),[o]=(0,e0.ok)();a[0]!==o?(e=o.get("session_id"),a[0]=o,a[1]=e):e=a[1];let d=e,c=s&&"object"==typeof s&&null!==s&&tR.every(e=>e in s)&&r&&s.pull&&s.pull.global_relay_id===r?s:void 0;a[2]!==r||a[3]!==d?(t=["agent-task-payload",r,d],n=()=>tD(r,d),a[2]=r,a[3]=d,a[4]=t,a[5]=n):(t=a[4],n=a[5]);let u=!!r&&!c;return a[6]!==t||a[7]!==n||a[8]!==u||a[9]!==c?(i={queryKey:t,queryFn:n,initialData:c,enabled:u,staleTime:1/0},a[6]=t,a[7]=n,a[8]=u,a[9]=c,a[10]=i):i=a[10],(0,tE.I)(i)}var tO=n(40235),tP=n(74022),tF=n(97665);let tM=async(e,t={})=>{let{includeBody:n=!1}=t,i=new URL("/copilot/agent-sessions/pull-requests",window.location.origin);i.searchParams.set("pull_request_ids",String(e)),n&&i.searchParams.set("include_body","true");let a=await fetch(i.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)throw Error(`Failed to fetch pull request ${e}`);let s=(await a.json()).pull_requests[e];if(!s)throw Error(`Pull request ${e} not found`);return s};var t$=n(34001),tB=n(7104),tV=n(69726),tU=n(53627),tq=n(44296),tG=n(95254),tH=n(81457);let tK=e=>{let t,n,i,a=(0,l.c)(8),{message:s,session:r}=e,{data:o}=(0,e1.B)(r.agent_id),c=o?.display_name||"Agent";return a[0]!==r.agent_id?(t=(0,d.jsx)(tH.l,{size:32,animationType:"static",loopAnimation:!1,agentId:r.agent_id}),a[0]=r.agent_id,a[1]=t):t=a[1],a[2]!==c||a[3]!==s?(n=(0,d.jsxs)("p",{className:"CopilotInitialMessage-module__message--w_WDE",children:[c," ",s]}),a[2]=c,a[3]=s,a[4]=n):n=a[4],a[5]!==t||a[6]!==n?(i=(0,d.jsxs)("div",{className:"CopilotInitialMessage-module__container--e58G3",children:[t,n]}),a[5]=t,a[6]=n,a[7]=i):i=a[7],i};try{tK.displayName||(tK.displayName="CopilotInitialMessage")}catch{}var tW=n(4817);function tz(e){let t,n,i,a,s,r,o,c,u,m,h,f=(0,l.c)(31),{markdown:p,className:g,extensions:y,maxHeight:x}=e,v=void 0===x?500:x,b=(0,_.useRef)(null),[j,w]=(0,_.useState)(!1),[N,C]=(0,_.useState)(!1);f[0]!==v?(t=()=>{let e=b.current;if(!e)return;let t=()=>{w(e.scrollHeight>v)};t();let n=new ResizeObserver(()=>t());n.observe(e);let i=new MutationObserver(()=>t());return i.observe(e,{childList:!0,subtree:!0,characterData:!0}),()=>{n.disconnect(),i.disconnect()}},f[0]=v,f[1]=t):t=f[1],f[2]!==p||f[3]!==v?(n=[p,v],f[2]=p,f[3]=v,f[4]=n):n=f[4],(0,_.useEffect)(t,n),f[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{C(tQ)},f[5]=i):i=f[5];let S=i,I=`${v}px`;f[6]!==I?(a={"--max-height":I},f[6]=I,f[7]=a):a=f[7];let k=a,L=j&&"ExpandableMarkdown-module__overflowing--fFwej",T=N&&"ExpandableMarkdown-module__expanded--cnmCC";return f[8]!==L||f[9]!==T?(s=(0,tb.$)(L,T),f[8]=L,f[9]=T,f[10]=s):s=f[10],f[11]!==N||f[12]!==j?(r=j&&!N?{inert:""}:{},f[11]=N,f[12]=j,f[13]=r):r=f[13],f[14]!==g?(o=(0,tb.$)("ExpandableMarkdown-module__content--VRh1s",g),f[14]=g,f[15]=o):o=f[15],f[16]!==y||f[17]!==p||f[18]!==o?(c=(0,d.jsx)(tW.To,{markdown:p,className:o,extensions:y}),f[16]=y,f[17]=p,f[18]=o,f[19]=c):c=f[19],f[20]!==s||f[21]!==r||f[22]!==c?(u=(0,d.jsx)("div",{ref:b,className:s,...r,children:c}),f[20]=s,f[21]=r,f[22]=c,f[23]=u):u=f[23],f[24]!==N||f[25]!==j?(m=j&&(0,d.jsx)(tl.Q,{variant:"invisible",size:"small",onClick:S,className:"ExpandableMarkdown-module__toggle--AAV9i",children:N?"Show less":"Show more"}),f[24]=N,f[25]=j,f[26]=m):m=f[26],f[27]!==u||f[28]!==m||f[29]!==k?(h=(0,d.jsxs)("div",{style:k,children:[u,m]}),f[27]=u,f[28]=m,f[29]=k,f[30]=h):h=f[30],h}function tQ(e){return!e}try{tz.displayName||(tz.displayName="ExpandableMarkdown")}catch{}let tZ=(e,t)=>e.replace(/(@copilot|@![a-zA-Z0-9_-]+)/gi,e=>{if(e.startsWith("@!")){let n=e.substring(2).toLowerCase();return t?.display_name&&n===t.display_name.toLowerCase().replace(/\s+/g,"-")?`[${e}](${t.doc_url})`:e}return"@copilot"===e.toLowerCase()&&t?.display_name&&"copilot"===t.display_name.toLowerCase()?`[${e}](https://gh.io/copilot-coding-agent-docs)`:e}),tJ=["ios_mobile_mission_control","android_mobile_mission_control","ios_mobile_repo_profile","android_mobile_repo_profile"],tY=e=>{let t,n,i,a,s,r,o,c,u,m,h,p=(0,l.c)(33),{currentUser:g,threadId:y,session:x,message:v,agentId:_}=e,{data:j}=(0,e1.B)(_);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("copilot_3p_agent_info"),p[0]=t):t=p[0];let w=t;p[1]!==x.id||p[2]!==x.resource_global_id||p[3]!==y?(n=(e,t,n)=>{let i=n?` from ${n} `:" from ";return(0,d.jsxs)(d.Fragment,{children:[i,t?(0,d.jsx)(b.A,{href:t,inline:!0,onClick:()=>{(0,e2.BI)("agent_sessions.task_view",{target:"VIEW_SESSION_LINK",session_id:x.id,task_id:x.resource_global_id,thread_id:y})},children:e}):(0,d.jsx)("span",{children:e})]})},p[1]=x.id,p[2]=x.resource_global_id,p[3]=y,p[4]=n):n=p[4];let N=n;p[5]!==N||p[6]!==x.event_identifiers||p[7]!==x.event_type||p[8]!==x.event_url||p[9]!==y?(i=()=>{let e=x.event_type,t=x.event_identifiers,n=x.event_url;if(y)return N("conversation",`${window.location.origin}/copilot/c/${y}`,"a");if(!e)return null;if("issues_agent_assignment"===e){let e=t?.find(tX)?.split("::")[1];return e?N(`issue #${e}`,n):N("issue",n,"an")}return"linear_webhook"===e?N("Linear",n):tJ.includes(e)?N("GitHub Mobile"):null},p[5]=N,p[6]=x.event_identifiers,p[7]=x.event_type,p[8]=x.event_url,p[9]=y,p[10]=i):i=p[10];let C=i,S=x.event_content,I=g?.id===x.user_id?"You":g?.login??"User",k=!!S;return p[11]!==k?(a=(0,tb.$)("UserInitialMessage-module__meta--AaiF8",{"UserInitialMessage-module__metaSmall--RD7jw":k}),p[11]=k,p[12]=a):a=p[12],p[13]!==I?(s=(0,d.jsx)("span",{children:I}),p[13]=I,p[14]=s):s=p[14],p[15]!==C?(r=C(),p[15]=C,p[16]=r):r=p[16],p[17]!==v||p[18]!==a||p[19]!==s||p[20]!==r?(o=(0,d.jsxs)("p",{className:a,children:[s," ",v,r]}),p[17]=v,p[18]=a,p[19]=s,p[20]=r,p[21]=o):o=p[21],p[22]!==j||p[23]!==S?(c=S&&(0,d.jsx)(tz,{className:w?"UserInitialMessage-module__agentMentionText--Dfh0u":"",markdown:w&&j?tZ(S,j):S}),p[22]=j,p[23]=S,p[24]=c):c=p[24],p[25]!==o||p[26]!==c?(u=(0,d.jsxs)("div",{className:"UserInitialMessage-module__messageBubble--n7c_O",children:[o,c]}),p[25]=o,p[26]=c,p[27]=u):u=p[27],p[28]!==g?(m=g&&(0,d.jsx)("div",{className:"UserInitialMessage-module__avatarContainer--k46Fj",children:(0,d.jsx)(R.r,{src:g.primaryAvatarUrl,size:24})}),p[28]=g,p[29]=m):m=p[29],p[30]!==u||p[31]!==m?(h=(0,d.jsxs)("div",{className:"UserInitialMessage-module__container--j2mCV",children:[u,m]}),p[30]=u,p[31]=m,p[32]=h):h=p[32],h};try{tY.displayName||(tY.displayName="UserInitialMessage")}catch{}function tX(e){return e.startsWith("issue::")}var t0=n(91209),t1=n(27566);let t2="SessionHeader-module__container--BCSgM";var t3=n(12385),t4=n(24939),t5=n(40260);function t6(e){let t,n,i=(0,l.c)(6),{containerRef:a,behavior:s,smoothThreshold:r}=e,o=void 0===s?"auto":s;i[0]!==a||i[1]!==o||i[2]!==r?(t=e=>{let t=void 0===e?o:e,{distance:n,element:i,targetTop:s}=(e=>{if(!e){let e=document.scrollingElement||document.documentElement,t=window.scrollY||window.pageYOffset,n=e.scrollHeight;return{element:null,targetTop:n,distance:Math.abs(n-t)}}return{element:e,targetTop:e.scrollHeight,distance:Math.abs(e.scrollHeight-e.scrollTop)}})(a?.current),l=t;"auto"===t&&void 0!==r&&(l=n>=r?"smooth":"auto"),i?i.scrollTo({top:s,behavior:l}):window.scrollTo({top:s,behavior:l})},i[0]=a,i[1]=o,i[2]=r,i[3]=t):t=i[3];let d=t;return i[4]!==d?(n={scrollToBottom:d},i[4]=d,i[5]=n):n=i[5],n}function t7(e){let t,n,i,a,s,r,o,c,u,m,h,f,p,g,y,x,v,b,j,w,N,C,S,I,k,L,T,D,R,A=(0,l.c)(90),{nwo:O,currentUserCanPush:P,isCollapsed:$,onModifierClick:B,scrollContainerRef:V,hideStopButton:U,contentId:q,onOpenChange:G}=e,{session:H}=(0,tq.Lg)(),K=O??null;A[0]!==H.workflow_run_id||A[1]!==K?(t=(0,t1.A)(K,H.workflow_run_id),A[0]=H.workflow_run_id,A[1]=K,A[2]=t):t=A[2];let W=t,z=(0,es.U)(H.resource_global_id,H.id),Q=!!(W||z),Z=(0,_.useRef)(null);A[3]!==H?(n=(0,ee.v5)(H),A[3]=H,A[4]=n):n=A[4];let J=n,Y=(0,ee.VY)(H),X=(0,ee.K9)(H);A[5]!==H?(i=(0,ee.mk)(H),A[5]=H,A[6]=i):i=A[6];let et=i,en=(0,ee.cv)(H),[ei,ea]=(0,_.useState)(!1);A[7]!==V?(a={containerRef:V,behavior:"smooth"},A[7]=V,A[8]=a):a=A[8];let{scrollToBottom:er}=t6(a);A[9]!==H.id||A[10]!==H.resource_global_id?(s=e=>{e&&(ea(!0),(0,e2.BI)("agent_sessions.task_view",{target:"STOP_SESSION_BUTTON",session_id:H.id,task_id:H.resource_global_id}))},A[9]=H.id,A[10]=H.resource_global_id,A[11]=s):s=A[11];let el=s;A[12]!==et||A[13]!==ei?(r=()=>{if(et&&ei){let e=setTimeout(()=>ea(!1),0);return()=>clearTimeout(e)}},o=[et,ei],A[12]=et,A[13]=ei,A[14]=r,A[15]=o):(r=A[14],o=A[15]),(0,_.useEffect)(r,o),A[16]!==J||A[17]!==V?(c={scrollContainerRef:V,elementRef:Z,enabled:J,offset:-8},A[16]=J,A[17]=V,A[18]=c):c=A[18];let{isLeaving:eo}=function(e){let t,n,i,a,s,r=(0,l.c)(11),{scrollContainerRef:o,elementRef:d,enabled:c,offset:u}=e,m=void 0===u?0:u,[h,f]=(0,_.useState)(!1),p=(0,_.useRef)(h);return r[0]!==h?(t=()=>{p.current=h},n=[h],r[0]=h,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,_.useEffect)(t,n),r[3]!==d||r[4]!==c||r[5]!==m||r[6]!==o?(i=()=>{let e=o.current,t=d.current;if(!c||!e||!t)return;let n=()=>{let n=e.getBoundingClientRect(),i=t.getBoundingClientRect().bottom>n.bottom+m;i!==p.current&&f(i)};n();let i=null,a=()=>{null==i&&(i=window.requestAnimationFrame(()=>{n(),i=null}))};return e.addEventListener("scroll",a),()=>{f(!1),e.removeEventListener("scroll",a)}},a=[c,o,d,m],r[3]=d,r[4]=c,r[5]=m,r[6]=o,r[7]=i,r[8]=a):(i=r[7],a=r[8]),(0,_.useEffect)(i,a),r[9]!==h?(s={isLeaving:h},r[9]=h,r[10]=s):s=r[10],s}(c);A[19]!==$||A[20]!==eo||A[21]!==B||A[22]!==G||A[23]!==er||A[24]!==H.id||A[25]!==H.resource_global_id?(u=e=>{if((e.altKey||e.metaKey)&&B)return e.preventDefault(),e.stopPropagation(),B(!!$),(0,e2.BI)("agent_sessions.task_view",{target:"SESSION_HEADER_MODIFIER",action:$?"EXPAND_ALL":"COLLAPSE_ALL",session_id:H.id,task_id:H.resource_global_id}),!1;if((0,e2.BI)("agent_sessions.task_view",{target:"SESSION_HEADER",action:$?"EXPAND":"COLLAPSE",session_id:H.id,task_id:H.resource_global_id}),eo){G(!0),setTimeout(()=>{er()},50);return}G($)},A[19]=$,A[20]=eo,A[21]=B,A[22]=G,A[23]=er,A[24]=H.id,A[25]=H.resource_global_id,A[26]=u):u=A[26];let ed=u;A[27]!==H.id||A[28]!==H.resource_global_id?(m=e=>{if((0,e2.BI)("agent_sessions.task_view",{target:"CLICK_WORKFLOW_LOGS_LINK",session_id:H.id,task_id:H.resource_global_id}),e.metaKey||e.ctrlKey)return void e.stopPropagation()},A[27]=H.id,A[28]=H.resource_global_id,A[29]=m):m=A[29];let ec=m;A[30]!==H.id||A[31]!==H.resource_global_id||A[32]!==z?(h=async e=>{if(z)try{let e=window.location.origin+z;await (0,t5.D)(e),(0,e2.BI)("agent_sessions.task_view",{target:"COPY_SESSION_LINK",session_id:H.id,task_id:H.resource_global_id})}catch{e.preventDefault(),e.stopPropagation()}},A[30]=H.id,A[31]=H.resource_global_id,A[32]=z,A[33]=h):h=A[33];let eu=h;e:{if(Y){f="New session";break e}f=H.name}let em=f;t:{if(ei||et){let e;A[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(E.SkipIcon,{className:"fgColor-muted"}),A[34]=e):e=A[34],p=e;break t}if(X){let e;A[35]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(E.CheckIcon,{className:"fgColor-success"}),A[35]=e):e=A[35],p=e;break t}if(en){let e;A[36]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(E.XCircleFillIcon,{className:"fgColor-danger"}),A[36]=e):e=A[36],p=e;break t}p=null}let eh=p;n:{if(Y){g=null;break n}if(J||X||et||en){let e;A[37]!==H.completed_at||A[38]!==H.created_at||A[39]!==H.state?(e=(0,d.jsx)(t4.A,{createdAt:H.created_at,completedAt:H.completed_at,state:H.state}),A[37]=H.completed_at,A[38]=H.created_at,A[39]=H.state,A[40]=e):e=A[40],g=e;break n}g=null}let ef=g;i:{if(void 0!==U&&U){y=!1;break i}y=J}let ep=y,eg=!$,ey=!$;A[41]!==ey?(x=(0,d.jsx)(E.ChevronRightIcon,{className:"SessionHeader-module__icon--fUMu9","data-expanded":ey}),A[41]=ey,A[42]=x):x=A[42],A[43]!==q||A[44]!==ed||A[45]!==eg||A[46]!==x?(v=(0,d.jsx)("button",{onClick:ed,type:"button",className:"SessionHeader-module__toggleButton--bU9HQ","aria-expanded":eg,"aria-controls":q,"aria-labelledby":"session-header-title",children:x}),A[43]=q,A[44]=ed,A[45]=eg,A[46]=x,A[47]=v):v=A[47],A[48]!==em?(b=(0,d.jsx)("span",{className:"SessionHeader-module__sessionName--eFIXs",id:"session-header-title",children:em}),A[48]=em,A[49]=b):b=A[49],A[50]!==v||A[51]!==b?(j=(0,d.jsxs)("div",{className:"SessionHeader-module__mainContent--jyuqu",children:[v,b]}),A[50]=v,A[51]=b,A[52]=j):j=A[52],A[53]!==ef||A[54]!==eh?(w=(eh||ef)&&(0,d.jsxs)("div",{className:"d-flex align-items-center gap-1 mr-2",children:[eh&&(0,d.jsx)("span",{className:"SessionHeader-module__statusIcon--qeEPF",children:eh}),ef&&(0,d.jsx)("span",{className:"text-small text-medium text-tabular-nums",children:ef})]}),A[53]=ef,A[54]=eh,A[55]=w):w=A[55],A[56]!==P||A[57]!==el||A[58]!==ei||A[59]!==O||A[60]!==ep?(N=ep&&(0,d.jsx)(t3.l,{variant:"icon-text-button",nwo:O,currentUserCanPush:P,onStoppingStateChange:el,loading:ei}),A[56]=P,A[57]=el,A[58]=ei,A[59]=O,A[60]=ep,A[61]=N):N=A[61],A[62]!==eu||A[63]!==ec||A[64]!==z||A[65]!==Q||A[66]!==W?(C=Q&&(0,d.jsxs)(F.W,{children:[(0,d.jsx)(F.W.Anchor,{children:(0,d.jsx)(e3.K,{icon:E.KebabHorizontalIcon,"aria-label":"More actions",variant:"invisible"})}),(0,d.jsx)(F.W.Overlay,{align:"end",children:(0,d.jsxs)(M.l,{children:[W&&(0,d.jsx)(M.l.LinkItem,{href:W,onClick:ec,children:"View verbose logs"}),z&&(0,d.jsx)(M.l.Item,{onSelect:eu,children:"Copy link"})]})})]}),A[62]=eu,A[63]=ec,A[64]=z,A[65]=Q,A[66]=W,A[67]=C):C=A[67],A[68]!==w||A[69]!==N||A[70]!==C?(S=(0,d.jsxs)("div",{className:"SessionHeader-module__rightContent--Fvqqt",children:[w,N,C]}),A[68]=w,A[69]=N,A[70]=C,A[71]=S):S=A[71],A[72]!==j||A[73]!==S?(I=(0,d.jsxs)(d.Fragment,{children:[j,S]}),A[72]=j,A[73]=S,A[74]=I):I=A[74];let ex=I,ev=!eo;A[75]!==ev?(k=(0,tb.$)("SessionHeader-module__containerWrapper--caacS",{"SessionHeader-module__containerStickyToTop--HfwWn":ev}),A[75]=ev,A[76]=k):k=A[76];let eb=!$;return A[77]!==ex||A[78]!==J||A[79]!==eb?(L=(0,d.jsx)("div",{"data-active":J,"data-expanded":eb,className:t2,children:ex}),A[77]=ex,A[78]=J,A[79]=eb,A[80]=L):L=A[80],A[81]!==k||A[82]!==L?(T=(0,d.jsx)("div",{ref:Z,className:k,children:L}),A[81]=k,A[82]=L,A[83]=T):T=A[83],A[84]!==ex||A[85]!==eo?(D=eo&&(0,d.jsx)("div",{className:(0,tb.$)(t2,"SessionHeader-module__containerStickyToChatInput--JE6Gj"),children:ex}),A[84]=ex,A[85]=eo,A[86]=D):D=A[86],A[87]!==T||A[88]!==D?(R=(0,d.jsxs)(d.Fragment,{children:[T,D]}),A[87]=T,A[88]=D,A[89]=R):R=A[89],R}try{t7.displayName||(t7.displayName="SessionHeader")}catch{}var t8=n(37976);let t9=[{name:"Bad",value:"NEGATIVE",icon:td.pu,color:"bad"},{name:"Good",value:"POSITIVE",icon:td.ms,color:"good"}];function ne(){let e,t,n,i,a,s,r,o,c=(0,l.c)(16),{session:u}=(0,tq.Lg)(),[m,h]=(0,_.useState)(null),[f,p]=(0,_.useState)(u.id);c[0]!==f||c[1]!==u.id?(e=()=>{f!==u.id&&(h(null),p(u.id))},t=[u.id,f],c[0]=f,c[1]=u.id,c[2]=e,c[3]=t):(e=c[2],t=c[3]),(0,_.useEffect)(e,t);let{openFeedback:g,FeedbackDialog:y}=tm(`session-log:session_id=${u.id}`,t9);c[4]!==g?(n=e=>{h(e),g(e)},c[4]=g,c[5]=n):n=c[5];let x=n;c[6]===Symbol.for("react.memo_cache_sentinel")?(i=e=>h(e),c[6]=i):i=c[6];let v=i;c[7]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{"cancel"===e&&h(null)},c[7]=a):a=c[7];let b=a;return c[8]!==x||c[9]!==m?(s=null!=m?(0,d.jsx)(e3.K,{"aria-label":`${(0,t8.A)(m)} Feedback Submitted`,icon:"POSITIVE"===m?E.ThumbsupIcon:E.ThumbsdownIcon,variant:"invisible",size:"small",inactive:!0,"aria-disabled":!0}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e3.K,{icon:E.ThumbsupIcon,"aria-label":"Positive Feedback",onClick:()=>x("POSITIVE"),variant:"invisible",size:"small"}),(0,d.jsx)(e3.K,{icon:E.ThumbsdownIcon,"aria-label":"Negative Feedback",onClick:()=>x("NEGATIVE"),variant:"invisible",size:"small"})]}),c[8]=x,c[9]=m,c[10]=s):s=c[10],c[11]!==y?(r=(0,d.jsx)(y,{onClose:b,onSubmitted:v}),c[11]=y,c[12]=r):r=c[12],c[13]!==s||c[14]!==r?(o=(0,d.jsxs)("div",{className:"SessionFeedbackButtons-module__container--sE3N9",children:[s,r]}),c[13]=s,c[14]=r,c[15]=o):o=c[15],o}try{ne.displayName||(ne.displayName="SessionFeedbackButtons")}catch{}var nt=n(16425);let nn="session-global-toggle";function ni(e){let t,n,i,a,s,r,o,c,u,m,h,f,p,g,y,x,v,b=(0,l.c)(45),{defaultOpen:j,onOpenChange:w,scrollContainerRef:N,hideStopButton:C,onToolExpand:S,shouldHighlight:I}=e,k=void 0!==C&&C,L=void 0!==I&&I,{session:T}=(0,tq.Lg)(),[E,D]=(0,_.useState)(void 0!==j&&j),[R,A]=(0,_.useState)(!1),{data:O}=tA();b[0]!==O?(t=void 0===O?{}:O,b[0]=O,b[1]=t):t=b[1];let{currentUserCanPush:P,pull:F,logsPollingInterval:M,currentUser:$}=t,B=(0,_.useRef)(null);b[2]===Symbol.for("react.memo_cache_sentinel")?(n={},b[2]=n):n=b[2];let V=(0,_.useRef)(n);b[3]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e.detail.excludeInstance!==V.current&&D(e.detail.expand)},b[3]=i):i=b[3];let U=(0,_.useRef)(i);b[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=e=>{U.current?.(e)};return document.addEventListener(nn,e),()=>{document.removeEventListener(nn,e)}},s=[],b[4]=a,b[5]=s):(a=b[4],s=b[5]),(0,_.useEffect)(a,s),b[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{D(e);let t=new CustomEvent(nn,{detail:{expand:e,excludeInstance:V.current}});document.dispatchEvent(t)},b[6]=r):r=b[6];let q=r;b[7]!==w?(o=e=>{D(e),w(e)},b[7]=w,b[8]=o):o=b[8];let G=o;b[9]!==T?(c=(0,ee.v5)(T),b[9]=T,b[10]=c):c=b[10];let H=c,K=`session-content-${T.id}`;b[11]!==L?(u=()=>{if(!L||!B.current)return;let e=0,t=0;return e=requestAnimationFrame(()=>{t=requestAnimationFrame(()=>{B.current?.scrollIntoView({behavior:"smooth",block:"start"})})}),()=>{cancelAnimationFrame(e),cancelAnimationFrame(t)}},m=[L],b[11]=L,b[12]=u,b[13]=m):(u=b[12],m=b[13]),(0,_.useEffect)(u,m),b[14]!==L?(h=(0,tb.$)("Session-module__detailsContainer--qmZLt",{"Session-module__permalinkedSession--nOoTk":L}),b[14]=L,b[15]=h):h=b[15];let W=F?.repository_nwo,z=!!P,Q=!E;b[16]!==K||b[17]!==G||b[18]!==k||b[19]!==N||b[20]!==W||b[21]!==z||b[22]!==Q?(f=(0,d.jsx)(t7,{nwo:W,currentUserCanPush:z,isCollapsed:Q,onModifierClick:q,scrollContainerRef:N,hideStopButton:k,contentId:K,onOpenChange:G}),b[16]=K,b[17]=G,b[18]=k,b[19]=N,b[20]=W,b[21]=z,b[22]=Q,b[23]=f):f=b[23];let Z=M??3e3,J=F?.repository_nwo;return b[24]!==$||b[25]!==Z||b[26]!==J?(p=(0,d.jsx)(t0.U,{logsPollingInterval:Z,nwo:J,currentUser:$,batchCompletedSessions:!0,onLogsLoadingChange:A}),b[24]=$,b[25]=Z,b[26]=J,b[27]=p):p=b[27],b[28]!==S||b[29]!==p?(g=(0,d.jsx)("div",{className:"Session-module__logsContainer--uhCCi",children:(0,d.jsx)(nt.$X,{variant:"mission-control",onToolExpand:S,children:p})}),b[28]=S,b[29]=p,b[30]=g):g=b[30],b[31]!==R||b[32]!==T?(y=(T.state===ee.Yj.Completed||T.state===ee.Yj.InProgress)&&T.premium_requests>0&&!R&&(0,d.jsxs)("div",{className:"Session-module__bottomFooter--HIesg",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"text-semibold",children:[T.premium_requests," "]}),(0,d.jsxs)("span",{className:"fgColor-muted",children:["premium ",ez()("request",T.premium_requests)]})]}),!(0,ee.v5)(T)&&!R&&(0,d.jsx)(ne,{})]}),b[31]=R,b[32]=T,b[33]=y):y=b[33],b[34]!==K||b[35]!==E||b[36]!==g||b[37]!==y?(x=(0,d.jsxs)("div",{id:K,className:"Session-module__contentContainer--IM2G9","data-expanded":E,children:[g,y]}),b[34]=K,b[35]=E,b[36]=g,b[37]=y,b[38]=x):x=b[38],b[39]!==H||b[40]!==T.id||b[41]!==h||b[42]!==f||b[43]!==x?(v=(0,d.jsxs)("div",{ref:B,className:h,"data-active":H,"data-session-id":T.id,children:[f,x]}),b[39]=H,b[40]=T.id,b[41]=h,b[42]=f,b[43]=x,b[44]=v):v=b[44],v}try{ni.displayName||(ni.displayName="Session")}catch{}let na="TaskChat-module__blankSlateContainer--K8GiA";var ns=n(36038),nr=n(56708),nl=n(86877),no=n(94747);function nd({pull:e,sessions:t=[],initialData:n=[],agentId:i}){let{data:a}=(0,e1.B)(i),s=a?.display_name.toLowerCase()||"copilot",r=function(e){let t=e.filter(e=>"pull_request_comment"===e.event_type||"pull_request_comment_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat().sort(),n=e.filter(e=>"pull_request_review"===e.event_type||"pull_request_review_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat().sort(),i=new URLSearchParams;for(let e of t)null!=e&&i.append("pull_request_comment_ids[]",e.toString());for(let e of n)null!=e&&i.append("pull_request_review_ids[]",e.toString());return i.toString()}(t),l=(0,tE.I)({queryKey:["agent-mentions",e.id,r],queryFn:async()=>{let t=await fetch(`/copilot/agent-sessions/pull-requests/${e.id}/agent-mentions?${r}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw Error("Failed to fetch pull request comments");return(await t.json()).agent_mentions},enabled:t.length>0,initialData:n,placeholderData:e=>e}),o=(0,no.n)({mutationFn:async t=>{let n=(0,f.G7)("copilot_3p_agent_info"),i="copilot"===s,a=n&&!i?`@!${s}`:`@${s}`;(n&&!i?RegExp(`(?:^|[^a-zA-Z0-9_])@!${s}(?:[^a-zA-Z0-9_]|$)`,"i"):RegExp(`(?:^|[^a-zA-Z0-9_])@${s}(?:[^a-zA-Z0-9_]|$)`,"i")).test(t)||(t=`${a} ${t.trim()}`);let r=await (0,eF.Sr)(`/${e.repository_nwo}/pull/${e.number}/page_data/create_timeline_comment`,{method:"POST",headers:{Accept:"application/json"},body:{text:t}}),l=await r.json();if(!r.ok)throw Error("Failed to submit comment");return(0,e2.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_POST_SESSION",pull_id:e.id,pull_number:e.number}),l}}),d=async(e,t)=>{try{let n=await o.mutateAsync(e);return t?.onSuccess?.(n),n}catch(e){throw t?.onError?.(),e}};return{...l,createMention:d}}var nc=n(51120),nu=n(55899);async function nm(e){let{sessionId:t,content:n}=e,i=await (0,nc.I)({path:`/agents/sessions/${t}/commands`,method:"POST",body:{content:n}});if(!i.ok)throw Error("Failed to submit command");let a=await i.json();return a.state||(a.state="queued"),a}function nh(e){var t;let n,i,a,s,r,o,c,u,m,h,f,p,g,y,x,v,j,w,N,C,S,I,k,L,T,D,R,A,O,P,F,M=(0,l.c)(70),{taskAgentId:$,activeSession:B,onAddPendingSession:V,onClearPendingSession:U,payload:q,scrollToBottom:G,inputRef:H,chatInputRef:K}=e,{pull:W,steeringEnabled:z,currentUserCanPush:Q}=q,[Z,J]=(0,_.useState)(!1),{data:Y}=(0,e1.B)(B?.agent_id??null);M[0]!==Y?.display_name?(n=Y?.display_name?.toLowerCase()||"agent",M[0]=Y?.display_name,M[1]=n):n=M[1];let X="copilot"===n,et=!!B&&X;M[2]!==B?(i=B&&(0,ee.VY)(B),M[2]=B,M[3]=i):i=M[3];let en=i;M[4]!==B?.user_id||M[5]!==q.sessionOwners?(a=q.sessionOwners.find(e=>e.id===B?.user_id)||null,M[4]=B?.user_id,M[5]=q.sessionOwners,M[6]=a):a=M[6];let ei=a,{currentUserIsSessionOwner:ea}=tk();M[7]!==Z||M[8]!==H?(s=()=>{let e,t=H.current;if(!t)return;let n=()=>{Z&&(e=setTimeout(()=>{J(!1)},0))};return t.addEventListener("input",n),()=>{t.removeEventListener("input",n),e&&clearTimeout(e)}},r=[Z,H],M[7]=Z,M[8]=H,M[9]=s,M[10]=r):(s=M[9],r=M[10]),(0,_.useEffect)(s,r);let es=B?.agent_id;M[11]!==W||M[12]!==es?(o={pull:W,agentId:es},M[11]=W,M[12]=es,M[13]=o):o=M[13];let{createMention:er}=nd(o);M[14]===Symbol.for("react.memo_cache_sentinel")?(c={onError:()=>{J(!0)}},M[14]=c):c=M[14];let{createCommand:el}=(t=c,O=(0,l.c)(14),P=(0,tF.jE)(),O[0]===Symbol.for("react.memo_cache_sentinel")?(k=["createCommand"],O[0]=k):k=O[0],O[1]!==P?(L=async e=>{let{sessionId:t,content:n,optimisticId:i}=e,a=["agent-session-commands",t];await P.cancelQueries({queryKey:a});let s=P.getQueryData(a),r={id:i,external_id:null,user_id:-1,session_id:t,content:n,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),state:"queued",error:null},l={commands:[...s?.commands??[],r]};return P.setQueryData(a,l),{queryKey:a,optimisticId:i}},O[1]=P,O[2]=L):L=O[2],O[3]!==t||O[4]!==P?(T=(e,n,i)=>{i?.queryKey&&i?.optimisticId&&P.setQueryData(i.queryKey,e=>e?{commands:e.commands.filter(e=>e.id!==i.optimisticId)}:e),t?.onError?.(e)},O[3]=t,O[4]=P,O[5]=T):T=O[5],O[6]!==P?(D=(e,t,n)=>{n?.queryKey&&(P.setQueryData(n.queryKey,t=>t?{commands:t.commands.map(t=>t.id===n.optimisticId?{...e,content:e.content??t.content}:t)}:t),P.invalidateQueries({queryKey:n.queryKey}))},O[6]=P,O[7]=D):D=O[7],O[8]!==L||O[9]!==T||O[10]!==D?(R={mutationKey:k,onMutate:L,mutationFn:nm,onError:T,onSuccess:D},O[8]=L,O[9]=T,O[10]=D,O[11]=R):R=O[11],F=(0,no.n)(R),O[12]!==F?(A={createCommand:e=>{let t=`optimistic-${(0,nu.u)()}`;F.mutate({...e,optimisticId:t})}},O[12]=F,O[13]=A):A=O[13],A);M[15]!==B||M[16]!==el||M[17]!==et?(u=e=>{et&&B&&el({sessionId:B.id,content:e})},M[15]=B,M[16]=el,M[17]=et,M[18]=u):u=M[18];let eo=u;M[19]!==er||M[20]!==eo||M[21]!==V||M[22]!==U||M[23]!==G||M[24]!==et||M[25]!==$?(m=async e=>{J(!1);try{if(et){eo(e),G();return}V(e,$),await er(e,{onError:()=>{U()}}),G()}catch{throw J(!0),new nr.q(e)}},M[19]=er,M[20]=eo,M[21]=V,M[22]=U,M[23]=G,M[24]=et,M[25]=$,M[26]=m):m=M[26];let ed=m;M[27]!==B||M[28]!==ei?.login||M[29]!==Y?.display_name||M[30]!==Q||M[31]!==ea||M[32]!==X||M[33]!==W||M[34]!==et||M[35]!==z?(h=()=>B&&!X?`Wait for the session to be complete to steer ${Y?.display_name||"agent"} sessions`:z?Q?"open"!==W.state?`Pull request is ${W.state}`:ea?void 0:et?`Only ${ei?.login??"the session owner"} can steer this session`:(0,d.jsxs)(d.Fragment,{children:["Only the author of the task can ask for changes."," ",(0,d.jsx)(b.A,{href:W.url,inline:!0,children:"View pull request"})," ","to request more changes."]}):"You do not have write permission on the repository":"Steering Copilot requires an active subscription",M[27]=B,M[28]=ei?.login,M[29]=Y?.display_name,M[30]=Q,M[31]=ea,M[32]=X,M[33]=W,M[34]=et,M[35]=z,M[36]=h):h=M[36];let ec=h,eu=Y?.display_name||"Agent",em=en?`Waiting for ${eu} to start session...`:et?`Steer active session while ${eu} is working`:"What would you like to change?";M[37]!==ec?(f=ec(),M[37]=ec,M[38]=f):f=M[38];let eh=f,ef=!!eh,ep=!ef&&!et&&!en;M[39]!==H||M[40]!==ep?(p=()=>{let e=H.current;e&&(ep?e.setAttribute("aria-describedby","task-chat-input-help"):e.removeAttribute("aria-describedby"))},g=["task-chat-input-help",ep,H],M[39]=H,M[40]=ep,M[41]=p,M[42]=g):(p=M[41],g=M[42]),(0,_.useEffect)(p,g),M[43]===Symbol.for("react.memo_cache_sentinel")?(y=(0,d.jsx)(nl.A.Label,{visuallyHidden:!0,children:"New prompt"}),M[43]=y):y=M[43],M[44]===Symbol.for("react.memo_cache_sentinel")?(x=(0,d.jsx)(E.AgentIcon,{}),M[44]=x):x=M[44];let eg=en?"Wait for the session to be started":void 0;M[45]!==em||M[46]!==eg?(v=[{name:"Agent",supportsMCP:!1,supportsAttachments:!1,supportsAutocompletion:!1,supportsSpaces:!1,supportsReferenceAttachments:!1,icon:x,placeholder:em,submitLabel:eg}],M[45]=em,M[46]=eg,M[47]=v):v=M[47];let ey=en||ef;return M[48]!==ep?(j=ep?(0,d.jsx)("p",{id:"task-chat-input-help",className:"TaskChatInput-module__extraToolbarText--MRY2J",children:"Submitting will post a pull request comment"}):null,M[48]=ep,M[49]=j):j=M[49],M[50]!==K||M[51]!==ed||M[52]!==H||M[53]!==ef||M[54]!==v||M[55]!==ey||M[56]!==j?(w=(0,d.jsx)(ns.V,{onSubmit:ed,textAreaRef:H,chatInputRef:K,modes:v,size:"large",isStreaming:!1,disabled:ef,submitDisabled:ey,extraToolbar:j}),M[50]=K,M[51]=ed,M[52]=H,M[53]=ef,M[54]=v,M[55]=ey,M[56]=j,M[57]=w):w=M[57],M[58]!==eh||M[59]!==ef?(N=ef&&(0,d.jsx)("div",{className:"TaskChatInput-module__blockedOverlay--YUGdv",children:(0,d.jsxs)("div",{className:"TaskChatInput-module__blockedContent--lQFKZ",children:[(0,d.jsx)(E.LockIcon,{size:16,className:"TaskChatInput-module__blockedIcon--f_JVW"}),(0,d.jsx)("p",{className:"mb-0",children:eh})]})}),M[58]=eh,M[59]=ef,M[60]=N):N=M[60],M[61]!==w||M[62]!==N?(C=(0,d.jsxs)("div",{className:"TaskChatInput-module__inputWrapper--eke62",children:[w,N]}),M[61]=w,M[62]=N,M[63]=C):C=M[63],M[64]!==Z||M[65]!==ef?(S=Z&&!ef&&(0,d.jsx)(nl.A.Validation,{variant:"error",className:"pt-2",children:"Failed to submit latest message"}),M[64]=Z,M[65]=ef,M[66]=S):S=M[66],M[67]!==C||M[68]!==S?(I=(0,d.jsxs)(nl.A,{className:"TaskChatInput-module__formControl--zRdu3",children:[y,C,S]}),M[67]=C,M[68]=S,M[69]=I):I=M[69],I}try{nh.displayName||(nh.displayName="TaskChatInput")}catch{}var nf=n(7892),np=n(81945);let ng="UserMessage-module__container--n_nga",ny="UserMessage-module__messageContainer--l7UxI",nx="UserMessage-module__messageMeta--zsApi",nv="UserMessage-module__messageText--Q3g30",nb="UserMessage-module__avatarContainer--ALfST",n_=e=>{let t,n,i,a=(0,l.c)(10),{mention:s,isLoading:r,agentId:o}=e,c=void 0!==r&&r,{data:u}=(0,e1.B)(o);if(!s){let e;return a[0]!==c?(e=c?(0,d.jsx)(nw,{}):(0,d.jsx)(nj,{}),a[0]=c,a[1]=e):e=a[1],e}return a[2]!==u||a[3]!==s?(t=(0,d.jsx)(nN,{mention:s,agentInfo:u}),a[2]=u,a[3]=s,a[4]=t):t=a[4],a[5]!==s.author.avatar_url?(n=(0,d.jsx)("div",{className:nb,children:(0,d.jsx)(R.r,{src:s.author.avatar_url,size:24})}),a[5]=s.author.avatar_url,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i=(0,d.jsxs)("div",{className:ng,children:[t,n]}),a[7]=t,a[8]=n,a[9]=i):i=a[9],i},nj=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("div",{className:ng,children:(0,d.jsx)("div",{className:ny,children:(0,d.jsx)("p",{className:nv,children:"Failed to fetch triggering comment"})})}),t[0]=e):e=t[0],e},nw=()=>{let e,t,n,i=(0,l.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("span",{className:nx,children:(0,d.jsx)(np.O,{variant:"rounded",height:"sm",width:"80px"})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsxs)("div",{className:ny,children:[e,(0,d.jsx)("div",{className:nv,children:(0,d.jsx)(np.O,{variant:"rounded",height:"sm",width:"random"})})]}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.jsxs)("div",{className:ng,children:[t,(0,d.jsx)("div",{className:nb,children:(0,d.jsx)(np.O,{variant:"elliptical",height:"24px",width:"24px"})})]}),i[2]=n):n=i[2],n},nN=e=>{let t,n,i,a,s=(0,l.c)(12),{mention:r,agentInfo:o}=e,c=!!r.body;return s[0]!==c||s[1]!==r?(t=c&&(0,d.jsx)(nC,{mention:r}),s[0]=c,s[1]=r,s[2]=t):t=s[2],s[3]!==o||s[4]!==r?(n=(0,d.jsx)(nS,{mention:r,agentInfo:o}),s[3]=o,s[4]=r,s[5]=n):n=s[5],s[6]!==r?(i="review"===r.type&&(0,d.jsx)(nI,{mention:r}),s[6]=r,s[7]=i):i=s[7],s[8]!==t||s[9]!==n||s[10]!==i?(a=(0,d.jsxs)("div",{className:ny,children:[t,n,i]}),s[8]=t,s[9]=n,s[10]=i,s[11]=a):a=s[11],a},nC=e=>{let t,n,i,a=(0,l.c)(10),{mention:s}=e,{author:r,type:o,url:c,path:u,isPending:m}=s;a[0]!==r.display_login||a[1]!==m||a[2]!==u||a[3]!==o||a[4]!==c?(t=()=>{switch(o){case"single_comment_review":return(0,d.jsxs)("span",{className:"UserMessage-module__truncatedPath--IIrJ5",children:[r.display_login," reviewed"," ",(0,d.jsx)(b.A,{muted:!0,inline:!0,href:c,children:u})]});case"review":return`${r.display_login} reviewed`;default:if(m)return`${r.display_login} commented`;return(0,d.jsxs)(d.Fragment,{children:[r.display_login," ",(0,d.jsx)(b.A,{muted:!0,inline:!0,href:c,children:"commented"})]})}},a[0]=r.display_login,a[1]=m,a[2]=u,a[3]=o,a[4]=c,a[5]=t):t=a[5];let h=t;return a[6]!==h?(n=h(),a[6]=h,a[7]=n):n=a[7],a[8]!==n?(i=(0,d.jsx)("span",{className:nx,children:n}),a[8]=n,a[9]=i):i=a[9],i},nS=e=>{let t,n,i,a=(0,l.c)(8),{mention:s,agentInfo:r}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("copilot_3p_agent_info"),a[0]=t):t=a[0];let o=t;if("review"===s.type&&!s.body){let e,t=`${s.author.display_login} requested changes`;return a[1]!==t?(e=(0,d.jsx)("p",{className:nv,children:t}),a[1]=t,a[2]=e):e=a[2],e}if(!s.body)return null;a[3]!==r||a[4]!==s.body?(n=o?tZ(s.body,r):s.body.replace(/@copilot/gi,nk),a[3]=r,a[4]=s.body,a[5]=n):n=a[5];let c=n;return a[6]!==c?(i=(0,d.jsx)(tz,{className:nv,markdown:c}),a[6]=c,a[7]=i):i=a[7],i},nI=e=>{let t,n,i,a=(0,l.c)(6),{mention:s}=e,r=s.child_comments??0,o=`${r} review comment${1!==r?"s":""}`;return a[0]!==o||a[1]!==s.url?(t=(0,d.jsx)(b.A,{muted:!0,inline:!0,href:s.url,children:o}),a[0]=o,a[1]=s.url,a[2]=t):t=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.jsx)(E.ArrowUpRightIcon,{size:12}),a[3]=n):n=a[3],a[4]!==t?(i=(0,d.jsxs)("span",{className:nx,children:[t,n]}),a[4]=t,a[5]=i):i=a[5],i};try{n_.displayName||(n_.displayName="UserMessage")}catch{}try{nj.displayName||(nj.displayName="ErrorMessage")}catch{}try{nw.displayName||(nw.displayName="LoadingMessage")}catch{}try{nN.displayName||(nN.displayName="MessageContent")}catch{}try{nC.displayName||(nC.displayName="MessageMeta")}catch{}try{nS.displayName||(nS.displayName="MessageText")}catch{}try{nI.displayName||(nI.displayName="ReviewCommentText")}catch{}function nk(e){return`[${e}](https://gh.io/copilot-coding-agent-docs)`}let nL=e=>{let t=(0,l.c)(3),{session:n}=e;if(n){let e,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(E.LockIcon,{}),t[0]=e):e=t[0],t[1]!==n.name?(i=(0,d.jsxs)("div",{className:"SessionInitialMessage-module__container--qMtpP",children:[e,(0,d.jsxs)("p",{className:"SessionInitialMessage-module__message--Blpx0",children:["Viewing session ",(0,d.jsx)("span",{className:"text-bold",children:n.name})," only"]})]}),t[1]=n.name,t[2]=i):i=t[2],i}};try{nL.displayName||(nL.displayName="SessionInitialMessage")}catch{}var nT=n(42455);function nE(e){return e}function nD(e){return e.id}function nR(e){return!["completed","failed","cancelled"].includes(e.state.toLowerCase())}var nA=n(98747);let nO="CopilotMessage-module__container--hQBT6",nP="CopilotMessage-module__message--luHTt",nF="CopilotMessage-module__text--A3MHK",nM="CopilotMessage-module__icon--RahmT";function n$(e){let t,n,i,a,s,r=(0,l.c)(13),{logsPollingInterval:o}=e,{currentUserIsSessionOwner:c}=tk();r[0]!==c||r[1]!==o?(t={logsPollingInterval:o,batchCompletedSessions:!0,currentUserIsSessionOwner:c},r[0]=c,r[1]=o,r[2]=t):t=r[2];let{data:u,isLoading:m,error:h}=(0,nA.j)(t);if(r[3]!==h||r[4]!==m||r[5]!==u){a=Symbol.for("react.early_return_sentinel");e:{let e=function(e=[]){let t=new Map;for(let n of e)if((0,ee.Qx)(n)){for(let e of n.choices)if("assistant"===e.delta.role){for(let i of e.delta.tool_calls||[])if("reply_to_comment"===i.function.name)try{let e=JSON.parse(i.function.arguments);t.set(n.id,e)}catch{}}}return[...t.values()]}(u);if(m){let e;r[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(nV,{}),r[9]=e):e=r[9],a=e;break e}if(h||0===e.length){a=null;break e}n=nO,i=e.map(nB)}r[3]=h,r[4]=m,r[5]=u,r[6]=n,r[7]=i,r[8]=a}else n=r[6],i=r[7],a=r[8];return a!==Symbol.for("react.early_return_sentinel")?a:(r[10]!==n||r[11]!==i?(s=(0,d.jsx)("div",{className:n,children:i}),r[10]=n,r[11]=i,r[12]=s):s=r[12],s)}function nB(e,t){return(0,d.jsxs)("div",{className:nP,children:[(0,d.jsx)("div",{className:nM,children:0===t&&(0,d.jsx)(tH.l,{size:32,animationType:"static",loopAnimation:!1})}),(0,d.jsx)(tW.To,{className:nF,markdown:e.reply})]},e.comment_id)}let nV=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("div",{className:nO,children:(0,d.jsxs)("div",{className:nP,children:[(0,d.jsx)("div",{className:nM,children:(0,d.jsx)(np.O,{variant:"elliptical",height:"32px",width:"32px"})}),(0,d.jsxs)("div",{className:(0,tb.$)(nF,"CopilotMessage-module__loadingText--qNpCH"),children:[(0,d.jsx)(np.O,{variant:"rounded",height:"sm",width:"100%"}),(0,d.jsx)(np.O,{variant:"rounded",height:"sm",width:"100%"}),(0,d.jsx)(np.O,{variant:"rounded",height:"sm",width:"70%"})]})]})}),t[0]=e):e=t[0],e};try{n$.displayName||(n$.displayName="CopilotMessage")}catch{}try{nV.displayName||(nV.displayName="LoadingMessage")}catch{}var nU=n(13814);function nq(){let e,t=(0,l.c)(3),{data:n,isLoading:i}=tA();if(i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("div",{className:"TaskChat-module__suspenseSpinner--V6afj",children:(0,d.jsx)(tV.A,{size:"medium"})}),t[0]=e):e=t[0],e}return t[1]!==n?(e=n&&(0,d.jsx)(nK,{payload:n}),t[1]=n,t[2]=e):e=t[2],e}function nG(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)("div",{className:na,style:{alignItems:"center"},children:(0,d.jsx)(tV.A,{})}),t[0]=e):e=t[0],e}function nH(e){let t,n,i,a,s,r,o=(0,l.c)(14),{title:c,description:u,statusLink:m,pullLink:h}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(T.E.Visual,{children:(0,d.jsx)(E.AlertIcon,{size:24,className:"fgColor-muted"})}),o[0]=t):t=o[0],o[1]!==c?(n=(0,d.jsx)(T.E.Heading,{children:c}),o[1]=c,o[2]=n):n=o[2],o[3]!==u?(i=(0,d.jsx)(T.E.Description,{className:"text-center",children:u}),o[3]=u,o[4]=i):i=o[4],o[5]!==m?(a=m?(0,d.jsx)(T.E.SecondaryAction,{href:m,children:"GitHub status"}):null,o[5]=m,o[6]=a):a=o[6],o[7]!==h?(s=h?(0,d.jsx)(T.E.SecondaryAction,{href:h,children:"Go to pull request"}):null,o[7]=h,o[8]=s):s=o[8],o[9]!==n||o[10]!==i||o[11]!==a||o[12]!==s?(r=(0,d.jsx)("div",{className:na,children:(0,d.jsxs)(T.E,{children:[t,n,i,a,s]})}),o[9]=n,o[10]=i,o[11]=a,o[12]=s,o[13]=r):r=o[13],r}function nK(e){let t,n,i,a,s,r,o,c,u,m,h,p,g,y,x,v,b,j,w,N,C,S,I,k=(0,l.c)(60),{payload:L}=e,{agentMentions:T,pull:E,sessions:D,logsPollingInterval:R,sessionsPollingInterval:A,sessionOwners:O}=L,[P]=(0,e0.ok)();k[0]!==P?(t=P.get("session_id"),k[0]=P,k[1]=t):t=k[1];let F=t,{currentUser:M,currentUserIsSessionOwner:$}=tk(),[B,V]=(0,_.useState)($&&F?F:null),U=(0,_.useRef)(!1),q=(0,_.useRef)(null),G=(0,_.useRef)(null),H=(0,_.useRef)(null),K=(0,_.useRef)(null);k[2]!==E.id||k[3]!==D||k[4]!==A?(n={pullId:E.id,initialData:D,sessionsPollingInterval:A},k[2]=E.id,k[3]=D,k[4]=A,k[5]=n):n=k[5];let{data:W,isError:z,timedOut:Q}=(0,t$.t)(n);k[6]!==O||k[7]!==W?(i={sessions:W,initialData:O},k[6]=O,k[7]=W,k[8]=i):i=k[8];let{data:Z}=(0,nf.i)(i),J=W?.[W.length-1];k[9]!==T?(a=T??[],k[9]=T,k[10]=a):a=k[10];let Y=J?.agent_id;k[11]!==E||k[12]!==W||k[13]!==a||k[14]!==Y?(s={pull:E,sessions:W,initialData:a,agentId:Y},k[11]=E,k[12]=W,k[13]=a,k[14]=Y,k[15]=s):s=k[15];let{data:X,isFetching:et}=nd(s);k[16]!==M||k[17]!==X||k[18]!==E.id||k[19]!==W?(r={pullId:E.id,sessions:W,mentions:X,currentUser:M},k[16]=M,k[17]=X,k[18]=E.id,k[19]=W,k[20]=r):r=k[20];let{allSessions:en,allMentions:ei,addPendingSession:ea,clearPendingSession:es}=function(e){let t,n,i,a,s,r,o,d,c,u,m,h,f,p=(0,l.c)(32),{pullId:g,sessions:y,mentions:x,currentUser:v}=e;p[0]!==y?(t=void 0===y?[]:y,p[0]=y,p[1]=t):t=p[1];let b=t;p[2]!==x?(n=void 0===x?[]:x,p[2]=x,p[3]=n):n=p[3];let j=n,[w,N]=(0,_.useState)(null),[C,S]=(0,_.useState)(null),[I,k]=(0,_.useState)(b.length),[L,T]=(0,_.useState)(j.length),E=b.length>I,D=j.length>L;p[4]!==I||p[5]!==b.length?(i=()=>{if(b.length!==I){let e=setTimeout(()=>{k(b.length)},0);return()=>clearTimeout(e)}},a=[b.length,I],p[4]=I,p[5]=b.length,p[6]=i,p[7]=a):(i=p[6],a=p[7]),(0,_.useEffect)(i,a),p[8]!==j.length||p[9]!==L?(s=()=>{if(j.length!==L){let e=setTimeout(()=>{T(j.length)},0);return()=>clearTimeout(e)}},r=[j.length,L],p[8]=j.length,p[9]=L,p[10]=s,p[11]=r):(s=p[10],r=p[11]),(0,_.useEffect)(s,r);let R=E?null:w,A=D?null:C;p[12]!==D||p[13]!==E||p[14]!==C||p[15]!==w?(d=()=>{if(E&&null!==w||D&&null!==C){let e=setTimeout(()=>{E&&N(null),D&&S(null)},0);return()=>clearTimeout(e)}},o=[E,D,w,C],p[12]=D,p[13]=E,p[14]=C,p[15]=w,p[16]=o,p[17]=d):(o=p[16],d=p[17]),(0,_.useEffect)(d,o),p[18]!==v||p[19]!==g?(c=(e,t)=>{var n;let i,a,s=(i=v?.login??"You",{type:"timeline_comment",id:-1,global_relay_id:"",pull_request_id:0,body:e,url:"",created_at:"",updated_at:"",author:{avatar_url:v?.primaryAvatarUrl??`https://avatars.githubusercontent.com/${v?.login??"ghost"}`,display_login:i,global_relay_id:"",id:0,url:""},path:null,subject_type:null,child_comments:null,isPending:!0});S(s),N((n=s.id.toString(),a=new Date().toISOString(),{id:"pending-session",name:"New session",user_id:0,agent_id:t??0,state:ee.Yj.Queued,owner_id:0,repo_id:0,resource_type:"pull",resource_id:g,resource_global_id:"",created_at:a,last_updated_at:a,completed_at:void 0,workflow_run_id:0,log_entries:[],error:null,premium_requests:0,event_identifiers:[n],event_type:null,event_url:null,event_content:null,isPending:!0,model:""}))},p[18]=v,p[19]=g,p[20]=c):c=p[20];let O=c;p[21]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{N(null),S(null)},p[21]=u):u=p[21];let P=u;p[22]!==R||p[23]!==b?(m=R?[...b,R]:b,p[22]=R,p[23]=b,p[24]=m):m=p[24];let F=m;p[25]!==A||p[26]!==j?(h=A?[...j,A]:j,p[25]=A,p[26]=j,p[27]=h):h=p[27];let M=h;return p[28]!==O||p[29]!==M||p[30]!==F?(f={allSessions:F,allMentions:M,addPendingSession:O,clearPendingSession:P},p[28]=O,p[29]=M,p[30]=F,p[31]=f):f=p[31],f}(r);k[21]!==W?(o=W?.every(nJ)??!1,k[21]=W,k[22]=o):o=k[22];let er=o,el=en.sort(nZ),{data:eo,isLoading:ed}=function(e){let t,n,i,a,s=(0,l.c)(11),{sessions:r}=e,{pull:o}=function(){let e=(0,_.useContext)(tL);if(!e)throw Error("usePullContext must be used within a PullContextProvider");return e}();s[0]!==r?(t=r.filter(nR).map(nD).sort().join(","),s[0]=r,s[1]=t):t=s[1];let d=t,c=o?.id;s[2]!==d||s[3]!==c?(n=["agent-inactive-session-logs",c,d],s[2]=d,s[3]=c,s[4]=n):n=s[4],s[5]!==o?.id?(i=async()=>{let e=await (0,nc.I)({path:`/agents/sessions/resource/pull/${o?.id}/inactive_logs`});if(!e.ok)throw Error(`Error fetching inactive session logs: ${e.statusText}`);let t=(await e.json()).logs,n={};for(let e in t){let i=t[e],a=[];for(let t of function(e){return e.split(`

`).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.split(`
`).filter(e=>e.startsWith("data: ")).map(e=>e.substring(6)).join(`
`)).filter(e=>"[DONE]"!==e).filter(e=>e.length>0).map(e=>JSON.parse(e))}(i)){if((0,ee.X)(t))a.push(t);else throw Error(`Invalid log entry received: ${JSON.stringify(t)}`);n[e]=a}}return n},s[5]=o?.id,s[6]=i):i=s[6];let u=!!o;return s[7]!==n||s[8]!==i||s[9]!==u?(a={queryKey:n,queryFn:i,enabled:u,placeholderData:nE},s[7]=n,s[8]=i,s[9]=u,s[10]=a):a=s[10],(0,nT.b)(a)}({sessions:el});k[23]===Symbol.for("react.memo_cache_sentinel")?(c=(0,f.G7)("copilot_immersive_task_hyperlinking"),k[23]=c):c=k[23];let ec=c;if(k[24]!==en){let e;u=ec?(e=en.find(nQ),(0,tG.L)(e?.event_identifiers)):void 0,k[24]=en,k[25]=u}else u=k[25];let eu=u;k[26]!==ei?(m=e=>{if(ei&&e.event_identifiers)return ei.find(t=>e.event_identifiers?.includes(t.id.toString()))},k[26]=ei,k[27]=m):m=k[27];let em=m;k[28]===Symbol.for("react.memo_cache_sentinel")?(h={containerRef:q,behavior:"smooth"},k[28]=h):h=k[28];let{scrollToBottom:eh}=t6(h);k[29]===Symbol.for("react.memo_cache_sentinel")?(p={containerRef:q,sentinelRef:G,offset:4},k[29]=p):p=k[29];let{setIsAtBottom:ef}=function(e){let t,n,i,a,s,r,o,d,c,u,m,h,f=(0,l.c)(24),{containerRef:p,sentinelRef:g,offset:y,scrollBehavior:x}=e,v=void 0===x?"instant":x,[b,j]=(0,_.useState)(!0),w=(0,_.useRef)(!1),N=(0,_.useRef)(b);f[0]!==b?(t=()=>{N.current=b},n=[b],f[0]=b,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,_.useEffect)(t,n),f[3]!==p||f[4]!==v?(i={containerRef:p,behavior:v,smoothThreshold:500},f[3]=p,f[4]=v,f[5]=i):i=f[5];let{scrollToBottom:C}=t6(i);f[6]!==p||f[7]!==g?(a=()=>{let e=p?.current;if(!e)return{containerElement:null,contentElement:document.scrollingElement||document.documentElement};let t=g.current?.parentElement??e;return{containerElement:e,contentElement:t}},f[6]=p,f[7]=g,f[8]=a):a=f[8];let S=a;return f[9]!==p?(s=()=>{let e=p?.current||window,t=()=>{w.current=!0};return e.addEventListener("scroll",t,{once:!0}),()=>{e.removeEventListener("scroll",t)}},r=[p],f[9]=p,f[10]=s,f[11]=r):(s=f[10],r=f[11]),(0,_.useEffect)(s,r),f[12]!==S||f[13]!==y||f[14]!==g?(o=()=>{let e=g.current;if(!e)return;let{containerElement:t}=S(),n=new IntersectionObserver(e=>{let t=e[0];t&&j(t.isIntersecting)},{root:t??null,rootMargin:`0px 0px ${y}px 0px`,threshold:0});return n.observe(e),()=>n.disconnect()},d=[y,S,g],f[12]=S,f[13]=y,f[14]=g,f[15]=o,f[16]=d):(o=f[15],d=f[16]),(0,_.useEffect)(o,d),f[17]!==S||f[18]!==C?(c=()=>{let{contentElement:e}=S();if(!e)return;let t=new ResizeObserver(()=>{(!w.current||N.current)&&C()});return t.observe(e),()=>t.disconnect()},u=[S,C],f[17]=S,f[18]=C,f[19]=c,f[20]=u):(c=f[19],u=f[20]),(0,_.useEffect)(c,u),f[21]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{N.current=e,j(e)},f[21]=m):m=f[21],f[22]!==b?(h={isAtBottom:b,setIsAtBottom:m},f[22]=b,f[23]=h):h=f[23],h}(p);k[30]!==P||k[31]!==F?(g=()=>{if(!F||"undefined"==typeof window||U.current)return;U.current=!0;let e=new URLSearchParams(P);e.delete("session_id");let t=e.toString(),n=`${window.location.pathname}${t?`?${t}`:""}${window.location.hash}`;(0,tU.kd)(n),queueMicrotask(()=>V(null))},k[30]=P,k[31]=F,k[32]=g):g=k[32];let ep=g;k[33]!==B||k[34]!==ep?(y=e=>{if(!B)return;let t=e.target,n=q.current?.querySelector(`[data-session-id="${B}"]`);n&&!n.contains(t)&&ep()},k[33]=B,k[34]=ep,k[35]=y):y=k[35];let eg=y;return k[36]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{U.current=!1},k[36]=x):x=k[36],k[37]!==F?(v=[F],k[37]=F,k[38]=v):v=k[38],(0,_.useEffect)(x,v),k[39]!==ef||k[40]!==F?(b=()=>{F&&ef(!1)},j=[F,ef],k[39]=ef,k[40]=F,k[41]=b,k[42]=j):(b=k[41],j=k[42]),(0,_.useEffect)(b,j),k[43]!==er||k[44]!==E.global_relay_id?(w={chatInputRef:H,textAreaRef:K,isReadonly:er,taskId:E.global_relay_id},k[43]=er,k[44]=E.global_relay_id,k[45]=w):w=k[45],!function(e){let t,n,i,a,s=(0,l.c)(10),{chatInputRef:r,textAreaRef:o,isReadonly:d,taskId:c}=e,u=(0,_.useRef)(null),m=(0,_.useRef)(null);s[0]!==r||s[1]!==o?(t=e=>{r.current&&(r.current.setText(t=>t&&t.trim()?`${t}
${e}`:e),o?.current?.focus())},s[0]=r,s[1]=o,s[2]=t):t=s[2];let h=t;s[3]!==h||s[4]!==d||s[5]!==c?(n=e=>{(e instanceof nU.L||e instanceof nU.J)&&(d||((0,e2.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_DIFF_BUTTON",file_path:e.filePath,line_number:e.endLineNumber,has_range:e.startLineNumber!==e.endLineNumber,task_id:c}),m.current=e,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{m.current&&(h(function(e){let{filePath:t,startLineNumber:n,endLineNumber:i}=e;return n!==i&&n?`${t}:${n}-${i}`:`${t}:${i}`}(m.current)),m.current=null)},300)))},s[3]=h,s[4]=d,s[5]=c,s[6]=n):n=s[6];let f=n;s[7]!==f?(i=()=>(window.addEventListener("DiffAddCommentButtonClickedEvent",f),window.addEventListener("DiffSelectedLineEvent",f),()=>{window.removeEventListener("DiffAddCommentButtonClickedEvent",f),window.removeEventListener("DiffSelectedLineEvent",f),u.current&&clearTimeout(u.current)}),a=[f],s[7]=f,s[8]=i,s[9]=a):(i=s[8],a=s[9]),(0,_.useEffect)(i,a)}(w),k[46]!==ep||k[47]!==W||k[48]!==F?(N=()=>{if(!F||!W)return;let e=W.find(ee.v5),t=e?.id??null;t&&t!==F&&ep()},C=[F,W,ep],k[46]=ep,k[47]=W,k[48]=F,k[49]=N,k[50]=C):(N=k[49],C=k[50]),(0,_.useEffect)(N,C),k[51]!==eh||k[52]!==ef||k[53]!==F?(S=()=>{(H.current&&H.current.setText(""),F)?ef(!1):(ef(!0),eh("instant"))},k[51]=eh,k[52]=ef,k[53]=F,k[54]=S):S=k[54],k[55]!==E.id||k[56]!==eh||k[57]!==ef||k[58]!==F?(I=[E.id,ef,eh,F],k[55]=E.id,k[56]=eh,k[57]=ef,k[58]=F,k[59]=I):I=k[59],(0,_.useEffect)(S,I),W&&Z?z&&Q?(0,d.jsx)(nH,{title:"Activity cannot be loaded",description:"The activity on this task is temporarily unavailable due to a system error. Try reloading the page, or if the problem persists, contact support.",statusLink:"https://www.githubstatus.com/"}):W.length?(0,d.jsx)("div",{className:"TaskChat-module__root--i8enD",children:(0,d.jsxs)("div",{className:"TaskChat-module__container--n3jVO",children:[(0,d.jsx)("div",{className:"TaskChat-module__stickableContainer--fhutl",children:(0,d.jsx)(tB.$,{containerRef:q,disabled:!1,className:"TaskChat-module__scrollContainer--ENR5a",onClick:eg,children:(0,d.jsxs)("div",{className:"TaskChat-module__content--X5M4z",children:[el.map((e,t)=>{var n;let i=0===t,a=em(e),s=(0,ee.VY)(e),r=(0,ee.SS)(e);return(0,d.jsxs)("div",{className:"d-flex flex-column",children:[i&&(0,d.jsx)("div",{className:"TaskChat-module__initialMessages--zIGn9",children:$?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tY,{currentUser:M,threadId:eu,session:e,message:r?"requested a review":"started a task",agentId:e.agent_id}),(0,d.jsx)(tK,{session:e,message:r?"started a review":"started work"})]}):(0,d.jsx)(nL,{session:e})}),!i&&!r&&(0,d.jsx)(n_,{mention:a,isLoading:!a&&et,agentId:e.agent_id},a?.id),!i&&r&&(0,d.jsx)("div",{className:"TaskChat-module__readonlyMessageContainer--Mxc35",children:(0,d.jsx)(tK,{session:e,message:"started a review"})}),(0,d.jsxs)(tq.PS,{session:e,sessionOwner:Z.find(t=>t.id===e.user_id),logs:eo?.[e.id],logsAreLoading:ed,children:[(0,d.jsx)(ni,{defaultOpen:(n=e.id,F?n===F:!!s||(W&&W.some(nz)?n===W.find(nW)?.id:t===el.length-1)),scrollContainerRef:q,hideStopButton:s,onOpenChange:()=>ef(!1),onToolExpand:()=>ef(!1),shouldHighlight:e.id===B}),"completed"===e.state&&($&&!i||!$)&&(0,d.jsx)(n$,{logsPollingInterval:R??3e3})]})]},e.id)}),(0,d.jsx)("div",{ref:G,"aria-hidden":!0,style:{height:1}})]})})}),!er&&(0,d.jsx)("div",{className:"TaskChat-module__chatInputContainer--Z0U1_",children:(0,d.jsx)(nh,{taskAgentId:en[0]?.agent_id,activeSession:en?.find(ee.v5)??null,onAddPendingSession:ea,onClearPendingSession:es,payload:L,scrollToBottom:eh,chatInputRef:H,inputRef:K})})]})}):(0,d.jsx)(nH,{title:"This task is not viewable",description:"You can't view this task because you do not have any active sessions for this pull request.",pullLink:E.url}):(0,d.jsx)(nG,{})}function nW(e){return(0,ee.v5)(e)}function nz(e){return(0,ee.v5)(e)}function nQ(e){return e.event_type===V.qY}function nZ(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}function nJ(e){return(0,ee.SS)(e)}try{nq.displayName||(nq.displayName="TaskChatSuspended")}catch{}try{nG.displayName||(nG.displayName="CenteredSpinner")}catch{}try{nH.displayName||(nH.displayName="CenteredBlankSlate")}catch{}try{nK.displayName||(nK.displayName="TaskChat")}catch{}var nY=n(72259);function nX(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.jsx)(j.Fn,{children:(0,d.jsx)(eJ.BH,{children:(0,d.jsx)(n0,{})})}),t[0]=e):e=t[0],e}function n0(){var e;let t,n,i,a,s,r,o,m,f,p,y,x,v,b,j,N,C,S,I,k,L,T,D,R,A,O,P,F,M,$,B,V,U,q,G=(0,l.c)(103),{data:H}=tA();G[0]!==H?(t=void 0===H?{}:H,G[0]=H,G[1]=t):t=G[1];let{pull:K,sessions:W,sessionsPollingInterval:z,currentUser:Q}=t,Z=K?.id??0,J=z??0;G[2]!==W||G[3]!==Z||G[4]!==J?(n={pullId:Z,initialData:W,sessionsPollingInterval:J},G[2]=W,G[3]=Z,G[4]=J,G[5]=n):n=G[5];let{data:Y}=(0,t$.t)(n),X=(0,eJ.tZ)(),{openPreviewPane:ee,closePreviewPane:et,openItem:en,closeItem:ei,updateItem:ea,allOpenItems:es}=(0,eJ.xx)(),[er]=(0,e0.ok)(),el=es?.length??0,{isNarrowViewport:eo}=(0,eY.B)(),ed=!!Y?.length;G[6]!==er?(i=er.get("session_id"),G[6]=er,G[7]=i):i=G[7];let ec=!!i;G[8]!==Y?(a=Y?.toSorted(n5)[0],G[8]=Y,G[9]=a):a=G[9];let eu=a,em=Y?.length??0;G[10]!==Y?(s=Y?.reduce(n4,0)||0,G[10]=Y,G[11]=s):s=G[11];let eh=s,ef=!!(Q&&Q?.id===Y?.[0]?.user_id);G[12]!==Y?(r=Y?.some(n3)??!1,G[12]=Y,G[13]=r):r=G[13];let ep=r;G[14]!==Y?(o=Y?.every(n2)??!1,G[14]=Y,G[15]=o):o=G[15];let eg=o,ey=(0,u.b)(),{models:ex}=(0,nY.h)(),ev=eL.W.codingAgentModelSelection?ex:void 0,eb=(0,eX.U)();G[16]!==Y?(m=Y?.find(n1),G[16]=Y,G[17]=m):m=G[17];let e_=m??Y?.[0],{data:ej}=(0,e1.B)(e_?.agent_id??null),ew=ej?.display_name,eN=K?.id||0,eC=!!K?.id;G[18]!==K||G[19]!==eN||G[20]!==eC?(f={pullRequestId:eN,includeBody:!1,initialData:K,enabled:eC},G[18]=K,G[19]=eN,G[20]=eC,G[21]=f):f=G[21];let{data:eS,refetchBody:eI,refetchPullRequest:ek}=function(e){let t,n,i,a,s,r,o=(0,l.c)(25),{pullRequestId:d,includeBody:c,initialData:u,enabled:m}=e,h=void 0!==c&&c,f=void 0===m||m,p=(0,tF.jE)();o[0]!==h||o[1]!==d?(t=["pull-request",d,h],o[0]=h,o[1]=d,o[2]=t):t=o[2];let g=t;o[3]!==h||o[4]!==d?(n=()=>tM(d,{includeBody:h}),o[3]=h,o[4]=d,o[5]=n):n=o[5];let y=n,x=3e5*!!u;o[6]!==f||o[7]!==u||o[8]!==y||o[9]!==g||o[10]!==x?(i={queryKey:g,queryFn:y,initialData:u,staleTime:x,enabled:f},o[6]=f,o[7]=u,o[8]=y,o[9]=g,o[10]=x,o[11]=i):i=o[11];let{data:v,refetch:b}=(0,tE.I)(i);o[12]!==d||o[13]!==p||o[14]!==g?(a=async()=>{let e=await tM(d,{includeBody:!0});p.setQueryData(g,t=>t?{...t,body:e.body,body_html:e.body_html,body_revision_count:e.body_revision_count}:e)},o[12]=d,o[13]=p,o[14]=g,o[15]=a):a=o[15];let _=a;o[16]!==d||o[17]!==p||o[18]!==g?(s=async()=>{let e=await tM(d,{includeBody:!1});p.setQueryData(g,t=>t?{...t,title:e.title,head_sha:e.head_sha,changed_files:e.changed_files,commit_alive_channel:e.commit_alive_channel}:e)},o[16]=d,o[17]=p,o[18]=g,o[19]=s):s=o[19];let j=s;return o[20]!==v||o[21]!==b||o[22]!==_||o[23]!==j?(r={data:v,refetch:b,refetchBody:_,refetchPullRequest:j},o[20]=v,o[21]=b,o[22]=_,o[23]=j,o[24]=r):r=o[24],r}(f);e=eS?.aliveChannel,(B=(0,l.c)(7))[0]!==ek?(F=(0,tP.A)(ek,2e3,{leading:!1,trailing:!0}),B[0]=ek,B[1]=F):F=B[1],V=F,B[2]!==eI?(M=(0,tP.A)(eI,2e3,{leading:!1,trailing:!0}),B[2]=eI,B[3]=M):M=B[3],U=M,B[4]!==U||B[5]!==V?($=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&V(),e.event_updates?.body_updated&&U()},B[4]=U,B[5]=V,B[6]=$):$=B[6],q=$,(0,tO.x)(e,q),G[22]===Symbol.for("react.memo_cache_sentinel")?(p=new Set,G[22]=p):p=G[22];let eT=(0,_.useRef)(p),eE=(0,_.useRef)(void 0),eD=(0,_.useRef)(void 0);G[23]!==el?(y=()=>{0===el&&eT.current.clear()},x=[el],G[23]=el,G[24]=y,G[25]=x):(y=G[24],x=G[25]),(0,_.useEffect)(y,x),G[26]!==ew||G[27]!==es||G[28]!==ev||G[29]!==ei||G[30]!==ef||G[31]!==eg||G[32]!==eS||G[33]!==ec||G[34]!==ep||G[35]!==eo||G[36]!==eu?.last_updated_at||G[37]!==eu?.model||G[38]!==eu?.state||G[39]!==en||G[40]!==ee||G[41]!==eh||G[42]!==K||G[43]!==em||G[44]!==ea?(v=()=>{if(!eS)return;void 0!==eS.id&&void 0!==eE.current&&eE.current!==eS.id&&(eT.current.clear(),eD.current=void 0),eE.current=eS?.id;let e=eS.changed_files??0,t=eS.head_sha,n=em>0&&e>0,i={...(0,tN.Bx)({body:eS?.body??"",bodyHTML:eS?.body_html,title:eS.title,number:eS.number,type:"pr-overview",repositoryNwo:eS.repository_nwo,baseRef:eS.base_ref_name,headRef:eS.head_ref_name,headSha:t,sessionState:eu?.state,sessionUpdatedAt:eu?.last_updated_at,sessionCount:em,premiumRequestCount:eh,model:eu?.model,availableModels:ev,isSingleSessionView:!ef,commitAliveChannel:eS.commit_alive_channel},tj.Wp),disableCloseButton:!0,icon:E.NoteIcon},a=K&&n?{...(0,tN.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${eS.repository_nwo}/pull/${eS.number}`,isSessionRunning:ep,isSessionReadonly:eg,agentDisplayName:ew},tj.Wp),disableCloseButton:!0,trailingComponent:(0,d.jsx)(tC.A,{children:e}),icon:E.FileIcon}:null;for(let e of(ea(i),a&&ea(a),es))e.includes("pr-files-changed:")&&!n&&ei(e);let s=es.includes(i.id),r=a&&es.includes(a.id),l=!eT.current.has(i.id)&&!s,o=a&&!eT.current.has(a.id)&&!r;l&&(en(i.id,!ec),eo||ee()),o&&(en(a.id,ec),ec&&!eo&&ee()),eT.current.add(i.id),a&&eT.current.add(a.id)},G[26]=ew,G[27]=es,G[28]=ev,G[29]=ei,G[30]=ef,G[31]=eg,G[32]=eS,G[33]=ec,G[34]=ep,G[35]=eo,G[36]=eu?.last_updated_at,G[37]=eu?.model,G[38]=eu?.state,G[39]=en,G[40]=ee,G[41]=eh,G[42]=K,G[43]=em,G[44]=ea,G[45]=v):v=G[45];let eR=eu?.state,eA=eu?.last_updated_at,eO=eu?.model;G[46]!==ew||G[47]!==es||G[48]!==ev||G[49]!==ei||G[50]!==et||G[51]!==ef||G[52]!==eg||G[53]!==eS||G[54]!==ec||G[55]!==ep||G[56]!==eo||G[57]!==en||G[58]!==el||G[59]!==ee||G[60]!==eh||G[61]!==K||G[62]!==em||G[63]!==eR||G[64]!==eA||G[65]!==eO||G[66]!==ea?(b=[eS,ea,en,ei,ee,et,ec,K,el,eR,eA,eO,em,eh,es,eo,ef,ep,eg,ev,ew],G[46]=ew,G[47]=es,G[48]=ev,G[49]=ei,G[50]=et,G[51]=ef,G[52]=eg,G[53]=eS,G[54]=ec,G[55]=ep,G[56]=eo,G[57]=en,G[58]=el,G[59]=ee,G[60]=eh,G[61]=K,G[62]=em,G[63]=eR,G[64]=eA,G[65]=eO,G[66]=ea,G[67]=b):b=G[67],(0,_.useEffect)(v,b),G[68]!==et||G[69]!==ee?(j=e=>{e?ee():et()},G[68]=et,G[69]=ee,G[70]=j):j=G[70];let eP=j;G[71]!==eS?.title?(N=()=>{let e=eS?.title;e?(0,h.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,h.D)("Task \xb7 GitHub Copilot")},G[71]=eS?.title,G[72]=N):N=G[72];let eF=eS?.title;return G[73]!==eF?(C=[eF],G[73]=eF,G[74]=C):C=G[74],(0,_.useEffect)(N,C),G[75]!==ey?(S=()=>{ey.selectThread(null,{includeThreads:!1,clearTopic:!0})},I=[ey],G[75]=ey,G[76]=S,G[77]=I):(S=G[76],I=G[77]),(0,_.useEffect)(S,I),(0,w._)(),G[78]!==X||G[79]!==eP?(k=[X,eP],G[78]=X,G[79]=eP,G[80]=k):k=G[80],G[81]!==eS||G[82]!==X||G[83]!==ed||G[84]!==eu||G[85]!==ee?(L=ed&&(0,d.jsx)(g.P.Header,{children:(0,d.jsx)(t_,{pull:eS,session:eu,isContentPreviewOpen:X,openPreviewPane:ee})}),G[81]=eS,G[82]=X,G[83]=ed,G[84]=eu,G[85]=ee,G[86]=L):L=G[86],G[87]===Symbol.for("react.memo_cache_sentinel")?(T=(0,d.jsx)(g.P.Sidebar,{children:(0,d.jsx)(c.U,{})}),G[87]=T):T=G[87],G[88]===Symbol.for("react.memo_cache_sentinel")?(D=(0,d.jsx)(g.P.ColumnLeft,{children:(0,d.jsx)(nq,{})}),G[88]=D):D=G[88],G[89]!==ed||G[90]!==eb?(R=ed&&(0,d.jsx)(g.P.ColumnRight,{children:(0,d.jsx)(tw.U,{returnFocusRef:eb,disableActionsMenu:!0,disableResourcePanel:!0,className:"TaskView-module__contentPreview--NFDAQ"})}),G[89]=ed,G[90]=eb,G[91]=R):R=G[91],G[92]!==k||G[93]!==L||G[94]!==R?(A=(0,d.jsxs)(g.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:k,className:"TaskView-module__layout--AFh4y",children:[L,T,D,R]}),G[92]=k,G[93]=L,G[94]=R,G[95]=A):A=G[95],G[96]!==eS||G[97]!==A?(O=(0,d.jsx)(tT,{pull:eS,children:A}),G[96]=eS,G[97]=A,G[98]=O):O=G[98],G[99]!==Q||G[100]!==ef||G[101]!==O?(P=(0,d.jsx)(tI,{currentUser:Q,currentUserIsSessionOwner:ef,children:O}),G[99]=Q,G[100]=ef,G[101]=O,G[102]=P):P=G[102],P}function n1(e){return"in_progress"===e.state}function n2(e){return(0,ee.SS)(e)}function n3(e){return"in_progress"===e.state}function n4(e,t){return e+t.premium_requests}function n5(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{nX.displayName||(nX.displayName="TaskViewWrapper")}catch{}try{n0.displayName||(n0.displayName="TaskView")}catch{}let n6=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":eZ,"pr-files-changed":eS}}constructor(){(0,o._)(this,"id",V.v),(0,o._)(this,"displayName",V.Ns),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:V.kF,Component:nX,routes:[n6]}])}};var n7=n(65411),n8=n(82590),n9=n(85094),ie=n(47970),it=n(46665),ii=n(46857);function ia(e){let t,n,i,a,s,r,o,c,u,m=(0,l.c)(26),{loop:h,headerButton:f,isStreaming:p}=e,[g,y]=(0,_.useState)(!0);if(!h)return null;m[0]!==g?(t=()=>y(!g),m[0]=g,m[1]=t):t=m[1];let x=t,v=p&&"LoopBlock-module__streaming--kzTU_";m[2]!==v?(n=(0,tb.$)("LoopBlock-module__container--F3X80",v),m[2]=v,m[3]=n):n=m[3];let b=!g&&"LoopBlock-module__headerCollapsed--Yoo66";return m[4]!==b?(i=(0,tb.$)("LoopBlock-module__header--Bmyfz",b),m[4]=b,m[5]=i):i=m[5],m[6]!==g?(a=g?(0,d.jsx)(E.ChevronDownIcon,{size:16}):(0,d.jsx)(E.ChevronRightIcon,{size:16}),m[6]=g,m[7]=a):a=m[7],m[8]!==h.title?(s=(0,d.jsx)("span",{className:"LoopBlock-module__buttonText--pH2DI",children:h.title}),m[8]=h.title,m[9]=s):s=m[9],m[10]!==a||m[11]!==s||m[12]!==x?(r=(0,d.jsx)(tl.Q,{variant:"invisible",onClick:x,className:"LoopBlock-module__expandButton--kYkwN",leadingVisual:a,children:s}),m[10]=a,m[11]=s,m[12]=x,m[13]=r):r=m[13],m[14]!==f||m[15]!==i||m[16]!==r?(o=(0,d.jsxs)("div",{className:i,children:[r,f]}),m[14]=f,m[15]=i,m[16]=r,m[17]=o):o=m[17],m[18]!==g||m[19]!==p||m[20]!==h.nodes?(c=g&&(0,d.jsx)("div",{className:"LoopBlock-module__content--SQW7_",children:h.nodes.map((e,t)=>{let n=p&&t===h.nodes.length-1;return(0,d.jsxs)("div",{className:"LoopBlock-module__node--GZLd9",children:[(0,d.jsx)("div",{className:"LoopBlock-module__iconContainer--QF1t5",children:(0,d.jsx)(E.CheckCircleFillIcon,{size:16,className:"LoopBlock-module__checkIcon--_Toxw"})}),n&&!e.title?null:(0,d.jsx)("span",{className:"LoopBlock-module__nodeTitle--upYDV",children:e.title})]},e.id)})}),m[18]=g,m[19]=p,m[20]=h.nodes,m[21]=c):c=m[21],m[22]!==c||m[23]!==n||m[24]!==o?(u=(0,d.jsxs)("div",{className:n,children:[o,c]}),m[22]=c,m[23]=n,m[24]=o,m[25]=u):u=m[25],u}try{ia.displayName||(ia.displayName="LoopBlockContent")}catch{}var is=n(91348),ir=n(12465),il=n(37510),io=n(99993);function id(e){let t,n,i,a,s=(0,l.c)(15),{isStreaming:r}=e,o=function(){let{message:e}=(0,it.V)(),t=(0,ii.O)(e);return t?.pipeline??null}(),{mutate:c}=(0,ir.P)(),{data:u}=(0,io._N)();s[0]!==u||s[1]!==o||s[2]!==c?(t=()=>{if(!u||!o)return;let e=(0,is.kX)({...o,id:u.id},[]);c({loopID:u.id,updateFn:()=>e})},s[0]=u,s[1]=o,s[2]=c,s[3]=t):t=s[3];let m=t;s[4]!==r||s[5]!==u||s[6]!==o?(n=u&&!r&&!(0,il.S)(u,o),s[4]=r,s[5]=u,s[6]=o,s[7]=n):n=s[7];let h=n;s[8]!==m||s[9]!==h?(i=h?(0,d.jsx)(tl.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,s[8]=m,s[9]=h,s[10]=i):i=s[10];let f=i;return s[11]!==r||s[12]!==o||s[13]!==f?(a=(0,d.jsx)(ia,{loop:o,headerButton:f,isStreaming:r}),s[11]=r,s[12]=o,s[13]=f,s[14]=a):a=s[14],a}try{id.displayName||(id.displayName="LoopBlock")}catch{}let ic="data-loop-block",iu=(0,n9.F)(ic),im={div:(e,t)=>{let n=(0,n9.k)(e,ic);return n?(0,d.jsx)(id,{...n}):t}};function ih(){return{transformMarkdown:e=>(0,ie.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[iu]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,ie.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&iu in i.properties&&n.children.splice(t,1,i)}),reactComponents:im}}var ip=n(54908),ig=n(35750),iy=n(18150),ix=n(85242),iv=n(88243),ib=n(16213),i_=n(46062),ij=new WeakMap,iw=new WeakMap,iN=new WeakMap,iC=new WeakSet,iS=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,i_.wv)(),a=t??i.id,s=await (0,ig._)(this,ij).getAuthToken(),r=await (0,B.p)({basePath:(0,ig._)(this,iw),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,ig._)(this,iS).integrationID,realIp:(0,ig._)(this,iN),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,e2.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,iv._)(this,iC,iI).call(this,r.body,n))}constructor(e,t,n=""){(0,ib._)(this,iC),(0,iy._)(this,iS,{get:ik,set:void 0}),(0,iy._)(this,ij,{writable:!0,value:void 0}),(0,iy._)(this,iw,{writable:!0,value:void 0}),(0,iy._)(this,iN,{writable:!0,value:void 0}),(0,ix._)(this,iw,e),(0,ix._)(this,ij,t),(0,ix._)(this,iN,n)}};async function*iI(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function ik(){return{integrationID:"copilot-chat"}}var iL=n(21046);let iT=["SAML"],iE={FORBIDDEN:["SAML error"]};function iD(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!iT.includes(e.type)&&!iE[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,e2.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,iL.vV)(n),(0,e2.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var iR=n(13647),iA=new WeakMap,iO=new WeakMap,iP=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,iR.Xg)()){let n=await (0,ig._)(this,iP).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${n.error}`);if(iD(n.data))return n.data}let i={"X-Copilot-Api-Token":(await (0,ig._)(this,iO).getAuthToken()).value},a={query:e};a.loopId=t.loopId,a.version=t.version,a.executionId=t.executionId,a.nodeId=t.nodeId;let s=await (0,eF.Sr)((0,ig._)(this,iA),{method:"POST",body:a,headers:i,signal:n?.signal});if(s.ok){let e=await s.json();if(iD(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,iy._)(this,iA,{writable:!0,value:void 0}),(0,iy._)(this,iO,{writable:!0,value:void 0}),(0,iy._)(this,iP,{writable:!0,value:void 0}),(0,ix._)(this,iA,e),(0,ix._)(this,iO,t),(0,ix._)(this,iP,n)}};let iF="LoopsView-module__sectionHeader--EgQsl",iM="LoopsView-module__sectionTitle--UPWoU";var i$=n(80770),iB=n(21229),iV=n(58615),iU=n(49912),iq=n(17005),iG=n(15220),iH=n(72511),iK=n(4175),iW=n(76746),iz=n(99519),iQ=n(76219);function iZ({isOpen:e,onClose:t}){let[n,i]=(0,_.useState)(""),[a,s]=(0,_.useState)(!1),[r,l]=(0,_.useState)(null),o=(0,iz.EY)(),c=(0,e0.Zp)(),{availableModels:u}=(0,iQ.U)(),m=(0,_.useMemo)(()=>{if(!n.trim())return{isValid:!1,errors:[]};try{let e=JSON.parse(n),t=(0,iW.v)(e,{availableModels:u});if(t.length>0)return{isValid:!1,errors:t.map(e=>e.error)};return{isValid:!0,errors:[],loop:e}}catch(e){return{isValid:!1,errors:[`Invalid JSON: ${e instanceof Error?e.message:"Syntax error"}`]}}},[n,u]),h=async()=>{if(m.isValid&&m.loop&&!a){s(!0),l(null),(0,e2.BI)("dotcom_chat.activate",{target:"CREATE_LOOP_FROM_JSON",mode:"loops"});try{let e={...m.loop,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"};await o.createLoop(e),c(`${B.Jz}/l/${e.id}`),t()}catch(e){l(e instanceof Error?e.message:"Failed to create loop. Please try again.")}finally{s(!1)}}};return e?(0,d.jsx)(iG.l,{title:"Create loop from JSON",onClose:t,width:"large",height:"large",renderBody:()=>(0,d.jsxs)("div",{className:"CreateLoopFromJsonDialog-module__container--yEYu1",children:[r&&(0,d.jsx)(iH.A,{variant:"danger",children:r}),(0,d.jsx)("div",{className:"CreateLoopFromJsonDialog-module__header--UNUms",children:(0,d.jsx)("p",{className:"CreateLoopFromJsonDialog-module__description--vfsKH",children:"Paste a valid loop JSON object to create a new loop."})}),(0,d.jsxs)(nl.A,{className:"CreateLoopFromJsonDialog-module__formControl--vBsuV",children:[(0,d.jsx)(nl.A.Label,{visuallyHidden:!0,children:"Loop JSON"}),(0,d.jsx)(iK.Ay,{className:"CreateLoopFromJsonDialog-module__textarea--OHmSD",value:n,onChange:e=>i(e.target.value),placeholder:"Paste your loop JSON here...",resize:"none",spellCheck:!1,autoComplete:"off"}),m.errors.length>0?(0,d.jsx)(nl.A.Validation,{variant:"error",children:(0,d.jsx)("div",{children:m.errors[0]})}):m.isValid&&m.loop?(0,d.jsx)(nl.A.Validation,{variant:"success",children:"Valid loop detected!"}):(0,d.jsx)("span",{className:"CreateLoopFromJsonDialog-module__spacer--JbIGC"})]})]}),renderFooter:()=>(0,d.jsxs)(iG.l.Footer,{children:[(0,d.jsx)(tl.Q,{onClick:t,children:"Cancel"}),(0,d.jsx)(tl.Q,{onClick:h,variant:"primary",inactive:!m.isValid||a,loading:a,children:"Create loop"})]})}):null}try{iZ.displayName||(iZ.displayName="CreateLoopFromJsonDialog")}catch{}function iJ(e){let t,n,i,a,s,r,o,c,u,m,h,f,p,g,y,x,v=(0,l.c)(28),{showExamples:b,onShowExamples:j}=e,w=void 0===b||b,N=(0,_.useRef)(null),C=(0,_.useRef)(null),[S,I]=(0,_.useState)(!1),k=(0,tp.A3)("optedInToUserFeedback");v[0]!==k?(t=k?(0,d.jsx)(tl.Q,{variant:"link",onClick:()=>{N.current?.openDialog(),(0,e2.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,v[0]=k,v[1]=t):t=v[1];let L=t;return v[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.jsx)(e3.K,{icon:E.BookIcon,as:"a",href:"https://docs.github.com/copilot","aria-label":"Copilot Loops documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:i0}),v[2]=n):n=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(F.W.Anchor,{children:(0,d.jsx)(e3.K,{icon:E.KebabHorizontalIcon,"aria-label":"Menu",variant:"invisible",onClick:iX})}),v[3]=i):i=v[3],v[4]!==j||v[5]!==w?(a=!w&&j&&(0,d.jsxs)(M.l.Item,{onSelect:()=>{j(),(0,e2.BI)("dotcom_chat.activate",{target:"LOOPS_SHOW_EXAMPLES",mode:"loops"})},children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.LightBulbIcon,{})}),"Show examples"]}),v[4]=j,v[5]=w,v[6]=a):a=v[6],v[7]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{I(!0),(0,e2.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_CREATE_FROM_JSON",mode:"loops"})},v[7]=s):s=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,d.jsxs)(M.l.Item,{onSelect:s,children:["Create from JSON",(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.UploadIcon,{})})]}),v[8]=r):r=v[8],v[9]!==a?(o=(0,d.jsxs)(M.l.Group,{children:[a,r]}),v[9]=a,v[10]=o):o=v[10],v[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,d.jsx)(M.l.Divider,{}),v[11]=c):c=v[11],v[12]!==k?(u=k&&(0,d.jsxs)(M.l.Item,{onSelect:()=>{N.current?.openDialog(),(0,e2.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.CommentIcon,{})})]}),v[12]=k,v[13]=u):u=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(m=(0,d.jsxs)(M.l.LinkItem,{href:"/settings/copilot",onClick:iY,children:[(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(E.GearIcon,{})}),"Settings"]}),v[14]=m):m=v[14],v[15]!==u?(h=(0,d.jsxs)(M.l.Group,{children:[u,m]}),v[15]=u,v[16]=h):h=v[16],v[17]!==h||v[18]!==o?(f=(0,d.jsxs)(F.W,{anchorRef:C,children:[i,(0,d.jsx)(F.W.Overlay,{width:"small",children:(0,d.jsxs)(M.l,{children:[o,c,h]})})]}),v[17]=h,v[18]=o,v[19]=f):f=v[19],v[20]===Symbol.for("react.memo_cache_sentinel")?(p=(0,d.jsx)(iq.l,{ref:N,mode:"immersive",returnFocusRef:C}),v[20]=p):p=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(g=()=>I(!1),v[21]=g):g=v[21],v[22]!==S?(y=(0,d.jsx)(iZ,{isOpen:S,onClose:g}),v[22]=S,v[23]=y):y=v[23],v[24]!==L||v[25]!==f||v[26]!==y?(x=(0,d.jsx)("div",{className:"LoopsViewHeader-module__header--miwmH",children:(0,d.jsxs)("div",{className:"LoopsViewHeader-module__rightControls--tpwkz",children:[L,n,f,p,y]})}),v[24]=L,v[25]=f,v[26]=y,v[27]=x):x=v[27],x}function iY(){return(0,e2.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"loops"})}function iX(){return(0,e2.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"loops"})}function i0(){return(0,e2.BI)("dotcom_chat.activate",{target:"LOOPS_HELP_BUTTON_CLICKED",mode:"loops"})}try{iJ.displayName||(iJ.displayName="LoopsViewHeader")}catch{}let i1={altText:"GitHub battle royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub battle royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]},icon:E.FlameIcon},i2={altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub feature announcement magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]},icon:E.RepoIcon},i3=[i1,{altText:"First responder activity report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First responder activity report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]},icon:E.NoteIcon},i2];var i4=n(43134);let i5=(0,_.lazy)(async()=>({default:(await Promise.all([n.e(3088),n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(95192)]).then(n.bind(n,88027))).Loop}));try{i5.displayName||(i5.displayName="LazyLoop")}catch{}var i6=n(52070);function i7(e){let t,n,i,a,s=(0,l.c)(10),{value:r,onChange:o}=e;s[0]!==o?(t=e=>{o(0===e?"list":"output")},s[0]=o,s[1]=t):t=s[1];let c=t,u="list"===r;s[2]!==u?(n=(0,d.jsx)(i6.I.IconButton,{"aria-label":"List view",selected:u,icon:E.ThreeBarsIcon}),s[2]=u,s[3]=n):n=s[3];let m="output"===r;return s[4]!==m?(i=(0,d.jsx)(i6.I.IconButton,{"aria-label":"Output view",selected:m,icon:E.RowsIcon}),s[4]=m,s[5]=i):i=s[5],s[6]!==c||s[7]!==n||s[8]!==i?(a=(0,d.jsxs)(i6.I,{"aria-label":"Loops overview view mode",onChange:c,children:[n,i]}),s[6]=c,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}try{i7.displayName||(i7.displayName="ListModeToggle")}catch{}var i8=n(90177),i9=n(14303);function ae(e){let t,n,i,a=(0,l.c)(14),{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:c,onEdit:u,onCopyOutput:m,loopId:h,variant:f,hasOutput:p}=e,g=void 0===f?"invisible":f,y=(0,_.useRef)(null);return h?(a[0]!==g?(t=(0,d.jsx)(F.W.Anchor,{children:(0,d.jsx)(e3.K,{icon:E.KebabHorizontalIcon,"aria-label":"Manage loop",variant:g})}),a[0]=g,a[1]=t):t=a[1],a[2]!==p||a[3]!==h||a[4]!==r||a[5]!==m||a[6]!==s||a[7]!==o||a[8]!==u||a[9]!==c?(n=(0,d.jsx)(i9.r,{onDelete:s,onCopyLoop:r,onDuplicate:o,onShare:c,onEdit:u,onCopyOutput:m,hasOutput:p,loopId:h,returnFocusRef:y}),a[2]=p,a[3]=h,a[4]=r,a[5]=m,a[6]=s,a[7]=o,a[8]=u,a[9]=c,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,d.jsxs)(F.W,{anchorRef:y,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{ae.displayName||(ae.displayName="LoopsContextMenu")}catch{}var at=n(93364),an=n(48057),ai=n(33026),aa=n(36296),as=n(90122),ar=n(5533),al=n(19336),ao=n(11607);function ad(e){let t,n,i,a,s,r,o,c,u,m,h,f,p,g=(0,l.c)(44),{loop:y}=e,{runLoop:x,stopLoop:v,isPreparing:b}=function(){let e=(0,iz.EY)(),t=(0,tF.jE)(),[n,i]=(0,_.useState)(!1),{createProgressHandler:a}=(0,aa.h)();return{runLoop:async n=>{i(!0);try{let s=await e.createExecution(n.id,n.version||ai.qD);if(!s.success)throw Error(`Failed to create execution: ${s.error}`);let r=s.data,l=n.version||ai.qD,o=a(n.id,l),d=(0,an.wu)(n.id,l);t.setQueryData(d,r),i(!1),await e.runPipeline(n,r.id,o,(e,n,i)=>{let a=(0,an.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,at.$j)(s):(0,at.YD)("execution not found"))})}catch(e){throw i(!1),(0,iL.vV)("Error running loop:",e),e}},stopLoop:n=>{let i=(0,an.wu)(n.id,n.version||ai.qD),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i})})},isPreparing:n}}();g[0]!==y?(t=(0,is.FT)(y),g[0]=y,g[1]=t):t=g[1];let j=t[0],{data:w,isLoading:N}=(0,an.rR)(y.id,y.version??"latest"),C=j?w?.nodes[j.id]:void 0,S=C?.value??null,I=C?.error||null;g[2]!==w?(n=(0,ar.y)(w),g[2]=w,g[3]=n):n=g[3];let k=n,L=b||k;g[4]!==S?(i=(0,as.DO)(S),g[4]=S,g[5]=i):i=g[5];let T=i;g[6]!==y||g[7]!==x?(a=async()=>{await x(y),(0,e2.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},g[6]=y,g[7]=x,g[8]=a):a=g[8];let E=a;g[9]!==y||g[10]!==v?(s=()=>{v(y),(0,e2.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},g[9]=y,g[10]=v,g[11]=s):s=g[11];let D=s;g[12]!==S||g[13]!==T?(r=async()=>{if(S)try{await navigator.clipboard.writeText(T),(0,e2.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},g[12]=S,g[13]=T,g[14]=r):r=g[14];let R=r,A=`${B.Jz}/l/${y.id}`;g[15]!==y.title||g[16]!==A?(o=(0,d.jsx)("h3",{className:"LoopOutput-module__title--pNloU",children:(0,d.jsx)(ao.$,{variant:"invisible",condensed:!0,to:A,onClick:ac,children:y.title})}),g[15]=y.title,g[16]=A,g[17]=o):o=g[17],g[18]!==E||g[19]!==D||g[20]!==L||g[21]!==S?(c=(0,d.jsx)(i8.c,{isLoading:L,onClick:E,onStop:D,value:S,variant:"invisible",iconOnly:!0}),g[18]=E,g[19]=D,g[20]=L,g[21]=S,g[22]=c):c=g[22];let O=!!S;g[23]!==R||g[24]!==y.id||g[25]!==O?(u=(0,d.jsx)(ae,{loopId:y.id,onEdit:ac,onCopyOutput:R,hasOutput:O}),g[23]=R,g[24]=y.id,g[25]=O,g[26]=u):u=g[26],g[27]!==u||g[28]!==c?(m=(0,d.jsxs)("div",{className:"LoopOutput-module__actions--S7bni",children:[c,u]}),g[27]=u,g[28]=c,g[29]=m):m=g[29],g[30]!==m||g[31]!==o?(h=(0,d.jsxs)("div",{className:"LoopOutput-module__header--fcRKQ",children:[o,m]}),g[30]=m,g[31]=o,g[32]=h):h=g[32];let P=!!j;return g[33]!==E||g[34]!==D||g[35]!==N||g[36]!==L||g[37]!==I||g[38]!==S||g[39]!==P?(f=(0,d.jsx)("div",{className:"LoopOutput-module__body--fhlUk",children:(0,d.jsx)(al.G,{outputNodeExists:P,isRunning:L,isLoading:N,nodeValue:S,nodeError:I,onRun:E,onStop:D})}),g[33]=E,g[34]=D,g[35]=N,g[36]=L,g[37]=I,g[38]=S,g[39]=P,g[40]=f):f=g[40],g[41]!==h||g[42]!==f?(p=(0,d.jsxs)("div",{className:"LoopOutput-module__panel--MrOXo",children:[h,f]}),g[41]=h,g[42]=f,g[43]=p):p=g[43],p}function ac(){(0,e2.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{ad.displayName||(ad.displayName="LoopOutput")}catch{}var au=n(12683);let am=[{step:"STEP 1",title:"Describe what you want to create",description:"Describe what you want to create and watch your first loop take shape. Refine and iterate whenever you need.",imageLight:n.p+"onboarding-exp-1-a95dcfae9b1b.png",imageDark:n.p+"onboarding-exp-1-dark-a48429702429.png",color:"bgColor-accent-muted borderColor-accent-muted"},{step:"STEP 2",title:"Connect nodes to build your workflow",description:"Every loop is made of connected nodes, each designed for a specific task. Adjust their inputs, fine-tune their settings, and watch data flow seamlessly from one node to the next, like a clear, powerful and predictable visual pipeline.",imageLight:n.p+"onboarding-exp-2-0c9e0ccab87e.png",imageDark:n.p+"onboarding-exp-2-dark-615b3cf6a6ff.png",color:"bgColor-muted borderColor-muted"},{step:"STEP 3",title:"Run and review results",description:"Run your loop to see results instantly. Outputs are rendered in rich markdown, making it easy to review, validate, and keep improving your workflow.",imageLight:n.p+"onboarding-exp-3-69315c1e30db.png",imageDark:n.p+"onboarding-exp-3-dark-ab6c51a7a2e1.png",color:"bgColor-open-muted borderColor-open-muted"},{step:"STEP 4",title:"Share with your team",description:"Once your loop is ready, share it with your team. Organize, reuse, and grow your collection of loops into a powerhouse of workflows everyone can build on.",imageLight:n.p+"onboarding-exp-4-5437e43d7f31.png",imageDark:n.p+"onboarding-exp-4-dark-3a94358b2cb1.png",color:"bgColor-done-muted borderColor-done-muted"}];function ah(){let e,t,n=(0,l.c)(4),{resolvedColorScheme:i}=(0,au.DP)(),a="dark"===i;return n[0]!==a?(e=am.map(e=>(0,d.jsxs)("div",{className:(0,tb.$)("OnboardingCards-module__card--iLbfG","color-shadow-small"),children:[(0,d.jsxs)("div",{className:"OnboardingCards-module__cardContent--Azqb_",children:[(0,d.jsx)("h4",{className:"OnboardingCards-module__cardTitle--Jy7D9",children:e.step}),(0,d.jsx)("p",{className:"OnboardingCards-module__cardDescription--ychAP",children:e.description})]}),(0,d.jsx)("div",{className:(0,tb.$)("OnboardingCards-module__cardImageContainer--OMfWC",e.color),children:(0,d.jsx)("img",{src:a?e.imageDark:e.imageLight,alt:e.title,className:"OnboardingCards-module__cardImage--otEbQ"})})]},e.step)),n[0]=a,n[1]=e):e=n[1],n[2]!==e?(t=(0,d.jsx)("div",{className:"OnboardingCards-module__container--Vo1v5",children:e}),n[2]=e,n[3]=t):t=n[3],t}try{ah.displayName||(ah.displayName="OnboardingCards")}catch{}var af=n(79184),ap=n(96002),ag=n(4559);let ay=(0,n(23125).A)(ag.C,1e3);function ax(e){let t,n,i,a,s,r,o,u=(0,l.c)(21),{chatState:m,plugin:h}=e;if(!h||!(0,iU.j)(h))throw Error("LoopsView can only be used with a LoopsPlugin");let[f,p]=(0,iV.M)("loopsShowExamples",!0),y=(0,i_.GF)(m.availableModels);return u[0]!==p?(t=()=>p(!0),u[0]=p,u[1]=t):t=u[1],u[2]!==f||u[3]!==t?(n=(0,d.jsx)(g.P.Header,{children:(0,d.jsx)(iJ,{showExamples:f,onShowExamples:t})}),u[2]=f,u[3]=t,u[4]=n):n=u[4],u[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.jsx)(g.P.Sidebar,{children:(0,d.jsx)(c.U,{})}),u[5]=i):i=u[5],u[6]!==m||u[7]!==p||u[8]!==f?(a=(0,d.jsx)(g.P.ColumnLeft,{children:(0,d.jsx)(ab,{chatState:m,showExamples:f,setShowExamples:p})}),u[6]=m,u[7]=p,u[8]=f,u[9]=a):a=u[9],u[10]!==n||u[11]!==a?(s=(0,d.jsxs)(g.P,{"data-testid":"loops-layout",children:[n,i,a]}),u[10]=n,u[11]=a,u[12]=s):s=u[12],u[13]!==m.availableModels||u[14]!==y||u[15]!==h.previewUrl||u[16]!==s?(r=(0,d.jsx)(iQ.Q,{previewUrl:h.previewUrl,availableModels:m.availableModels,defaultModel:y,sendChatMessage:av,children:s}),u[13]=m.availableModels,u[14]=y,u[15]=h.previewUrl,u[16]=s,u[17]=r):r=u[17],u[18]!==h.service||u[19]!==r?(o=(0,d.jsx)(iz.qT,{value:h.service,children:r}),u[18]=h.service,u[19]=r,u[20]=o):o=u[20],o}function av(){}function ab(e){let t,n,i,a,s,r,o,c,m,h,f,g,y,x,v,b,j,w,N,S,I,k,L,T=(0,l.c)(59),{chatState:D,showExamples:R,setShowExamples:A}=e,{data:O,isLoading:P}=(0,i$.C)(),F=(0,u.b)(),M=(0,e0.Zp)(),$=(0,iz.EY)(),V=(0,i_.GF)(D.availableModels),[U,q]=(0,iV.M)("loopsOverviewViewMode","output"),[G,H]=(0,_.useState)(""),{chatQuotaExceeded:K,isLicensedLimited:W}=(0,af.xR)(),z=W&&K,Z=(0,_.useRef)(null);if(T[0]!==O||T[1]!==G){e:{if(!O){t=O;break e}let e=O.filter(aS);if(!G.trim()){t=e;break e}let n=G.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}T[0]=O,T[1]=G,T[2]=t}else t=T[2];let J=t;T[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],T[3]=n):n=T[3],(0,_.useEffect)(aC,n),T[4]!==F?(i=()=>{F.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[F],T[4]=F,T[5]=i,T[6]=a):(i=T[5],a=T[6]),(0,_.useEffect)(i,a),T[7]!==V||T[8]!==$||T[9]!==F||T[10]!==M?(s=async e=>{let t=e.trim();if(""===t)return;(0,e2.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:n8.S$},a=await F.createThread(i);await $.createLoop(n),(0,i4.aq)(n,a.id);let s={content:t,model:V,references:[],thread:a,mode:n8.lh};F.sendChatMessage(s),M(`${B.Jz}/l/${n}`)},T[7]=V,T[8]=$,T[9]=F,T[10]=M,T[11]=s):s=T[11];let Y=s,X=(0,_.useRef)(Y);T[12]!==Y?(r=()=>{X.current=Y},o=[Y],T[12]=Y,T[13]=r,T[14]=o):(r=T[13],o=T[14]),(0,_.useEffect)(r,o),T[15]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=C.Jt.getLoopEntrypointMessage();e&&(C.Jt.setLoopEntrypointMessage(null),X.current(e.message))},m=[],T[15]=c,T[16]=m):(c=T[15],m=T[16]),(0,_.useEffect)(c,m),T[17]===Symbol.for("react.memo_cache_sentinel")?(h=()=>(Z.current&&ay(Z.current,{assertive:!0}),aN),T[17]=h):h=T[17],T[18]!==J||T[19]!==P||T[20]!==G?(f=[G,J,P],T[18]=J,T[19]=P,T[20]=G,T[21]=f):f=T[21],(0,_.useEffect)(h,f),T[22]!==$||T[23]!==M?(g=async e=>{await $.createLoop(e),M(`${B.Jz}/l/${e.id}`)},T[22]=$,T[23]=M,T[24]=g):g=T[24];let ee=g;T[25]!==q?(y=e=>{q(e)},T[25]=q,T[26]=y):y=T[26];let et=y;T[27]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{H(e),(0,e2.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},T[27]=x):x=T[27];let en=x;return T[28]===Symbol.for("react.memo_cache_sentinel")?(v=(0,d.jsxs)(p.Zf.Header,{children:[(0,d.jsx)(p.Zf.Title,{children:"Loops"}),(0,d.jsx)(p.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),T[28]=v):v=T[28],T[29]===Symbol.for("react.memo_cache_sentinel")?(b=[{name:"Loop",icon:(0,d.jsx)(E.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],T[29]=b):b=T[29],T[30]!==Y||T[31]!==z?(j=(0,d.jsx)(ns.V,{modes:b,size:"large",disabled:z,onSubmit:Y}),T[30]=Y,T[31]=z,T[32]=j):j=T[32],T[33]!==z?(w=z&&(0,d.jsx)(ap.u,{}),T[33]=z,T[34]=w):w=T[34],T[35]!==j||T[36]!==w?(N=(0,d.jsxs)("div",{className:"LoopsView-module__header--ZnQDC",children:[v,(0,d.jsxs)("div",{className:"LoopsView-module__input--HBzte",children:[j,w]})]}),T[35]=j,T[36]=w,T[37]=N):N=T[37],T[38]!==ee||T[39]!==P||T[40]!==A||T[41]!==R?(S=!P&&R&&(0,d.jsxs)(p.Zf.Section,{children:[(0,d.jsxs)("div",{className:iF,children:[(0,d.jsx)("h2",{className:iM,children:"Examples"}),(0,d.jsx)(e3.K,{icon:E.XIcon,"aria-label":"Dismiss examples",variant:"invisible",size:"small",onClick:()=>{A(!1),(0,e2.BI)("dotcom_chat.activate",{target:"LOOPS_DISMISS_EXAMPLES",mode:"loops"})}})]}),(0,d.jsx)("div",{className:"LoopsView-module__examplesContainer--cshxA",children:i3.map(e=>{let{loop:t,icon:n}=e;return(0,d.jsxs)("button",{className:(0,tb.$)("LoopsView-module__exampleCard--faZyi","color-shadow-small"),onClick:()=>{(0,e2.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),ee({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,d.jsx)("div",{className:"LoopsView-module__exampleCardIconContainer--zgd0g",children:n?(0,d.jsx)(n,{className:"LoopsView-module__exampleCardIcon--umFeZ",size:16}):null}),(0,d.jsx)("div",{className:"LoopsView-module__exampleCardContent--jxm8o",children:(0,d.jsx)("h3",{className:"LoopsView-module__exampleCardTitle--wpbww",children:t.title})})]},t.title)})})]}),T[38]=ee,T[39]=P,T[40]=A,T[41]=R,T[42]=S):S=T[42],T[43]!==J||T[44]!==et||T[45]!==P||T[46]!==O||T[47]!==G||T[48]!==R||T[49]!==U?(I=P||O&&O.length>0?(0,d.jsxs)(p.Zf.Section,{children:[R&&(0,d.jsx)("div",{className:iF,children:(0,d.jsx)("h2",{className:iM,children:"Loops"})}),(0,d.jsxs)("div",{className:"LoopsView-module__searchContainer--ypqMb",children:[(0,d.jsx)(iB.D,{onSearch:en,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,d.jsx)(i7,{value:U,onChange:et}),(0,d.jsx)("h2",{className:"sr-only",children:"My loops"})]}),G&&J&&0===J.length?(0,d.jsxs)("div",{className:"LoopsView-module__noResultsMessage--OkrMA",ref:Z,children:["No loops found matching \u201C",G,"\u201D"]}):"list"===U?(0,d.jsx)(Q.qJ,{children:(0,d.jsx)(Q.qJ.List,{loading:P,children:J?.map(aj)})}):(0,d.jsx)("div",{className:"LoopsOutputList-module__list--DoC1u",children:(J||[]).map(a_)})]}):null,T[43]=J,T[44]=et,T[45]=P,T[46]=O,T[47]=G,T[48]=R,T[49]=U,T[50]=I):I=T[50],T[51]!==P||T[52]!==O?(k=!P&&(!O||0===O.length)&&(0,d.jsxs)(p.Zf.Section,{children:[(0,d.jsx)("div",{className:iF,children:(0,d.jsx)("h2",{className:iM,children:"Getting started"})}),(0,d.jsx)(ah,{})]}),T[51]=P,T[52]=O,T[53]=k):k=T[53],T[54]!==N||T[55]!==S||T[56]!==I||T[57]!==k?(L=(0,d.jsxs)(p.Zf.Container,{width:"small",children:[N,S,I,k]}),T[54]=N,T[55]=S,T[56]=I,T[57]=k,T[58]=L):L=T[58],L}function a_(e){return(0,d.jsx)(ad,{loop:e},e.id)}function aj(e){return(0,d.jsxs)(Q.qJ.Item,{href:`${B.Jz}/l/${e.id}`,onClick:aw,children:[(0,d.jsx)(Q.qJ.Item.Title,{children:e.title}),(0,d.jsx)(Q.qJ.Item.Description,{children:e.description}),(0,d.jsx)(Q.qJ.Item.Actions,{children:(0,d.jsx)(ae,{loopId:e.id})})]},e.id)}function aw(){return(0,e2.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function aN(){ay.cancel()}function aC(){(0,h.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e(3088),n.e(8206),n.e(68988),n.e(55316),n.e(8316),n.e(34031),n.e(95192)]).then(n.bind(n,88027))}function aS(e){return""!==e.title||0!==e.nodes.length}try{ax.displayName||(ax.displayName="LoopsView")}catch{}try{ab.displayName||(ab.displayName="LoopsViewInner")}catch{}var aI=n(49851),ak=new WeakMap,aL=new WeakMap,aT=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,iv._)(this,aT,aE).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,iv._)(this,aT,aE).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,iv._)(this,aT,aE).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,iv._)(this,aT,aE).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,iv._)(this,aT,aE).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,iv._)(this,aT,aE).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,iv._)(this,aT,aE).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,iv._)(this,aT,aE).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,iv._)(this,aT,aE).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,iv._)(this,aT,aE).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,iv._)(this,aT,aE).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,i,a){return(0,iv._)(this,aT,aE).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:i,nodeID:a})}constructor(e,t){(0,ib._)(this,aT),(0,iy._)(this,ak,{writable:!0,value:void 0}),(0,iy._)(this,aL,{writable:!0,value:void 0}),(0,ix._)(this,ak,e),(0,ix._)(this,aL,t)}};async function aE(e){if(!(0,ig._)(this,ak)||""===(0,ig._)(this,ak).trim())return(0,iL.vV)("Loops client URL is not configured"),(0,at.YD)("Loops client URL is not configured",void 0);let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,ig._)(this,aL)){let e=await (0,ig._)(this,aL).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,eF.DI)((0,ig._)(this,ak),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,at.YD)(JSON.parse(e),n)}catch(e){return(0,at.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,at.$j)(i)}var aD=n(70119),aR=n(42518);function aA(e){let t,n,i=(0,l.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.jsx)(M.l.LeadingVisual,{children:(0,d.jsx)(aI.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,d.jsxs)(M.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function aO(e){var t;let n,i,a,s,r,o,c,m,h,f,p,g,y,x,v,b,j,w,N,C=(0,l.c)(48),{onSubmit:S,onDismiss:I,client:k}=e,L=(0,u.b)(),{data:T,isError:E,isLoading:D}=(t=k,(a=(0,l.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(n=["loop-execution-references"],a[0]=n):n=a[0],a[1]!==t?(i={queryKey:n,queryFn:()=>aM(t)},a[1]=t,a[2]=i):i=a[2],(0,tE.I)(i)),[R,A]=(0,_.useState)("");C[0]!==L||C[1]!==S||C[2]!==T?(s=e=>{if(!T)return;let t=T.find(t=>t.executionID===e);t&&L.addReference(t,"loop-executions-select-panel"),S()},C[0]=L,C[1]=S,C[2]=T,C[3]=s):s=C[3];let O=s;if(C[4]!==R||C[5]!==E||C[6]!==D||C[7]!==I||C[8]!==O||C[9]!==S||C[10]!==T){let e,t,n=T?T.map(aP).filter(e=>e.text.toLowerCase().includes(R.toLowerCase())):[];o=aD.X,y=!0,x="modal",v="large",b="instant",j="Select Loop output",c=I,m=S,C[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>A(e.currentTarget.value),C[24]=e):e=C[24],C[25]!==D?(h=(0,d.jsx)(aD.X.Header,{children:(0,d.jsx)(aD.X.SearchInput,{loading:D,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),C[25]=D,C[26]=h):h=C[26],r=M.l,C[27]!==E||C[28]!==D?(f=!D&&E&&(0,d.jsx)(aD.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),C[27]=E,C[28]=D,C[29]=f):f=C[29],p=!D&&0===n.length&&(0,d.jsx)(aD.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),C[30]!==O?(t=e=>(0,d.jsxs)(M.l.Item,{onSelect:()=>O(e.key),children:[e.text,(0,d.jsx)(M.l.Description,{variant:"block",className:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi",children:e.description})]},e.key),C[30]=O,C[31]=t):t=C[31],g=n.map(t),C[4]=R,C[5]=E,C[6]=D,C[7]=I,C[8]=O,C[9]=S,C[10]=T,C[11]=r,C[12]=o,C[13]=c,C[14]=m,C[15]=h,C[16]=f,C[17]=p,C[18]=g,C[19]=y,C[20]=x,C[21]=v,C[22]=b,C[23]=j}else r=C[11],o=C[12],c=C[13],m=C[14],h=C[15],f=C[16],p=C[17],g=C[18],y=C[19],x=C[20],v=C[21],b=C[22],j=C[23];return C[32]!==r||C[33]!==f||C[34]!==p||C[35]!==g?(w=(0,d.jsxs)(r,{children:[f,p,g]}),C[32]=r,C[33]=f,C[34]=p,C[35]=g,C[36]=w):w=C[36],C[37]!==o||C[38]!==c||C[39]!==m||C[40]!==h||C[41]!==w||C[42]!==y||C[43]!==x||C[44]!==v||C[45]!==b||C[46]!==j?(N=(0,d.jsxs)(o,{open:y,variant:x,width:v,selectionVariant:b,title:j,onCancel:c,onSubmit:m,children:[h,w]}),C[37]=o,C[38]=c,C[39]=m,C[40]=h,C[41]=w,C[42]=y,C[43]=x,C[44]=v,C[45]=b,C[46]=j,C[47]=N):N=C[47],N}function aP(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let aF=[404,403];async function aM(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(aF.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,aR.C)(n,e):null}).filter(e=>!!e)}try{aA.displayName||(aA.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(s=LoopExecutionsSelectPanel).displayName||(s.displayName="LoopExecutionsSelectPanel")}catch{}try{aO.displayName||(aO.displayName="LoopExecutionsSelectPanelInner")}catch{}var a$=n(12357),aB=n(73077),aV=n(96459);try{(r=LoopExecutionPreview).displayName||(r.displayName="LoopExecutionPreview")}catch{}var aU=new WeakMap,aq=new WeakMap,aG=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e,t,n){return e?new Promise(i=>{let a=document.createElement("iframe");a.src=`${(0,ig._)(this,aU)}/code-node-execution.html`,a.setAttribute("sandbox",(0,ig._)(this,aG));let s=!1,r=e=>{s||(s=!0,o&&window.removeEventListener("message",o),n?.removeEventListener("abort",l),document.body.contains(a)&&document.body.removeChild(a),i(e))},l=()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,ig._)(this,aU)),r({success:!1,error:"Aborted"})};n?.addEventListener("abort",l);let o=e=>{let n=new URL((0,ig._)(this,aU),window.location.origin).origin;e.origin!==n||t&&e.data?.nodeId!==t||(clearTimeout(d),e.data?.type==="result"?r({success:!0,result:e.data.result}):e.data?.type==="error"&&r({success:!1,error:e.data.result}))},d=setTimeout(()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,ig._)(this,aU)),r({success:!1,error:"Timeout: No response"})},(0,ig._)(this,aq));window.addEventListener("message",o),a.onerror=()=>{clearTimeout(d),r({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(a),a.onload=()=>{try{a.contentWindow?.postMessage({type:"execute",code:e,nodeId:t},(0,ig._)(this,aU))}catch(e){clearTimeout(d),r({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,iy._)(this,aU,{writable:!0,value:void 0}),(0,iy._)(this,aq,{writable:!0,value:void 0}),(0,iy._)(this,aG,{writable:!0,value:void 0}),(0,ix._)(this,aU,e),(0,ix._)(this,aq,t),(0,ix._)(this,aG,n)}};let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(eL.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:aA,PanelComponent:(e=this.client,function(t){return(0,d.jsx)(aO,{...t,client:e})})}}}get previewComponents(){if(eL.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,aV.Z)(),i=(0,u.b)();if("loop-execution"!==t.type)return null;let a=(0,B.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,d.jsx)(iQ.Q,{previewUrl:e,availableModels:[],defaultModel:(0,i_.wv)(),sendChatMessage:()=>{},children:(0,d.jsxs)("div",{className:"LoopExecutionPreview-module__previewContainer--RqSzv",children:[(0,d.jsx)("div",{className:"LoopExecutionPreview-module__buttonContainer--i4KdB",children:(0,d.jsx)(aB.z,{href:a,leadingVisual:E.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,d.jsx)("div",{className:"LoopExecutionPreview-module__contentContainer--k2ZO7",children:(0,d.jsx)(a$.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:n8.lh}}constructor(e,t,n,i,a,s,r){(0,o._)(this,"id",n8.S$),(0,o._)(this,"displayName",n8.Os),(0,o._)(this,"service",void 0),(0,o._)(this,"client",void 0),(0,o._)(this,"previewUrl",void 0),(0,o._)(this,"markdownExtensions",[ih]),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:"loops-list",Component:ax,routes:[n8.qe]},{id:"loop-detail",Component:i5,routes:[n8.bW]}]),(0,o._)(this,"navigationItems",[{id:n8.S$,displayName:"Loops",href:n8.QK,icon:aI.LP}]);const l=new n7.JR(a);this.client=new LoopsClient(n,l),this.service=new ip.J(this.client,new GraphQLClient(t,l,this.client),new ChatCompletionsClient(e,l,r),new IFrameCodeExecutor(i)),this.previewUrl=s}};var aH=n(26607),aK=n(51625);let SparkPlugin=class SparkPlugin{constructor(e=!1){(0,o._)(this,"id",aK.eu),(0,o._)(this,"displayName",aK._x),(0,o._)(this,"sparkEnabled",void 0),(0,o._)(this,"navigationItems",[{id:aK.eu,displayName:"Spark",href:aK.cP,icon:E.SparkleIcon,label:(0,_.createElement)(aH.A,{variant:"success"},"Preview"),external:!0}]),(0,o._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:E.SparkleIcon,enabled:()=>this.sparkEnabled,disabledAction:e=>{e(aK.cP)},execute:(e,t,n)=>(C.Jt.setSparkEntrypointMessage(e),n(aK.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."]}),this.sparkEnabled=e}};function aW(e){let t,n,i,a=(0,l.c)(32),{payload:s,handleUserSubmitRef:r}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("copilot_chat_agents_empty_state"),a[0]=t):t=a[0];let o=t;a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("copilot_spark_empty_state"),a[1]=n):n=a[1];let d=n,c=(0,x.u)("copilot_swe_agent_progress_commands"),u=(0,x.u)("copilot_agent_task_list_v2");if(a[2]!==r||a[3]!==u||a[4]!==c||a[5]!==s.agentsEnabled||a[6]!==s.apiURL||a[7]!==s.dashboardModulesEnabled||a[8]!==s.graphqlApiUrl||a[9]!==s.loopsClientUrl||a[10]!==s.loopsEnabled||a[11]!==s.loopsExecutionUrl||a[12]!==s.previewUrl||a[13]!==s.realIp||a[14]!==s.sparkEnabled||a[15]!==s.ssoOrganizations){if(i=[],eL.W.loopsPlugin&&(s.loopsEnabled??!0)){let e,t=s.apiURL??"",n=s.graphqlApiUrl??"",r=s.loopsClientUrl??"",l=s.loopsExecutionUrl??"";a[17]!==s.previewUrl||a[18]!==s.realIp||a[19]!==s.ssoOrganizations||a[20]!==t||a[21]!==n||a[22]!==r||a[23]!==l?(e=new LoopsPlugin(t,n,r,l,s.ssoOrganizations?.map(az)??[],s.previewUrl??"",s.realIp??""),a[17]=s.previewUrl,a[18]=s.realIp,a[19]=s.ssoOrganizations,a[20]=t,a[21]=n,a[22]=r,a[23]=l,a[24]=e):e=a[24],i.push(e)}if(s.sparkEnabled||d){let e;a[25]!==s.sparkEnabled?(e=new SparkPlugin(s.sparkEnabled),a[25]=s.sparkEnabled,a[26]=e):e=a[26],i.push(e)}if(s.agentsEnabled||o){let e,t=void 0!==s.dashboardModulesEnabled?s.dashboardModulesEnabled:u&&c,n=s.agentsEnabled??!1;a[27]!==r||a[28]!==t||a[29]!==n?(e=new AgentsPlugin(t,r,n),a[27]=r,a[28]=t,a[29]=n,a[30]=e):e=a[30],i.push(e)}if(c){let e;a[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,a[31]=e):e=a[31],i.push(e)}a[2]=r,a[3]=u,a[4]=c,a[5]=s.agentsEnabled,a[6]=s.apiURL,a[7]=s.dashboardModulesEnabled,a[8]=s.graphqlApiUrl,a[9]=s.loopsClientUrl,a[10]=s.loopsEnabled,a[11]=s.loopsExecutionUrl,a[12]=s.previewUrl,a[13]=s.realIp,a[14]=s.sparkEnabled,a[15]=s.ssoOrganizations,a[16]=i}else i=a[16];return i}function az(e){return e.id}},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||l(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let l=parseInt(s,10),o="+"===a,d=new Date(t);switch(r){case"d":d.setDate(d.getDate()+(o?l:-l));break;case"w":d.setDate(d.getDate()+(o?7*l:-(7*l)));break;case"m":d.setMonth(d.getMonth()+(o?l:-l));break;case"y":d.setFullYear(d.getFullYear()+(o?l:-l));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:d}}(e).date:a(e)?new Date(e):null}function l(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>l,Qf:()=>r,Yj:()=>s,nS:()=>i})},61219:(e,t,n)=>{n.d(t,{U:()=>eb});var i=n(74848),a=n(68273),s=n(21728),r=n(42118),l=n(26156),o=n(71073),d=n(81156),c=n(63352),u=n(73189),m=n(78809),h=n(73017),f=n(71315),p=n(43258),g=n(38621),y=n(72511),x=n(59394),v=n(12683),b=n(34164),_=n(96540),j=n(25407),w=n(94747),N=n(27011),C=n(1932),S=n(96379);let I=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,N.an)();return t[0]!==n?(e={mutationFn:k,onSuccess:(e,t)=>{n((0,C.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=t.shouldHideComment||e.isHidden,e.minimizedReason=t.hiddenReason||null)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,N.an)();return(0,w.n)({mutationFn:async({duration:e,hiddenReason:t,organizationLogin:n,notifyBlockedUser:i,shouldHideComment:a,userLogin:s})=>{let r=new FormData;r.append("duration",e),r.append("hide_comment",a.toString()),t&&r.append("hidden_reason",t),r.append("login",s),r.append("send_notification",i.toString()),await (0,S.DI)((0,j.ggd)({owner:n}),{method:"POST",body:r,redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=n.shouldHideComment||e.isHidden,e.minimizedReason=n.hiddenReason||null)}))}})};async function k(e){let{duration:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,shouldHideComment:s,userLogin:r}=e,l=new FormData;l.append("duration",t),l.append("hide_comment",s.toString()),n&&l.append("hidden_reason",n),l.append("login",r),l.append("send_notification",a.toString()),await (0,S.DI)((0,j.ggd)({owner:i}),{method:"POST",body:l,redirect:"manual"})}var L=n(48845);let T=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(15),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,N.Kp)(),{deleteThreadComment:c}=(0,N.an)(),{onCommentThreadDeleted:u}=(0,N.Ud)(),m=(0,N.SM)(),{removePendingComment:h}=(0,N._N)();return a[0]!==d||a[1]!==r||a[2]!==m||a[3]!==l?(t=async e=>{let{commentId:t,threadId:n}=e,i=m(Number(n),r,l)?.commentsData?.comments?.find(e=>e.id===t);if(!i)return;let a=`${d}/page_data/review_comments/${i.databaseId}`,s=await (0,L.q$)(`${a}`,{method:"DELETE"});if(204===s.status||200===s.status)return;let o=await (0,L.hp)(s);(0,L.R)(s,o)},a[0]=d,a[1]=r,a[2]=m,a[3]=l,a[4]=t):t=a[4],a[5]!==c||a[6]!==r||a[7]!==l||a[8]!==u||a[9]!==o||a[10]!==h?(n=(e,t)=>{let{commentId:n,threadId:i}=t,a=c(Number(i),n,r,l);h(Number(i)),"thread_deleted"===a&&("thread_deleted"===a&&u({path:r,threadID:i}),o?.())},a[5]=c,a[6]=r,a[7]=l,a[8]=u,a[9]=o,a[10]=h,a[11]=n):n=a[11],a[12]!==t||a[13]!==n?(i={mutationFn:t,onSuccess:n},a[12]=t,a[13]=n,a[14]=i):i=a[14],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,N.Kp)(),{deleteThreadComment:a}=(0,N.an)(),{onCommentThreadDeleted:s}=(0,N.Ud)(),r=(0,N.SM)(),{removePendingComment:l}=(0,N._N)();return(0,w.n)({mutationFn:async({commentId:n,threadId:a})=>{let s=r(Number(a),e,t)?.commentsData?.comments?.find(e=>e.id===n);if(!s)return;let l=`${i}/page_data/review_comments/${s.databaseId}`,o=await (0,L.q$)(`${l}`,{method:"DELETE"});if(204===o.status||200===o.status)return;let d=await (0,L.hp)(o);(0,L.R)(o,d)},onSuccess:(i,{commentId:r,threadId:o})=>{let d=a(Number(o),r,e,t);l(Number(o)),"thread_deleted"===d&&("thread_deleted"===d&&s({path:e,threadID:o}),n?.())}})};var E=n(20622);let D=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,N.Kp)(),o=`${l}/page_data/${E.uT.hideComment}`,{updateThreadComment:d}=(0,N.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t,reason:n}=e,i=await (0,L.q$)(o,{method:"POST",body:{classifier:n,commentId:t}}),a=await (0,L.hp)(i);return(0,L.R)(i,a),a},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,N.Kp)(),i=`${n}/page_data/${E.uT.hideComment}`,{updateThreadComment:a}=(0,N.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reason:t})=>{let n=await (0,L.q$)(i,{method:"POST",body:{classifier:t,commentId:e}}),a=await (0,L.hp)(n);return(0,L.R)(n,a),a},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})}})},R=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,N.Kp)(),{updateThreadComment:o}=(0,N.an)();return r[0]!==l?(n=async e=>{let{commentDatabaseId:t,reaction:n,viewerHasReacted:i}=e,a=`${l}/page_data/${i?E.uT.removeCommentReaction:E.uT.addCommentReaction}`,s=await (0,L.q$)(a,{method:"POST",body:{reaction:n,commentId:t}}),r=await (0,L.hp)(s);return(0,L.R)(s,r),r},r[0]=l,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==o?(i=(n,i)=>{o({threadID:parseInt(i.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})},r[2]=e,r[3]=t,r[4]=o,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,N.Kp)(),{updateThreadComment:i}=(0,N.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reaction:t,viewerHasReacted:i})=>{let a=`${n}/page_data/${i?E.uT.removeCommentReaction:E.uT.addCommentReaction}`,s=await (0,L.q$)(a,{method:"POST",body:{reaction:t,commentId:e}}),r=await (0,L.hp)(s);return(0,L.R)(s,r),r},onSuccess:(n,a)=>{i({threadID:parseInt(a.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===a.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})}})},A=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,N.an)();return t[0]!==n?(e={mutationFn:O,onSuccess:(e,t)=>{n((0,C.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,N.an)();return(0,w.n)({mutationFn:async({organizationLogin:e,userLogin:t})=>{await (0,L.q$)(`${(0,j.ggd)({owner:e})}/${(0,j.QU3)(t)}`,{method:"DELETE",redirect:"manual"})},onSuccess:(t,n)=>{e((0,C.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}})};async function O(e){let{organizationLogin:t,userLogin:n}=e;await (0,L.q$)(`${(0,j.ggd)({owner:t})}/${(0,j.QU3)(n)}`,{method:"DELETE",redirect:"manual"})}let P=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,N.Kp)(),o=`${l}/page_data/${E.uT.unhideComment}`,{updateThreadComment:d}=(0,N.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t}=e,n=await (0,L.q$)(o,{method:"POST",body:{commentId:t}}),i=await (0,L.hp)(n);return(0,L.R)(n,i),i},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:F})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,N.Kp)(),i=`${n}/page_data/${E.uT.unhideComment}`,{updateThreadComment:a}=(0,N.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e})=>{let t=await (0,L.q$)(i,{method:"POST",body:{commentId:e}}),n=await (0,L.hp)(t);return(0,L.R)(t,n),n},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!1,minimizedReason:null}}})}})};function F(e){if(e)return{...e,isHidden:!1,minimizedReason:null}}let M=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(10),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,N.Kp)(),c=`${d}/page_data/${E.uT.updateReviewComment}`,{updateThreadComment:u}=(0,N.an)();return a[0]!==c?(t=async e=>{let{commentId:t,bodyVersion:n,body:i}=e,a=await (0,L.q$)(`${c}${n?`?body_version=${n}`:""}`,{method:"PUT",body:{body:i,commentId:t}}),s=await (0,L.hp)(a);return(0,L.R)(a,s),s},a[0]=c,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==u?(n=e=>{u({threadID:e.threadId,filePath:r,lineMarkersKey:l,match:t=>t.databaseId===e.commentDatabaseId,transform:t=>{if(t)return{...t,body:e.body,bodyHTML:e.bodyHTML,bodyVersion:e.bodyVersion}}}),o?.()},a[2]=r,a[3]=l,a[4]=o,a[5]=u,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i={mutationFn:t,onSuccess:n},a[7]=t,a[8]=n,a[9]=i):i=a[9],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,N.Kp)(),a=`${i}/page_data/${E.uT.updateReviewComment}`,{updateThreadComment:s}=(0,N.an)();return(0,w.n)({mutationFn:async({commentId:e,bodyVersion:t,body:n})=>{let i=await (0,L.q$)(`${a}${t?`?body_version=${t}`:""}`,{method:"PUT",body:{body:n,commentId:e}}),s=await (0,L.hp)(i);return(0,L.R)(i,s),s},onSuccess:i=>{s({threadID:i.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,body:i.body,bodyHTML:i.bodyHTML,bodyVersion:i.bodyVersion}}}),n?.()}})};var $=n(34784),B=n(8748),V=n(50625),U=n(93642),q=n(70109);let G="ReviewThreadComment-module__ReviewThreadContainer--mI1dg",H="ReviewThreadComment-module__ReviewThreadWrapper--zXqpP",K="ReviewThreadComment-module__ReviewThreadBox--Ddyuz",W="ReviewThreadComment-module__ReviewThreadInnerContainer--xw85s",z="ReviewThreadComment-module__ReplyWrapper--yIUaX",Q="ReviewThreadComment-module__SafeHTMLBox--SVSQJ",Z="ReviewThreadComment-module__BodyHTMLContainer--O6lsx";var J=n(88431),Y=n(40961),X=n(80081),ee=n(3252);let et=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,N.Kp)(),i=`${n}/page_data/${E.uT.submitSuggestedChanges}`;return t[0]!==i?(e={mutationFn:async e=>{let{changes:t,currentOid:n,message:a}=e,s=await (0,L.q$)(i,{method:"POST",body:{changes:t,currentOid:n,message:a}}),r=await (0,L.hp)(s);return(0,L.R)(s,r),r},onSuccess:en},t[0]=i,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let e=(0,N.Kp)(),t=`${e}/page_data/${E.uT.submitSuggestedChanges}`;return(0,w.n)({mutationFn:async({changes:e,currentOid:n,message:i})=>{let a=await (0,L.q$)(t,{method:"POST",body:{changes:e,currentOid:n,message:i}}),s=await (0,L.hp)(a);return(0,L.R)(a,s),s},onSuccess:()=>{f.cg?.location.reload()}})};function en(){f.cg?.location.reload()}var ei=n(91747),ea=n(2265),es=n(30459),er=n(26607),el=n(21373),eo=n(88008);let ed=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(28),{onOpenDialog:d,suggestedChange:c}=e,{sendAnalyticsEvent:u}=(0,es.s)(),m=(0,_.useRef)(null),h=c.commentDatabaseId||0;o[0]!==c.suggestionIndex||o[1]!==h?(t={commentDatabaseId:h,suggestionIndex:c.suggestionIndex},o[0]=c.suggestionIndex,o[1]=h,o[2]=t):t=o[2];let f=(0,N.Nk)(t),p=(0,N.RH)(),g=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:y,removeSuggestionFromBatch:x}=(0,N.xJ)(),v=(0,N.WK)(),b=(0,N.Kp)(),j=(0,N.L3)();o[3]!==y||o[4]!==j||o[5]!==b||o[6]!==u||o[7]!==c.commentDatabaseId||o[8]!==c.suggestionIndex||o[9]!==v?(n=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};y(e),(0,eo.CE)(b,j.fullDiff.headOid,[...v.activeBatch,e]),u("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},o[3]=y,o[4]=j,o[5]=b,o[6]=u,o[7]=c.commentDatabaseId,o[8]=c.suggestionIndex,o[9]=v,o[10]=n):n=o[10];let w=n;o[11]!==j||o[12]!==b||o[13]!==x||o[14]!==u||o[15]!==c.commentDatabaseId||o[16]!==c.suggestionIndex||o[17]!==v?(a=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};x(e),(0,eo.CE)(b,j.fullDiff.headOid,v.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),u("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},o[11]=j,o[12]=b,o[13]=x,o[14]=u,o[15]=c.commentDatabaseId,o[16]=c.suggestionIndex,o[17]=v,o[18]=a):a=o[18];let C=a;o[19]!==d?(r=()=>{d(m)},o[19]=d,o[20]=r):r=o[20];let S=r;return o[21]!==g||o[22]!==w||o[23]!==S||o[24]!==C||o[25]!==f||o[26]!==p?(l=(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:g&&f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:C,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto",children:[!p&&(0,i.jsx)(el.Q,{variant:"default",onClick:S,ref:m,children:"Apply suggestion"}),g&&(0,i.jsx)(el.Q,{variant:"primary",onClick:w,children:"Add suggestion to batch"})]})}),o[21]=g,o[22]=w,o[23]=S,o[24]=C,o[25]=f,o[26]=p,o[27]=l):l=o[27],l}:function({onOpenDialog:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,es.s)(),a=(0,_.useRef)(null),s=(0,N.Nk)({commentDatabaseId:t.commentDatabaseId||0,suggestionIndex:t.suggestionIndex}),r=(0,N.RH)(),l=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:o,removeSuggestionFromBatch:d}=(0,N.xJ)(),c=(0,N.WK)(),u=(0,N.Kp)(),m=(0,N.L3)(),h=(0,_.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};o(e),(0,eo.CE)(u,m.fullDiff.headOid,[...c.activeBatch,e]),n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},[o,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),f=(0,_.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};d(e),(0,eo.CE)(u,m.fullDiff.headOid,c.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),n("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},[d,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),p=(0,_.useCallback)(()=>{e(a)},[e]);return(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:l&&s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:f,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto",children:[!r&&(0,i.jsx)(el.Q,{variant:"default",onClick:p,ref:a,children:"Apply suggestion"}),l&&(0,i.jsx)(el.Q,{variant:"primary",onClick:h,children:"Add suggestion to batch"})]})})};try{ed.displayName||(ed.displayName="ApplyOrAddToBatch")}catch{}var ec=n(3585);let eu=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{reason:r,className:l}=e,o=void 0===l?"m-2":l;return a[0]!==r?(t=(0,i.jsx)("small",{className:"fgColor-muted",children:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==o||a[3]!==t?(n=(0,i.jsx)("div",{className:o,children:t}),a[2]=o,a[3]=t,a[4]=n):n=a[4],n}:function({reason:e,className:t="m-2"}){return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("small",{className:"fgColor-muted",children:e})})};try{eu.displayName||(eu.displayName="CodeSuggestionUnavailable")}catch{}let em=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(38),{suggestedChange:g}=e,{setIsDialogOpen:y}=(0,ea.W)(),[x,v]=(0,_.useState)(!1),b=(0,_.useRef)(void 0),j=(0,ei.u)("batch_suggested_changes"),w=(0,N.WK)();p[0]!==j||p[1]!==g||p[2]!==w?(t=j&&void 0!==g.commentDatabaseId&&null!==g.commentDatabaseId&&w.activeBatch.some(e=>e.commentDatabaseId===g.commentDatabaseId&&e.suggestionIndex===g.suggestionIndex),p[0]=j,p[1]=g,p[2]=w,p[3]=t):t=p[3];let C=t;p[4]!==g?(n=(0,X.EJ)(g,[]),p[4]=g,p[5]=n):n=p[5];let{isValid:S,reason:I}=n;p[6]!==g?(a=[g],p[6]=g,p[7]=a):a=p[7];let k=a;p[8]!==k?(r=k.map(eh),p[8]=k,p[9]=r):r=p[9];let L=r;p[10]!==y?(l=e=>{v(e),y?.(e)},p[10]=y,p[11]=l):l=p[11];let T=l;p[12]!==T?(o=()=>{if(T(!1),b.current){let e=b.current.current;setTimeout(()=>e?.focus())}},p[12]=T,p[13]=o):o=p[13];let E=o;p[14]!==T?(d=e=>{T(!0),b.current=e},p[14]=T,p[15]=d):d=p[15];let D=d,{mutate:R}=et(),{fullDiff:A}=(0,N.L3)(),{headOid:O}=A;p[16]!==k||p[17]!==E||p[18]!==O||p[19]!==R?(c=(e,t,n)=>{R({changes:k,message:e,currentOid:O},{onSuccess:()=>{E(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},p[16]=k,p[17]=E,p[18]=O,p[19]=R,p[20]=c):c=p[20];let P=c;return p[21]!==D||p[22]!==g?(u=(0,i.jsx)(ed,{suggestedChange:g,onOpenDialog:D}),p[21]=D,p[22]=g,p[23]=u):u=p[23],p[24]!==C||p[25]!==S||p[26]!==I?(m=!C&&!S&&I&&(0,i.jsx)(eu,{reason:I,className:"m-0"}),p[24]=C,p[25]=S,p[26]=I,p[27]=m):m=p[27],p[28]!==L||p[29]!==k.length||p[30]!==E||p[31]!==P||p[32]!==x?(h=x&&(0,i.jsx)(ec.$,{authorLogins:L,batchSize:k.length,onClose:E,onCommit:P}),p[28]=L,p[29]=k.length,p[30]=E,p[31]=P,p[32]=x,p[33]=h):h=p[33],p[34]!==u||p[35]!==m||p[36]!==h?(f=(0,i.jsxs)("div",{className:"border-top p-2",children:[u,m,h]}),p[34]=u,p[35]=m,p[36]=h,p[37]=f):f=p[37],f}:function({suggestedChange:e}){let{setIsDialogOpen:t}=(0,ea.W)(),[n,a]=(0,_.useState)(!1),s=(0,_.useRef)(void 0),r=(0,ei.u)("batch_suggested_changes"),l=(0,N.WK)(),o=r&&void 0!==e.commentDatabaseId&&null!==e.commentDatabaseId&&l.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),{isValid:d,reason:c}=(0,X.EJ)(e,[]),u=(0,_.useMemo)(()=>[e],[e]),m=u.map(e=>e.authorLogin),h=(0,_.useCallback)(e=>{a(e),t?.(e)},[t]),f=(0,_.useCallback)(()=>{if(h(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[h]),p=(0,_.useCallback)(e=>{h(!0),s.current=e},[h,s]),{mutate:g}=et(),{fullDiff:{headOid:y}}=(0,N.L3)(),x=(0,_.useCallback)((e,t,n)=>{g({changes:u,message:e,currentOid:y},{onSuccess:()=>{f(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},[u,f,y,g]);return(0,i.jsxs)("div",{className:"border-top p-2",children:[(0,i.jsx)(ed,{suggestedChange:e,onOpenDialog:p}),!o&&!d&&c&&(0,i.jsx)(eu,{reason:c,className:"m-0"}),n&&(0,i.jsx)(ec.$,{authorLogins:m,batchSize:u.length,onClose:f,onCommit:x})]})};function eh(e){return e.authorLogin}try{em.displayName||(em.displayName="CodeSuggestionActions")}catch{}var ef=n(45270);let ep=(0,a.GV)()?function(e,t,n,i,a){let r,l,o=(0,s.c)(19),[d,c]=(0,_.useState)();o[0]!==a.lineRange||o[1]!==t.author?.login||o[2]!==t.databaseId||o[3]!==t.id||o[4]!==t.subjectType||o[5]!==e||o[6]!==n||o[7]!==i?(r=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}c(e)}},o[0]=a.lineRange,o[1]=t.author?.login,o[2]=t.databaseId,o[3]=t.id,o[4]=t.subjectType,o[5]=e,o[6]=n,o[7]=i,o[8]=r):r=o[8];let u=t.author?.login;return o[9]!==a.lineRange||o[10]!==t.bodyHTML||o[11]!==t.databaseId||o[12]!==t.id||o[13]!==t.subjectType||o[14]!==e||o[15]!==n||o[16]!==u||o[17]!==i?(l=[a.lineRange,u,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i],o[9]=a.lineRange,o[10]=t.bodyHTML,o[11]=t.databaseId,o[12]=t.id,o[13]=t.subjectType,o[14]=e,o[15]=n,o[16]=u,o[17]=i,o[18]=l):l=o[18],(0,J.N)(r,l),d}:function(e,t,n,i,a){let[s,r]=(0,_.useState)();return(0,J.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}r(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i]),s},eg=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(12),{applySuggestedChangesValidationData:r,comment:l,commentBodyRef:o,filePath:d,isOutdated:c,isThreadResolved:u,suggestedChangesConfig:m,databaseId:h,viewerCanApplySuggestion:f}=e,{state:p}=(0,N.Yp)(),g=(0,ef.ww)(),y=ep(o,l,d,h,r);return a[0]!==r||a[1]!==l||a[2]!==g||a[3]!==c||a[4]!==u||a[5]!==p||a[6]!==y||a[7]!==m||a[8]!==f?(t=y?.length?y.map(e=>{let{isValid:t,reason:n}=(0,X.o_)({suggestedChange:e,hasCommitRange:g,isOutdated:c,isPending:"PENDING"===l.state.toUpperCase(),isResolved:u,pullRequestIsClosed:void 0===p||"CLOSED"===p||"MERGED"===p,pullRequestIsInMergeQueue:"QUEUED"===p,userCanApplySuggestion:!!f,applySuggestedChangesValidationData:r,suggestedChangesConfig:m});return!t&&n?(0,Y.createPortal)((0,i.jsx)(eu,{reason:n}),e.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:e}),e.ref)}):null,a[0]=r,a[1]=l,a[2]=g,a[3]=c,a[4]=u,a[5]=p,a[6]=y,a[7]=m,a[8]=f,a[9]=t):t=a[9],a[10]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[10]=t,a[11]=n):n=a[11],n}:function({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,filePath:a,isOutdated:s,isThreadResolved:r,suggestedChangesConfig:l,databaseId:o,viewerCanApplySuggestion:d}){let{state:c}=(0,N.Yp)(),u=(0,ef.ww)(),m=ep(n,t,a,o,e);return(0,i.jsx)(i.Fragment,{children:m?.length?m.map(n=>{let{isValid:a,reason:o}=(0,X.o_)({suggestedChange:n,hasCommitRange:u,isOutdated:s,isPending:"PENDING"===t.state.toUpperCase(),isResolved:r,pullRequestIsClosed:void 0===c||"CLOSED"===c||"MERGED"===c,pullRequestIsInMergeQueue:"QUEUED"===c,userCanApplySuggestion:!!d,applySuggestedChangesValidationData:e,suggestedChangesConfig:l});return!a&&o?(0,Y.createPortal)((0,i.jsx)(eu,{reason:o}),n.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:n}),n.ref)}):null})};try{eg.displayName||(eg.displayName="SuggestedChangeView")}catch{}var ey=n(30721),ex=n(83494),ev=n(20459);let eb=(0,a.GV)()?function(e){let t,n,a,j,w,N,C,S,k,L,E,O,F,J,Y,X,ee,et,en,ei,ea,es,er,el,eo,ed,ec,eu,em,eh,ef,ep,eb,ej,ew,eN,eC,eS,eI,ek,eL,eT,eE,eD,eR,eA,eO=(0,s.c)(179),{isAnchorable:eP,index:eF,isInlineComment:eM,isLastChild:e$,isOutdated:eB,isThreadResolved:eV,lineMarkersKey:eU,anchorPrefix:eq,comment:eG,disableDialogMode:eH,enableDialogMode:eK,filePath:eW,gridCellId:ez,hideActions:eQ,isFirstComment:eZ,isInDialogMode:eJ,onDeleteLineComment:eY,onQuoteReply:eX,subjectId:e0,threadCommentCount:e1,threadId:e2,threadPositionNumber:e3,suggestedChangesConfig:e4,applySuggestedChangesValidationData:e5,viewerData:e6,ghostUser:e7,originalDiffPathUri:e8,headingLevel:e9}=e,te=void 0!==eP&&eP,tt=void 0===eF?0:eF,tn=void 0!==eZ&&eZ,ti=void 0===eX?u.l:eX,ta=void 0===e7?d.t.ghostUser:e7,ts=void 0===e9?"h3":e9,{addToast:tr}=(0,p.Y6)(),[tl,to]=(0,_.useState)(!1),[td,tc]=(0,_.useState)(eG.isHidden),[tu,tm]=(0,_.useState)(!1),[th,tf]=(0,_.useState)(eG.body),[tp,tg]=(0,_.useState)(!1),[ty,tx]=(0,_.useState)(!1),[tv,tb]=(0,_.useState)(""),t_="FILE"===eG.subjectType;eO[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let{text:t}=e;t&&tf(t)},eO[0]=t):t=eO[0],eO[1]!==eG.id||eO[2]!==eW||eO[3]!==e0||eO[4]!==t_?(n={subjectId:e0,filePath:eW,fileLevelComment:t_,threadId:eG.id,handlePersistedCommentExists:t},eO[1]=eG.id,eO[2]=eW,eO[3]=e0,eO[4]=t_,eO[5]=n):n=eO[5];let{persistCommentToStorage:tj,removePersistedCommentFromStorage:tw}=(0,V.L)(n),tN=(0,_.useRef)(null),tC=(0,_.useRef)(null),tS=(0,_.useRef)(null),[tI,tk]=(0,_.useState)("");eO[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{tN.current?.focus()},eO[6]=a):a=eO[6];let tL=a;eO[7]!==tl?(j=()=>{if(tl){let e=window.setTimeout(tL);return()=>{window.clearTimeout(e)}}},w=[tl],eO[7]=tl,eO[8]=j,eO[9]=w):(j=eO[8],w=eO[9]),(0,_.useEffect)(j,w),eO[10]!==eY?(N=()=>{tm(!1),tx(!1),eY?.()},eO[10]=eY,eO[11]=N):N=eO[11],eO[12]!==eW||eO[13]!==eU||eO[14]!==N?(C={filePath:eW,lineMarkersKey:eU,onSuccess:N},eO[12]=eW,eO[13]=eU,eO[14]=N,eO[15]=C):C=eO[15];let{mutate:tT}=T(C);eO[16]!==eH?(S=async()=>{eH?.(),tm(!0)},eO[16]=eH,eO[17]=S):S=eO[17];let tE=S;eO[18]!==tr||eO[19]!==eG.id||eO[20]!==tT||eO[21]!==eK||eO[22]!==eW||eO[23]!==ez||eO[24]!==e2?(k=e=>{"confirm"===e?(tx(!0),tT({commentId:eG.id,threadId:e2,filePath:eW},{onError:()=>{tm(!1),tr({type:"error",message:"Failed to delete comment"}),tx(!1)}})):(ez&&eK?.(ez),tm(!1),tx(!1))},eO[18]=tr,eO[19]=eG.id,eO[20]=tT,eO[21]=eK,eO[22]=eW,eO[23]=ez,eO[24]=e2,eO[25]=k):k=eO[25];let tD=k,{mutate:tR}=D(eW,eU);eO[26]!==eG.databaseId||eO[27]!==tR?(L=e=>{if(!eG.databaseId)throw Error("Comment not found");tR({commentDatabaseId:eG.databaseId,reason:e},{onError:()=>{tg(!1),tk("Failed to hide comment")},onSuccess:()=>tc(!0)})},eO[26]=eG.databaseId,eO[27]=tR,eO[28]=L):L=eO[28];let tA=L,{mutate:tO}=P(eW,eU);eO[29]!==eG.databaseId||eO[30]!==tO?(E=()=>{if(!eG.databaseId)throw Error("Comment not found");tO({commentDatabaseId:eG.databaseId},{onError:()=>{tg(!1),tk("Failed to unhide comment")},onSuccess:()=>tc(!1)})},eO[29]=eG.databaseId,eO[30]=tO,eO[31]=E):E=eO[31];let tP=E,{mutate:tF}=I();eO[32]!==tF?(O=(e,t,n,i,a,s)=>tF({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>tk("Failed to block user"),onSuccess:()=>{t&&tc(!0)}}),eO[32]=tF,eO[33]=O):O=eO[33];let tM=O,{mutate:t$}=A();eO[34]!==t$?(F=(e,t)=>t$({organizationLogin:e,userLogin:t},{onError:()=>tk("Failed to unblock user")}),eO[34]=t$,eO[35]=F):F=eO[35];let tB=F,{mutate:tV}=R(eW,eU);eO[36]!==tr||eO[37]!==eG.databaseId||eO[38]!==tV||eO[39]!==e2?(J=(e,t)=>{if(!eG.databaseId)throw Error("Comment not found");setTimeout(()=>tS.current?.focus(),0),tV({commentDatabaseId:eG.databaseId,threadId:e2,reaction:e,viewerHasReacted:t},{onError:()=>{tg(!1),tr({type:"error",message:"Failed to react to comment"})}})},eO[36]=tr,eO[37]=eG.databaseId,eO[38]=tV,eO[39]=e2,eO[40]=J):J=eO[40];let tU=J;eO[41]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{to(!0)},eO[41]=Y):Y=eO[41];let tq=Y;eO[42]!==eG.body||eO[43]!==tw?(X=()=>{to(!1),tw(),tf(eG.body)},eO[42]=eG.body,eO[43]=tw,eO[44]=X):X=eO[44];let tG=X;eO[45]!==tj?(ee=e=>{tj({text:e}),tf(e),tb(void 0)},eO[45]=tj,eO[46]=ee):ee=eO[46];let tH=ee;eO[47]!==tw?(et=()=>{to(!1),tg(!1),tw()},eO[47]=tw,eO[48]=et):et=eO[48],eO[49]!==eW||eO[50]!==eU||eO[51]!==et?(en={filePath:eW,lineMarkersKey:eU,onSuccess:et},eO[49]=eW,eO[50]=eU,eO[51]=et,eO[52]=en):en=eO[52];let{mutate:tK}=M(en);eO[53]!==tr||eO[54]!==th||eO[55]!==eG.bodyVersion||eO[56]!==eG.databaseId||eO[57]!==e4?.sourceContentFromDiffLines||eO[58]!==tK?(ei=()=>{tg(!0);let e=(0,U.u)(th,e4?.sourceContentFromDiffLines??"");if(!e.isValid){tb(e.errorMessage),tg(!1);return}tK({commentId:String(eG.databaseId),body:th,bodyVersion:eG.bodyVersion},{onError:()=>{tg(!1),tr({type:"error",message:"Failed to update comment"})}})},eO[53]=tr,eO[54]=th,eO[55]=eG.bodyVersion,eO[56]=eG.databaseId,eO[57]=e4?.sourceContentFromDiffLines,eO[58]=tK,eO[59]=ei):ei=eO[59],e4?.sourceContentFromDiffLines;let tW=ei;eO[60]!==eG.databaseId?(ea=eG.databaseId?.toString(),eO[60]=eG.databaseId,eO[61]=ea):ea=eO[61];let tz=ea,tQ=tz?`${void 0===eq?"r":eq}${tz}`:void 0;eO[62]!==tQ?(es=tQ&&f.fV?new URL(`${f.fV.pathname}#${tQ}`,f.fV.origin).toString():"",eO[62]=tQ,eO[63]=es):es=eO[63];let tZ=es,tJ=(0,_.useRef)(null);eO[64]!==tQ||eO[65]!==tz||eO[66]!==te?(er={isAnchorable:te,commentId:tz,commentAnchor:tQ,containerRef:tJ},eO[64]=tQ,eO[65]=tz,eO[66]=te,eO[67]=er):er=eO[67],(0,B.u)(er),eO[68]===Symbol.for("react.memo_cache_sentinel")?(el={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eO[68]=el):el=eO[68];let tY=el,tX=tt>0,t0=tt>1,t1=tl?"editing":td?"hidden":"visible";eO[69]!==ts?(eo={as:ts},eO[69]=ts,eO[70]=eo):eo=eO[70];let t2=eo,t3=eG.author?.avatarUrl??ta.avatarUrl,t4=eG.reference.text??`#${eG.reference.number}`;eO[71]!==eG||eO[72]!==tZ||eO[73]!==t4?(ed={...eG,url:tZ,referenceText:t4},eO[71]=eG,eO[72]=tZ,eO[73]=t4,eO[74]=ed):ed=eO[74];let t5=eG.author?.login??ta.login,t6=eG.reference?.author?.login??"";eO[75]===Symbol.for("react.memo_cache_sentinel")?(ec={},eO[75]=ec):ec=eO[75];let t7="copilot"===eG.reviewVariantType?"copilot-pull-request-reviewer":void 0,t8="copilot"===eG.reviewVariantType?l.S.Bot:void 0;eO[76]!==eQ||eO[77]!==td||eO[78]!==eB||eO[79]!==tX||eO[80]!==tM||eO[81]!==tE||eO[82]!==tA||eO[83]!==ti||eO[84]!==tB||eO[85]!==tP||eO[86]!==e8||eO[87]!==t2||eO[88]!==t3||eO[89]!==ed||eO[90]!==t5||eO[91]!==t6||eO[92]!==t7||eO[93]!==t8?(eu={headingProps:t2,avatarUrl:t3,comment:ed,commentRef:tJ,deleteComment:tE,editComment:tq,editHistoryComponent:void 0,hideComment:tA,onBlock:tM,onUnblock:tB,onMinimize:tc,onSuccessfulBlock:e_,isMinimized:td,commentAuthorLogin:t5,navigate:u.l,commentSubjectAuthorLogin:t6,onReplySelect:ti,unhideComment:tP,hideActions:eQ,isReply:tX,forceInlineAvatar:!0,containerStyle:ec,originalDiffPathUri:e8,isOutdated:eB,commentAuthorSlug:t7,commentAuthorType:t8},eO[76]=eQ,eO[77]=td,eO[78]=eB,eO[79]=tX,eO[80]=tM,eO[81]=tE,eO[82]=tA,eO[83]=ti,eO[84]=tB,eO[85]=tP,eO[86]=e8,eO[87]=t2,eO[88]=t3,eO[89]=ed,eO[90]=t5,eO[91]=t6,eO[92]=t7,eO[93]=t8,eO[94]=eu):eu=eO[94];let t9=eu;eO[95]!==tt||eO[96]!==tX||eO[97]!==e3?(em=()=>tX?void 0!==e3?`Reply ${tt} to Comment ${e3}`:`Reply ${tt}`:void 0!==e3?`Comment ${e3}`:"Comment",eO[95]=tt,eO[96]=tX,eO[97]=e3,eO[98]=em):em=eO[98];let ne=em;eO[99]!==eG.body||eO[100]!==tl||eO[101]!==ti?(eh=()=>{if(tl)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;ti((0,ev.E)(tJ?.current,t,eG.body))},eO[99]=eG.body,eO[100]=tl,eO[101]=ti,eO[102]=eh):eh=eO[102];let nt=eh;eO[103]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,ey.E7)(),eO[103]=ef):ef=eO[103];let nn=ef;eO[104]!==nt?(ep={"pull-requests-diff-view:quote-reply":nt},eO[104]=nt,eO[105]=ep):ep=eO[105];let ni=te?tQ:void 0,na=eM?eJ?0:-1:0,ns=eG.id;eO[106]!==ne||eO[107]!==eJ?(eb=eJ?{role:"document","aria-roledescription":"comment","aria-label":ne()}:{},eO[106]=ne,eO[107]=eJ,eO[108]=eb):eb=eO[108];let nr=te?"120px":0;eO[109]!==nr?(ej={":target":tY,":focus":tY,scrollMarginTop:nr},eO[109]=nr,eO[110]=ej):ej=eO[110];let nl="hidden"===t1&&"pb-2";return eO[111]!==nl?(ew=(0,b.$)(G,nl),eO[111]=nl,eO[112]=ew):ew=eO[112],eO[113]!==t0||eO[114]!==tX?(eN=t0&&(0,i.jsx)("div",{className:H,"data-is-reply":tX,children:(0,i.jsx)("div",{className:K})}),eO[113]=t0,eO[114]=tX,eO[115]=eN):eN=eO[115],eO[116]!==t9||eO[117]!==eQ?(eC=eQ?void 0:(0,i.jsx)($.RelayEnvironmentProvider,{environment:nn,children:(0,i.jsx)(o.p,{...t9})}),eO[116]=t9,eO[117]=eQ,eO[118]=eC):eC=eO[118],eO[119]!==eG.body||eO[120]!==t9||eO[121]!==eJ||eO[122]!==eB||eO[123]!==eC||eO[124]!==e1?(eS=(0,i.jsx)(l.v,{...t9,commentBody:eG.body,threadCommentCount:e1,isInDialogMode:eJ,actions:eC,isOutdated:eB}),eO[119]=eG.body,eO[120]=t9,eO[121]=eJ,eO[122]=eB,eO[123]=eC,eO[124]=e1,eO[125]=eS):eS=eO[125],eO[126]!==t0||eO[127]!==eS?(eI=(0,i.jsx)("div",{className:W,"data-is-nested-reply":t0,children:eS}),eO[126]=t0,eO[127]=eS,eO[128]=eI):eI=eO[128],eO[129]!==tI?(ek=tI&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),tI]}),eO[129]=tI,eO[130]=ek):ek=eO[130],eO[131]!==e$||eO[132]!==tX?(eL=tX&&(0,i.jsx)("div",{className:z,"data-is-last-child":e$}),eO[131]=e$,eO[132]=tX,eO[133]=eL):eL=eO[133],eO[134]!==th||eO[135]!==t1||eO[136]!==tv||eO[137]!==tX||eO[138]!==tp||eO[139]!==tG||eO[140]!==tH||eO[141]!==tW||eO[142]!==e4?(eT="editing"===t1&&(0,i.jsx)("div",{className:(0,b.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",tX?"pl-0":"pl-2"),children:(0,i.jsxs)(q.S,{ref:tN,label:"Update comment",value:th,onChange:tH,onPrimaryAction:tW,suggestedChangesConfig:e4,markdownErrorMessage:tv,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:tG,children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:tp||!th.length,loading:tp,variant:"primary",onClick:tW,children:"Update"})]})}),eO[134]=th,eO[135]=t1,eO[136]=tv,eO[137]=tX,eO[138]=tp,eO[139]=tG,eO[140]=tH,eO[141]=tW,eO[142]=e4,eO[143]=eT):eT=eO[143],eO[144]!==e5||eO[145]!==eG||eO[146]!==t1||eO[147]!==tu||eO[148]!==eW||eO[149]!==tD||eO[150]!==ty||eO[151]!==eB||eO[152]!==tX||eO[153]!==eV||eO[154]!==tU||eO[155]!==e4||eO[156]!==e6?.viewerCanApplySuggestion?(eE="visible"===t1&&(0,i.jsxs)("div",{className:Z,"data-is-reply":tX,children:[eG.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:tC,className:(0,b.$)("markdown-body",Q),"comment-testid":`Comment body html for comment ${eG.id}`,html:eG.bodyHTML}),"copilot"===eG.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===eG.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:eG.url,commentId:eG.databaseId?.toString()??""})}),eG.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:tS,reactionGroups:eG.reactionGroups,onReact:tU,canReact:eG.viewerCanReact})})]}),e5&&(0,i.jsx)(eg,{comment:eG,commentBodyRef:tC,filePath:eW,isOutdated:eB,isThreadResolved:eV,databaseId:eG.databaseId,suggestedChangesConfig:e4,applySuggestedChangesValidationData:e5,viewerCanApplySuggestion:e6?.viewerCanApplySuggestion})]}),tu&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:ty,onClose:tD,children:"Are you sure you want to delete this comment?"})]}),eO[144]=e5,eO[145]=eG,eO[146]=t1,eO[147]=tu,eO[148]=eW,eO[149]=tD,eO[150]=ty,eO[151]=eB,eO[152]=tX,eO[153]=eV,eO[154]=tU,eO[155]=e4,eO[156]=e6?.viewerCanApplySuggestion,eO[157]=eE):eE=eO[157],eO[158]!==tX||eO[159]!==eL||eO[160]!==eT||eO[161]!==eE?(eD=(0,i.jsxs)("div",{className:H,"data-is-reply":tX,children:[eL,eT,eE]}),eO[158]=tX,eO[159]=eL,eO[160]=eT,eO[161]=eE,eO[162]=eD):eD=eO[162],eO[163]!==eG.id||eO[164]!==tn||eO[165]!==ni||eO[166]!==na||eO[167]!==eb||eO[168]!==ej||eO[169]!==ew||eO[170]!==eN||eO[171]!==eI||eO[172]!==ek||eO[173]!==eD||eO[174]!==e2?(eR=(0,i.jsxs)(v.az,{ref:tJ,id:ni,tabIndex:na,"data-first-thread-comment":tn,"data-marker-navigation-comment-thread-id":e2,"data-marker-navigation-comment-id":ns,...eb,sx:ej,className:ew,children:[eN,eI,ek,eD]}),eO[163]=eG.id,eO[164]=tn,eO[165]=ni,eO[166]=na,eO[167]=eb,eO[168]=ej,eO[169]=ew,eO[170]=eN,eO[171]=eI,eO[172]=ek,eO[173]=eD,eO[174]=e2,eO[175]=eR):eR=eO[175],eO[176]!==ep||eO[177]!==eR?(eA=(0,i.jsx)(ex.tL,{commands:ep,children:eR}),eO[176]=ep,eO[177]=eR,eO[178]=eA):eA=eO[178],eA}:function({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:a,isOutdated:s,isThreadResolved:j,lineMarkersKey:w,anchorPrefix:N="r",comment:C,disableDialogMode:S,enableDialogMode:k,filePath:L,gridCellId:E,hideActions:O,isFirstComment:F=!1,isInDialogMode:J,onDeleteLineComment:Y,onQuoteReply:X=u.l,subjectId:ee,threadCommentCount:et,threadId:en,threadPositionNumber:ei,suggestedChangesConfig:ea,applySuggestedChangesValidationData:es,viewerData:er,ghostUser:el=d.t.ghostUser,originalDiffPathUri:eo,headingLevel:ed="h3"}){let{addToast:ec}=(0,p.Y6)(),[eu,em]=(0,_.useState)(!1),[eh,ef]=(0,_.useState)(C.isHidden),[ep,eb]=(0,_.useState)(!1),[e_,ej]=(0,_.useState)(C.body),[ew,eN]=(0,_.useState)(!1),[eC,eS]=(0,_.useState)(!1),[eI,ek]=(0,_.useState)(""),{persistCommentToStorage:eL,removePersistedCommentFromStorage:eT}=(0,V.L)({subjectId:ee,filePath:L,fileLevelComment:"FILE"===C.subjectType,threadId:C.id,handlePersistedCommentExists:({text:e})=>{e&&ej(e)}}),eE=(0,_.useRef)(null),eD=(0,_.useRef)(null),eR=(0,_.useRef)(null),[eA,eO]=(0,_.useState)(""),eP=()=>{eE.current?.focus()};(0,_.useEffect)(()=>{if(eu){let e=window.setTimeout(eP);return()=>{window.clearTimeout(e)}}},[eu]);let{mutate:eF}=T({filePath:L,lineMarkersKey:w,onSuccess:()=>{eb(!1),eS(!1),Y?.()}}),eM=async()=>{S?.(),eb(!0)},{mutate:e$}=D(L,w),{mutate:eB}=P(L,w),{mutate:eV}=I(),{mutate:eU}=A(),{mutate:eq}=R(L,w),{mutate:eG}=M({filePath:L,lineMarkersKey:w,onSuccess:()=>{em(!1),eN(!1),eT()}}),eH=(0,_.useCallback)(()=>{eN(!0);let e=(0,U.u)(e_,ea?.sourceContentFromDiffLines??"");if(!e.isValid){ek(e.errorMessage),eN(!1);return}eG({commentId:String(C.databaseId),body:e_,bodyVersion:C.bodyVersion},{onError:()=>{eN(!1),ec({type:"error",message:"Failed to update comment"})}})},[ec,e_,C,ea?.sourceContentFromDiffLines,eG]),eK=C.databaseId?.toString(),eW=eK?`${N}${eK}`:void 0,ez=eW&&f.fV?new URL(`${f.fV.pathname}#${eW}`,f.fV.origin).toString():"",eQ=(0,_.useRef)(null);(0,B.u)({isAnchorable:e,commentId:eK,commentAnchor:eW,containerRef:eQ});let eZ={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eJ=t>0,eY=t>1,eX=eu?"editing":eh?"hidden":"visible",e0={headingProps:{as:ed},avatarUrl:C.author?.avatarUrl??el.avatarUrl,comment:{...C,url:ez,referenceText:C.reference.text??`#${C.reference.number}`},commentRef:eQ,deleteComment:eM,editComment:()=>{em(!0)},editHistoryComponent:void 0,hideComment:e=>{if(!C.databaseId)throw Error("Comment not found");e$({commentDatabaseId:C.databaseId,reason:e},{onError:()=>{eN(!1),eO("Failed to hide comment")},onSuccess:()=>ef(!0)})},onBlock:(e,t,n,i,a,s)=>eV({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>eO("Failed to block user"),onSuccess:()=>{t&&ef(!0)}}),onUnblock:(e,t)=>eU({organizationLogin:e,userLogin:t},{onError:()=>eO("Failed to unblock user")}),onMinimize:ef,onSuccessfulBlock:()=>{setTimeout(()=>f.cg?.location.reload(),800)},isMinimized:eh,commentAuthorLogin:C.author?.login??el.login,navigate:u.l,commentSubjectAuthorLogin:C.reference?.author?.login??"",onReplySelect:X,unhideComment:()=>{if(!C.databaseId)throw Error("Comment not found");eB({commentDatabaseId:C.databaseId},{onError:()=>{eN(!1),eO("Failed to unhide comment")},onSuccess:()=>ef(!1)})},hideActions:O,isReply:eJ,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:eo,isOutdated:s,commentAuthorSlug:"copilot"===C.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===C.reviewVariantType?l.S.Bot:void 0},e1=(0,_.useMemo)(()=>(0,ey.E7)(),[]);return(0,i.jsx)(ex.tL,{commands:{"pull-requests-diff-view:quote-reply":()=>{if(eu)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;X((0,ev.E)(eQ?.current,t,C.body))}},children:(0,i.jsxs)(v.az,{ref:eQ,id:e?eW:void 0,tabIndex:n?J?0:-1:0,"data-first-thread-comment":F,"data-marker-navigation-comment-thread-id":en,"data-marker-navigation-comment-id":C.id,...J?{role:"document","aria-roledescription":"comment","aria-label":eJ?void 0!==ei?`Reply ${t} to Comment ${ei}`:`Reply ${t}`:void 0!==ei?`Comment ${ei}`:"Comment"}:{},sx:{":target":eZ,":focus":eZ,scrollMarginTop:e?"120px":0},className:(0,b.$)(G,"hidden"===eX&&"pb-2"),children:[eY&&(0,i.jsx)("div",{className:H,"data-is-reply":eJ,children:(0,i.jsx)("div",{className:K})}),(0,i.jsx)("div",{className:W,"data-is-nested-reply":eY,children:(0,i.jsx)(l.v,{...e0,commentBody:C.body,threadCommentCount:et,isInDialogMode:J,actions:O?void 0:(0,i.jsx)($.RelayEnvironmentProvider,{environment:e1,children:(0,i.jsx)(o.p,{...e0})}),isOutdated:s})}),eA&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),eA]}),(0,i.jsxs)("div",{className:H,"data-is-reply":eJ,children:[eJ&&(0,i.jsx)("div",{className:z,"data-is-last-child":a}),"editing"===eX&&(0,i.jsx)("div",{className:(0,b.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eJ?"pl-0":"pl-2"),children:(0,i.jsxs)(q.S,{ref:eE,label:"Update comment",value:e_,onChange:e=>{eL({text:e}),ej(e),ek(void 0)},onPrimaryAction:eH,suggestedChangesConfig:ea,markdownErrorMessage:eI,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:()=>{em(!1),eT(),ej(C.body)},children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:ew||!e_.length,loading:ew,variant:"primary",onClick:eH,children:"Update"})]})}),"visible"===eX&&(0,i.jsxs)("div",{className:Z,"data-is-reply":eJ,children:[C.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:eD,className:(0,b.$)("markdown-body",Q),"comment-testid":`Comment body html for comment ${C.id}`,html:C.bodyHTML}),"copilot"===C.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===C.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:C.url,commentId:C.databaseId?.toString()??""})}),C.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:eR,reactionGroups:C.reactionGroups,onReact:(e,t)=>{if(!C.databaseId)throw Error("Comment not found");setTimeout(()=>eR.current?.focus(),0),eq({commentDatabaseId:C.databaseId,threadId:en,reaction:e,viewerHasReacted:t},{onError:()=>{eN(!1),ec({type:"error",message:"Failed to react to comment"})}})},canReact:C.viewerCanReact})})]}),es&&(0,i.jsx)(eg,{comment:C,commentBodyRef:eD,filePath:L,isOutdated:s,isThreadResolved:j,databaseId:C.databaseId,suggestedChangesConfig:ea,applySuggestedChangesValidationData:es,viewerCanApplySuggestion:er?.viewerCanApplySuggestion})]}),ep&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:eC,onClose:e=>{"confirm"===e?(eS(!0),eF({commentId:C.id,threadId:en,filePath:L},{onError:()=>{eb(!1),ec({type:"error",message:"Failed to delete comment"}),eS(!1)}})):(E&&k?.(E),eb(!1),eS(!1))},children:"Are you sure you want to delete this comment?"})]})]})]})})};function e_(){setTimeout(ej,800)}function ej(){return f.cg?.location.reload()}try{eb.displayName||(eb.displayName="ReviewThreadComment")}catch{}},61282:(e,t,n)=>{n.d(t,{V:()=>h});var i=n(74848),a=n(21728),s=n(96540),r=n(38621),l=n(26108),o=n(21373),d=n(69726),c=n(15220),u=n(54571);let m=(0,s.lazy)(()=>Promise.all([n.e(3088),n.e(43934),n.e(82216),n.e(6488),n.e(42892),n.e(99418),n.e(30587),n.e(72471),n.e(55229),n.e(4712),n.e(3086),n.e(82081),n.e(51220),n.e(28546),n.e(26744),n.e(40489),n.e(18312),n.e(347),n.e(89332),n.e(86739),n.e(25407),n.e(83494),n.e(83463),n.e(87670),n.e(40771),n.e(66990),n.e(29665),n.e(4817),n.e(37294),n.e(30721),n.e(2635),n.e(28902),n.e(60777),n.e(81171),n.e(97181),n.e(84597),n.e(10422),n.e(12362),n.e(78773)]).then(n.bind(n,68747)).then(e=>({default:e.NewAgentTaskButtonContent})));function h(e){let t,n,d,h,g,y,x=(0,a.c)(26),{isIconButton:v,icon:b,label:_,onOpen:j,onClose:w,setContentOpen:N,open:C,currentRepo:S,currentReference:I,hideRepoSelector:k,eventType:L,size:T,tooltipDirection:E,variant:D}=e,R=void 0===b?r.AgentIcon:b,A=void 0===_?"New agent session":_,[O,P]=(0,s.useState)(!!C);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],x[0]=t):t=x[0];let[F]=(0,u.I)(f,!0,t),M=(0,s.useRef)(null);x[1]!==j?(n=()=>{P(!0),j?.()},x[1]=j,x[2]=n):n=x[2];let $=n;x[3]!==w||x[4]!==N?(d=()=>{P(!1),w?.(),N?.(!1)},x[3]=w,x[4]=N,x[5]=d):d=x[5];let B=d,V=S?`${A} in ${S.ownerLogin}/${S.name}`:A;return x[6]!==$||x[7]!==R||x[8]!==v||x[9]!==A||x[10]!==T||x[11]!==E||x[12]!==D?(h=v?(0,i.jsx)(l.K,{ref:M,icon:R,"aria-label":A,size:T,tooltipDirection:E,variant:D,onClick:$}):(0,i.jsx)(o.Q,{ref:M,onClick:$,leadingVisual:R,size:T,children:A}),x[6]=$,x[7]=R,x[8]=v,x[9]=A,x[10]=T,x[11]=E,x[12]=D,x[13]=h):h=x[13],x[14]!==I||x[15]!==S||x[16]!==V||x[17]!==L||x[18]!==B||x[19]!==k||x[20]!==O||x[21]!==F?(g=O&&!F&&(0,i.jsx)(c.l,{title:V,onClose:B,returnFocusRef:M,position:{narrow:"fullscreen"},children:(0,i.jsx)(c.l.Body,{className:"p-0",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(p,{}),children:(0,i.jsx)(m,{currentRepo:S,currentReference:I,hideRepoSelector:k,setOpen:B,eventType:L})})})}),x[14]=I,x[15]=S,x[16]=V,x[17]=L,x[18]=B,x[19]=k,x[20]=O,x[21]=F,x[22]=g):g=x[22],x[23]!==h||x[24]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[h,g]}),x[23]=h,x[24]=g,x[25]=y):y=x[25],y}function f(){return!1}function p(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-column flex-items-center p-6",children:(0,i.jsx)(d.A,{srText:"Loading\u2026"})}),t[0]=e):e=t[0],e}try{m.displayName||(m.displayName="LazyNewAgentTaskButtonContent")}catch{}try{h.displayName||(h.displayName="NewAgentTaskButton")}catch{}try{p.displayName||(p.displayName="FallbackContent")}catch{}},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue",UnavailableModel:"UnavailableModel"}},62421:(e,t,n)=>{n.d(t,{G:()=>l});var i=n(21728),a=n(96459),s=n(25641),r=n(33592);function l(){let e,t=(0,i.c)(3),n=(0,r.b)(),l=(0,a.Z)();return t[0]!==n||t[1]!==l?(e=async e=>{window.location.pathname!==s.Jz&&(l(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=l,t[2]=e):e=t[2],e}},62828:(e,t,n)=>{n.d(t,{I:()=>o});var i=n(21728),a=n(47789),s=n(35247),r=n(7812),l=n(1747);function o(e){let t,n=(0,i.c)(8),{messageId:o,messageIndex:d,messageTimestamp:c}=e,{openPreviewPane:u,openItem:m,updateItem:h}=(0,l.xx)(),f=(0,a.qw)();return n[0]!==o||n[1]!==d||n[2]!==c||n[3]!==m||n[4]!==u||n[5]!==f||n[6]!==h?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,o,c);break;case"file-diff":n=(0,r.g)(e,o,c);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o,timestamp:c});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o});break;case"issue":n=(0,r.SI)(e,o);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,o));break;default:for(let t of f)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,o);break}}n&&(t?.preventDefault(),h(n),m(n.id),u())},n[0]=o,n[1]=d,n[2]=c,n[3]=m,n[4]=u,n[5]=f,n[6]=h,n[7]=t):t=n[7],t}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(21728),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65123:(e,t,n)=>{n.d(t,{oO:()=>sy,Ao:()=>sg,Yf:()=>I.Yf});var i=n(74848),a=n(68273),s=n(21728),r=n(50683),l=n(96540),o=n(36729),d=n(77430),c=n(38621),u=n(81960),m=n(26108),h=n(53627);function f(e,t="r"){(0,h.Zu)(`#${t}${e}`)}var p=n(91835),g=n(71315),y=n(83494),x=n(50625),v=n(93642);let b="AddCommentEditor-module__AddCommentEditor--JFfip";var _=n(70109),j=n(27011),w=n(71323),N=n(97283),C=n(87134),S=n(36472),I=n(3038),k=n(51391),L=n(13814);let T=(0,l.createContext)(null),E=(0,a.GV)()?function(e){let t=(0,l.useContext)(T);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,w.P)(t,e)}:function(e){let t=(0,l.useContext)(T);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,w.P)(t,e)},D=({children:e,...t})=>{let n=(0,l.useRef)(null),a=(0,l.useRef)(t.diffLines),s=(0,l.useRef)(t.isSplitView),r=(0,l.useRef)(t.hiddenFeatures);return n.current||(n.current=R(t)),(0,l.useEffect)(()=>{n.current&&a.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),a.current=t.diffLines)},[t,t.diffLines]),(0,l.useEffect)(()=>{n.current&&s.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),s.current=t.isSplitView)},[t,t.isSplitView]),(0,l.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(r.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),r.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(T.Provider,{value:n.current,children:e})},R=e=>(0,N.y)()((0,C.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,path:t,diffLines:n,fileLineCount:i,isSplitView:a})=>(s,r)=>{let l=n.reduce((e,t)=>(e[(0,k.bo)(t)]=t,e),{}),{selectedLineKeys:o,selectedLineRange:d,startOrientation:c}=(0,k.EV)({diffAnchor:e,diffLines:n,isSplitView:a,lineRange:(0,k.KV)(e)}),u=(0,k.Aj)(o),m=(0,k.sB)(o),h=n.reduce((e,t)=>{let n=(0,k.bo)(t);return o.has((0,k.bo)(t))&&(e[n]={isSelected:!0,isFirstSelected:u===n,isLastSelected:m===n}),e},{}),f=null;if(u){let e=l[u];if(e&&c){let t="left"===c?e.left:e.right;t&&(f={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:(0,k.bo)(e)})}}return{diffLines:{diffAnchor:e,_diffLines:n,_diffLinesHash:l,selectedLinesInfo:h,fileLineCount:i,firstLineSelectionOnDrag:f,_firstSelectedLineInfo:f?{lineKey:f.lineKey,lineNumber:f.lineNumber,orientation:f.orientation}:null,getDiffLinesInfo:()=>r().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,I.Mk)(r().diffLines._diffLines),n=t.leftLines,i=t.rightLines;return(0,S.A)({selectedLineRange:e,leftLines:n,rightLines:i})},getSelectedDiffLines:()=>{let e=[];for(let t of r().diffLines.selectedLineKeys){let n=r().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>r().diffLines.firstLineSelectionOnDrag,getSelectedLineRange:()=>r().diffLines.selectedLineRange,hasSelectedLines:()=>r().diffLines.selectedLineKeys.size>0,isSplitView:a,selectedLineKeys:o,selectedLineRange:d},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(e[(0,k.bo)(t)]=t,e),{});s(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>s(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null}}),void 0,"clearFirstLineSelectionOnDrag"),addLineToSelection:({lineKey:n,orientation:i},a)=>{let l;if(!n)return;let o=r().diffLines._diffLinesHash[n];if(!o)return;let d=r().diffLines.firstLineSelectionOnDrag,c=r().diffLines._firstSelectedLineInfo,u=r().diffLines.selectedLineRange;if(d&&n===d.lineKey||!u){let e="right"===i?o.right:o.left;if(!e)return;r().diffLinesActions.selectLine({lineKey:n,firstLineSelectionOnDrag:{lineNumber:e,orientation:i,lineKey:n,shouldStartConversation:!1}},a);return}if(!c)return;let m=r().diffLines._diffLinesHash[c.lineKey];l=(0,k.M6)({current:o,currentOrientation:i,previous:m,previousOrientation:c.orientation})?{...u,startLineNumber:("left"===i?o?.left:o?.right)??-1,startOrientation:i,endLineNumber:c.lineNumber,endOrientation:c.orientation}:{...u,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===i?o?.left:o?.right)??-1,endOrientation:i};let{selectedLineKeys:h,selectedLineRange:f}=(0,k.EV)({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:l}),p=(0,k.Aj)(h),y=(0,k.sB)(h),x=Array.from(h).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===y,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new L.J(f,t);g.cg?.dispatchEvent(v),s(e=>({diffLines:{...e.diffLines,selectedLineKeys:h,selectedLinesInfo:x,selectedLineRange:f}}),void 0,"addLineToSelection"),a(f)},clearSelectedLines:()=>{s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:n},i)=>{if(!e)return;r().diffLinesActions.clearSelectedLines();let a=r().diffLines._diffLinesHash[e];if(!a)return;let l={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},o="left"===n.orientation?a.left:a.right;if(!o)return;let d={diffAnchor:r().diffLines.diffAnchor,endLineNumber:o,endOrientation:n.orientation,startLineNumber:o,startOrientation:n.orientation},c=new L.J(d,t);g.cg?.dispatchEvent(c),s(t=>({diffLines:{...t.diffLines,firstLineSelectionOnDrag:{...n,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:l,selectedLineRange:d,_firstSelectedLineInfo:{lineKey:e,lineNumber:n.lineNumber,orientation:n.orientation}}}),void 0,"selectLine"),i(d)},selectMultipleLines:({startLineKey:n,endLineKey:i,startOrientation:a,endOrientation:l,firstLineSelectionOnDrag:o},d)=>{if(!n||!i||!o)return;let c=r().diffLines._diffLinesHash[n],u=r().diffLines._diffLinesHash[i];if(!c||!u||!c.left&&!c.right||!u.left&&!u.right)return;let m={diffAnchor:e,endLineNumber:("right"===l?u.right:u.left)??-1,endOrientation:l,startLineNumber:("right"===a?c.right:c.left)??-1,startOrientation:a},{selectedLineKeys:h,selectedLineRange:f}=(0,k.EV)({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:m}),p=(0,k.Aj)(h),y=(0,k.sB)(h),x=Array.from(h).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===y,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new L.J(f,t);g.cg?.dispatchEvent(v),s(e=>({diffLines:{...e.diffLines,selectedLinesInfo:x,selectedLineKeys:h,firstLineSelectionOnDrag:o,selectedLineRange:f,_firstSelectedLineInfo:{lineNumber:o.lineNumber,orientation:o.orientation,lineKey:o.lineKey}}}),void 0,"selectMultipleLines"),d(f)}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({startNewConversationForLineOrFileMap:e})=>(t,n)=>({startNewConversationForLineOrFileMap:e,getMoveNewCommentDataForLine:e=>n().startNewConversationForLineOrFileMap[e],addStartNewCommentOnLine:(t,n,i)=>{e[t]={diffLineKey:i,startNewComment:n}}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t)}),{name:`diff-store-${e.diffAnchor}`}));try{T.displayName||(T.displayName="DiffStoreContext")}catch{}try{D.displayName||(D.displayName="DiffStoreProvider")}catch{}let A=(0,a.GV)()?()=>E(Y):()=>E(e=>e.diffLines.getSplitDiffLinesFromLineRange),O=(0,a.GV)()?()=>E(X):()=>E(e=>e.diffLines.getSelectedDiffLines),P=(0,a.GV)()?()=>E(ee):()=>E(e=>e.diffLines.getDiffLinesInfo),F=(0,a.GV)()?()=>E(et):()=>E(e=>e.diffLines.getfirstLineSelectionOnDrag),M=(0,a.GV)()?()=>E(en):()=>E(e=>e.diffLines.getSelectedLineRange),$=(0,a.GV)()?()=>E(ei):()=>E(e=>e.diffLines.hasSelectedLines),B=(0,a.GV)()?()=>E(ea):()=>E(e=>e.hiddenFeatures),V=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>!!e&&t.dialogMode.activeGridCellId===e,n[0]=e,n[1]=t):t=n[1],E(t)}:e=>E(t=>!!e&&t.dialogMode.activeGridCellId===e),U=(0,a.GV)()?()=>E(es):()=>E(e=>e.dialogModeActions),q=(0,a.GV)()?()=>E(er):()=>E(e=>e.diffLines.diffAnchor),G=(0,a.GV)()?()=>E(el):()=>E(e=>e.diffLines.fileLineCount),H={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},K=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>e&&t.diffLines.selectedLinesInfo[(0,k.bo)(e)]||H,n[0]=e,n[1]=t):t=n[1],E(t)}:e=>E(t=>e&&t.diffLines.selectedLinesInfo[(0,k.bo)(e)]||H),W=(0,a.GV)()?()=>E(eo):()=>E(e=>e.diffLinesActions),z=(0,a.GV)()?()=>E(ed):()=>E(e=>e.injectedContextLinesActions),Q=(0,a.GV)()?()=>E(ec):()=>E(e=>e.treeEntries),Z=(0,a.GV)()?()=>E(eu):()=>E(e=>e.getMoveNewCommentDataForLine),J=(0,a.GV)()?()=>E(em):()=>E(e=>e.addStartNewCommentOnLine);function Y(e){return e.diffLines.getSplitDiffLinesFromLineRange}function X(e){return e.diffLines.getSelectedDiffLines}function ee(e){return e.diffLines.getDiffLinesInfo}function et(e){return e.diffLines.getfirstLineSelectionOnDrag}function en(e){return e.diffLines.getSelectedLineRange}function ei(e){return e.diffLines.hasSelectedLines}function ea(e){return e.hiddenFeatures}function es(e){return e.dialogModeActions}function er(e){return e.diffLines.diffAnchor}function el(e){return e.diffLines.fileLineCount}function eo(e){return e.diffLinesActions}function ed(e){return e.injectedContextLinesActions}function ec(e){return e.treeEntries}function eu(e){return e.getMoveNewCommentDataForLine}function em(e){return e.addStartNewCommentOnLine}var eh=n(61583),ef=n(4559);function ep(){(0,ef.i)("Selection Cleared")}function eg({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}){if(i&&t){var s;(0,eh.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}),(s={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}).startLineNumber===s.endLineNumber&&s.startOrientation===s.endOrientation?(0,ef.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} selected.`):(0,ef.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} to ${"left"===s.endOrientation?"L":"R"}${s.endLineNumber} selected.`)}}var ey=n(3252),ex=n(71317);let ev="comment",eb="review",e_=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,w,N,C,S,I,k,L,T,E,D,R,A=(0,s.c)(81),{batchingEnabled:O,condensed:P,fileLevelComment:F,filePath:M,focusOnMount:$,isReplying:B,lineNumber:V,onAddComment:U,onCancelComment:q,onPersistedCommentExists:G,quotedText:H,side:K,startLineNumber:z,subjectId:Q,threadId:Z,suggestedChangesConfig:J,commentLineChangeConfig:Y}=e,X=void 0===H?"":H,[ee,et]=(0,l.useState)(X),[en,ei]=(0,l.useState)(null),ea=(0,l.useRef)(X),[es,er]=(0,l.useState)(),el=(0,l.useRef)(null),eo=(0,l.useRef)(null),ed=(0,j.it)(),ec=(0,l.useRef)(void 0),{selectMultipleLines:eu,clearSelectedLines:em}=W();A[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(0,ex.k)(e??"",100),er(e)},A[0]=t):t=A[0];let eh=t,ef=null!==en,{persistCommentToStorage:ep,removePersistedCommentFromStorage:e_,persistCommentOnGivenLineToStorage:ej}=(0,x.L)({diffSide:K,filePath:M,line:V,subjectId:Q,threadId:Z,handlePersistedCommentExists:e=>{let{text:t,shouldFocus:n,startLine:i,startSide:a,startLineKey:s,endLineKey:r}=e;if(t){if(et(t),n&&el.current&&(el.current.focus(),el.current.moveCursorToEnd(),ew({text:t,startLine:i,startSide:a,startLineKey:s,endLineKey:r}),i)){let e="LEFT"===K?"left":"right";eu({endLineKey:r,endOrientation:e,startLineKey:s,startOrientation:e,firstLineSelectionOnDrag:{lineKey:s??"b:0-l:0-r:0",lineNumber:V??0,orientation:e,shouldStartConversation:!1}},eg)}G?.()}},fileLevelComment:!!F}),ew=ep;if(A[1]!==X?(n=()=>{X!==ea.current&&(ea.current=X,et(X))},a=[X],A[1]=X,A[2]=n,A[3]=a):(n=A[2],a=A[3]),(0,l.useEffect)(n,a),A[4]!==em||A[5]!==Y||A[6]!==ee||A[7]!==M||A[8]!==V||A[9]!==q||A[10]!==ej||A[11]!==e_||A[12]!==eu||A[13]!==K?(r=()=>{if(Y){if(null!==(0,ey.T)(ee))return void Y.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(Y.closeLineMovingDialog(),ej({text:ee,givenLineDiffSide:Y.diffSide,givenFilePath:M,givenLine:Y.endLineNumber,shouldBeFileLevelComment:Y.isFileLevelComment,startLine:Y.startLineNumber,startLineKey:Y.startDiffLineKey,endLineKey:Y.endDiffLineKey}),e_(),V!==Y.endLineNumber||Y.isFileLevelComment)Y.startConversationOnNewLine(),q?.(!1);else if(Y.endDiffLineKey&&Y.startDiffLineKey&&ec.current!==Y){ec.current=Y;let e="LEFT"===K?"left":"right";eu({endLineKey:Y.endDiffLineKey,endOrientation:e,startLineKey:Y.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:Y.startDiffLineKey??"b:0-l:0-r:0",lineNumber:V??0,orientation:e,shouldStartConversation:!1}},eg)}else Y.startDiffLineKey||em()}},o=[em,Y,ee,M,V,q,ej,e_,eu,K],A[4]=em,A[5]=Y,A[6]=ee,A[7]=M,A[8]=V,A[9]=q,A[10]=ej,A[11]=e_,A[12]=eu,A[13]=K,A[14]=r,A[15]=o):(r=A[14],o=A[15]),(0,l.useEffect)(r,o),A[16]!==$?(c=()=>{if($){let e=setTimeout(()=>{if(g.XC&&g.cg){if(eo.current){let e=eo.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=.6666666666666666*e.clientHeight;g.cg?.scrollTo({top:i-a-.6666666666666666*n+s,behavior:"smooth"})}}el.current&&(el.current.focus(),el.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},d=[$],A[16]=$,A[17]=d,A[18]=c):(d=A[17],c=A[18]),(0,l.useEffect)(c,d),A[19]!==ee||A[20]!==ef||A[21]!==U||A[22]!==q||A[23]!==e_||A[24]!==J?.sourceContentFromDiffLines){let e,t=e=>{let{submitBatch:t,action:n}=e,i="Failed to save comment";if(ef)return;if(!ee.trim())return void eh(`${i}: Body can't be blank`);ei(n),er(void 0),eh(void 0);let a=(0,v.u)(ee,J?.sourceContentFromDiffLines??"");if(!a.isValid){eh(a.errorMessage),er(a.errorMessage),ei(null);return}U?.({commentText:ee,onCompleted(){ei(null),u()},onError(e){ei(null),e.message&&(i=`${i}: ${e.message}`),eh(i)},submitBatch:t})};m=()=>{t({submitBatch:!1,action:eb})},h=()=>{t({submitBatch:!0,action:ev})},A[28]!==q||A[29]!==e_?(e=()=>{e_(),et(""),q?.()},A[28]=q,A[29]=e_,A[30]=e):e=A[30],u=e,A[19]=ee,A[20]=ef,A[21]=U,A[22]=q,A[23]=e_,A[24]=J?.sourceContentFromDiffLines,A[25]=u,A[26]=m,A[27]=h}else u=A[25],m=A[26],h=A[27];A[31]!==ew||A[32]!==K||A[33]!==z?(f=e=>{eh(void 0),ew({text:e,startLine:z,startSide:z?K:void 0}),et(e)},A[31]=ew,A[32]=K,A[33]=z,A[34]=f):f=A[34];let eN=f,eC=P||B?"none":"flex";A[35]!==eC?(w={"> div:first-child":{display:eC}},A[35]=eC,A[36]=w):w=A[36];let eS=w;A[37]===Symbol.for("react.memo_cache_sentinel")?(N={"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}},A[37]=N):N=A[37];let eI=N,ek=B?"end":"space-between",eL=P&&eI;A[38]!==eS||A[39]!==ek||A[40]!==eL?(C={footer:{justifyContent:ek,...eS,...eL}},A[38]=eS,A[39]=ek,A[40]=eL,A[41]=C):C=A[41];let eT=C;A[42]!==h?(S={"pull-requests-conversations:submit-comment-and-review":h},A[42]=h,A[43]=S):S=A[43],A[44]!==u||A[45]!==ee?(I=e=>{"Escape"!==e.key||ee.trim()?e.stopPropagation():(e.preventDefault(),u())},A[44]=u,A[45]=ee,A[46]=I):I=A[46];let eE=O?m:h;return A[47]!==u||A[48]!==q?(k=q&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:u,children:"Cancel"}),A[47]=u,A[48]=q,A[49]=k):k=A[49],A[50]!==O||A[51]!==ed||A[52]!==h||A[53]!==B||A[54]!==en?(L=!ed&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:O?"default":"primary",onClick:h,ref:eo,loading:en===ev,children:B?"Reply":"Comment"}),A[50]=O,A[51]=ed,A[52]=h,A[53]=B,A[54]=en,A[55]=L):L=A[55],A[56]!==O||A[57]!==ed||A[58]!==m||A[59]!==en?(T=O&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:m,loading:en===eb,children:ed?"Add review comment":"Start a review"}),A[56]=O,A[57]=ed,A[58]=m,A[59]=en,A[60]=T):T=A[60],A[61]!==ee||A[62]!==es||A[63]!==M||A[64]!==eT||A[65]!==eN||A[66]!==ef||A[67]!==V||A[68]!==z||A[69]!==J||A[70]!==eE||A[71]!==k||A[72]!==L||A[73]!==T?(E=(0,i.jsxs)(_.S,{ref:el,label:"Add diff comment",sx:eT,value:ee,onChange:eN,onPrimaryAction:eE,suggestedChangesConfig:J,markdownErrorMessage:es,lineNumber:V,filePath:M,startLineNumber:z,disabled:ef,children:[k,L,T]}),A[61]=ee,A[62]=es,A[63]=M,A[64]=eT,A[65]=eN,A[66]=ef,A[67]=V,A[68]=z,A[69]=J,A[70]=eE,A[71]=k,A[72]=L,A[73]=T,A[74]=E):E=A[74],A[75]!==I||A[76]!==E?(D=(0,i.jsx)("div",{className:b,onKeyDown:I,children:E}),A[75]=I,A[76]=E,A[77]=D):D=A[77],A[78]!==S||A[79]!==D?(R=(0,i.jsx)(y.tL,{commands:S,children:D}),A[78]=S,A[79]=D,A[80]=R):R=A[80],R}:function({batchingEnabled:e,condensed:t,fileLevelComment:n,filePath:a,focusOnMount:s,isReplying:r,lineNumber:o,onAddComment:d,onCancelComment:c,onPersistedCommentExists:u,quotedText:m="",side:h,startLineNumber:f,subjectId:w,threadId:N,suggestedChangesConfig:C,commentLineChangeConfig:S}){let[I,k]=(0,l.useState)(m),[L,T]=(0,l.useState)(null),E=(0,l.useRef)(m),[D,R]=(0,l.useState)(),A=(0,l.useRef)(null),O=(0,l.useRef)(null),P=(0,j.it)(),F=(0,l.useRef)(void 0),{selectMultipleLines:M,clearSelectedLines:$}=W(),B=(0,l.useCallback)(e=>{(0,ex.k)(e??"",100),R(e)},[R]),V=null!==L,{persistCommentToStorage:U,removePersistedCommentFromStorage:q,persistCommentOnGivenLineToStorage:G}=(0,x.L)({diffSide:h,filePath:a,line:o,subjectId:w,threadId:N,handlePersistedCommentExists:({text:e,shouldFocus:t,startLine:n,startSide:i,startLineKey:a,endLineKey:s})=>{if(e){if(k(e),t&&A.current&&(A.current.focus(),A.current.moveCursorToEnd(),U({text:e,startLine:n,startSide:i,startLineKey:a,endLineKey:s}),n)){let e="LEFT"===h?"left":"right";M({endLineKey:s,endOrientation:e,startLineKey:a,startOrientation:e,firstLineSelectionOnDrag:{lineKey:a??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},eg)}u?.()}},fileLevelComment:!!n});(0,l.useEffect)(()=>{m!==E.current&&(E.current=m,k(m))},[m]),(0,l.useEffect)(()=>{if(S){if(null!==(0,ey.T)(I))return void S.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(S.closeLineMovingDialog(),G({text:I,givenLineDiffSide:S.diffSide,givenFilePath:a,givenLine:S.endLineNumber,shouldBeFileLevelComment:S.isFileLevelComment,startLine:S.startLineNumber,startLineKey:S.startDiffLineKey,endLineKey:S.endDiffLineKey}),q(),o!==S.endLineNumber||S.isFileLevelComment)S.startConversationOnNewLine(),c?.(!1);else if(S.endDiffLineKey&&S.startDiffLineKey&&F.current!==S){F.current=S;let e="LEFT"===h?"left":"right";M({endLineKey:S.endDiffLineKey,endOrientation:e,startLineKey:S.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:S.startDiffLineKey??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},eg)}else S.startDiffLineKey||$()}},[$,S,I,a,o,c,G,q,M,h]),(0,l.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(g.XC&&g.cg){if(O.current){let e=O.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=e.clientHeight*(2/3);g.cg?.scrollTo({top:i-a-2/3*n+s,behavior:"smooth"})}}A.current&&(A.current.focus(),A.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},[s]);let H=({submitBatch:e,action:t})=>{let n="Failed to save comment";if(V)return;if(!I.trim())return void B(`${n}: Body can't be blank`);T(t),R(void 0),B(void 0);let i=(0,v.u)(I,C?.sourceContentFromDiffLines??"");if(!i.isValid){B(i.errorMessage),R(i.errorMessage),T(null);return}d?.({commentText:I,onCompleted(){T(null),Q()},onError(e){T(null),e.message&&(n=`${n}: ${e.message}`),B(n)},submitBatch:e})},K=()=>{H({submitBatch:!1,action:eb})},z=()=>{H({submitBatch:!0,action:ev})},Q=(0,l.useCallback)(()=>{q(),k(""),c?.()},[c,q]),Z={footer:{justifyContent:r?"end":"space-between","> div:first-child":{display:t||r?"none":"flex"},...t&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(y.tL,{commands:{"pull-requests-conversations:submit-comment-and-review":z},children:(0,i.jsx)("div",{className:b,onKeyDown:e=>{"Escape"!==e.key||I.trim()?e.stopPropagation():(e.preventDefault(),Q())},children:(0,i.jsxs)(_.S,{ref:A,label:"Add diff comment",sx:Z,value:I,onChange:e=>{B(void 0),U({text:e,startLine:f,startSide:f?h:void 0}),k(e)},onPrimaryAction:e?K:z,suggestedChangesConfig:C,markdownErrorMessage:D,lineNumber:o,filePath:a,startLineNumber:f,disabled:V,children:[c&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:Q,children:"Cancel"}),!P&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:e?"default":"primary",onClick:z,ref:O,loading:L===ev,children:r?"Reply":"Comment"}),e&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:K,loading:L===eb,children:P?"Add review comment":"Start a review"})]})})})};try{e_.displayName||(e_.displayName="AddCommentEditor")}catch{}var ej=n(21373),ew=n(15220),eN=n(15837),eC=n(86877),eS=n(39183),eI=n(99511),ek=n(94236),eL=n(5524);let eT=(0,a.GV)()?function(e){let t,n,a,r,o,d,u=(0,s.c)(24),{currentLineNumberText:m,setCommentLineChangeConfig:h,baseEndLineNumber:f,diffSide:p,baseStartLineNumber:g}=e,[y,x]=(0,l.useState)(!1);u[0]!==f||u[1]!==g?(t=()=>g&&f?"lineRange":f?"line":"file",u[0]=f,u[1]=g,u[2]=t):t=u[2];let[v,b]=(0,l.useState)(t),[_,j]=(0,l.useState)("LEFT"===p),[w,N]=(0,l.useState)(g?String(g):""),[C,S]=(0,l.useState)(f?String(f):""),[I,k]=(0,l.useState)(""),L=Z();u[3]!==C||u[4]!==L||u[5]!==_||u[6]!==v||u[7]!==h||u[8]!==w?(n=()=>{let e=L(eA(_,Number(C),"file"===v)),t=L(eA(_,Number(w),"file"===v)),n=e?.startNewComment,i=e?.diffLineKey,a=t?.diffLineKey;(eP("lineRange"===v?w:void 0,C)||"file"===v)&&n&&i?h(eO({isLeftSide:_,startLineNumber:"lineRange"===v?Number(w):void 0,endDiffLineKey:i,endLineNumber:Number(C),isFileLevelComment:"file"===v,startDiffLineKey:"lineRange"===v?a:void 0,startConversationOnNewLine:n,closeLineMovingDialog:()=>x(!1),setErrorMessage:e=>k(e)})):k("Please enter a valid line number or range.")},u[3]=C,u[4]=L,u[5]=_,u[6]=v,u[7]=h,u[8]=w,u[9]=n):n=u[9];let T=n;return u[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>x(!0),u[10]=a):a=u[10],u[11]!==m?(r=(0,i.jsx)(ej.Q,{type:"button",size:"small",onClick:a,trailingAction:c.TriangleDownIcon,children:m}),u[11]=m,u[12]=r):r=u[12],u[13]!==C||u[14]!==I||u[15]!==y||u[16]!==_||u[17]!==v||u[18]!==w||u[19]!==T?(o=y&&(0,i.jsx)(ew.l,{title:"Add comment on",width:"medium",onClose:()=>x(!1),footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{x(!1)}},{buttonType:"primary",content:"Save",onClick:T}],children:(0,i.jsxs)(eN.A,{name:"line-number-selection",onChange:e=>{b(e)},children:[(0,i.jsx)(eN.A.Label,{}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"line",defaultChecked:"line"===v}),(0,i.jsx)(eC.A.Label,{children:"Line number"}),"line"===v&&(0,i.jsxs)(eC.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eR,{isLeftSelected:_,setIsLeftSelected:j}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:C,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T()}})]})]}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"lineRange",defaultChecked:"lineRange"===v}),(0,i.jsx)(eC.A.Label,{children:"Line range"}),"lineRange"===v&&(0,i.jsxs)(eC.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eR,{isLeftSelected:_,setIsLeftSelected:j}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:w,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:C,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T()}})]})]}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"file",defaultChecked:"file"===v}),(0,i.jsx)(eC.A.Label,{children:"File"})]}),I&&(0,i.jsx)(eN.A.Validation,{variant:"error",children:I})]})}),u[13]=C,u[14]=I,u[15]=y,u[16]=_,u[17]=v,u[18]=w,u[19]=T,u[20]=o):o=u[20],u[21]!==r||u[22]!==o?(d=(0,i.jsxs)("div",{className:"ml-1",children:[r,o]}),u[21]=r,u[22]=o,u[23]=d):d=u[23],d}:function({currentLineNumberText:e,setCommentLineChangeConfig:t,baseEndLineNumber:n,diffSide:a,baseStartLineNumber:s}){let[r,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(()=>s&&n?"lineRange":n?"line":"file"),[m,h]=(0,l.useState)("LEFT"===a),[f,p]=(0,l.useState)(s?String(s):""),[g,y]=(0,l.useState)(n?String(n):""),[x,v]=(0,l.useState)(""),b=Z(),_=(0,l.useCallback)(()=>{let e=b(eA(m,Number(g),"file"===d)),n=b(eA(m,Number(f),"file"===d)),i=e?.startNewComment,a=e?.diffLineKey,s=n?.diffLineKey;(eP("lineRange"===d?f:void 0,g)||"file"===d)&&i&&a?t(eO({isLeftSide:m,startLineNumber:"lineRange"===d?Number(f):void 0,endDiffLineKey:a,endLineNumber:Number(g),isFileLevelComment:"file"===d,startDiffLineKey:"lineRange"===d?s:void 0,startConversationOnNewLine:i,closeLineMovingDialog:()=>o(!1),setErrorMessage:e=>v(e)})):v("Please enter a valid line number or range.")},[b,m,g,d,f,t]);return(0,i.jsxs)("div",{className:"ml-1",children:[(0,i.jsx)(ej.Q,{type:"button",size:"small",onClick:()=>o(!0),trailingAction:c.TriangleDownIcon,children:e}),r&&(0,i.jsx)(ew.l,{title:"Add comment on",width:"medium",onClose:()=>o(!1),footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{o(!1)}},{buttonType:"primary",content:"Save",onClick:_}],children:(0,i.jsxs)(eN.A,{name:"line-number-selection",onChange:e=>{u(e)},children:[(0,i.jsx)(eN.A.Label,{}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"line",defaultChecked:"line"===d}),(0,i.jsx)(eC.A.Label,{children:"Line number"}),"line"===d&&(0,i.jsxs)(eC.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eR,{isLeftSelected:m,setIsLeftSelected:h}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}})]})]}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"lineRange",defaultChecked:"lineRange"===d}),(0,i.jsx)(eC.A.Label,{children:"Line range"}),"lineRange"===d&&(0,i.jsxs)(eC.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eR,{isLeftSelected:m,setIsLeftSelected:h}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:f,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(eI.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&_()}})]})]}),(0,i.jsxs)(eC.A,{children:[(0,i.jsx)(eS.A,{value:"file",defaultChecked:"file"===d}),(0,i.jsx)(eC.A.Label,{children:"File"})]}),x&&(0,i.jsx)(eN.A.Validation,{variant:"error",children:x})]})})]})},eE="Left (L)",eD="Right (R)",eR=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(12),{isLeftSelected:d,setIsLeftSelected:c}=e,u=d?eE:eD;return o[0]!==u?(t=(0,i.jsx)(ek.W.Button,{children:u}),o[0]=u,o[1]=t):t=o[1],o[2]!==c?(n=(0,i.jsx)(eL.l.Item,{onSelect:()=>{c(!0)},children:eE}),o[2]=c,o[3]=n):n=o[3],o[4]!==c?(a=(0,i.jsx)(eL.l.Item,{onSelect:()=>{c(!1)},children:eD}),o[4]=c,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(r=(0,i.jsx)(ek.W.Overlay,{children:(0,i.jsxs)(eL.l,{children:[n,a]})}),o[6]=n,o[7]=a,o[8]=r):r=o[8],o[9]!==t||o[10]!==r?(l=(0,i.jsxs)(ek.W,{children:[t,r]}),o[9]=t,o[10]=r,o[11]=l):l=o[11],l}:function({isLeftSelected:e,setIsLeftSelected:t}){let n=e?eE:eD;return(0,i.jsxs)(ek.W,{children:[(0,i.jsx)(ek.W.Button,{children:n}),(0,i.jsx)(ek.W.Overlay,{children:(0,i.jsxs)(eL.l,{children:[(0,i.jsx)(eL.l.Item,{onSelect:()=>{t(!0)},children:eE}),(0,i.jsx)(eL.l.Item,{onSelect:()=>{t(!1)},children:eD})]})})]})};function eA(e,t,n){return n?"F0":`${e?"L":"R"}${t}`}function eO(e){return{diffSide:e.isLeftSide?"LEFT":"RIGHT",startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,isFileLevelComment:e.isFileLevelComment,startDiffLineKey:e.startDiffLineKey,endDiffLineKey:e.endDiffLineKey,setErrorMessage:e.setErrorMessage,startConversationOnNewLine:e.startConversationOnNewLine,closeLineMovingDialog:e.closeLineMovingDialog}}function eP(e,t){let n=Number(e),i=Number(t);return Number.isInteger(i)&&i>0&&(void 0===e||Number.isInteger(n)&&n>0&&n<=i)}try{eT.displayName||(eT.displayName="ChangeCommentLineNumberButton")}catch{}try{eR.displayName||(eR.displayName="MoveCommentLineNumberDropdown")}catch{}var eF=n(91747);let eM=(0,a.GV)()?function(e){let t,n,a,r,o,h,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L=(0,s.c)(51);if(L[0]!==e){let{addCommentDialogTitle:i,isLeftSide:s,fileLevelComment:l,filePath:d,focusOnMount:c,lineNumber:u,onAddComment:m,onClose:f,viewerData:b,threadsConnectionId:_,showOnCloseIcon:j,...w}=e;t=i,r=s,n=l,a=d,y=c,o=u,h=m,p=f,v=b,x=j,g=w,L[0]=e,L[1]=t,L[2]=n,L[3]=a,L[4]=r,L[5]=o,L[6]=h,L[7]=p,L[8]=g,L[9]=y,L[10]=x,L[11]=v}else t=L[1],n=L[2],a=L[3],r=L[4],o=L[5],h=L[6],p=L[7],g=L[8],y=L[9],x=L[10],v=L[11];let T=void 0===y||y,E=void 0===x||x,[D,R]=(0,l.useState)(void 0),A=(0,eF.u)("move_new_comments_ui");L[12]!==h?(b=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e;h({text:t,onError:i,onCompleted:(e,t)=>{t&&f(t.toString()),n?.(e,t)},submitBatch:a})},L[12]=h,L[13]=b):b=L[13];let O=b,P=v.avatarUrl||"";L[14]!==P||L[15]!==v.login?(_=(0,i.jsx)(d.r,{alt:v.login,size:24,src:P,className:"mr-2"}),L[14]=P,L[15]=v.login,L[16]=_):_=L[16],L[17]!==t||L[18]!==n||L[19]!==A?(j=!A&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:t?`Add a comment on ${t}`:"Add a comment"})),L[17]=t,L[18]=n,L[19]=A,L[20]=j):j=L[20],L[21]!==t||L[22]!==n||L[23]!==r||L[24]!==o||L[25]!==A||L[26]!==g?(w=A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eT,{currentLineNumberText:n?"file":t??"",baseEndLineNumber:o,baseStartLineNumber:g.startLineNumber,diffSide:r?"LEFT":"RIGHT",setCommentLineChangeConfig:R})]}),L[21]=t,L[22]=n,L[23]=r,L[24]=o,L[25]=A,L[26]=g,L[27]=w):w=L[27],L[28]!==_||L[29]!==j||L[30]!==w?(N=(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[_,j,w]}),L[28]=_,L[29]=j,L[30]=w,L[31]=N):N=L[31],L[32]!==p||L[33]!==E?(C=p&&E&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>p(),"aria-label":"Cancel"}),L[32]=p,L[33]=E,L[34]=C):C=L[34],L[35]!==N||L[36]!==C?(S=(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[N,C]}),L[35]=N,L[36]=C,L[37]=S):S=L[37];let F=n??!1,M=r?"LEFT":"RIGHT";return L[38]!==D||L[39]!==a||L[40]!==T||L[41]!==O||L[42]!==o||L[43]!==p||L[44]!==g||L[45]!==F||L[46]!==M?(I=(0,i.jsx)(e_,{focusOnMount:T,condensed:!1,fileLevelComment:F,filePath:a,lineNumber:o,onAddComment:O,onCancelComment:p,commentLineChangeConfig:D,side:M,...g}),L[38]=D,L[39]=a,L[40]=T,L[41]=O,L[42]=o,L[43]=p,L[44]=g,L[45]=F,L[46]=M,L[47]=I):I=L[47],L[48]!==S||L[49]!==I?(k=(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[S,I]}),L[48]=S,L[49]=I,L[50]=k):k=L[50],k}:function({addCommentDialogTitle:e,isLeftSide:t,fileLevelComment:n,filePath:a,focusOnMount:s=!0,lineNumber:r,onAddComment:o,onClose:h,viewerData:p,threadsConnectionId:g,showOnCloseIcon:y=!0,...x}){let[v,b]=(0,l.useState)(void 0),_=(0,eF.u)("move_new_comments_ui");return(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[(0,i.jsx)(d.r,{alt:p.login,size:24,src:p.avatarUrl||"",className:"mr-2"}),!_&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:e?`Add a comment on ${e}`:"Add a comment"})),_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eT,{currentLineNumberText:n?"file":e??"",baseEndLineNumber:r,baseStartLineNumber:x.startLineNumber,diffSide:t?"LEFT":"RIGHT",setCommentLineChangeConfig:b})]})]}),h&&y&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:()=>h(),"aria-label":"Cancel"})]}),(0,i.jsx)(e_,{focusOnMount:s,condensed:!1,fileLevelComment:n??!1,filePath:a,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{o({text:e,onError:n,onCompleted:(e,n)=>{n&&f(n.toString()),t?.(e,n)},submitBatch:i})},onCancelComment:h,commentLineChangeConfig:v,side:t?"LEFT":"RIGHT",...x})]})};try{eM.displayName||(eM.displayName="StartThreadComment")}catch{}var e$=n(33671),eB=n(8934),eV=n(97286),eU=n(73017),eq=n(69726);let eG="RichDiff-module__fileRendererViewport--EBwd1",eH="RichDiff-module__fileRendererIframe--svTsY",eK=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(29),{queryConfig:c,initialData:u}=e;if(u&&(u.proseDiffHtml||u.renderInfo||u.dependencyDiffPath)){let e;d[0]!==u.dependencyDiffPath||d[1]!==u.proseDiffHtml||d[2]!==u.renderInfo?(e={proseDiffHtml:u.proseDiffHtml,renderInfo:u.renderInfo,dependencyDiffPath:u.dependencyDiffPath},d[0]=u.dependencyDiffPath,d[1]=u.proseDiffHtml,d[2]=u.renderInfo,d[3]=e):e=d[3],o=e}let m=c?.key,h=c?.args;d[4]!==m||d[5]!==h?(t=[m,h],d[4]=m,d[5]=h,d[6]=t):t=d[6],d[7]!==c?(n=async()=>await c?.fetcher(c.args)||{},d[7]=c,d[8]=n):n=d[8];let f=!!c;d[9]!==o||d[10]!==t||d[11]!==n||d[12]!==f?(a={queryKey:t,queryFn:n,initialData:o,staleTime:1/0,enabled:f},d[9]=o,d[10]=t,d[11]=n,d[12]=f,d[13]=a):a=d[13];let p=(0,eV.I)(a);d[14]!==o||d[15]!==c||d[16]!==p?(r=c?p:{data:o,isLoading:!1},d[14]=o,d[15]=c,d[16]=p,d[17]=r):r=d[17];let{data:g,isLoading:y}=r;d[18]!==g?(l=g||{},d[18]=g,d[19]=l):l=d[19];let{proseDiffHtml:x,renderInfo:v,dependencyDiffPath:b}=l;if(y){let e;return d[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eq.A,{size:"large"})}),d[20]=e):e=d[20],e}if(x){let e;return d[21]!==x?(e=(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eU.vb,{html:x})}),d[21]=x,d[22]=e):e=d[22],e}if(v){let e;return d[23]!==v?(e=(0,i.jsx)(e$.default,{...v,viewportClassName:eG,iframeClassName:eH}),d[23]=v,d[24]=e):e=d[24],e}if(b){let e,t;return d[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eq.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),d[25]=e):e=d[25],d[26]!==b?(t=(0,i.jsx)("div",{children:(0,i.jsx)(eB.x,{src:b,children:e})}),d[26]=b,d[27]=t):t=d[27],t}{let e;return d[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}),d[28]=e):e=d[28],e}}:function({queryConfig:e,initialData:t}){let n;t&&(t.proseDiffHtml||t.renderInfo||t.dependencyDiffPath)&&(n={proseDiffHtml:t.proseDiffHtml,renderInfo:t.renderInfo,dependencyDiffPath:t.dependencyDiffPath});let a=(0,eV.I)({queryKey:[e?.key,e?.args],queryFn:async()=>await e?.fetcher(e.args)||{},initialData:n,staleTime:1/0,enabled:!!e}),{data:s,isLoading:r}=e?a:{data:n,isLoading:!1},{proseDiffHtml:l,renderInfo:o,dependencyDiffPath:d}=s||{};return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(eq.A,{size:"large"})}):l?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(eU.vb,{html:l})}):o?(0,i.jsx)(e$.default,{...o,viewportClassName:eG,iframeClassName:eH}):d?(0,i.jsx)("div",{children:(0,i.jsx)(eB.x,{src:d,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(eq.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})};try{eK.displayName||(eK.displayName="RichDiff")}catch{}var eW=n(59523),ez=n(19976),eQ=n(13083),eZ=n(84268),eJ=n(34164);let eY="HiddenDiffPatch-module__gridColumnTemplate--gSfuk",eX=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h,f,p=(0,s.c)(27),{children:g,helpText:y,helpUrl:x,onLoadDiff:v,diffAnchor:b}=e,_=x&&y,[j,w]=(0,l.useState)("initial");p[0]!==v?(t=async()=>{try{w("loading"),await v()}catch{w("error")}},p[0]=v,p[1]=t):t=p[1];let N=t;return p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,eJ.$)(eY),p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:"340px"},p[3]=a):a=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:a,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),p[4]=r):r=p[4],p[5]!==j?(o="loading"===j&&(0,i.jsx)(eq.A,{size:"medium"}),p[5]=j,p[6]=o):o=p[6],p[7]!==j?(d="error"===j&&(0,i.jsx)(c.AlertIcon,{size:24}),p[7]=j,p[8]=d):d=p[8],p[9]!==j||p[10]!==N?(u="initial"===j&&(0,i.jsx)(ej.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{N(),w("loading")},children:"Load Diff"}),p[9]=j,p[10]=N,p[11]=u):u=p[11],p[12]!==g||p[13]!==y||p[14]!==x||p[15]!==j||p[16]!==N||p[17]!==_?(m="error"===j?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(eZ.A,{inline:!0,as:"button",onClick:()=>{N(),w("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[g,_&&(0,i.jsx)(eZ.A,{inline:!0,href:x,children:y})]}),p[12]=g,p[13]=y,p[14]=x,p[15]=j,p[16]=N,p[17]=_,p[18]=m):m=p[18],p[19]!==o||p[20]!==d||p[21]!==u||p[22]!==m?(h=(0,i.jsxs)("div",{className:n,children:[r," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[o,d,u,m]})]}),p[19]=o,p[20]=d,p[21]=u,p[22]=m,p[23]=h):h=p[23],p[24]!==b||p[25]!==h?(f=(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":b,children:h}),p[24]=b,p[25]=h,p[26]=f):f=p[26],f}:function({children:e,helpText:t,helpUrl:n,onLoadDiff:a,diffAnchor:s}){let r=n&&t,[o,d]=(0,l.useState)("initial"),u=(0,l.useCallback)(async()=>{try{d("loading"),await a()}catch{d("error")}},[a,d]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":s,children:(0,i.jsxs)("div",{className:(0,eJ.$)(eY),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,i.jsx)(eq.A,{size:"medium"}),"error"===o&&(0,i.jsx)(c.AlertIcon,{size:24}),"initial"===o&&(0,i.jsx)(ej.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),d("loading")},children:"Load Diff"}),"error"===o?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(eZ.A,{inline:!0,as:"button",onClick:()=>{u(),d("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,r&&(0,i.jsx)(eZ.A,{inline:!0,href:n,children:t})]})]})]})})};try{eX.displayName||(eX.displayName="HiddenDiffPatch")}catch{}let e0="final-hunk-header-line";function e1(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function e2(e,t){if("HUNK"===e.type&&e.__id===e0)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(e1).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function e3(e){let t,n=[],i=0;for(let a=1;a<e.length;a++){let s=e[a];if(s&&!(0,I.Po)(s)&&(t=s,"HUNK"===s.type)){let t,r=e[i];if(!r||(0,I.Po)(r))continue;let l=a-1;for(;(!t||(0,I.Po)(t))&&(t=e[l],-1!=--l););t&&!(0,I.Po)(t)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),s.__id===e0&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:s.blobLineNumber+20}),i=a;continue}}if(t&&"HUNK"!==t.type){let a=e[i];a&&!(0,I.Po)(a)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var e4=n(45800),e5=n(35750),e6=n(18150),e7=n(85242),e8=n(88243),e9=n(16213),te=n(50467),tt=new WeakMap,tn=new WeakMap,ti=new WeakMap,ta=new WeakMap,ts=new WeakMap,tr=new WeakMap,tl=new WeakSet,to=new WeakSet,td=new WeakSet,tc=new WeakSet,tu=new WeakSet,tm=new WeakSet,th=new WeakSet,tf=new WeakSet,tp=new WeakSet,tg=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,e5._)(this,tn).get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,s]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,e8._)(this,th,tw).call(this,a)&&(0,e5._)(this,ta)&&(s=(0,e5._)(this,ta),(0,e7._)(this,ta,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,e5._)(this,tt).length-1,t=(0,e5._)(this,tt)[e]?.length;t&&(n=(0,e5._)(this,tt)[e]?.[t-1]);break}case"ArrowUp"===e:(0,e8._)(this,th,tw).call(this,a-1)?((0,e8._)(this,tg,tS).call(this,s),n=(0,e5._)(this,tt)[a-1]?.[0]):n=(0,e5._)(this,tt)[a-1]?.[s];break;case"ArrowDown"===e:(0,e8._)(this,th,tw).call(this,a+1)?((0,e8._)(this,tg,tS).call(this,s),n=(0,e5._)(this,tt)[a+1]?.[0]):n=(0,e5._)(this,tt)[a+1]?.[s];break;case"ArrowLeft"===e:n=(0,e5._)(this,tt)[a]?.[s-1];break;case"ArrowRight"===e:n=(0,e5._)(this,tt)[a]?.[s+1];break;case"PageUp"===e:{(0,e8._)(this,tg,tS).call(this,s);let e=(0,e8._)(this,td,tv).call(this,a);n=(0,e5._)(this,tt)[e]?.[0];break}case"PageDown"===e:{(0,e8._)(this,tg,tS).call(this,s);let e=(0,e8._)(this,to,tx).call(this,a),t=0;e||(e=(0,e5._)(this,tt).length-1,t=s),n=(0,e5._)(this,tt)[e]?.[t];break}case"Home"===e:n=(0,e5._)(this,tt)[a]?.[0];break;case"End"===e:{let e=(0,e5._)(this,tt)[a];if(e&&!(0,e8._)(this,th,tw).call(this,a)){let t=e.length-1;n=(0,e5._)(this,tt)[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,e8._)(this,tc,tb).call(this,e,t)}focusFirstGridCell(e){e&&(0,e5._)(this,tn).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,e5._)(this,tt)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,e5._)(this,tn).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,e5._)(this,tt)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,a=(0,e5._)(this,tn).get(i?.cellId??"");if(!a)return;let[s,r]=a;if("ArrowUp"===e){let e=s-1;for(;!t&&e>=0;)t=(0,e8._)(this,tl,ty).call(this,{rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=s+1;for(;!t&&e<(0,e5._)(this,tt).length;)t=(0,e8._)(this,tl,ty).call(this,{rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,e5._)(this,tn).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,e5._)(this,tr)?(0,e5._)(this,tt)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,e5._)(this,tr)?(0,e5._)(this,tt)[e]?.[this.focusedGridCell.columnIndex+2]:(0,e5._)(this,tt)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,e5._)(this,tt).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,e5._)(this,tt).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,I.qX)((0,e5._)(this,ts),e,t),a=(0,I.u6)(i,0),s=(0,e5._)(this,tn).get(a);if(!s)return!1;let[r]=s;return!!n===(0,e8._)(this,th,tw).call(this,r)}constructor(e,t,n,i,a){(0,e9._)(this,tl),(0,e9._)(this,to),(0,e9._)(this,td),(0,e9._)(this,tc),(0,e9._)(this,tu),(0,e9._)(this,tm),(0,e9._)(this,th),(0,e9._)(this,tf),(0,e9._)(this,tp),(0,e9._)(this,tg),(0,e6._)(this,tt,{writable:!0,value:[]}),(0,e6._)(this,tn,{writable:!0,value:new Map}),(0,e6._)(this,ti,{writable:!0,value:new Set}),(0,te._)(this,"focusedGridCell",void 0),(0,te._)(this,"lastSelectedGridCell",void 0),(0,e6._)(this,ta,{writable:!0,value:void 0}),(0,e6._)(this,ts,{writable:!0,value:void 0}),(0,e6._)(this,tr,{writable:!0,value:void 0}),(0,e7._)(this,ts,e),(0,e7._)(this,tr,t),(0,e8._)(this,tc,tb).call(this,n,i),this.focusFirstGridCell(a)}};function ty({rowIndex:e,columnIndex:t}){let n=(0,e5._)(this,tt)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,e5._)(this,tr):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,e5._)(this,tr):return n?.[t+1];default:return n?.[t]}}function tx(e){return Array.from((0,e5._)(this,ti)).sort((e,t)=>e-t).find(t=>t>e)}function tv(e){return Array.from((0,e5._)(this,ti)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function tb(e,t){(0,e7._)(this,tt,[]),(0,e7._)(this,tn,new Map),(0,e7._)(this,ti,new Set);for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if((0,e5._)(this,tr)){let e=(t||[])[n],s=(0,I.qX)((0,e5._)(this,ts),a,e);(0,I.Po)(a)||"HUNK"!==a.type?(0,e8._)(this,tf,tN).call(this,{leftLine:a,rightLine:e,row:i,rowIdentifier:s,rowIndex:n}):(0,e8._)(this,tm,tj).call(this,i,s,n,a)}else{let e=(0,I.qX)((0,e5._)(this,ts),a,a);(0,I.Po)(a)||"HUNK"!==a.type?(0,e8._)(this,tp,tC).call(this,{diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):(0,e8._)(this,tm,tj).call(this,i,e,n,a)}(0,e5._)(this,tt).push(i)}}}function t_({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:s,isSplit:r}){let l,o,d=(0,I.u6)(a,e);o=!(r||(0,I.Po)(t))&&t?.type==="DELETION"&&1===e||!(r||(0,I.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,I.Po)(t),(0,I.Po)(t)||"left"!==n||(l=t?.left),(0,I.Po)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isEmpty:o,isHunk:!1,cellId:(0,I.u6)(a,e),columnIndex:e,lineKey:!(0,I.Po)(t)&&t?(0,k.bo)(t):void 0}),(0,e5._)(this,tn).set(d,[s,e])}function tj(e,t,n,i){let a=(0,I.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:a,columnIndex:0,lineKey:(0,k.bo)(i)}),(0,e5._)(this,tn).set(a,[n,0]),(0,e5._)(this,ti).add(n)}function tw(e){return(0,e5._)(this,ti).has(e)}function tN({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){(0,e8._)(this,tu,t_).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,e8._)(this,tu,t_).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,e8._)(this,tu,t_).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,e8._)(this,tu,t_).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0})}function tC({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,I.Po)(e)||"DELETION"!==e.type?"right":"left";(0,e8._)(this,tu,t_).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,e8._)(this,tu,t_).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,e8._)(this,tu,t_).call(this,{cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function tS(e){(0,e8._)(this,th,tw).call(this,e)||(0,e7._)(this,ta,e)}function tI(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function tk(e,t,n){let i=[];for(let a=0;a<t.length;a++){let s=t[a],r=n?.[a]??s,l=!(0,I.Po)(s)&&s?.type==="HUNK";s&&r&&!e.hasLine(s,r,l)&&i.push(s)}return i}let tL=(0,a.GV)()?function(e,t,n,i,a,r){let o,d,c=(0,s.c)(8);c[0]!==i||c[1]!==e||c[2]!==n||c[3]!==t||c[4]!==a||c[5]!==r?(o=()=>{if(a&&document.activeElement){let s=tk(a,t,r);if(0!==s.length){if(document.activeElement===document.body){let i,a,r,l=t.indexOf(s[s.length-1]),o=t[l+1],d=s[0];o&&!(0,I.Po)(o)&&"HUNK"===o.type&&(i=(0,I.u6)((0,I.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(i=(0,I.u6)((0,I.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(r?r.focus():a.focus(),n.focusGridCell(i),tI(a))}else if("BUTTON"===document.activeElement.tagName)tI(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},d=[e,t,n,r,a,i],c[0]=i,c[1]=e,c[2]=n,c[3]=t,c[4]=a,c[5]=r,c[6]=o,c[7]=d):(o=c[6],d=c[7]),(0,l.useEffect)(o,d)}:function(e,t,n,i,a,s){(0,l.useEffect)(()=>{if(a&&document.activeElement){let r=tk(a,t,s);if(0!==r.length){if(document.activeElement===document.body){let i,a,s,l=t.indexOf(r[r.length-1]),o=t[l+1],d=r[0];o&&!(0,I.Po)(o)&&"HUNK"===o.type&&(i=(0,I.u6)((0,I.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(i=(0,I.u6)((0,I.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(s?s.focus():a.focus(),n.focusGridCell(i),tI(a))}else if("BUTTON"===document.activeElement.tagName)tI(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,s,a,i])};var tT=n(11683);let tE={ArrowLeft:tT.z0.ArrowHorizontal,ArrowDown:tT.z0.ArrowVertical,ArrowUp:tT.z0.ArrowVertical,ArrowRight:tT.z0.ArrowHorizontal,h:tT.z0.HL,j:tT.z0.JK,k:tT.z0.JK,l:tT.z0.HL,a:tT.z0.AD,s:tT.z0.WS,w:tT.z0.WS,d:tT.z0.AD,Tab:tT.z0.Tab,Home:tT.z0.HomeAndEnd,End:tT.z0.HomeAndEnd,PageUp:tT.z0.PageUpDown,PageDown:tT.z0.PageUpDown,Backspace:tT.z0.Backspace},tD=tT.z0.ArrowAll|tT.z0.PageUpDown|tT.z0.HomeAndEnd|tT.z0.AD,tR={avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"},tA=(0,a.GV)()?function(e,t){let n,i,a,r=(0,s.c)(6);r[0]!==t?(n=e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},r[0]=t,r[1]=n):n=r[1];let o=n;r[2]!==e||r[3]!==o?(i=()=>{let t=e.current;return t?.addEventListener("focusin",o),()=>t?.removeEventListener("focusin",o)},a=[e,o],r[2]=e,r[3]=o,r[4]=i,r[5]=a):(i=r[4],a=r[5]),(0,l.useEffect)(i,a)}:function(e,t){let n=(0,l.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,l.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])};function tO(e){return e in tE&&(tE[e]&tD)>0}function tP({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:a,isSplitDiff:s,leftLines:r,rightLines:o,selectMultipleLines:d,disabled:c}){let u=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>new GridNavigator(i,s,r,o,u.current?.focusedGridCell?.cellId),[i,s,r,o]);(0,l.useEffect)(()=>{u.current=m},[m]),(0,l.useEffect)(()=>{let e=n.current,t=()=>{m.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,m]),tL(i,r,m,n,u.current,o),tA(n,m);let h=(0,l.useCallback)((n,i,s)=>{let r=m.getValidSelectableRowCell();switch(!0){case(s.metaKey||s.ctrlKey)&&"KeyA"===s.code:{let e=m.getFirstCodeCell(),t=m.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},eg),i}case s.shiftKey&&"ArrowDown"===s.key:{let t=m.getNextSelectableCell("ArrowDown");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eg):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:r.lineKey,startOrientation:r.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},eg),tF(t.cellId),i}case s.shiftKey&&"ArrowUp"===s.key:{let t=m.getNextSelectableCell("ArrowUp");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},eg):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:r.lineKey,endOrientation:r.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},eg),tF(t.cellId),i}case"ArrowLeft"===s.key&&s.metaKey&&s.shiftKey:return i;default:{let e=m.moveToNextItem(s.key,s.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),m.clearLastSelectedCell(),n??void 0}}},[e,a,m,d,t]);return(0,e4.G)({containerRef:n,bindKeys:tD,getNextFocusable:h,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:c},[h]),{gridNavigator:m}}function tF(e){let t=g.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!g.XC||!g.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(g.cg.innerHeight||g.XC.documentElement.clientHeight)&&t.right<=(g.cg.innerWidth||g.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var tM=n(21537),t$=n(30459);let tB=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f=(0,s.c)(20);if(f[0]!==e){let{anchorRef:i,diffAnchor:s,isInDialogMode:l,isOpen:d,returnFocusRef:c,onCloseCommentDialog:u,suggestedChangesConfig:m,...h}=e;t=l,n=d,a=u,o=m,r=h,f[0]=e,f[1]=t,f[2]=n,f[3]=a,f[4]=r,f[5]=o}else t=f[1],n=f[2],a=f[3],r=f[4],o=f[5];let{sendAnalyticsEvent:p}=(0,t$.s)(),g=(0,l.useRef)(null),y=M();e:{if(n&&o?.configureSuggestedChangesFromLineRange){let e;if(f[6]!==y||f[7]!==o){let t=y();e=o.configureSuggestedChangesFromLineRange(t,o?.shouldStartNewConversationWithSuggestedChange),f[6]=y,f[7]=o,f[8]=e}else e=f[8];d=e;break e}d=void 0}let x=d;if(!n)return null;f[9]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{e.target===g.current&&g.current.querySelector("textarea")?.focus()},f[9]=c):c=f[9];let v=c,b=t?0:-1;return f[10]!==a||f[11]!==p?(u=e=>{a(e),p("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},f[10]=a,f[11]=p,f[12]=u):u=f[12],f[13]!==x||f[14]!==r||f[15]!==u?(m=(0,i.jsx)(eM,{onClose:u,showOnCloseIcon:!1,suggestedChangesConfig:x,...r}),f[13]=x,f[14]=r,f[15]=u,f[16]=m):m=f[16],f[17]!==b||f[18]!==m?(h=(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:g,tabIndex:b,onFocus:v,children:m}),f[17]=b,f[18]=m,f[19]=h):h=f[19],h}:function({anchorRef:e,diffAnchor:t,isInDialogMode:n,isOpen:a,returnFocusRef:s,onCloseCommentDialog:r,suggestedChangesConfig:o,...d}){let{sendAnalyticsEvent:c}=(0,t$.s)(),u=(0,l.useRef)(null),m=M(),h=(0,l.useMemo)(()=>{if(a&&o?.configureSuggestedChangesFromLineRange){let e=m();return o.configureSuggestedChangesFromLineRange(e,o?.shouldStartNewConversationWithSuggestedChange)}},[a,o,m]);return a?(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:u,tabIndex:n?0:-1,onFocus:e=>{e.target===u.current&&u.current.querySelector("textarea")?.focus()},children:(0,i.jsx)(eM,{onClose:e=>{r(e),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:h,...d})}):null};try{tB.displayName||(tB.displayName="StartConversation")}catch{}var tV=n(2265);let tU=tT.z0.ArrowAll;tT.z0.ArrowHorizontal,tT.z0.ArrowVertical,tT.z0.ArrowVertical,tT.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,a=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(a)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let s=this.markers[n];if(s)return this.currentMarkerPosition={markerId:s.id,index:n},s}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),a=i?.getAttribute("data-marker-id");if(!i||!a)return;let s=this.markerComments[a]||[];if(0===s.length)return;let r=t.getAttribute("data-marker-navigation-comment-id"),l=s.findIndex(e=>e.id===r);if(-1===l)return;let o=l===s.length-1;switch(e){case"ArrowDown":if(o)return;n=l+1;break;case"ArrowUp":if(0===l)return;n=l-1;break;default:return}let d=s[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,te._)(this,"markers",void 0),(0,te._)(this,"markerComments",null),(0,te._)(this,"currentMarkerPosition",null),(0,te._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function tq({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let a=(0,l.useRef)(void 0),s=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{s.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||void 0),a.current=s.current},[t]);let r=(0,l.useCallback)((e,t,n)=>{let i=n.key,a=!tG(t)&&!tH(t)&&!tQ(t)&&!tK(t);switch(!0){case a&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return tz(t)||tW(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(s.current&&tG(t)){let e=s.current.moveToNextMarker(i,tW(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&tK(t)){let e=s.current.moveToNextMarker(i,tK(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&tQ(t)){let e=s.current.moveToNextMarkerItem(i,tQ(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(s.current&&tH(t)){let e=s.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(tH(t))return tz(t);if(tG(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(tG(t))return tW(t);if(tK(t))return tK(t);if(tQ(t))return tQ(t);if(tH(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[s]);return(0,e4.G)({containerRef:e,bindKeys:tU,getNextFocusable:r,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[r,n]),{markerNavigator:s}}function tG(e){return!!e?.hasAttribute("data-marker-id")}function tH(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function tK(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function tW(e){return e?.closest("[data-marker-id]")??void 0}function tz(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function tQ(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var tZ=n(48505);let tJ="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function tY(e){e?.setAttribute("aria-hidden","true"),!function t(n=0){setTimeout(()=>{let n=Array.from(e?.querySelectorAll("*")??[]),i=Array.from(e?.querySelectorAll(tJ)??[]);if(0===i.length)return t(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}function tX(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(tJ)??[]))t.setAttribute("tabindex","0")}let t0=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(7),{commentSubjectType:a,gridCellId:r,markerRef:o,isThread:d,thread:c}=e,u=void 0!==d&&d,m=V(r);i[0]!==a||i[1]!==m||i[2]!==u||i[3]!==o||i[4]!==c?(t=()=>{let e=null;if(!u||c)return m?"commit"===a?e=setTimeout(()=>{tX(o.current)},100):tX(o.current):tY(o.current),()=>{e&&clearTimeout(e)}},n=[m,a,o,u,c],i[0]=a,i[1]=m,i[2]=u,i[3]=o,i[4]=c,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,l.useEffect)(t,n)}:function({commentSubjectType:e,gridCellId:t,markerRef:n,isThread:i=!1,thread:a}){let s=V(t);(0,l.useEffect)(()=>{let t=null;if(!i||a)return s?"commit"===e?t=setTimeout(()=>{tX(n.current)},100):tX(n.current):tY(n.current),()=>{t&&clearTimeout(t)}},[s,e,n,i,a])};var t1=n(86909);let t2="InlineAnnotation-module__inlineAnnotation--bVDzc",t3=(0,a.GV)()?function(e){let t,n,a,r,o=(0,s.c)(14),{annotation:d,gridCellId:c,isFirstMarker:u}=e,m=(0,l.useRef)(null),h=V(c);o[0]!==c?(t={commentSubjectType:"pull request",gridCellId:c,markerRef:m},o[0]=c,o[1]=t):t=o[1],t0(t);let f=`annotation_${d.databaseId}`,p=u?"mb-1":"mb-2";o[2]!==p?(n=(0,eJ.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",p,t2),o[2]=p,o[3]=n):n=o[3];let g=`annotation-${d.id}`,y=`${d.id}`,x=h?0:-1;return o[4]!==d?(a=(0,i.jsx)(t1.YH,{annotation:d}),o[4]=d,o[5]=a):a=o[5],o[6]!==d.annotationLevel||o[7]!==f||o[8]!==n||o[9]!==g||o[10]!==y||o[11]!==x||o[12]!==a?(r=(0,i.jsx)("div",{id:f,ref:m,className:n,"data-level":d.annotationLevel,"data-testid":g,"data-marker-id":y,tabIndex:x,children:a}),o[6]=d.annotationLevel,o[7]=f,o[8]=n,o[9]=g,o[10]=y,o[11]=x,o[12]=a,o[13]=r):r=o[13],r}:function({annotation:e,gridCellId:t,isFirstMarker:n}){let a=(0,l.useRef)(null),s=V(t);return t0({commentSubjectType:"pull request",gridCellId:t,markerRef:a}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:a,className:(0,eJ.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",n?"mb-1":"mb-2",t2),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:s?0:-1,children:(0,i.jsx)(t1.YH,{annotation:e})})};try{t3.displayName||(t3.displayName="InlineAnnotation")}catch{}let t4="InlineMarkers-module__closeMarkersDialogButton--wdW2G",t5="InlineMarkers-module__markersWrapper--Fw1hl",t6="InlineMarkers-module__fileMarkersWrapper--rXaAB",t7="InlineMarkers-module__markersDialogActive--v0PSm";var t8=n(33643),t9=n(75202),ne=n(82075),nt=n(26607),nn=n(72511),ni=n(76720);let na=(0,a.GV)()?function(){let e,t,n,a=(0,s.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(ni.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(ni.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(ni.E,{border:!0,children:[e,t,(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(ni.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(ni.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),a[2]=n):n=a[2],n}:function(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(ni.E,{border:!0,children:[(0,i.jsx)(ni.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(ni.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(ni.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(ni.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})};try{na.displayName||(na.displayName="CommentErrorFallback")}catch{}let ns="InlineReviewThread-module__inlineReviewThreadHeading--CBLMR",nr="InlineReviewThread-module__ReviewThreadContainer--MW9GI",nl="InlineReviewThread-module__ResolvableContainer--FkZ8G",no="InlineReviewThread-module__ThreadLoading--UIhR9";var nd=n(11738),nc=n(96760),nu=n(84078),nm=n(20622),nh=n(48845),nf=n(97665),np=n(94747),ng=n(96379),ny=n(69510);let nx=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(13),l=(0,j.Kp)(),o=(0,nf.jE)(),d=`${l}/page_data/${nm.uT.createReviewComment}`,{updateThread:c}=(0,j.an)(),{addPendingComment:u,clearPendingReview:m}=(0,j._N)();return r[0]!==d?(n=async e=>{let t=await (0,ng.Sr)(`${d}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nh.hp)(t);return(0,nh.R)(t,n),n},r[0]=d,r[1]=n):n=r[1],r[2]!==u||r[3]!==l||r[4]!==m||r[5]!==e||r[6]!==t||r[7]!==o||r[8]!==c?(i=(n,i)=>(void 0!==i.submitBatch&&!i.submitBatch&&n.thread&&u(Number(n.thread.id)),i.submitBatch&&m(),c(Number(n.thread.id),e,t,e=>n.thread),o.invalidateQueries({queryKey:(0,ny.XG)(l)})),r[2]=u,r[3]=l,r[4]=m,r[5]=e,r[6]=t,r[7]=o,r[8]=c,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(a={mutationFn:n,onSuccess:i},r[10]=n,r[11]=i,r[12]=a):a=r[12],(0,np.n)(a)}:function(e,t){let n=(0,j.Kp)(),i=(0,nf.jE)(),a=`${n}/page_data/${nm.uT.createReviewComment}`,{updateThread:s}=(0,j.an)(),{addPendingComment:r,clearPendingReview:l}=(0,j._N)();return(0,np.n)({mutationFn:async e=>{let t=await (0,ng.Sr)(`${a}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nh.hp)(t);return(0,nh.R)(t,n),n},onSuccess:(a,o)=>(void 0!==o.submitBatch&&!o.submitBatch&&a.thread&&r(Number(a.thread.id)),o.submitBatch&&l(),s(Number(a.thread.id),e,t,e=>a.thread),i.invalidateQueries({queryKey:(0,ny.XG)(n)}))})};var nv=n(80081),nb=n(95542);let n_="ReviewThread-module__ReviewThreadContainer--s6e8A";var nj=n(61219),nw=n(45270);let nN=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,p=(0,s.c)(87),{batchingEnabled:y,commentAnchorPrefix:x,lineMarkersKey:v,disableDialogMode:b,enableDialogMode:_,filePath:w,gridCellId:N,isInlineComment:C,isInDialogMode:S,onDeleteLineComment:I,subjectId:k,thread:L,threadPositionNumber:T,threadsConnectionId:E,shouldLimitHeight:D,suggestedChangesConfig:R,viewerData:A,ghostUser:O}=e,P=void 0===D||D,[F,M]=(0,l.useState)(!1),[$,B]=(0,l.useState)(void 0),{sendAnalyticsEvent:V}=(0,t$.s)(),U=(0,j.Kp)(),q=(0,l.useRef)(null),G=(0,l.useRef)(null),{mutate:H}=nx(w,v),{endOid:K,startOid:W}=(0,nw.Xv)();p[0]!==H||p[1]!==K||p[2]!==w||p[3]!==V||p[4]!==W||p[5]!==L.commentsData?.comments?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e,s=L.commentsData?.comments[L.commentsData?.comments.length-1];H({text:t,submitBatch:a,inReplyTo:s?.databaseId,path:w,comparisonEndOid:K,comparisonStartOid:W},{onError:i,onSuccess:e=>{var t;(t=e.comment.databaseId)&&f(t.toString()),n?.()}}),V("comments.add","ADD_COMMENT_BUTTON")},p[0]=H,p[1]=K,p[2]=w,p[3]=V,p[4]=W,p[5]=L.commentsData?.comments,p[6]=t):t=p[6];let z=t;p[7]!==V?(n=()=>{M(!1),B(void 0),V("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>q.current?.focus())},p[7]=V,p[8]=n):n=p[8];let Q=n;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{B(e),M(!0)},p[9]=a):a=p[9];let Z=a;if(!L.commentsData||null===L.commentsData.comments||L.commentsData.comments.length<1)return null;p[10]!==L?(r=(0,nv.Lm)(L),p[10]=L,p[11]=r):r=p[11];let J=r;p[12]!==J||p[13]!==L.subjectType?(o=L.subjectType?.toLowerCase()==="line"?{lineRange:J}:void 0,p[12]=J,p[13]=L.subjectType,p[14]=o):o=p[14];let Y=o;p[15]!==F?(d=e=>{G.current===e.target&&(F?G.current?.querySelector("textarea")?.focus():q.current?.focus())},p[15]=F,p[16]=d):d=p[16];let X=d;if(p[17]!==Y||p[18]!==U||p[19]!==x||p[20]!==b||p[21]!==_||p[22]!==w||p[23]!==O||p[24]!==N||p[25]!==S||p[26]!==C||p[27]!==v||p[28]!==I||p[29]!==k||p[30]!==R||p[31]!==L.commentsData.__id||p[32]!==L.commentsData.comments||p[33]!==L.id||p[34]!==L.isResolved||p[35]!==L.positioning?.isOutdated||p[36]!==T||p[37]!==E||p[38]!==A){let e;p[40]!==Y||p[41]!==U||p[42]!==x||p[43]!==b||p[44]!==_||p[45]!==w||p[46]!==O||p[47]!==N||p[48]!==S||p[49]!==C||p[50]!==v||p[51]!==I||p[52]!==k||p[53]!==R||p[54]!==L.commentsData.__id||p[55]!==L.commentsData.comments.length||p[56]!==L.id||p[57]!==L.isResolved||p[58]!==L.positioning?.isOutdated||p[59]!==T||p[60]!==E||p[61]!==A?(e=(e,t)=>(function(e,t){return e.reviewVariantType===tZ.hH.Automated&&0===t})(e,t)?(0,i.jsx)(nb.y,{anchorPrefix:x,basePath:U,comment:e,isAnchorable:!0,isInlineComment:C,isInDialogMode:S,isOutdated:L.positioning?.isOutdated,isThreadResolved:!!L.isResolved,onQuoteReply:Z,subjectId:k,threadId:L.id,threadPositionNumber:T,threadsConnectionId:E,viewerData:A},e.id):(0,i.jsx)(nj.U,{lineMarkersKey:v,isAnchorable:!0,index:t,threadPositionNumber:T,isFirstComment:0===t,isInlineComment:C,isLastChild:t===(L.commentsData?.comments.length??0)-1,anchorPrefix:x,comment:e,commentConnectionId:L.commentsData?.__id,disableDialogMode:b,enableDialogMode:_,filePath:w,gridCellId:N,isInDialogMode:S,isOutdated:L.positioning?.isOutdated,subjectId:k,threadId:L.id,onDeleteLineComment:I,onQuoteReply:Z,threadCommentCount:L.commentsData?.comments.length,threadsConnectionId:E,isThreadResolved:!!L.isResolved,suggestedChangesConfig:R,applySuggestedChangesValidationData:Y,viewerData:A,ghostUser:O},e.id),p[40]=Y,p[41]=U,p[42]=x,p[43]=b,p[44]=_,p[45]=w,p[46]=O,p[47]=N,p[48]=S,p[49]=C,p[50]=v,p[51]=I,p[52]=k,p[53]=R,p[54]=L.commentsData.__id,p[55]=L.commentsData.comments.length,p[56]=L.id,p[57]=L.isResolved,p[58]=L.positioning?.isOutdated,p[59]=T,p[60]=E,p[61]=A,p[62]=e):e=p[62],c=L.commentsData.comments.map(e),p[17]=Y,p[18]=U,p[19]=x,p[20]=b,p[21]=_,p[22]=w,p[23]=O,p[24]=N,p[25]=S,p[26]=C,p[27]=v,p[28]=I,p[29]=k,p[30]=R,p[31]=L.commentsData.__id,p[32]=L.commentsData.comments,p[33]=L.id,p[34]=L.isResolved,p[35]=L.positioning?.isOutdated,p[36]=T,p[37]=E,p[38]=A,p[39]=c}else c=p[39];return p[63]!==L.reviewCommentsLimit||p[64]!==L.reviewCommentsLimitExceeded?(u=L.reviewCommentsLimitExceeded&&(0,i.jsx)(nu.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(L.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),p[63]=L.reviewCommentsLimit,p[64]=L.reviewCommentsLimitExceeded,p[65]=u):u=p[65],p[66]!==z||p[67]!==y||p[68]!==Q||p[69]!==w||p[70]!==X||p[71]!==S||p[72]!==F||p[73]!==J?.endLineNumber||p[74]!==J?.startLineNumber||p[75]!==$||p[76]!==V||p[77]!==k||p[78]!==R||p[79]!==L.id||p[80]!==L.viewerCanReply?(m=L.viewerCanReply&&(0,i.jsxs)("div",{id:nc.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":L.id,"data-marker-navigation-comment-id":`${L.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:S?0:-1,onFocus:X,ref:G,children:[F&&(0,i.jsx)(e_,{startLineNumber:J?.startLineNumber,lineNumber:J?.endLineNumber,batchingEnabled:y,condensed:!1,fileLevelComment:!0,filePath:w,focusOnMount:!0,isReplying:!0,onCancelComment:Q,quotedText:$,subjectId:k,threadId:L.id,onAddComment:z,suggestedChangesConfig:R}),!F&&(0,i.jsx)(nd.z,{ref:q,onClick:()=>{V("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),M(!0)},children:"Write a reply"})]}),p[66]=z,p[67]=y,p[68]=Q,p[69]=w,p[70]=X,p[71]=S,p[72]=F,p[73]=J?.endLineNumber,p[74]=J?.startLineNumber,p[75]=$,p[76]=V,p[77]=k,p[78]=R,p[79]=L.id,p[80]=L.viewerCanReply,p[81]=m):m=p[81],p[82]!==P||p[83]!==m||p[84]!==c||p[85]!==u?(h=(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:n_,"data-limit-height":P,children:[c,u,m]})}),p[82]=P,p[83]=m,p[84]=c,p[85]=u,p[86]=h):h=p[86],h}:function({batchingEnabled:e,commentAnchorPrefix:t,lineMarkersKey:n,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInlineComment:d,isInDialogMode:c,onDeleteLineComment:u,subjectId:m,thread:h,threadPositionNumber:p,threadsConnectionId:y,shouldLimitHeight:x=!0,suggestedChangesConfig:v,viewerData:b,ghostUser:_}){let[w,N]=(0,l.useState)(!1),[C,S]=(0,l.useState)(void 0),{sendAnalyticsEvent:I}=(0,t$.s)(),k=(0,j.Kp)(),L=(0,l.useRef)(null),T=(0,l.useRef)(null),{mutate:E}=nx(r,n),{endOid:D,startOid:R}=(0,nw.Xv)(),A=e=>{S(e),N(!0)};if(!h.commentsData||null===h.commentsData.comments||h.commentsData.comments.length<1)return null;let O=(0,nv.Lm)(h),P=h.subjectType?.toLowerCase()==="line"?{lineRange:O}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:n_,"data-limit-height":x,children:[h.commentsData.comments.map((e,l)=>e.reviewVariantType===tZ.hH.Automated&&0===l?(0,i.jsx)(nb.y,{anchorPrefix:t,basePath:k,comment:e,isAnchorable:!0,isInlineComment:d,isInDialogMode:c,isOutdated:h.positioning?.isOutdated,isThreadResolved:!!h.isResolved,onQuoteReply:A,subjectId:m,threadId:h.id,threadPositionNumber:p,threadsConnectionId:y,viewerData:b},e.id):(0,i.jsx)(nj.U,{lineMarkersKey:n,isAnchorable:!0,index:l,threadPositionNumber:p,isFirstComment:0===l,isInlineComment:d,isLastChild:l===(h.commentsData?.comments.length??0)-1,anchorPrefix:t,comment:e,commentConnectionId:h.commentsData?.__id,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInDialogMode:c,isOutdated:h.positioning?.isOutdated,subjectId:m,threadId:h.id,onDeleteLineComment:u,onQuoteReply:A,threadCommentCount:h.commentsData?.comments.length,threadsConnectionId:y,isThreadResolved:!!h.isResolved,suggestedChangesConfig:v,applySuggestedChangesValidationData:P,viewerData:b,ghostUser:_},e.id)),h.reviewCommentsLimitExceeded&&(0,i.jsx)(nu.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(h.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),h.viewerCanReply&&(0,i.jsxs)("div",{id:nc.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":h.id,"data-marker-navigation-comment-id":`${h.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:c?0:-1,onFocus:e=>{T.current===e.target&&(w?T.current?.querySelector("textarea")?.focus():L.current?.focus())},ref:T,children:[w&&(0,i.jsx)(e_,{startLineNumber:O?.startLineNumber,lineNumber:O?.endLineNumber,batchingEnabled:e,condensed:!1,fileLevelComment:!0,filePath:r,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{N(!1),S(void 0),I("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>L.current?.focus())},quotedText:C,subjectId:m,threadId:h.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=h.commentsData?.comments[h.commentsData?.comments.length-1];E({text:e,submitBatch:i,inReplyTo:a?.databaseId,path:r,comparisonEndOid:D,comparisonStartOid:R},{onError:n,onSuccess:e=>{var n;(n=e.comment.databaseId)&&f(n.toString()),t?.()}}),I("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:v}),!w&&(0,i.jsx)(nd.z,{ref:L,onClick:()=>{I("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),N(!0)},children:"Write a reply"})]})]})})};try{nN.displayName||(nN.displayName="ReviewThread")}catch{}var nC=n(97695),nS=n(39698),nI=n(25407),nk=n(21067);let nL=(0,a.Z6)()?function(e,t){let n,i,a,r,l=(0,s.c)(12),o=(0,j.Kp)();l[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,nk.cj)(),l[0]=n):n=l[0];let d=n,c=(0,nf.jE)(),{updateThread:u}=(0,j.an)();return l[1]!==o?(i=async e=>{let{automatedReviewCommentId:t,reason:n,resolutionNote:i}=e,a=(0,nI.L7I)({basePath:o,automatedReviewCommentId:t}),s=await (0,nh.q$)(a,{method:"PUT",body:{reason:n,resolution_note:i}});(0,nh.R)(s)},l[1]=o,l[2]=i):i=l[2],l[3]!==o||l[4]!==e||l[5]!==t||l[6]!==c||l[7]!==u?(a=(n,i)=>{u(Number(i.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:d,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),c.invalidateQueries({queryKey:(0,ny.XG)(o)})},l[3]=o,l[4]=e,l[5]=t,l[6]=c,l[7]=u,l[8]=a):a=l[8],l[9]!==i||l[10]!==a?(r={mutationFn:i,onSuccess:a},l[9]=i,l[10]=a,l[11]=r):r=l[11],(0,np.n)(r)}:function(e,t){let n=(0,j.Kp)(),i=(0,nk.cj)(),a=(0,nf.jE)(),{updateThread:s}=(0,j.an)();return(0,np.n)({mutationFn:async({automatedReviewCommentId:e,reason:t,resolutionNote:i})=>{let a=(0,nI.L7I)({basePath:n,automatedReviewCommentId:e}),s=await (0,nh.q$)(a,{method:"PUT",body:{reason:t,resolution_note:i}});(0,nh.R)(s)},onSuccess:(r,l)=>{s(Number(l.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:i,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),a.invalidateQueries({queryKey:(0,ny.XG)(n)})}})},nT=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(11),l=(0,j.Kp)(),o=(0,nf.jE)(),{updateThread:d}=(0,j.an)();return r[0]!==l?(n=async e=>{let{automatedReviewCommentId:t}=e,n=(0,nI.Aav)({basePath:l,automatedReviewCommentId:t}),i=await (0,nh.q$)(n,{method:"PUT"});(0,nh.R)(i)},r[0]=l,r[1]=n):n=r[1],r[2]!==l||r[3]!==e||r[4]!==t||r[5]!==o||r[6]!==d?(i=(n,i)=>{d(Number(i.threadId),e,t,nE),o.invalidateQueries({queryKey:(0,ny.XG)(l)})},r[2]=l,r[3]=e,r[4]=t,r[5]=o,r[6]=d,r[7]=i):i=r[7],r[8]!==n||r[9]!==i?(a={mutationFn:n,onSuccess:i},r[8]=n,r[9]=i,r[10]=a):a=r[10],(0,np.n)(a)}:function(e,t){let n=(0,j.Kp)(),i=(0,nf.jE)(),{updateThread:a}=(0,j.an)();return(0,np.n)({mutationFn:async({automatedReviewCommentId:e})=>{let t=(0,nI.Aav)({basePath:n,automatedReviewCommentId:e}),i=await (0,nh.q$)(t,{method:"PUT"});(0,nh.R)(i)},onSuccess:(s,r)=>{a(Number(r.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}),i.invalidateQueries({queryKey:(0,ny.XG)(n)})}})};function nE(e){if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}var nD=n(73262);let nR=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(20),{automatedComment:l,thread:o,filePath:d,lineMarkersKey:c,setErrorMessage:u,setIsCollapsed:m,safeLocalStorage:h}=e,{mutate:f,isPending:p,error:g}=nL(d,c);r[0]!==l.id||r[1]!==f||r[2]!==h||r[3]!==u||r[4]!==m||r[5]!==o.id?(t=(e,t)=>{let{reason:n,resolutionNote:i}=e,{onSuccess:a}=t;f({automatedReviewCommentId:l.id,threadId:o.id,reason:n,resolutionNote:i},{onError:()=>u("Failed to dismiss"),onSuccess:()=>{a(),m(!0),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[0]=l.id,r[1]=f,r[2]=h,r[3]=u,r[4]=m,r[5]=o.id,r[6]=t):t=r[6];let y=t,{mutate:x,isPending:v}=nT(d,c);r[7]!==l.id||r[8]!==x||r[9]!==h||r[10]!==u||r[11]!==m||r[12]!==o.id?(n=()=>{x({automatedReviewCommentId:l.id,threadId:o.id},{onError:()=>u("Failed to reopen"),onSuccess:()=>{m(!1),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[7]=l.id,r[8]=x,r[9]=h,r[10]=u,r[11]=m,r[12]=o.id,r[13]=n):n=r[13];let b=n,_=p||v;return r[14]!==l||r[15]!==g||r[16]!==y||r[17]!==b||r[18]!==_?(a=(0,i.jsx)(nD.K,{automatedComment:l,dismissError:g,isButtonDisabled:_,onDismiss:y,onReopen:b,className:"p-2 border-top"}),r[14]=l,r[15]=g,r[16]=y,r[17]=b,r[18]=_,r[19]=a):a=r[19],a}:function({automatedComment:e,thread:t,filePath:n,lineMarkersKey:a,setErrorMessage:s,setIsCollapsed:r,safeLocalStorage:l}){let{mutate:o,isPending:d,error:c}=nL(n,a),{mutate:u,isPending:m}=nT(n,a);return(0,i.jsx)(nD.K,{automatedComment:e,dismissError:c,isButtonDisabled:d||m,onDismiss:({reason:n,resolutionNote:i},{onSuccess:a})=>{o({automatedReviewCommentId:e.id,threadId:t.id,reason:n,resolutionNote:i},{onError:()=>s("Failed to dismiss"),onSuccess:()=>{a(),r(!0),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},onReopen:()=>{u({automatedReviewCommentId:e.id,threadId:t.id},{onError:()=>s("Failed to reopen"),onSuccess:()=>{r(!1),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},className:"p-2 border-top"})};try{nR.displayName||(nR.displayName="InlineAutomatedReviewThreadActions")}catch{}let nA=(0,a.GV)()?function(e){let t,n=(0,s.c)(2),{children:a}=e;return n[0]!==a?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:a}),n[0]=a,n[1]=t):t=n[1],t}:function({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})};function nO({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?nF({positioning:t}):nP({positioning:t}):null}let nP=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{positioning:a}=e,r="LEFT"===a.endDiffSide?"L":"R",l=a.endLine??"";return n[0]!==r||n[1]!==l?(t=(0,i.jsxs)("h2",{className:ns,children:["Comment on line"," ",(0,i.jsxs)(nA,{children:[r,l]})]}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}:function({positioning:e}){let t="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:ns,children:["Comment on line"," ",(0,i.jsxs)(nA,{children:[t,e.endLine??""]})]})},nF=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(9),{positioning:l}=e,o="LEFT"===l.startDiffSide?"L":"R",d="LEFT"===l.endDiffSide?"L":"R",c=l.startLine??"";r[0]!==o||r[1]!==c?(t=(0,i.jsxs)(nA,{children:[o,c]}),r[0]=o,r[1]=c,r[2]=t):t=r[2];let u=l.endLine??"";return r[3]!==d||r[4]!==u?(n=(0,i.jsxs)(nA,{children:[d,u]}),r[3]=d,r[4]=u,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a=(0,i.jsxs)("h2",{className:ns,children:["Comment on lines"," ",t," ","to"," ",n]}),r[6]=t,r[7]=n,r[8]=a):a=r[8],a}:function({positioning:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:ns,children:["Comment on lines"," ",(0,i.jsxs)(nA,{children:[t,e.startLine??""]})," ","to"," ",(0,i.jsxs)(nA,{children:[n,e.endLine??""]})]})},nM=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,g,y,x,v,b,_,w,N,C,S,I,k,L,T,E,D,R,A,O,P,F,M,$=(0,s.c)(99);if($[0]!==e){let{fileAnchor:i,filePath:s,gridCellId:l,onDeleteLineComment:c,threadId:m,threadPositionNumber:x,lineMarkersKey:v,threadsConnectionId:b,isFirstThread:_,ghostUser:j,manuallyUpdateCommentsWithThisThreadId:w,suggestedChangesConfig:N,...C}=e;t=i,n=s,r=l,u=c,p=m,g=x,d=v,y=b,o=_,a=j,f=N,h=C,$[0]=e,$[1]=t,$[2]=n,$[3]=a,$[4]=r,$[5]=o,$[6]=d,$[7]=u,$[8]=h,$[9]=f,$[10]=p,$[11]=g,$[12]=y}else t=$[1],n=$[2],a=$[3],r=$[4],o=$[5],d=$[6],u=$[7],h=$[8],f=$[9],p=$[10],g=$[11],y=$[12];let B=(0,j._W)(p,n,d),{mutate:q}=(0,nC.H)(n,d),G=()=>{B&&(q({threadId:B.id},{onError:()=>Z("Failed to resolve thread"),onSuccess:()=>{X(!0),K.removeItem(`reviewThreadIsCollapsed_${p}`)}}),er("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},H=(0,l.useRef)(null),K=(0,ne.A)("localStorage"),W=B?.isResolved,[z,Q]=(0,l.useState)(""),Z=Q,[J,Y]=(0,l.useState)(W??!1),X=Y,ee=V(r),{disableDialogMode:et,enableDialogMode:en}=U();$[13]!==W||$[14]!==p?(x=[W,p],$[13]=W,$[14]=p,$[15]=x):x=$[15],(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${p}`);null!==e?X(JSON.parse(e)):W&&X(!0)},x);let ei=()=>{window.requestAnimationFrame(()=>{K.setItem(`reviewThreadIsCollapsed_${p}`,JSON.stringify(!J))}),X(nB)};$[16]!==r||$[17]!==B?(v={commentSubjectType:"pull request",gridCellId:r,markerRef:H,isThread:!0,thread:B},$[16]=r,$[17]=B,$[18]=v):v=$[18],t0(v);e:{let e=B?.positioning??B?.subject;if(!e){b=void 0;break e}if(t&&B&&e.startDiffSide&&e.endDiffSide&&e.startLine&&e.endLine&&f?.configureSuggestedChangesFromLineRange){let n,i=e.startLine??e.endLine,a=e.startDiffSide??e.endDiffSide,s="LEFT"===e.endDiffSide?"left":"right",r="LEFT"===a?"left":"right",l="LEFT"===a?"left":"right";if($[19]!==t||$[20]!==e.endLine||$[21]!==i||$[22]!==f||$[23]!==s||$[24]!==r||$[25]!==l){let a={diffAnchor:t,endLineNumber:e.endLine,endOrientation:s,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:l};n=f?.configureSuggestedChangesFromLineRange(a),$[19]=t,$[20]=e.endLine,$[21]=i,$[22]=f,$[23]=s,$[24]=r,$[25]=l,$[26]=n}else n=$[26];b=n;break e}b=void 0}let ea=b,{sendAnalyticsEvent:es}=(0,t$.s)(),er=es,{mutate:el}=(0,nS.i)(n,d);$[27]!==K||$[28]!==er||$[29]!==Z||$[30]!==X||$[31]!==B||$[32]!==el?(_=()=>{B&&(el({threadId:B.id},{onError:()=>Z("Failed to unresolve thread"),onSuccess:()=>{X(!1),K.removeItem(`reviewThreadIsCollapsed_${B.id}`)}}),er("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},$[27]=K,$[28]=er,$[29]=Z,$[30]=X,$[31]=B,$[32]=el,$[33]=_):_=$[33];let eo=_,ed=B?.commentsData?.comments[0]?.reviewVariantType===tZ.hH.Automated,ec=ed?B.commentsData?.comments[0]?.automatedComment:null,eu=ec&&ec.dismissable,em=ec&&ec.source===tZ.vk.LicenseCompliance;if(!B||!((B.commentsData?.comments?.length??0)>0))return null;let eh=!!B.isResolved;$[34]===Symbol.for("react.memo_cache_sentinel")?(w=(0,nk.M3)(),$[34]=w):w=$[34];let ef=w;$[35]!==B.commentsData?.comments?(N=ef&&B.commentsData?.comments?.some(n$),$[35]=B.commentsData?.comments,$[36]=N):N=$[36];let ep=N,eg=B.commentsData?.comments?.[0]?.createdAt,ey=B.commentsData?.comments?.[0]?.author?.login??"Unknown Author",ex=`${W?"Unresolve":"Resolve"} comment`;if(eg){let e;$[37]!==eg?(e=(0,t8.C)(new Date(eg)),$[37]=eg,$[38]=e):e=$[38];let t=e;ex=`${W?"Unresolve":"Resolve"} ${ey}'s comment, ${t}`}$[39]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)(na,{}),$[39]=C):C=$[39],$[40]===Symbol.for("react.memo_cache_sentinel")?(S=(0,eJ.$)("px-1",nr),$[40]=S):S=$[40];let ev=J?"Expand comment":"Collapse comment",eb=J?c.ChevronRightIcon:c.ChevronDownIcon;return $[41]!==ei||$[42]!==o||$[43]!==ev||$[44]!==eb?(I=(0,i.jsx)(m.K,{"aria-label":ev,icon:eb,size:"small",variant:"invisible",onClick:ei,"data-is-first-collapse-button":o}),$[41]=ei,$[42]=o,$[43]=ev,$[44]=eb,$[45]=I):I=$[45],$[46]!==B?(k=(0,i.jsx)(nO,{thread:B}),$[46]=B,$[47]=k):k=$[47],$[48]!==B.positioning?.isOutdated?(L=B.positioning?.isOutdated&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Outdated"}),$[48]=B.positioning?.isOutdated,$[49]=L):L=$[49],$[50]!==ed||$[51]!==eh?(T=eh&&!ed&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Resolved"}),$[50]=ed,$[51]=eh,$[52]=T):T=$[52],$[53]!==ec?.isDismissed?(E=ec?.isDismissed&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Dismissed"}),$[53]=ec?.isDismissed,$[54]=E):E=$[54],$[55]!==L||$[56]!==T||$[57]!==E?(D=(0,i.jsxs)("div",{className:nl,children:[L,T,E]}),$[55]=L,$[56]=T,$[57]=E,$[58]=D):D=$[58],$[59]!==I||$[60]!==k||$[61]!==D?(R=(0,i.jsxs)("div",{className:S,children:[I,k,D]}),$[59]=I,$[60]=k,$[61]=D,$[62]=R):R=$[62],$[63]===Symbol.for("react.memo_cache_sentinel")?(A=(0,i.jsxs)("div",{className:no,children:[(0,i.jsx)(eq.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),$[63]=A):A=$[63],$[64]!==z?(O=z&&(0,i.jsxs)(nn.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),z]}),$[64]=z,$[65]=O):O=$[65],$[66]!==ec||$[67]!==ea||$[68]!==et||$[69]!==eu||$[70]!==en||$[71]!==n||$[72]!==a||$[73]!==r||$[74]!==G||$[75]!==eo||$[76]!==J||$[77]!==ee||$[78]!==ep||$[79]!==W||$[80]!==eh||$[81]!==em||$[82]!==d||$[83]!==u||$[84]!==ex||$[85]!==h||$[86]!==K||$[87]!==Z||$[88]!==X||$[89]!==B||$[90]!==g||$[91]!==y?(P=!J&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nN,{lineMarkersKey:d,disableDialogMode:et,enableDialogMode:en,filePath:n,gridCellId:r,onDeleteLineComment:u,isInlineComment:!0,isInDialogMode:ee,thread:B,threadPositionNumber:g,threadsConnectionId:y,suggestedChangesConfig:ea,shouldLimitHeight:!1,...h,ghostUser:a}),ep&&!eu&&!em&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ej.Q,{"aria-label":ex,onClick:eh?eo:G,className:"mr-2",children:W?"Unresolve comment":"Resolve comment"}),eh&&B.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:B.resolvedBy})," marked this comment as resolved"]})]}),eu&&(0,i.jsx)(nR,{automatedComment:ec,thread:B,filePath:n,lineMarkersKey:d,setErrorMessage:Z,setIsCollapsed:X,safeLocalStorage:K})]}),$[66]=ec,$[67]=ea,$[68]=et,$[69]=eu,$[70]=en,$[71]=n,$[72]=a,$[73]=r,$[74]=G,$[75]=eo,$[76]=J,$[77]=ee,$[78]=ep,$[79]=W,$[80]=eh,$[81]=em,$[82]=d,$[83]=u,$[84]=ex,$[85]=h,$[86]=K,$[87]=Z,$[88]=X,$[89]=B,$[90]=g,$[91]=y,$[92]=P):P=$[92],$[93]!==O||$[94]!==P?(F=(0,i.jsxs)(l.Suspense,{fallback:A,children:[O,P]}),$[93]=O,$[94]=P,$[95]=F):F=$[95],$[96]!==R||$[97]!==F?(M=(0,i.jsx)(t9.t,{fallback:C,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:H,children:[R,F]})}),$[96]=R,$[97]=F,$[98]=M):M=$[98],M}:function({fileAnchor:e,filePath:t,gridCellId:n,onDeleteLineComment:a,threadId:s,threadPositionNumber:r,lineMarkersKey:o,threadsConnectionId:d,isFirstThread:u,ghostUser:h,manuallyUpdateCommentsWithThisThreadId:f,suggestedChangesConfig:p,...g}){let y=(0,j._W)(s,t,o),{mutate:x}=(0,nC.H)(t,o),v=(0,l.useRef)(null),b=(0,ne.A)("localStorage"),_=y?.isResolved,[w,N]=(0,l.useState)(""),[C,S]=(0,l.useState)(_??!1),I=V(n),{disableDialogMode:k,enableDialogMode:L}=U();(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${s}`);null!==e?S(JSON.parse(e)):_&&S(!0)},[_,s]),t0({commentSubjectType:"pull request",gridCellId:n,markerRef:v,isThread:!0,thread:y});let T=(0,l.useMemo)(()=>{let t=y?.positioning??y?.subject;if(t&&e&&y&&t.startDiffSide&&t.endDiffSide&&t.startLine&&t.endLine&&p?.configureSuggestedChangesFromLineRange){let n=t.startLine??t.endLine,i=t.startDiffSide??t.endDiffSide,a={diffAnchor:e,endLineNumber:t.endLine,endOrientation:"LEFT"===t.endDiffSide?"left":"right",startLineNumber:n,startOrientation:"LEFT"===i?"left":"right",firstSelectedLineNumber:n,firstSelectedOrientation:"LEFT"===i?"left":"right"};return p?.configureSuggestedChangesFromLineRange(a)}},[e,y,p]),{sendAnalyticsEvent:E}=(0,t$.s)(),{mutate:D}=(0,nS.i)(t,o),R=y?.commentsData?.comments[0]?.reviewVariantType===tZ.hH.Automated,A=R?y.commentsData?.comments[0]?.automatedComment:null,O=A&&A.dismissable,P=A&&A.source===tZ.vk.LicenseCompliance;if(!y||!((y.commentsData?.comments?.length??0)>0))return null;let F=!!y.isResolved,M=(0,nk.M3)()&&y.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),$=y.commentsData?.comments?.[0]?.createdAt,B=y.commentsData?.comments?.[0]?.author?.login??"Unknown Author",q=`${_?"Unresolve":"Resolve"} comment`;if($){let e=(0,t8.C)(new Date($));q=`${_?"Unresolve":"Resolve"} ${B}'s comment, ${e}`}return(0,i.jsx)(t9.t,{fallback:(0,i.jsx)(na,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:v,children:[(0,i.jsxs)("div",{className:(0,eJ.$)("px-1",nr),children:[(0,i.jsx)(m.K,{"aria-label":C?"Expand comment":"Collapse comment",icon:C?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{b.setItem(`reviewThreadIsCollapsed_${s}`,JSON.stringify(!C))}),S(e=>!e)},"data-is-first-collapse-button":u}),(0,i.jsx)(nO,{thread:y}),(0,i.jsxs)("div",{className:nl,children:[y.positioning?.isOutdated&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Outdated"}),F&&!R&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Resolved"}),A?.isDismissed&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Dismissed"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:no,children:[(0,i.jsx)(eq.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[w&&(0,i.jsxs)(nn.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),w]}),!C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nN,{lineMarkersKey:o,disableDialogMode:k,enableDialogMode:L,filePath:t,gridCellId:n,onDeleteLineComment:a,isInlineComment:!0,isInDialogMode:I,thread:y,threadPositionNumber:r,threadsConnectionId:d,suggestedChangesConfig:T,shouldLimitHeight:!1,...g,ghostUser:h}),M&&!O&&!P&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ej.Q,{"aria-label":q,onClick:F?()=>{y&&(D({threadId:y.id},{onError:()=>N("Failed to unresolve thread"),onSuccess:()=>{S(!1),b.removeItem(`reviewThreadIsCollapsed_${y.id}`)}}),E("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{y&&(x({threadId:y.id},{onError:()=>N("Failed to resolve thread"),onSuccess:()=>{S(!0),b.removeItem(`reviewThreadIsCollapsed_${s}`)}}),E("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:_?"Unresolve comment":"Resolve comment"}),F&&y.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:y.resolvedBy})," marked this comment as resolved"]})]}),O&&(0,i.jsx)(nR,{automatedComment:A,thread:y,filePath:t,lineMarkersKey:o,setErrorMessage:N,setIsCollapsed:S,safeLocalStorage:b})]})]})]})})};function n$(e){return e.state?.toUpperCase()!=="PENDING"}function nB(e){return!e}try{nA.displayName||(nA.displayName="Emphasis")}catch{}try{nO.displayName||(nO.displayName="ThreadBanner")}catch{}try{nP.displayName||(nP.displayName="SingleLineThreadBanner")}catch{}try{nF.displayName||(nF.displayName="MultineLineThreadBanner")}catch{}try{nM.displayName||(nM.displayName="InlineReviewThread")}catch{}let nV=(0,a.GV)()?function(e,t,n){let i,a=(0,s.c)(5),{enableDialogMode:r}=U();return a[0]!==t||a[1]!==n||a[2]!==r||a[3]!==e?(i=(i,a)=>{t.current?.classList.contains("diff-text-cell")&&(r(e),n("USER_EXPANDED_MARKERS"),(void 0===i?{shouldFocusFirstMarker:!0}:i).shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):a&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${a}"]`)?.focus()},0))},a[0]=t,a[1]=n,a[2]=r,a[3]=e,a[4]=i):i=a[4],i}:function(e,t,n){let{enableDialogMode:i}=U();return(0,l.useCallback)((a={shouldFocusFirstMarker:!0},s)=>{t.current?.classList.contains("diff-text-cell")&&(i(e),n("USER_EXPANDED_MARKERS"),a.shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):s&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${s}"]`)?.focus()},0))},[t,i,e,n])},nU={[tZ.UZ.Failure]:0,[tZ.UZ.Warning]:1,[tZ.UZ.Notice]:2},nq=(0,a.GV)()?function(e){let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,i.jsx)(tV.j,{children:(0,i.jsx)(nG,{...e})}),n[0]=e,n[1]=t):t=n[1],t}:function(e){return(0,i.jsx)(tV.j,{children:(0,i.jsx)(nG,{...e})})},nG=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,y,x,v,b,_,w,N,C,S,I,k,L,T,E,D,R,A,O,P,F,M,$,B,q,G,H=(0,s.c)(104);if(H[0]!==e){let{annotations:i,backgroundColor:s,cellRef:l,dispatchMarkersStatus:c,children:m,conversationListThreads:g,inlineMarkersRef:j,isMarkerListOpen:I,isRowSelected:k,lineMarkersKey:L,fileAnchor:T,filePath:E,gridCellId:D,gutterSizeOffset:R,lineType:A,onCloseConversationList:O,onCloseFocusMode:P,onDeleteLineComment:F,returnFocusRef:M,threadsConnectionId:$,suggestedChangesConfig:B,manuallyUpdateCommentsWithThisThreadId:V,ghostUser:U,...q}=e;t=i,n=s,a=l,d=c,r=m,o=g,x=j,v=L,u=T,h=E,p=D,y=R,_=P,w=F,S=$,C=B,b=V,f=U,N=q,H[0]=e,H[1]=t,H[2]=n,H[3]=a,H[4]=r,H[5]=o,H[6]=d,H[7]=u,H[8]=h,H[9]=f,H[10]=p,H[11]=y,H[12]=x,H[13]=v,H[14]=b,H[15]=_,H[16]=w,H[17]=N,H[18]=C,H[19]=S}else t=H[1],n=H[2],a=H[3],r=H[4],o=H[5],d=H[6],u=H[7],h=H[8],f=H[9],p=H[10],y=H[11],x=H[12],v=H[13],b=H[14],_=H[15],w=H[16],N=H[17],C=H[18],S=H[19];let K=V(p),{disableDialogMode:W,enableDialogMode:z}=U(),Q=nV(p,a,d),Z=(0,l.useRef)(null);H[20]!==t?(I=[...t].sort(nz),H[20]=t,H[21]=I):I=H[21];let J=I;e:{let e;if(r){let e,t;H[22]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},H[22]=e):e=H[22],H[23]!==o||H[24]!==J?(t=[...o,e,...J],H[23]=o,H[24]=J,H[25]=t):t=H[25],k=t;break e}H[26]!==o||H[27]!==J?(e=[...o,...J],H[26]=o,H[27]=J,H[28]=e):e=H[28],k=e}let Y=k,X=nW;H[29]!==z||H[30]!==p||H[31]!==K?(L=e=>{X(e),K||z(p)},H[29]=z,H[30]=p,H[31]=K,H[32]=L):L=H[32];let ee=L;H[33]!==W||H[34]!==K?(T=e=>{e.target&&K&&(e.target.closest("[data-inline-markers]")||W())},H[33]=W,H[34]=K,H[35]=T):T=H[35];let et=T;H[36]!==et?(E=()=>(g.XC?.addEventListener("mousedown",et),()=>g.XC?.removeEventListener("mousedown",et)),D=[et],H[36]=et,H[37]=E,H[38]=D):(E=H[37],D=H[38]),(0,l.useEffect)(E,D);let en=(0,j.mF)();H[39]!==t||H[40]!==o||H[41]!==Q||H[42]!==en?(R=()=>{if(en){let e=o.map(nK),n=t.map(nH);(e.includes(en)||n.includes(en))&&Q({shouldFocusFirstMarker:!1},en)}},A=[en,Q,o,t],H[39]=t,H[40]=o,H[41]=Q,H[42]=en,H[43]=R,H[44]=A):(R=H[43],A=H[44]),(0,l.useEffect)(R,A);let ei=!K;H[45]!==Y||H[46]!==ei?(O={containerRef:Z,markers:Y,disabled:ei},H[45]=Y,H[46]=ei,H[47]=O):O=H[47],tq(O);let ea=K?t7:"";H[48]!==ea?(P=(0,eJ.$)("d-flex pt-1",ea),H[48]=ea,H[49]=P):P=H[49],H[50]!==n||H[51]!==y||H[52]!==K?(F=K?{marginRight:`-${y}`,backgroundColor:n}:{marginRight:`-${y}`},H[50]=n,H[51]=y,H[52]=K,H[53]=F):F=H[53];let es=K?"false":"true";if(H[54]!==o||H[55]!==u||H[56]!==h||H[57]!==f||H[58]!==p||H[59]!==K||H[60]!==v||H[61]!==b||H[62]!==Y||H[63]!==w||H[64]!==N||H[65]!==C||H[66]!==S){let e;H[68]!==u||H[69]!==h||H[70]!==f||H[71]!==p||H[72]!==K||H[73]!==v||H[74]!==b||H[75]!==Y||H[76]!==w||H[77]!==N||H[78]!==C||H[79]!==S?(e=(e,t)=>(0,i.jsx)("div",{className:(0,eJ.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===Y.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:K?0:-1,children:(0,i.jsx)(nM,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:b,isFirstThread:0===t,filePath:h,lineMarkersKey:v,fileAnchor:u,gridCellId:p,onDeleteLineComment:w,threadId:e.id,threadsConnectionId:S,suggestedChangesConfig:C,ghostUser:f,...N})},`review-thread-${e.id}`),H[68]=u,H[69]=h,H[70]=f,H[71]=p,H[72]=K,H[73]=v,H[74]=b,H[75]=Y,H[76]=w,H[77]=N,H[78]=C,H[79]=S,H[80]=e):e=H[80],M=o.map(e),H[54]=o,H[55]=u,H[56]=h,H[57]=f,H[58]=p,H[59]=K,H[60]=v,H[61]=b,H[62]=Y,H[63]=w,H[64]=N,H[65]=C,H[66]=S,H[67]=M}else M=H[67];if(H[81]!==p||H[82]!==Y||H[83]!==J){let e;H[85]!==p||H[86]!==Y?(e=(e,t)=>{let n=0===t&&e===Y[0];return(0,i.jsx)(t3,{annotation:e,gridCellId:p,isFirstMarker:n},`annotation-${e.id}`)},H[85]=p,H[86]=Y,H[87]=e):e=H[87],$=J.map(e),H[81]=p,H[82]=Y,H[83]=J,H[84]=$}else $=H[84];return H[88]!==r||H[89]!==M||H[90]!==$?(B=(0,i.jsxs)("div",{className:t5,ref:Z,children:[M,r,$]}),H[88]=r,H[89]=M,H[90]=$,H[91]=B):B=H[91],H[92]!==o.length||H[93]!==K||H[94]!==_?(q=K&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,eJ.$)(t4,"ml-2 position-relative",0===o.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:_,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&_()}}),H[92]=o.length,H[93]=K,H[94]=_,H[95]=q):q=H[95],H[96]!==ee||H[97]!==x||H[98]!==P||H[99]!==F||H[100]!==es||H[101]!==B||H[102]!==q?(G=(0,i.jsxs)("div",{className:P,style:F,"aria-hidden":es,onFocus:ee,onClick:X,onKeyUp:X,onMouseDown:X,onMouseUp:X,"data-inline-markers":!0,ref:x,children:[B,q]}),H[96]=ee,H[97]=x,H[98]=P,H[99]=F,H[100]=es,H[101]=B,H[102]=q,H[103]=G):G=H[103],G}:function({annotations:e,backgroundColor:t,cellRef:n,dispatchMarkersStatus:a,children:s,conversationListThreads:r,inlineMarkersRef:o,isMarkerListOpen:d,isRowSelected:u,lineMarkersKey:h,fileAnchor:f,filePath:p,gridCellId:y,gutterSizeOffset:x,lineType:v,onCloseConversationList:b,onCloseFocusMode:_,onDeleteLineComment:w,returnFocusRef:N,threadsConnectionId:C,suggestedChangesConfig:S,manuallyUpdateCommentsWithThisThreadId:I,ghostUser:k,...L}){let T=V(y),{disableDialogMode:E,enableDialogMode:D}=U(),R=nV(y,n,a),A=(0,l.useRef)(null),O=(0,l.useMemo)(()=>[...e].sort((e,t)=>nU[e.annotationLevel]-nU[t.annotationLevel]),[e]),P=(0,l.useMemo)(()=>s?[...r,{id:"new-comment"},...O]:[...r,...O],[s,r,O]),F=e=>e.stopPropagation(),M=(0,l.useCallback)(e=>{e.target&&T&&(e.target.closest("[data-inline-markers]")||E())},[E,T]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",M),()=>g.XC?.removeEventListener("mousedown",M)),[M]);let $=(0,j.mF)();return(0,l.useEffect)(()=>{if($){let t=r.map(e=>e.id),n=e.map(e=>e.id);(t.includes($)||n.includes($))&&R({shouldFocusFirstMarker:!1},$)}},[$,R,r,e]),tq({containerRef:A,markers:P,disabled:!T}),(0,i.jsxs)("div",{className:(0,eJ.$)("d-flex pt-1",T?t7:""),style:T?{marginRight:`-${x}`,backgroundColor:t}:{marginRight:`-${x}`},"aria-hidden":T?"false":"true",onFocus:e=>{F(e),T||D(y)},onClick:F,onKeyUp:F,onMouseDown:F,onMouseUp:F,"data-inline-markers":!0,ref:o,children:[(0,i.jsxs)("div",{className:t5,ref:A,children:[r.map((e,t)=>(0,i.jsx)("div",{className:(0,eJ.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===P.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:T?0:-1,children:(0,i.jsx)(nM,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:I,isFirstThread:0===t,filePath:p,lineMarkersKey:h,fileAnchor:f,gridCellId:y,onDeleteLineComment:w,threadId:e.id,threadsConnectionId:C,suggestedChangesConfig:S,ghostUser:k,...L})},`review-thread-${e.id}`)),s,O.map((e,t)=>{let n=0===t&&e===P[0];return(0,i.jsx)(t3,{annotation:e,gridCellId:y,isFirstMarker:n},`annotation-${e.id}`)})]}),T&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,eJ.$)(t4,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:_,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&_()}})]})};function nH(e){return e.id}function nK(e){return e.id}function nW(e){return e.stopPropagation()}function nz(e,t){return nU[e.annotationLevel]-nU[t.annotationLevel]}try{nq.displayName||(nq.displayName="InlineMarkers")}catch{}try{nG.displayName||(nG.displayName="InlineMarkersInternal")}catch{}var nQ=n(18799),nZ=n(40260);async function nJ({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:a,isLeftSide:s}){let r,l=window.getSelection();if(l&&""!==l.toString())return void document.execCommand("copy");let o=n().length<=1;switch(!0){case o:r=nX(e);break;case a:r=n0({diffLines:t,diffOrientation:s?"left":"right",getSelectedLineRange:i});break;default:r=nY({diffLines:t,getSelectedLineRange:i})}await (0,nZ.D)(r)}let nY=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:a,startLineNumber:s,endLineNumber:r}=n,l=0,o=0;return e.length>1&&(l=e.findIndex(e=>"left"===i?e.left===s:e.right===s),o=e.findIndex(e=>"left"===a?e.left===r:e.right===r)),(0,I.Ls)(e.slice(l,o+1))},nX=e=>(0,I.Po)(e)||!e?"":(0,I.Ls)([e]),n0=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let a=(0,I.Mk)(e),s=a.leftLines,r=a.rightLines,{selectedRightLines:l,selectedLeftLines:o}=(0,S.A)({selectedLineRange:i,leftLines:s,rightLines:r});return"left"===t?(0,I.Ls)(o):(0,I.Ls)(l)},n1=(0,l.createContext)(null),n2=(0,a.GV)()?function(e){let t,n,a,r,o,d,c=(0,s.c)(14),{children:u}=e,[m,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(),[g,y]=(0,l.useState)(),[x,v]=(0,l.useState)(),[b,_]=(0,l.useState)(),j=!!f||!!g||!!x||!!b;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{h(!0)},c[0]=t):t=c[0];let w=t;c[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{h(!1)},c[1]=n):n=c[1];let N=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t,n)=>{switch(e){case"context-menu":p(t),_(void 0),v(void 0),y(void 0);break;case"new-conversation":_({cellId:t,withSuggestedChange:n?.withSuggestedChange}),p(void 0),v(void 0),y(void 0);break;case"marker-details":v(t),p(void 0),y(void 0),_(void 0);break;case"marker-list":y(t),p(void 0),_(void 0),v(void 0)}},c[2]=a):a=c[2];let C=a;c[3]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{switch(e){case"context-menu":p(void 0);break;case"new-conversation":_(void 0);break;case"marker-details":v(void 0);break;case"marker-list":y(void 0)}},c[3]=r):r=c[3];let S=r;c[4]!==j||c[5]!==m||c[6]!==f||c[7]!==x||c[8]!==g||c[9]!==b?(o={isActionBarVisible:m,showActionBar:w,hideActionBar:N,closeDialog:S,openDialog:C,anyMenuOpen:j,openContextMenuCell:f,openMarkersListCell:g,openMarkerDetailsCell:x,openNewConversationCell:b},c[4]=j,c[5]=m,c[6]=f,c[7]=x,c[8]=g,c[9]=b,c[10]=o):o=c[10];let I=o;return c[11]!==u||c[12]!==I?(d=(0,i.jsx)(n1.Provider,{value:I,children:u}),c[11]=u,c[12]=I,c[13]=d):d=c[13],d}:function({children:e}){let[t,n]=(0,l.useState)(!1),[a,s]=(0,l.useState)(),[r,o]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,m]=(0,l.useState)(),h=(0,l.useMemo)(()=>!!a||!!r||!!d||!!u,[a,d,r,u]),f=(0,l.useCallback)(()=>{n(!0)},[]),p=(0,l.useCallback)(()=>{n(!1)},[]),g=(0,l.useCallback)((e,t,n)=>{switch(e){case"context-menu":s(t),m(void 0),c(void 0),o(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),c(void 0),o(void 0);break;case"marker-details":c(t),s(void 0),o(void 0),m(void 0);break;case"marker-list":o(t),s(void 0),m(void 0),c(void 0)}},[]),y=(0,l.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":c(void 0);break;case"marker-list":o(void 0)}},[]),x=(0,l.useMemo)(()=>({isActionBarVisible:t,showActionBar:f,hideActionBar:p,closeDialog:y,openDialog:g,anyMenuOpen:h,openContextMenuCell:a,openMarkersListCell:r,openMarkerDetailsCell:d,openNewConversationCell:u}),[t,f,p,y,g,h,a,r,d,u]);return(0,i.jsx)(n1.Provider,{value:x,children:e})},n3=(0,a.GV)()?function(){let e=(0,l.useContext)(n1);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}:function(){let e=(0,l.useContext)(n1);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e};try{n1.displayName||(n1.displayName="MarkersDialogContext")}catch{}try{n2.displayName||(n2.displayName="MarkersDialogContextProvider")}catch{}let n4=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(27),{cellId:u,actionBarRef:m}=e,[h,f]=(0,l.useState)(m),{openDialog:p,closeDialog:g,openContextMenuCell:y,anyMenuOpen:x}=n3(),v=y===u;c[0]!==u||c[1]!==p?(t=()=>{p("context-menu",u)},c[0]=u,c[1]=p,c[2]=t):t=c[2];let b=t;c[3]!==m||c[4]!==b?(n=()=>{f(m),b()},c[3]=m,c[4]=b,c[5]=n):n=c[5];let _=n;c[6]!==g?(i=()=>{g("context-menu")},c[6]=g,c[7]=i):i=c[7];let j=i;c[8]!==j||c[9]!==v||c[10]!==b?(a=()=>{v?j():b()},c[8]=j,c[9]=v,c[10]=b,c[11]=a):a=c[11];let w=a;c[12]!==m||c[13]!==w?(r=()=>{f(m),w()},c[12]=m,c[13]=w,c[14]=r):r=c[14];let N=r;c[15]!==g?(o=()=>{g("marker-list")},c[15]=g,c[16]=o):o=c[16];let C=o;return c[17]!==x||c[18]!==j||c[19]!==C||c[20]!==v||c[21]!==b||c[22]!==_||c[23]!==h||c[24]!==w||c[25]!==N?(d={isContextMenuOpen:v,openContextMenu:b,openContextMenuFromActionBar:_,closeContextMenu:j,toggleContextMenu:w,toggleContextMenuFromActionBar:N,closeMarkerListDialog:C,returnFocusRef:h,anyMenuOpen:x},c[17]=x,c[18]=j,c[19]=C,c[20]=v,c[21]=b,c[22]=_,c[23]=h,c[24]=w,c[25]=N,c[26]=d):d=c[26],d}:function({cellId:e,actionBarRef:t}){let[n,i]=(0,l.useState)(t),{openDialog:a,closeDialog:s,openContextMenuCell:r,anyMenuOpen:o}=n3(),d=(0,l.useMemo)(()=>r===e,[e,r]),c=(0,l.useCallback)(()=>{a("context-menu",e)},[e,a]),u=(0,l.useCallback)(()=>{i(t),c()},[t,c]),m=(0,l.useCallback)(()=>{s("context-menu")},[s]),h=(0,l.useCallback)(()=>{d?m():c()},[m,d,c]),f=(0,l.useCallback)(()=>{i(t),h()},[t,h]);return{isContextMenuOpen:d,openContextMenu:c,openContextMenuFromActionBar:u,closeContextMenu:m,toggleContextMenu:h,toggleContextMenuFromActionBar:f,closeMarkerListDialog:(0,l.useCallback)(()=>{s("marker-list")},[s]),returnFocusRef:n,anyMenuOpen:o}},n5=(0,a.GV)()?function(e){let t,n,i,a,r,l=(0,s.c)(17),{cellId:o,onOpenDialog:d}=e,{openDialog:c,closeDialog:u,openNewConversationCell:m}=n3(),{sendAnalyticsEvent:h}=(0,t$.s)(),f=m?.cellId===o;l[0]!==o||l[1]!==d||l[2]!==c?(t=e=>{d?.(),c("new-conversation",o,e)},l[0]=o,l[1]=d,l[2]=c,l[3]=t):t=l[3];let p=t;l[4]!==p?(n=()=>{p()},l[4]=p,l[5]=n):n=l[5];let g=n;l[6]!==p||l[7]!==h?(i=()=>{p({withSuggestedChange:!0}),h("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},l[6]=p,l[7]=h,l[8]=i):i=l[8];let y=i;l[9]!==u?(a=()=>{u("new-conversation")},l[9]=u,l[10]=a):a=l[10];let x=a,v=m?.withSuggestedChange;return l[11]!==x||l[12]!==f||l[13]!==v||l[14]!==g||l[15]!==y?(r={isNewConversationDialogOpen:f,startNewConversation:g,startNewConversationWithSuggestedChange:y,closeNewConversation:x,shouldStartNewConversationWithSuggestedChange:v},l[11]=x,l[12]=f,l[13]=v,l[14]=g,l[15]=y,l[16]=r):r=l[16],r}:function({cellId:e,onOpenDialog:t}){let{openDialog:n,closeDialog:i,openNewConversationCell:a}=n3(),{sendAnalyticsEvent:s}=(0,t$.s)(),r=(0,l.useMemo)(()=>a?.cellId===e,[e,a]),o=(0,l.useCallback)(i=>{t?.(),n("new-conversation",e,i)},[e,t,n]),d=(0,l.useCallback)(()=>{o()},[o]),c=(0,l.useCallback)(()=>{o({withSuggestedChange:!0}),s("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[o,s]);return{isNewConversationDialogOpen:r,startNewConversation:d,startNewConversationWithSuggestedChange:c,closeNewConversation:(0,l.useCallback)(()=>{i("new-conversation")},[i]),shouldStartNewConversationWithSuggestedChange:(0,l.useMemo)(()=>a?.withSuggestedChange,[a])}},n6=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c,u=(0,s.c)(29),{cellRef:m}=e,{showActionBar:h,hideActionBar:f,anyMenuOpen:p}=n3(),[g,y]=(0,l.useState)(!1);u[0]!==h?(t=()=>{h()},u[0]=h,u[1]=t):t=u[1];let x=t;u[2]!==p||u[3]!==m||u[4]!==f?(n=e=>{p||m.current&&m.current.contains(e.relatedTarget)||f()},u[2]=p,u[3]=m,u[4]=f,u[5]=n):n=u[5];let v=n;u[6]!==h?(i=()=>{h()},u[6]=h,u[7]=i):i=u[7];let b=i;u[8]!==p||u[9]!==m||u[10]!==f?(a=()=>{p||m.current===document.activeElement||m.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||f()},u[8]=p,u[9]=m,u[10]=f,u[11]=a):a=u[11];let _=a;u[12]!==p||u[13]!==m||u[14]!==f?(r=e=>{m.current&&(p||(m.current.contains(e.relatedTarget)?m.current===e.relatedTarget&&y(!1):(f(),y(!1))))},u[12]=p,u[13]=m,u[14]=f,u[15]=r):r=u[15];let j=r;u[16]!==p?(o=e=>{p||(e.stopPropagation(),y(!0))},u[16]=p,u[17]=o):o=u[17];let w=o;u[18]!==p?(d=e=>{!p&&tO(e.key)&&e.stopPropagation()},u[18]=p,u[19]=d):d=u[19];let N=d;return u[20]!==j||u[21]!==w||u[22]!==N||u[23]!==v||u[24]!==x||u[25]!==b||u[26]!==_||u[27]!==g?(c={isActionBarFocused:g,handleCellBlur:v,handleCellFocus:x,handleCellMouseEnter:b,handleCellMouseLeave:_,handleActionBarBlur:j,handleActionBarFocusCapture:w,handleActionBarKeydownCapture:N},u[20]=j,u[21]=w,u[22]=N,u[23]=v,u[24]=x,u[25]=b,u[26]=_,u[27]=g,u[28]=c):c=u[28],c}:function({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=n3(),[a,s]=(0,l.useState)(!1),r=(0,l.useCallback)(()=>{t()},[t]),o=(0,l.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),d=(0,l.useCallback)(()=>{t()},[t]),c=(0,l.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||n()},[i,e,n]),u=(0,l.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&s(!1):(n(),s(!1))))},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:o,handleCellFocus:r,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,l.useCallback)(e=>{i||(e.stopPropagation(),s(!0))},[i]),handleActionBarKeydownCapture:(0,l.useCallback)(e=>{!i&&tO(e.key)&&e.stopPropagation()},[i])}};var n7=n(50899),n8=n(54571);let n9=(0,a.GV)()?function(e,t){let n,i,a,r,l,o=(0,s.c)(17),{sendAnalyticsEvent:d}=(0,t$.s)(),c=A(),u=(0,nw.ww)(),m=M();o[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],o[0]=n):n=o[0];let[h]=(0,n8.I)(it,!0,n);o[1]!==c||o[2]!==e?(i=function(t){if(!t)return"DELETION"!==e.type;if("right"===t.startOrientation&&"right"===t.endOrientation)return!0;if(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let n=c(t)?.selectedLeftLines;return!!n?.every(ie)},o[1]=c,o[2]=e,o[3]=i):i=o[3];let f=i;o[4]!==c||o[5]!==h||o[6]!==e?(a=function(t){let n=t?c(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return h?"":(0,I.Ls)(n);if(!e)return"";let[i]=(0,I.dv)(e.text,e.type);return i},o[4]=c,o[5]=h,o[6]=e,o[7]=a):a=o[7];let p=a;o[8]!==p||o[9]!==u||o[10]!==d||o[11]!==f?(r=function(e,t){let n=f(e)&&!u;return{isValidSuggestionRange:n,showSuggestChangesButton:n,sourceContentFromDiffLines:n?p(e):void 0,onInsertSuggestedChange:()=>{d("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:t}},o[8]=p,o[9]=u,o[10]=d,o[11]=f,o[12]=r):r=o[12];let g=(0,n7.K)(r);return o[13]!==g||o[14]!==m||o[15]!==t?(l={getSelectedLineRange:m,configureSuggestedChangesFromLineRange:g,shouldStartNewConversationWithSuggestedChange:t},o[13]=g,o[14]=m,o[15]=t,o[16]=l):l=o[16],l}:function(e,t){let{sendAnalyticsEvent:n}=(0,t$.s)(),i=A(),a=(0,nw.ww)(),s=M(),[r]=(0,n8.I)(()=>!1,!0,[]),o=(0,n7.K)(function(t,s){let l=function(t){if(!t)return"DELETION"!==e.type;if("right"===t.startOrientation&&"right"===t.endOrientation)return!0;if(t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let n=i(t)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(t)&&!a;return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(t){let n=t?i(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return r?"":(0,I.Ls)(n);if(!e)return"";let[a]=(0,I.dv)(e.text,e.type);return a}(t):void 0,onInsertSuggestedChange:()=>{n("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:s}});return(0,l.useMemo)(()=>({getSelectedLineRange:s,configureSuggestedChangesFromLineRange:o,shouldStartNewConversationWithSuggestedChange:t}),[o,s,t])};function ie(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}function it(){return!1}var ii=n(21513),ia=n(73783),is=n(72538),ir=n(90274);let il={compact:{avatarSize:18},relaxed:{avatarSize:20}};function io({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:a}){(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:s}=il[t],r=n.length+a.length;if(0===r)return null;let o={},c=[];a.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:tR?.login&&(o[tR.login]=tR)}));let u=[...c.sort((e,t)=>(ir.GF[e.level]?.priority||0)<(ir.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(ir.S,{annotationLevel:t.level},t.id):(0,i.jsx)(ir.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(tR?.avatarUrl||" ");return(0,i.jsx)(d.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=r>9?"9+":`${r}`;return(0,i.jsxs)("div",{className:(0,eJ.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--GS12p"),children:[(0,i.jsx)(is.A,{disableExpand:!0,size:s,className:(0,eJ.$)("CommentIndicator-module__AvatarStack--LfU8D","relaxed"===t?"CommentIndicator-module__Relaxed--oSXaK":"CommentIndicator-module__Compact--Q1u86"),children:u}),(0,i.jsx)("span",{className:(0,eJ.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--ZLD5t"),children:m})]})}try{io.displayName||(io.displayName="CommentIndicator")}catch{}var id=n(89141);let ic=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(18),{currentHunk:l,nextHunk:o,previousHunk:d}=e,{addInjectedContextLines:c}=z(),u=!!l&&0!==l.startBlobLineNumber,m=!!l&&!!o;r[0]!==c||r[1]!==u||r[2]!==l||r[3]!==d?(t=()=>{if(!u||!l)return;let e=d&&l&&d.endBlobLineNumber+20>l.startBlobLineNumber,t={start:Math.max(0,l.startBlobLineNumber-20),end:l.startBlobLineNumber};e&&(t.start=d.endBlobLineNumber+1),c(t)},r[0]=c,r[1]=u,r[2]=l,r[3]=d,r[4]=t):t=r[4];let h=t;r[5]!==c||r[6]!==m||r[7]!==l?(n=()=>{m&&l&&c({start:l.endBlobLineNumber+1,end:l.endBlobLineNumber+1+20})},r[5]=c,r[6]=m,r[7]=l,r[8]=n):n=r[8];let f=n;r[9]!==c||r[10]!==d?(i=()=>{d&&c({start:d.endBlobLineNumber+1,end:d.endBlobLineNumber+1+20})},r[9]=c,r[10]=d,r[11]=i):i=r[11];let p=i;return r[12]!==m||r[13]!==u||r[14]!==f||r[15]!==p||r[16]!==h?(a={expandStartOfHunk:h,expandEndOfHunk:f,expandEndOfPreviousHunk:p,canExpandEndOfHunk:m,canExpandStartOfHunk:u},r[12]=m,r[13]=u,r[14]=f,r[15]=p,r[16]=h,r[17]=a):a=r[17],a}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{addInjectedContextLines:i}=z(),a=!!e&&0!==e.startBlobLineNumber,s=!!e&&!!t;return{expandStartOfHunk:()=>{if(!a||!e)return;let t=n&&e&&n.endBlobLineNumber+20>e.startBlobLineNumber,s={start:Math.max(0,e.startBlobLineNumber-20),end:e.startBlobLineNumber};t&&(s.start=n.endBlobLineNumber+1),i(s)},expandEndOfHunk:()=>{s&&e&&i({start:e.endBlobLineNumber+1,end:e.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:s,canExpandStartOfHunk:a}};var iu=n(29255);let im={left:"L",right:"R"},ih="Add comment",ip="Suggest change";function ig(e,t,n){let i=n&&!(0,I.Ji)(t)?im.left:im.right;return`${e} on line ${i}${t.blobLineNumber}`}function iy(e,t,n,i,a){return e.right===t.right?n||i&&a?` on line R${e.right}`:`, modified line R${t.right}`:n||i&&a?` on lines R${e.right}-R${t.right}`:`, modified lines R${e.right}-R${t.right}`}function ix(e,t,n){return e.left===t.left?n?` on line L${e.left}`:`, original line L${e.left}`:n?` on lines L${e.left}-L${t.right}`:`, original lines L${e.left}-L${t.left}`}let iv=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C=(0,s.c)(72),{diffLine:S,handleStartConversationWithSuggestedChange:L,handleStartConversation:T,isLeftSide:E,isSplit:D}=e,{selectMultipleLines:R}=W(),A=O(),P=M();C[0]!==P?(t=P(),C[0]=P,C[1]=t):t=C[1];let F=t;C[2]!==A?(n=(0,I.Mk)(A()),C[2]=A,C[3]=n):n=C[3];let $=n;C[4]!==$.leftLines?(a=$.leftLines.find(iL),C[4]=$.leftLines,C[5]=a):a=C[5];let B=a;C[6]!==$.leftLines?(r=$.leftLines.filter(ik),C[6]=$.leftLines,C[7]=r):r=C[7];let V=r,U=V[V.length-1];C[8]!==$.leftLines?(l=$.leftLines.filter(iI).every(iS),C[8]=$.leftLines,C[9]=l):l=C[9];let q=l;C[10]!==$.rightLines?(o=$.rightLines.find(iC),C[10]=$.rightLines,C[11]=o):o=C[11];let G=o;C[12]!==$.rightLines?(d=$.rightLines.filter(iN),C[12]=$.rightLines,C[13]=d):d=C[13];let H=d,K=H[H.length-1];C[14]!==$.rightLines?(u=$.rightLines.filter(iw),C[14]=$.rightLines,C[15]=u):u=C[15];let z=0===u.length;C[16]!==$.leftLines?(m=$.leftLines.filter(ij),C[16]=$.leftLines,C[17]=m):m=C[17];let Q=0===m.length;e:{if($.leftLines.find(i_)||$.rightLines.find(ib)){h=!1;break e}h=!0}let Z=h;C[18]!==B||C[19]!==T||C[20]!==L||C[21]!==U||C[22]!==R||C[23]!==F?(f=(e,t)=>{!(!F||!U||!B||(0,I.Po)(U)||(0,I.Po)(B))&&B.left&&U.left&&(R({endLineKey:(0,k.bo)(U),endOrientation:"left",startLineKey:(0,k.bo)(B),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,k.bo)(B),lineNumber:B.left,orientation:"left",shouldStartConversation:!1}},eg),t?.withSuggestedChange?L():T())},C[18]=B,C[19]=T,C[20]=L,C[21]=U,C[22]=R,C[23]=F,C[24]=f):f=C[24];let J=f;C[25]!==G||C[26]!==T||C[27]!==L||C[28]!==K||C[29]!==R||C[30]!==F?(p=(e,t)=>{!(!F||!K||!G||(0,I.Po)(K)||(0,I.Po)(G))&&G.right&&K.right&&(R({endLineKey:(0,k.bo)(K),endOrientation:"right",startLineKey:(0,k.bo)(G),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,k.bo)(G),lineNumber:G.right,orientation:"right",shouldStartConversation:!1}},eg),t?.withSuggestedChange?L():T())},C[25]=G,C[26]=T,C[27]=L,C[28]=K,C[29]=R,C[30]=F,C[31]=p):p=C[31];let Y=p,X="DELETION"!==S.type;t:{if(!F){g=!1;break t}if(F.startOrientation!==F.endOrientation||F.startLineNumber!==F.endLineNumber){g=!0;break t}g=!1}let ee=g,et=!1,en=!1;if(F&&ee){let e,t=im[F.startOrientation],n=im[F.endOrientation];if(v=` on lines ${t}${F.startLineNumber}-${n}${F.endLineNumber}`,!(0,I.Po)(B)&&!(0,I.Po)(U)&&B&&U){let e;et=!0,C[32]!==B||C[33]!==U||C[34]!==z?(e=ix(B,U,z),C[32]=B,C[33]=U,C[34]=z,C[35]=e):e=C[35],y=e}if(!(0,I.Po)(G)&&!(0,I.Po)(K)&&G&&K){let e;en=!0,C[36]!==Z||C[37]!==G||C[38]!==D||C[39]!==K||C[40]!==Q?(e=iy(G,K,Q,D,Z),C[36]=Z,C[37]=G,C[38]=D,C[39]=K,C[40]=Q,C[41]=e):e=C[41],x=e}return C[42]!==Z||C[43]!==q||C[44]!==X||C[45]!==T||C[46]!==L||C[47]!==Y||C[48]!==J||C[49]!==D||C[50]!==z||C[51]!==x||C[52]!==y||C[53]!==en||C[54]!==et||C[55]!==v?(e=(0,i.jsx)(i.Fragment,{children:D?(0,i.jsx)(i.Fragment,{children:Z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:Y,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+x,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eL.l.Item,{onSelect:e=>Y(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+x]})]}):(0,i.jsxs)(i.Fragment,{children:[et?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:J,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+y,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:z?"Alt+n":"Alt+Shift+N"})})]}),q&&(0,i.jsxs)(eL.l.Item,{onSelect:e=>J(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+y]})]}):null,en?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:Y,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+x,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eL.l.Item,{onSelect:e=>Y(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+x]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:T,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+v]}),X&&q&&(0,i.jsxs)(eL.l.Item,{onSelect:L,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+v]})]})}),C[42]=Z,C[43]=q,C[44]=X,C[45]=T,C[46]=L,C[47]=Y,C[48]=J,C[49]=D,C[50]=z,C[51]=x,C[52]=y,C[53]=en,C[54]=et,C[55]=v,C[56]=e):e=C[56],e}return C[57]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),C[57]=b):b=C[57],C[58]!==E||C[59]!==S?(_=ig(ih,S,E),C[58]=E,C[59]=S,C[60]=_):_=C[60],C[61]!==T||C[62]!==_?(j=(0,i.jsxs)(eL.l.Item,{onSelect:T,children:[b,_]}),C[61]=T,C[62]=_,C[63]=j):j=C[63],C[64]!==X||C[65]!==L||C[66]!==E||C[67]!==S?(w=X&&(0,i.jsxs)(eL.l.Item,{onSelect:L,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ig(ip,S,E)]}),C[64]=X,C[65]=L,C[66]=E,C[67]=S,C[68]=w):w=C[68],C[69]!==j||C[70]!==w?(N=(0,i.jsxs)(i.Fragment,{children:[j,w]}),C[69]=j,C[70]=w,C[71]=N):N=C[71],N}:function({diffLine:e,handleStartConversationWithSuggestedChange:t,handleStartConversation:n,isLeftSide:a,isSplit:s}){let r,o,d,{selectMultipleLines:u}=W(),m=O(),h=M()(),f=(0,l.useMemo)(()=>(0,I.Mk)(m()),[m]),p=(0,l.useMemo)(()=>f.leftLines.find(e=>!(0,I.Po)(e)),[f.leftLines]),g=(0,l.useMemo)(()=>{let e=f.leftLines.filter(e=>!(0,I.Po)(e));return e[e.length-1]},[f.leftLines]),y=(0,l.useMemo)(()=>f.leftLines.filter(e=>!(0,I.Po)(e)).every(e=>"DELETION"!==e.type),[f.leftLines]),x=(0,l.useMemo)(()=>f.rightLines.find(e=>!(0,I.Po)(e)),[f.rightLines]),v=(0,l.useMemo)(()=>{let e=f.rightLines.filter(e=>!(0,I.Po)(e));return e[e.length-1]},[f.rightLines]),b=(0,l.useMemo)(()=>0===f.rightLines.filter(e=>!(0,I.Po)(e)).length,[f.rightLines]),_=(0,l.useMemo)(()=>0===f.leftLines.filter(e=>!(0,I.Po)(e)).length,[f.leftLines]),j=(0,l.useMemo)(()=>!(f.leftLines.find(e=>!(0,I.Po)(e)&&!(0,I.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||f.rightLines.find(e=>!(0,I.Po)(e)&&!(0,I.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[f.leftLines,f.rightLines]),w=(0,l.useCallback)((e,i)=>{!(!h||!g||!p||(0,I.Po)(g)||(0,I.Po)(p))&&p.left&&g.left&&(u({endLineKey:(0,k.bo)(g),endOrientation:"left",startLineKey:(0,k.bo)(p),startOrientation:"left",firstLineSelectionOnDrag:{lineKey:(0,k.bo)(p),lineNumber:p.left,orientation:"left",shouldStartConversation:!1}},eg),i?.withSuggestedChange?t():n())},[h,g,p,u,t,n]),N=(0,l.useCallback)((e,i)=>{!(!h||!v||!x||(0,I.Po)(v)||(0,I.Po)(x))&&x.right&&v.right&&(u({endLineKey:(0,k.bo)(v),endOrientation:"right",startLineKey:(0,k.bo)(x),startOrientation:"right",firstLineSelectionOnDrag:{lineKey:(0,k.bo)(x),lineNumber:x.right,orientation:"right",shouldStartConversation:!1}},eg),i?.withSuggestedChange?t():n())},[h,v,x,u,t,n]),C="DELETION"!==e.type,S=(0,l.useMemo)(()=>!!h&&(h.startOrientation!==h.endOrientation||h.startLineNumber!==h.endLineNumber),[h]),L=!1,T=!1;if(h&&S){let e=im[h.startOrientation],a=im[h.endOrientation];return d=` on lines ${e}${h.startLineNumber}-${a}${h.endLineNumber}`,!(0,I.Po)(p)&&!(0,I.Po)(g)&&p&&g&&(L=!0,r=ix(p,g,b)),!(0,I.Po)(x)&&!(0,I.Po)(v)&&x&&v&&(T=!0,o=iy(x,v,_,s,j)),(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(i.Fragment,{children:j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:N,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+o,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eL.l.Item,{onSelect:e=>N(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+o]})]}):(0,i.jsxs)(i.Fragment,{children:[L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:w,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+r,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:b?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,i.jsxs)(eL.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+r]})]}):null,T?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:N,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+o,(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eL.l.Item,{onSelect:e=>N(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+o]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:n,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ih+d]}),C&&y&&(0,i.jsxs)(eL.l.Item,{onSelect:t,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ip+d]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eL.l.Item,{onSelect:n,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),ig(ih,e,a)]}),C&&(0,i.jsxs)(eL.l.Item,{onSelect:t,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),ig(ip,e,a)]})]})};function ib(e){return!(0,I.Po)(e)&&!(0,I.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function i_(e){return!(0,I.Po)(e)&&!(0,I.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function ij(e){return!(0,I.Po)(e)}function iw(e){return!(0,I.Po)(e)}function iN(e){return!(0,I.Po)(e)}function iC(e){return!(0,I.Po)(e)}function iS(e){return"DELETION"!==e.type}function iI(e){return!(0,I.Po)(e)}function ik(e){return!(0,I.Po)(e)}function iL(e){return!(0,I.Po)(e)}try{iv.displayName||(iv.displayName="StartConversationContextMenuItems")}catch{}var iT=n(66358);let iE=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c=(0,s.c)(28);return c[0]!==e?(t=(0,i.jsx)(iP,{...e}),c[0]=e,c[1]=t):t=c[1],c[2]!==e.copilotChatReference||c[3]!==e.diffAnchor||c[4]!==e.diffLine||c[5]!==e.isLeftSide||c[6]!==e.viewerData.shouldDisplayComments?(n=e.viewerData.shouldDisplayComments&&(0,i.jsx)(iA,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),c[2]=e.copilotChatReference,c[3]=e.diffAnchor,c[4]=e.diffLine,c[5]=e.isLeftSide,c[6]=e.viewerData.shouldDisplayComments,c[7]=n):n=c[7],c[8]!==e.handleCopyCode?(a=(0,i.jsx)(iV,{handleCopyCode:e.handleCopyCode}),c[8]=e.handleCopyCode,c[9]=a):a=c[9],c[10]!==e.diffAnchor?(r=(0,i.jsx)(iO,{diffAnchor:e.diffAnchor}),c[10]=e.diffAnchor,c[11]=r):r=c[11],c[12]!==e.diffAnchor||c[13]!==e.diffLine||c[14]!==e.viewerData.shouldDisplayComments?(l=e.viewerData.shouldDisplayComments&&(0,i.jsx)(iD,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),c[12]=e.diffAnchor,c[13]=e.diffLine,c[14]=e.viewerData.shouldDisplayComments,c[15]=l):l=c[15],c[16]!==e.currentHunk||c[17]!==e.diffAnchor||c[18]!==e.nextHunk||c[19]!==e.previousHunk?(o=(0,i.jsx)(iq,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk}),c[16]=e.currentHunk,c[17]=e.diffAnchor,c[18]=e.nextHunk,c[19]=e.previousHunk,c[20]=o):o=c[20],c[21]!==t||c[22]!==n||c[23]!==a||c[24]!==r||c[25]!==l||c[26]!==o?(d=(0,i.jsxs)(i.Fragment,{children:[t,n,a,r,l,o]}),c[21]=t,c[22]=n,c[23]=a,c[24]=r,c[25]=l,c[26]=o,c[27]=d):d=c[27],d}:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(iP,{...e}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(iA,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),(0,i.jsx)(iV,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(iO,{diffAnchor:e.diffAnchor}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(iD,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),(0,i.jsx)(iq,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk})]})},iD=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(8),{diffLine:o,diffAnchor:d}=e,u=M();l[0]!==d||l[1]!==u||l[2]!==o?(t=()=>{let e=u(),t=(0,I.j2)({line:o,range:e,fileAnchor:d});t&&(0,nZ.D)(t)},l[0]=d,l[1]=u,l[2]=o,l[3]=t):t=l[3];let m=t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),l[4]=n):n=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+Alt+y"})}),l[5]=a):a=l[5],l[6]!==m?(r=(0,i.jsxs)(eL.l.Item,{onSelect:m,onMouseDown:iR,children:[n,"Copy link",a]}),l[6]=m,l[7]=r):r=l[7],r}:function({diffLine:e,diffAnchor:t}){let n=M(),a=(0,l.useCallback)(()=>{let i=n(),a=(0,I.j2)({line:e,range:i,fileAnchor:t});a&&(0,nZ.D)(a)},[t,n,e]);return(0,i.jsxs)(eL.l.Item,{onSelect:a,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link",(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+Alt+y"})})]})};function iR(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let iA=(0,a.GV)()?e=>{let t,n,a=(0,s.c)(8),r=M();if(a[0]!==r||a[1]!==e.diffAnchor||a[2]!==e.diffLine||a[3]!==e.isLeftSide){let n=r();t=(0,I.Av)(n,e.diffLine,e.isLeftSide,e.diffAnchor),a[0]=r,a[1]=e.diffAnchor,a[2]=e.diffLine,a[3]=e.isLeftSide,a[4]=t}else t=a[4];let l=t;return e.fileDiffReference?(a[5]!==l||a[6]!==e.fileDiffReference?(n=(0,i.jsx)(id.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}),a[5]=l,a[6]=e.fileDiffReference,a[7]=n):n=a[7],n):null}:e=>{let t=M()(),n=(0,I.Av)(t,e.diffLine,e.isLeftSide,e.diffAnchor);return e.fileDiffReference?(0,i.jsx)(id.w,{showDivider:!0,selectedRange:n,fileDiffReference:e.fileDiffReference}):null},iO=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(6),{diffAnchor:o}=e;l[0]!==o?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${o}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},l[0]=o,l[1]=t):t=l[1];let d=t;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+a"})}),l[3]=a):a=l[3],l[4]!==d?(r=(0,i.jsxs)(eL.l.Item,{onSelect:d,children:[n,"Select all",a]}),l[4]=d,l[5]=r):r=l[5],r}:function({diffAnchor:e}){return(0,i.jsxs)(eL.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+a"})})]})},iP=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,showStartConversation:h,startConversationCurrentLine:f,startConversationWithSuggestedChange:p,threads:g,annotations:y,viewerData:x}=e,v=y.length>0;return h||g||v?(l[0]!==o||l[1]!==c||l[2]!==u||l[3]!==h||l[4]!==f||l[5]!==p||l[6]!==x.shouldDisplayComments?(t=x.shouldDisplayComments&&h&&(0,i.jsx)(iv,{diffLine:o,handleStartConversation:f,handleStartConversationWithSuggestedChange:p,isLeftSide:c,isSplit:u}),l[0]=o,l[1]=c,l[2]=u,l[3]=h,l[4]=f,l[5]=p,l[6]=x.shouldDisplayComments,l[7]=t):t=l[7],l[8]!==y||l[9]!==o||l[10]!==d||l[11]!==c||l[12]!==u||l[13]!==m||l[14]!==g||l[15]!==x?(n=(0,i.jsx)(iF,{threads:g,annotations:y,diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,viewerData:x}),l[8]=y,l[9]=o,l[10]=d,l[11]=c,l[12]=u,l[13]=m,l[14]=g,l[15]=x,l[16]=n):n=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eL.l.Divider,{}),l[17]=a):a=l[17],l[18]!==t||l[19]!==n?(r=(0,i.jsxs)(i.Fragment,{children:[t,n,a]}),l[18]=t,l[19]=n,l[20]=r):r=l[20],r):null}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,showStartConversation:r,startConversationCurrentLine:l,startConversationWithSuggestedChange:o,threads:d,annotations:c,viewerData:u}){let m=c.length>0;return r||d||m?(0,i.jsxs)(i.Fragment,{children:[u.shouldDisplayComments&&r&&(0,i.jsx)(iv,{diffLine:e,handleStartConversation:l,handleStartConversationWithSuggestedChange:o,isLeftSide:n,isSplit:a}),(0,i.jsx)(iF,{threads:d,annotations:c,diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,viewerData:u}),(0,i.jsx)(eL.l.Divider,{})]}):null},iF=(0,a.GV)()?function(e){let t,n=(0,s.c)(14),{diffLine:a,handleViewMarkersSelection:r,isLeftSide:l,isSplit:o,threads:d,annotations:c,shouldDisplayCollapseComments:u,viewerData:m}=e;if(m.commentsPreference===nQ.sI.Visible)return null;if(!o){let e,t;return n[0]!==r?(e=()=>r(),n[0]=r,n[1]=e):e=n[1],n[2]!==c||n[3]!==a||n[4]!==u||n[5]!==e||n[6]!==d?(t=(0,i.jsx)(i$,{threads:d,annotations:c,diffLine:a,onSelect:e,shouldDisplayCollapseComments:u}),n[2]=c,n[3]=a,n[4]=u,n[5]=e,n[6]=d,n[7]=t):t=n[7],t}return n[8]!==c||n[9]!==r||n[10]!==l||n[11]!==u||n[12]!==d?(t=(0,i.jsx)(iM,{threads:d,annotations:c,handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:u}),n[8]=c,n[9]=r,n[10]=l,n[11]=u,n[12]=d,n[13]=t):t=n[13],t}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,threads:s,annotations:r,shouldDisplayCollapseComments:l,viewerData:o}){return o.commentsPreference===nQ.sI.Visible?null:a?(0,i.jsx)(iM,{threads:s,annotations:r,handleViewMarkersSelection:t,isLeftSide:n,shouldDisplayCollapseComments:l}):(0,i.jsx)(i$,{threads:s,annotations:r,diffLine:e,onSelect:()=>t(),shouldDisplayCollapseComments:l})},iM=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(13),{handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:o,threads:d,annotations:c}=e,u=d.length>0,m=c.length>0;if(l){let e,t;return a[0]!==r||a[1]!==u||a[2]!==o?(e=u&&(0,i.jsx)(iB,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("LEFT")}),a[0]=r,a[1]=u,a[2]=o,a[3]=e):e=a[3],a[4]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),a[4]=e,a[5]=t):t=a[5],t}return a[6]!==r||a[7]!==m||a[8]!==u||a[9]!==o?(t=(u||m)&&(0,i.jsx)(iB,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("RIGHT")}),a[6]=r,a[7]=m,a[8]=u,a[9]=o,a[10]=t):t=a[10],a[11]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[11]=t,a[12]=n):n=a[12],n}:function({handleViewMarkersSelection:e,isLeftSide:t,shouldDisplayCollapseComments:n,threads:a,annotations:s}){let r=a.length>0,l=s.length>0;return t?(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(iB,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")})}):(0,i.jsx)(i.Fragment,{children:(r||l)&&(0,i.jsx)(iB,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")})})},i$=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{diffLine:r,onSelect:l,threads:o,annotations:d,shouldDisplayCollapseComments:c}=e;if(!(r&&(o.length>0||d.length>0)))return null;let u=c?"Collapse comments":"Expand comments";return a[0]!==l?(t=()=>l(),a[0]=l,a[1]=t):t=a[1],a[2]!==u||a[3]!==t?(n=(0,i.jsx)(iB,{text:u,onSelect:t}),a[2]=u,a[3]=t,a[4]=n):n=a[4],n}:function({diffLine:e,onSelect:t,threads:n,annotations:a,shouldDisplayCollapseComments:s}){return e&&(n.length>0||a.length>0)?(0,i.jsx)(iB,{text:s?"Collapse comments":"Expand comments",onSelect:()=>t()}):null},iB=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(4),{onSelect:r,text:l}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),a[0]=t):t=a[0],a[1]!==r||a[2]!==l?(n=(0,i.jsxs)(eL.l.Item,{onSelect:r,children:[t,l]}),a[1]=r,a[2]=l,a[3]=n):n=a[3],n}:function({onSelect:e,text:t}){return(0,i.jsxs)(eL.l.Item,{onSelect:e,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),t]})},iV=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(4),{handleCopyCode:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+c"})}),r[1]=n):n=r[1],r[2]!==l?(a=(0,i.jsxs)(eL.l.Item,{onSelect:l,onMouseDown:iU,children:[t,"Copy",n]}),r[2]=l,r[3]=a):a=r[3],a}:function({handleCopyCode:e}){return(0,i.jsxs)(eL.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy",(0,i.jsx)(eL.l.TrailingVisual,{children:(0,i.jsx)(iu.U,{keys:"Mod+c"})})]})};function iU(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let iq=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(17),{currentHunk:d,diffAnchor:c,nextHunk:u,previousHunk:m}=e,h=B();o[0]!==d||o[1]!==u||o[2]!==m?(t={currentHunk:d,nextHunk:u,previousHunk:m},o[0]=d,o[1]=u,o[2]=m,o[3]=t):t=o[3];let{canExpandStartOfHunk:f,canExpandEndOfHunk:p}=ic(t);return f||p||m||u?(o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eL.l.Divider,{}),o[4]=n):n=o[4],o[5]!==d||o[6]!==h||o[7]!==u||o[8]!==m?(a=h.has(iT.YR.expandLines)?null:(0,i.jsx)(iG,{currentHunk:d,nextHunk:u,previousHunk:m}),o[5]=d,o[6]=h,o[7]=u,o[8]=m,o[9]=a):a=o[9],o[10]!==c||o[11]!==u||o[12]!==m?(r=(0,i.jsx)(iH,{diffAnchor:c,nextHunk:u,previousHunk:m}),o[10]=c,o[11]=u,o[12]=m,o[13]=r):r=o[13],o[14]!==a||o[15]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[n,a,r]}),o[14]=a,o[15]=r,o[16]=l):l=o[16],l):null}:function({currentHunk:e,diffAnchor:t,nextHunk:n,previousHunk:a}){let s=B(),{canExpandStartOfHunk:r,canExpandEndOfHunk:l}=ic({currentHunk:e,nextHunk:n,previousHunk:a});return r||l||a||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eL.l.Divider,{}),s.has(iT.YR.expandLines)?null:(0,i.jsx)(iG,{currentHunk:e,nextHunk:n,previousHunk:a}),(0,i.jsx)(iH,{diffAnchor:t,nextHunk:n,previousHunk:a})]}):null},iG=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(13),{currentHunk:o,nextHunk:d,previousHunk:u}=e;l[0]!==o||l[1]!==d||l[2]!==u?(t={currentHunk:o,nextHunk:d,previousHunk:u},l[0]=o,l[1]=d,l[2]=u,l[3]=t):t=l[3];let{canExpandStartOfHunk:m,expandEndOfHunk:h,expandStartOfHunk:f,canExpandEndOfHunk:p}=ic(t);return l[4]!==m||l[5]!==f?(n=m&&(0,i.jsxs)(eL.l.Item,{onSelect:f,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l[4]=m,l[5]=f,l[6]=n):n=l[6],l[7]!==p||l[8]!==h?(a=p&&(0,i.jsxs)(eL.l.Item,{onSelect:h,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]}),l[7]=p,l[8]=h,l[9]=a):a=l[9],l[10]!==n||l[11]!==a?(r=(0,i.jsxs)(i.Fragment,{children:[n,a]}),l[10]=n,l[11]=a,l[12]=r):r=l[12],r}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{canExpandStartOfHunk:a,expandEndOfHunk:s,expandStartOfHunk:r,canExpandEndOfHunk:l}=ic({currentHunk:e,nextHunk:t,previousHunk:n});return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)(eL.l.Item,{onSelect:r,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l&&(0,i.jsxs)(eL.l.Item,{onSelect:s,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]})]})},iH=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(13),{diffAnchor:d,nextHunk:u,previousHunk:m}=e,h=!!m,f=!!u;o[0]!==d?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},o[0]=d,o[1]=t):t=o[1];let p=t;o[2]!==d?(n=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},o[2]=d,o[3]=n):n=o[3];let g=n;return o[4]!==p||o[5]!==f?(a=f?(0,i.jsxs)(eL.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:p,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eL.l.TrailingVisual,{children:"Page Down"})]}):null,o[4]=p,o[5]=f,o[6]=a):a=o[6],o[7]!==g||o[8]!==h?(r=h?(0,i.jsxs)(eL.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:g,children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eL.l.TrailingVisual,{children:"Page Up"})]}):null,o[7]=g,o[8]=h,o[9]=r):r=o[9],o[10]!==a||o[11]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[a,r]}),o[10]=a,o[11]=r,o[12]=l):l=o[12],l}:function({diffAnchor:e,nextHunk:t,previousHunk:n}){return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eL.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eL.l.TrailingVisual,{children:"Page Down"})]}):null,n?(0,i.jsxs)(eL.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eL.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eL.l.TrailingVisual,{children:"Page Up"})]}):null]})};try{iE.displayName||(iE.displayName="CellContextMenu")}catch{}try{iD.displayName||(iD.displayName="CopyAnchorLink")}catch{}try{iO.displayName||(iO.displayName="SelectAllListItem")}catch{}try{iP.displayName||(iP.displayName="MarkerListItems")}catch{}try{iF.displayName||(iF.displayName="ViewMarkerListItems")}catch{}try{iM.displayName||(iM.displayName="SplitDiffMarkersListItems")}catch{}try{i$.displayName||(i$.displayName="UnifiedDiffMarkerListItem")}catch{}try{iB.displayName||(iB.displayName="MarkerListItem")}catch{}try{iV.displayName||(iV.displayName="CopyContentListItems")}catch{}try{iq.displayName||(iq.displayName="HunkListItems")}catch{}try{iG.displayName||(iG.displayName="ExpandHunksListItems")}catch{}try{iH.displayName||(iH.displayName="JumpToHunkListItems")}catch{}var iK=n(17998);let iW=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(8),{authorAvatarUrl:l,authorLogin:o,lineSpacingPreference:d,sx:u}=e,m="compact"===d?18:20,h=`${o}'s avatar image with pending indicator`;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},r[0]=t):t=r[0],r[1]!==u?(n={alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...u},r[1]=u,r[2]=n):n=r[2],r[3]!==l||r[4]!==m||r[5]!==h||r[6]!==n?(a=(0,i.jsx)(iK.k,{altText:h,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:m,src:l,backgroundSx:t,sx:n}),r[3]=l,r[4]=m,r[5]=h,r[6]=n,r[7]=a):a=r[7],a}:function({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:a}){return(0,i.jsx)(iK.k,{altText:`${t}'s avatar image with pending indicator`,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...a}})};try{iW.displayName||(iW.displayName="InProgressCommentIndicator")}catch{}let iz="ActionBar-module__actionBarHeight--wiyuB",iQ=(0,l.forwardRef)(function({annotations:e,authorAvatarUrl:t,authorLogin:n,cellId:a,cellRef:s,copilotChatReference:r,currentHunk:o,diffAnchor:d,diffLine:u,enterDialogMode:m,hasDraftComment:h,handleCopyCode:f,isLeftSide:p,isSplit:g,nextHunk:y,onMouseDownAddCommentButton:x,onMouseLeaveAddCommentButton:v,previousHunk:b,shouldDisplayCollapseComments:_,shouldDisplayMinimizedComments:j,showStartConversation:w,threads:N,toggleViewingMarkers:C,viewerData:S},I){let k=(0,l.useRef)(null),L=(0,l.useRef)(null),{lineSpacingPreference:T,commentsPreference:E}=S,D=(0,l.useRef)(null),R=k.current?k:L;(0,ii.T)(I,R);let A=N.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),O=e.length,{isActionBarFocused:P,handleActionBarBlur:F,handleActionBarFocusCapture:M,handleActionBarKeydownCapture:$}=n6({cellRef:s}),{isContextMenuOpen:B,anyMenuOpen:V,toggleContextMenu:U,toggleContextMenuFromActionBar:q}=n4({cellId:a,actionBarRef:D}),{startNewConversation:G,startNewConversationWithSuggestedChange:H}=n5({cellId:a,onOpenDialog:m}),K=(0,l.useCallback)(e=>{e.stopPropagation(),G()},[G]),W=A+O>0&&E===nQ.sI.Collapsed,z={onBlur:F,onFocusCapture:M,onKeyDownCapture:$},Q=(0,l.useCallback)(t=>{(1===N.length||1===e.length)&&t.preventDefault(),C?.()},[e.length,N.length,C]);return(0,i.jsxs)(i.Fragment,{children:[w&&(0,i.jsx)("div",{"aria-hidden":!P,className:(0,eJ.$)("d-flex","flex-row","ActionBar-module__addCommentButton--gIYSg"),children:(0,i.jsx)(i.Fragment,{children:h?(0,i.jsx)(ej.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,eJ.$)("py-0","compact"===T?"ActionBar-module__addCommentButtonDraftCompact--HKIKU":"ActionBar-module__addCommentButtonDraftRelaxed--_qJPM",iz),onClick:G,...z,children:(0,i.jsx)(iW,{lineSpacingPreference:T,authorAvatarUrl:t,authorLogin:n})}):(0,i.jsx)(ej.Q,{icon:c.PlusIcon,"aria-label":"Add comment",ref:L,size:"small","data-add-comment-button":!0,className:(0,eJ.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0","ActionBar-module__addCommentButtonNew--j1kFj",iz,"ActionBar-module__actionBarStartCommentWidth--TTHf8"),onClick:K,onMouseDown:x,onMouseLeave:v,...z})})}),(0,i.jsx)("div",{"aria-hidden":!P,className:(0,eJ.$)("d-flex","flex-row","ActionBar-module__action-bar-position--cMcOj"),children:(0,i.jsxs)(ia.A,{className:"ActionBar-module__action-bar-button-group--G1uFN",...z,children:[W&&j&&(0,i.jsx)(ej.Q,{ref:k,"aria-expanded":V,"aria-label":"View comments",size:"small",className:(0,eJ.$)("py-0","px-1",iz),onClick:Q,children:(0,i.jsx)(io,{threads:N,annotations:e,lineSpacingPreference:T})}),(0,i.jsxs)(ek.W,{anchorRef:D,open:B,onOpenChange:U,children:[(0,i.jsx)(ek.W.Anchor,{children:(0,i.jsx)(ej.Q,{ref:D,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,eJ.$)("fgColor-muted","ActionBar-module__actionBarArrowSizing--L93H4"),onClick:q})}),(0,i.jsx)(ek.W.Overlay,{width:"medium",children:(0,i.jsx)(eL.l,{children:(0,i.jsx)(iE,{threads:N,annotations:e,currentHunk:o,diffAnchor:d,diffLine:u,shouldDisplayCollapseComments:_,copilotChatReference:r,showStartConversation:w,handleCopyCode:f,handleViewMarkersSelection:C,isLeftSide:p,isSplit:g,nextHunk:y,previousHunk:b,startConversationCurrentLine:G,startConversationWithSuggestedChange:H,viewerData:S})})})]})]})})]})});function iZ(e,t){let n=t>0,i=e>0;switch(!0){case n&&i:return"Code has comments and alerts. Press enter to view.";case i:return"Code has comments. Press enter to view.";case n:return"Code has alerts. Press enter to view.";default:return""}}iQ.displayName="ActionBar";let iJ=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{threadCount:r,annotationCount:l}=e;a[0]!==l||a[1]!==r?(t=iZ(r,l),a[0]=l,a[1]=r,a[2]=t):t=a[2];let o=t;return o?(a[3]!==o?(n=(0,i.jsx)("span",{className:"sr-only user-select-none",children:o}),a[3]=o,a[4]=n):n=a[4],n):null}:function({threadCount:e,annotationCount:t}){let n=iZ(e,t);return n?(0,i.jsx)("span",{className:"sr-only user-select-none",children:n}):null};try{iJ.displayName||(iJ.displayName="DiffLineScreenReaderSummary")}catch{}let iY=(0,l.forwardRef)((0,a.GV)()?function(e,t){let n,a,r,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,k,L,T,E,D,R,A=(0,s.c)(62);if(A[0]!==e){let{cellId:t,children:i,className:s,columnIndex:l,diffLine:N,diffAnchor:C,handleDiffCellMouseDown:S,handleExitDialogMode:I,handleHideMarkersFromFocus:k,handleDiffSideCellSelectionBlocking:L,handleStartConversation:T,handleUserClosedMarkersDialog:E,isLeftSide:D,isRowSelected:R,isSplit:O,lineAnchor:P,commentDialogOpen:F,enterDialogMode:M,hasThreads:$,role:B,...V}=e;n=t,a=i,r=s,o=l,c=N,d=C,m=S,f=I,h=L,p=T,g=E,x=D,w=R,v=O,b=P,u=M,y=$,j=B,_=V,A[0]=e,A[1]=n,A[2]=a,A[3]=r,A[4]=o,A[5]=d,A[6]=c,A[7]=u,A[8]=m,A[9]=h,A[10]=f,A[11]=p,A[12]=g,A[13]=y,A[14]=x,A[15]=v,A[16]=b,A[17]=_,A[18]=j,A[19]=w}else n=A[1],a=A[2],r=A[3],o=A[4],d=A[5],c=A[6],u=A[7],m=A[8],h=A[9],f=A[10],p=A[11],g=A[12],y=A[13],x=A[14],v=A[15],b=A[16],_=A[17],j=A[18],w=A[19];let $=void 0!==w&&w,B=c,V=(0,l.useRef)(null),q=M();A[20]===Symbol.for("react.memo_cache_sentinel")?(N=()=>V.current,C=[],A[20]=N,A[21]=C):(N=A[20],C=A[21]),(0,l.useImperativeHandle)(t,N,C);let{disableDialogMode:G}=U();A[22]!==d||A[23]!==q||A[24]!==B?(S=()=>{let e=q(),t=(0,I.j2)({line:B,range:e,fileAnchor:d});t&&(0,nZ.D)(t)},A[22]=d,A[23]=q,A[24]=B,A[25]=S):S=A[25];let H=S,K=F(),{clearFirstLineSelectionOnDrag:z}=W();A[26]!==z||A[27]!==K||A[28]!==p?(k=()=>{let e=K();e?.shouldStartConversation&&p?.(),z()},A[26]=z,A[27]=K,A[28]=p,A[29]=k):k=A[29];let Q=k;A[30]!==m||A[31]!==h?(L=e=>{e.shiftKey&&e.preventDefault(),m?.(e),h?.(e)},A[30]=m,A[31]=h,A[32]=L):L=A[32];let Z=L;A[33]!==G||A[34]!==f||A[35]!==g?(T=()=>{V.current?.focus(),G(),f?.(),g?.()},A[33]=G,A[34]=f,A[35]=g,A[36]=T):T=A[36];let J=T,Y=O(),X=P();A[37]!==H||A[38]!==c||A[39]!==u||A[40]!==J||A[41]!==X||A[42]!==Y||A[43]!==q||A[44]!==p||A[45]!==y||A[46]!==x||A[47]!==v?(E=async e=>{if(e.target===V.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=X();await nJ({diffLine:c,diffLines:t,getSelectedDiffLines:Y,getSelectedLineRange:q,isSplit:v,isLeftSide:x});return}if(e.target===V.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void H();if(V.current?.contains(e.target)&&e?.key==="Escape")return void J();if(V.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),V.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(V.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),V.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===V.current&&"Enter"===e.key&&(u?.(),!1===y&&p?.(),e.preventDefault())},A[37]=H,A[38]=c,A[39]=u,A[40]=J,A[41]=X,A[42]=Y,A[43]=q,A[44]=p,A[45]=y,A[46]=x,A[47]=v,A[48]=E):E=A[48];let ee=E,et=`Cell-left:${B.left}-right:${B.right}-leftSide:${x}`,en=!!$,ei=j??"gridcell";A[49]===Symbol.for("react.memo_cache_sentinel")?(D={userSelect:"none",position:"relative"},A[49]=D):D=A[49];let ea=r?`focusable-grid-cell ${r} ${o<3?"left-side":""}`:"focusable-grid-cell";return A[50]!==n||A[51]!==a||A[52]!==Z||A[53]!==Q||A[54]!==ee||A[55]!==et||A[56]!==b||A[57]!==_||A[58]!==ei||A[59]!==ea||A[60]!==en?(R=(0,i.jsx)("td",{ref:V,"data-grid-cell-id":n,"data-line-anchor":b,"data-selected":en,role:ei,style:D,tabIndex:-1,valign:"top",className:ea,onKeyDown:ee,onMouseDown:Z,onMouseUp:Q,..._,children:a},et),A[50]=n,A[51]=a,A[52]=Z,A[53]=Q,A[54]=ee,A[55]=et,A[56]=b,A[57]=_,A[58]=ei,A[59]=ea,A[60]=en,A[61]=R):R=A[61],R}:function({cellId:e,children:t,className:n,columnIndex:a,diffLine:s,diffAnchor:r,handleDiffCellMouseDown:o,handleExitDialogMode:d,handleHideMarkersFromFocus:c,handleDiffSideCellSelectionBlocking:u,handleStartConversation:m,handleUserClosedMarkersDialog:h,isLeftSide:f,isRowSelected:p=!1,isSplit:g,lineAnchor:y,commentDialogOpen:x,enterDialogMode:v,hasThreads:b,role:_,...j},w){let N=(0,l.useRef)(null),C=M();(0,l.useImperativeHandle)(w,()=>N.current,[]);let{disableDialogMode:S}=U(),k=(0,l.useCallback)(()=>{let e=C(),t=(0,I.j2)({line:s,range:e,fileAnchor:r});t&&(0,nZ.D)(t)},[r,C,s]),L=F(),{clearFirstLineSelectionOnDrag:T}=W(),E=(0,l.useCallback)(()=>{let e=L();e?.shouldStartConversation&&m?.(),T()},[T,L,m]),D=(0,l.useCallback)(e=>{e.shiftKey&&e.preventDefault(),o?.(e),u?.(e)},[o,u]),R=(0,l.useCallback)(()=>{N.current?.focus(),S(),d?.(),h?.()},[S,d,h]),A=O(),$=P(),B=(0,l.useCallback)(async e=>{if(e.target===N.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=$();await nJ({diffLine:s,diffLines:t,getSelectedDiffLines:A,getSelectedLineRange:C,isSplit:g,isLeftSide:f});return}if(e.target===N.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void k();if(N.current?.contains(e.target)&&e?.key==="Escape")return void R();if(N.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),N.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(N.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),N.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===N.current&&"Enter"===e.key&&(v?.(),!1===b&&m?.(),e.preventDefault())},[$,s,A,C,g,f,k,R,v,b,m]),V=`Cell-left:${s.left}-right:${s.right}-leftSide:${f}`;return(0,i.jsx)("td",{ref:N,"data-grid-cell-id":e,"data-line-anchor":y,"data-selected":!!p,role:_??"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${a<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:B,onMouseDown:D,onMouseUp:E,...j,children:t},V)});try{iY.displayName||(iY.displayName="Cell")}catch{}let iX=(0,a.GV)()?function(e,t,n){let i,a,r=(0,s.c)(3),l=M();r[0]!==l?(i=l(),r[0]=l,r[1]=i):i=r[1];let o=i,d=!!o&&o.startLineNumber!==o.endLineNumber;if(o&&d&&n){let e;r[2]===Symbol.for("react.memo_cache_sentinel")?(e={left:"L",right:"R"},r[2]=e):e=r[2];let t=e,n=t[o.startOrientation],i=t[o.endOrientation];a=o.startLineNumber!==o.endLineNumber?` lines ${n}${o.startLineNumber} to ${i}${o.endLineNumber}`:` line ${n}${o.startLineNumber}`}else{let n=t&&!(0,I.Ji)(e)?"L":"R";a=` line ${n}${e.blobLineNumber}`}return a}:function(e,t,n){let i=M();return(0,l.useMemo)(()=>{let a=i(),s="",r=!!a&&a.startLineNumber!==a.endLineNumber;if(a&&r&&n){let e={left:"L",right:"R"},t=e[a.startOrientation],n=e[a.endOrientation];s+=a.startLineNumber!==a.endLineNumber?` lines ${t}${a.startLineNumber} to ${n}${a.endLineNumber}`:` line ${t}${a.startLineNumber}`}else{let n=t&&!(0,I.Ji)(e)?"L":"R";s+=` line ${n}${e.blobLineNumber}`}return s},[e,i,t,n])};var i0=n(43362);let i1=(0,a.Z6)()?function(){let e,t,n,i=(0,s.c)(12),a=(0,j.Kp)(),r=(0,nf.jE)(),l=`${a}/page_data/${nm.uT.createReviewComment}`,{updateThread:d}=(0,j.an)(),{onCommentThreadAdded:c}=(0,j.Ud)(),{addPendingComment:u,clearPendingReview:m}=(0,j._N)();return i[0]!==l?(e=async e=>{let t=await (0,ng.Sr)(`${l}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,nh.hp)(t);return(0,nh.R)(t,n),n},i[0]=l,i[1]=e):e=i[1],i[2]!==u||i[3]!==a||i[4]!==m||i[5]!==c||i[6]!==r||i[7]!==d?(t=(e,t)=>{let n=t.subjectType===o.Wr.File?"FILE":"right"===t.side?`R${t.line}`:`L${t.line}`,i=t.startSide&&t.startLine?"right"===t.startSide?`R${t.startLine}`:`L${t.startLine}`:void 0;void 0!==t.submitBatch&&!t.submitBatch&&e.thread&&u(Number(e.thread.id)),t.submitBatch&&m(),d(Number(e.thread.id),t.path,n,()=>{let n=(0,i0.YY)(t);return e.thread.subject=n,e.thread.positioning=n,e.thread}),c({path:t.path,diffLineKey:n,startPosition:i,threadID:e.thread.id}),r.invalidateQueries({queryKey:(0,ny.XG)(a)})},i[2]=u,i[3]=a,i[4]=m,i[5]=c,i[6]=r,i[7]=d,i[8]=t):t=i[8],i[9]!==e||i[10]!==t?(n={mutationFn:e,onSuccess:t},i[9]=e,i[10]=t,i[11]=n):n=i[11],(0,np.n)(n)}:function(){let e=(0,j.Kp)(),t=(0,nf.jE)(),n=`${e}/page_data/${nm.uT.createReviewComment}`,{updateThread:i}=(0,j.an)(),{onCommentThreadAdded:a}=(0,j.Ud)(),{addPendingComment:s,clearPendingReview:r}=(0,j._N)();return(0,np.n)({mutationFn:async e=>{let t=await (0,ng.Sr)(`${n}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,nh.hp)(t);return(0,nh.R)(t,i),i},onSuccess:(n,l)=>{let d=l.subjectType===o.Wr.File?"FILE":"right"===l.side?`R${l.line}`:`L${l.line}`,c=l.startSide&&l.startLine?"right"===l.startSide?`R${l.startLine}`:`L${l.startLine}`:void 0;void 0!==l.submitBatch&&!l.submitBatch&&n.thread&&s(Number(n.thread.id)),l.submitBatch&&r(),i(Number(n.thread.id),l.path,d,()=>{let e=(0,i0.YY)(l);return n.thread.subject=e,n.thread.positioning=e,n.thread}),a({path:l.path,diffLineKey:d,startPosition:c,threadID:n.thread.id}),t.invalidateQueries({queryKey:(0,ny.XG)(e)})}})};var i2=new WeakMap,i3=new WeakMap,i4=new WeakMap,i5=new WeakMap,i6=new WeakMap,i7=new WeakMap,i8=new WeakMap,i9=new WeakSet,ae=new WeakSet,at=new WeakSet;let ReviewCommentFactory=class ReviewCommentFactory{fileRequestData(){return{...(0,e8._)(this,at,aa).call(this),path:(0,e5._)(this,i3),subjectType:o.Wr.File}}lineRequestData(e,t){let n=t&&!(0,I.Ji)(e)?"left":"right";return{...(0,e8._)(this,at,aa).call(this),line:e.blobLineNumber,path:(0,e8._)(this,i9,an).call(this,n),positioning:{type:o.Wr.Line,baseCommitOid:(0,e5._)(this,i2),headCommitOid:(0,e5._)(this,i4),path:(0,e8._)(this,i9,an).call(this,n),line:e.blobLineNumber,commitOid:(0,e8._)(this,ae,ai).call(this,n)},side:n,subjectType:o.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}=e,s="left"===n?"left":"right",r="left"===a?"left":"right";return{...(0,e8._)(this,at,aa).call(this),line:t,path:(0,e8._)(this,i9,an).call(this,s),positioning:{baseCommitOid:(0,e5._)(this,i2),headCommitOid:(0,e5._)(this,i4),type:o.Wr.Multiline,startPath:(0,e8._)(this,i9,an).call(this,r),startLine:i,startCommitOid:(0,e8._)(this,ae,ai).call(this,r),endPath:(0,e8._)(this,i9,an).call(this,s),endLine:t,endCommitOid:(0,e8._)(this,ae,ai).call(this,s)},side:s,startLine:i,startSide:r,subjectType:o.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,selectedDiffRange:i,submitBatch:a,text:s}){(0,e9._)(this,i9),(0,e9._)(this,ae),(0,e9._)(this,at),(0,e6._)(this,i2,{writable:!0,value:void 0}),(0,e6._)(this,i3,{writable:!0,value:void 0}),(0,e6._)(this,i4,{writable:!0,value:void 0}),(0,e6._)(this,i5,{writable:!0,value:void 0}),(0,e6._)(this,i6,{writable:!0,value:void 0}),(0,e6._)(this,i7,{writable:!0,value:void 0}),(0,e6._)(this,i8,{writable:!0,value:void 0}),(0,e7._)(this,i2,i.baseOid),(0,e7._)(this,i3,e),(0,e7._)(this,i4,i.headOid),(0,e7._)(this,i5,t),(0,e7._)(this,i6,n),(0,e7._)(this,i7,a),(0,e7._)(this,i8,s)}};function an(e){return"left"===e&&(0,e5._)(this,i6)?.path&&(0,e5._)(this,i5)?.path&&(0,e5._)(this,i6).path!==(0,e5._)(this,i5).path?(0,e5._)(this,i6).path:(0,e5._)(this,i3)}function ai(e){return"left"===e?(0,e5._)(this,i2):(0,e5._)(this,i4)}function aa(){return{comparisonEndOid:(0,e5._)(this,i4),comparisonStartOid:(0,e5._)(this,i2),text:(0,e5._)(this,i8),submitBatch:(0,e5._)(this,i7)}}let as=new Set,ar=!1,al=e=>{let t=e.target instanceof Node?e.target:null;for(let e of as){let{element:n,shouldIgnore:i,onPointerExit:a}=e;if(!n.isConnected){as.delete(e);continue}if(t&&n.contains(t)){e.pendingExit=!1;continue}e.pendingExit=!0,i?.()||(e.pendingExit=!1,a())}0===as.size&&ao()},ao=()=>{ar&&g.XC&&!(as.size>0)&&(g.XC.removeEventListener("pointermove",al),ar=!1)},ad=(0,l.forwardRef)(function({annotationsAtPosition:e,columnIndex:t,copilotChatReference:n,currentHunk:a,diffAnchor:s,diffLine:r,dispatchMarkersStatus:o,filePath:d,handleDiffSideCellSelectionBlocking:u,isLeftSide:m,isRowSelected:h,isSplit:f,lineAnchor:p,markersStatus:y,nextHunk:v,previousHunk:b,rowId:_,subjectId:w,threadsAtPosition:N,viewerData:C},S){let[T,E]=(0,I.x_)(r.html,r.type),D=E&&["+","-"].includes(E),[R,A]=(0,l.useState)(""),{isActionBarVisible:$,hideActionBar:B,anyMenuOpen:q}=n3(),G=(0,eF.u)("move_new_comments_ui"),{hasPersistedComment:H}=(0,x.L)({diffSide:m?"LEFT":"RIGHT",filePath:d,line:r.blobLineNumber,subjectId:w,fileLevelComment:!1}),K=(0,I.u6)(_,t),z=V(K),{disableDialogMode:Z}=U(),Y=m?"LEFT":"RIGHT",X="RIGHT"===Y?r.right:r.left,ee=(0,I.oH)(X,Y),et=N.length,en=e.length,ei=(0,l.useRef)(null),ea=(0,l.useRef)(null);(0,l.useImperativeHandle)(S,()=>ea.current,[]);let es=0!==et+en,er=(0,I.S4)({hasThreads:es&&C.commentsPreference===nQ.sI.Collapsed}),el=iX(r,!!m,h),{handleCellBlur:eo,handleCellFocus:ed,handleCellMouseEnter:ec,handleCellMouseLeave:eu}=n6({cellRef:ea});(0,l.useEffect)(()=>{if($&&ea.current)return function(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return as.add(n),!ar&&g.XC&&(g.XC.addEventListener("pointermove",al),ar=!0),()=>{as.delete(n),ao()}}({element:ea.current,shouldIgnore:()=>{let e,t;return q||(e=g.XC?.activeElement,!!(t=ea.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:B})},[q,B,$]);let em=(0,l.useRef)(null),eh=nV(K,ea,o),ef=P(),ep=O(),ey=J(),ex=M(),ev=(0,eF.u)("cotd_ui"),eb=(0,l.useCallback)((e=!0)=>{e&&requestAnimationFrame(()=>ea.current?.focus()),Z(),o("USER_MINIMIZED_MARKERS")},[Z,o]),e_=(0,l.useCallback)(()=>{C.commentsPreference===nQ.sI.Collapsed&&y.showMarkers?eb():eh()},[eb,eh,y.showMarkers,C.commentsPreference]),{closeMarkerListDialog:ej,returnFocusRef:ew,isContextMenuOpen:eN}=n4({cellId:K,actionBarRef:ei}),eC=(0,l.useCallback)(()=>{eh(),C.shouldDisplayComments||B();let e=ex();e||(e={startLineNumber:r.blobLineNumber,endLineNumber:r.blobLineNumber,startOrientation:m?"left":"right",endOrientation:m?"left":"right",diffAnchor:s});let t=new L.L(e,d);g.cg?.dispatchEvent(t)},[eh,C.shouldDisplayComments,ex,d,B,r.blobLineNumber,m,s]),{isNewConversationDialogOpen:eS,shouldStartNewConversationWithSuggestedChange:eI,startNewConversation:ek,closeNewConversation:eL}=n5({cellId:K,onOpenDialog:eC}),eT=(0,l.useMemo)(()=>{if(!$)return!1;if(!C.shouldDisplayComments)if(ev)return!(0,I.Po)(r);else return(0,I.a1)(r,(0,I.Mk)(ep()));return!eS&&!!C.viewerCanComment&&(ev?!(0,I.Po)(r):(0,I.a1)(r,(0,I.Mk)(ep())))},[$,eS,C.shouldDisplayComments,C.viewerCanComment,ev,r,ep]),{endOid:eE,startOid:eD}=(0,nw.Xv)(),{mutate:eR}=i1(),{selectedRange:eA}=(0,j.L3)(),{newTreeEntry:eO,oldTreeEntry:eP}=Q(),eM=n9(r,eI),e$=(0,l.useCallback)(()=>{eh?.(),ek?.()},[eh,ek]);(0,l.useEffect)(()=>{G&&ey(ee,e$,(0,k.bo)(r))},[ey,e$,r,ee,G]);let eB=(0,l.useRef)(!0),eV=(0,l.useMemo)(()=>!!C.shouldDisplayComments&&(es&&C.commentsPreference===nQ.sI.Collapsed?!y.userMinimized:(!!eS||!!es)&&(C.commentsPreference===nQ.sI.Collapsed&&(!!eS||!!z)||C.commentsPreference===nQ.sI.Visible&&(!!es||!!eS||!!y.showMarkers)||!1)),[es,z,eS,y.showMarkers,y.userMinimized,C.commentsPreference,C.shouldDisplayComments]),eq=(0,l.useMemo)(()=>(0,I.dT)(r),[r]),{addLineToSelection:eG,clearSelectedLines:eH,selectLine:eK}=W(),eW=F();(0,l.useEffect)(()=>{H&&C.commentsPreference===nQ.sI.Visible&&e$()},[H,e$,C.commentsPreference]);let ez=(0,l.useCallback)(()=>{let e=ex();return!!e&&("right"===e.endOrientation&&!m&&e.endLineNumber===r.right||!!e&&"left"===e.endOrientation&&!!m&&e.endLineNumber===r.left)},[ex,m,r.left,r.right]),eQ=(0,l.useCallback)(()=>{ez()||eH()},[eH,ez]),eZ=(0,l.useCallback)(e=>{if(1!==e.buttons)return;eu();let t=m?r.left:r.right,n=(0,k.bo)(r);h||!t||ez()?eG({lineKey:(0,k.bo)(r),orientation:m?"left":"right"},eg):eK({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:m?"left":"right",lineKey:n,shouldStartConversation:!0}},eg)},[eG,eu,ez,m,h,r,eK]),eY=(0,l.useCallback)(e=>{let t=eW();1===e.buttons&&t&&eG({lineKey:(0,k.bo)(r),orientation:m?"left":"right"},eg),ec()},[eG,eW,ec,m,r]),eX=(0,l.useCallback)(()=>{let e=eW();if(!e){C.shouldDisplayComments||eN||B(),eu();return}let t=ex(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!m&&r.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&m&&r.left===e.lineNumber;n||i||eu()},[eW,ex,m,r.right,r.left,C.shouldDisplayComments,eN,eu,B]),e0=(0,l.useCallback)(()=>{o("USER_EXITED_MARKERS_DIALOG")},[o]),e1=(0,l.useCallback)(()=>{o("USER_MINIMIZED_MARKERS")},[o]),e2=(0,l.useCallback)((e=!0)=>{eb(e),eL()},[eb,eL]),e3=async()=>{let e=ef();await nJ({diffLine:r,diffLines:e,getSelectedDiffLines:ep,getSelectedLineRange:ex,isSplit:f,isLeftSide:m})},e4=`ContentCell-left:${r.left}-right:${r.right}-leftSide:${m}`,e5=`inline-dialog-heading-${(0,l.useId)()}`,e6=(0,l.useMemo)(()=>{if(!h)return r.blobLineNumber;let e=ex();return e?.endLineNumber??r.blobLineNumber},[ex,h,r.blobLineNumber]),e7=(0,l.useMemo)(()=>{if(!h)return;let e=ex();return e?.startLineNumber},[ex,h]);return(0,i.jsxs)(iY,{ref:ea,cellId:K,columnIndex:t,commentDialogOpen:eS,diffAnchor:s,diffLine:r,enterDialogMode:eh,handleDiffSideCellSelectionBlocking:u,handleExitDialogMode:e0,handleUserClosedMarkersDialog:e1,lineAnchor:p,handleStartConversation:e$,hasThreads:es,isLeftSide:m,isRowSelected:h,isSplit:f,className:(0,eJ.$)(`diff-text-cell ${m?"left-side-diff-cell":"right-side-diff-cell"} ${eq?"pt-4":""}`,{"border-right":m&&"HUNK"!==r.type}),style:{backgroundColor:(0,I.Yf)(r.type,!1,h),paddingRight:er},onBlur:eo,onFocus:ed,onMouseEnter:eY,onMouseLeave:eX,"aria-labelledby":z?e5:void 0,role:z?"dialog":"gridcell",children:[z&&(0,i.jsx)("h1",{id:e5,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,eJ.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===r.type,deletion:"DELETION"===r.type}),children:[D&&(0,i.jsx)("span",{className:"diff-text-marker",children:E}),(0,i.jsx)(eU.$6,{html:T,className:(0,eJ.$)("diff-text-inner",{"color-fg-muted":"HUNK"===r.type})})]}),r.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),($||r.isLastSelected&&m&&ex()?.endOrientation==="left"&&r.left===ex()?.endLineNumber||!m&&ex()?.endOrientation==="right"&&r.right===ex()?.endLineNumber)&&(0,i.jsx)(iQ,{authorAvatarUrl:C.avatarUrl,authorLogin:C.login,ref:ei,cellId:K,cellRef:ea,copilotChatReference:n,currentHunk:a,diffAnchor:s,diffLine:r,threads:N,annotations:e,enterDialogMode:eC,handleCopyCode:e3,hasDraftComment:H,isLeftSide:m,isSplit:f,nextHunk:v,onMouseDownAddCommentButton:eQ,onMouseLeaveAddCommentButton:eZ,previousHunk:b,showStartConversation:eT,shouldDisplayMinimizedComments:C.shouldDisplayComments,shouldDisplayCollapseComments:y.showMarkers,toggleViewingMarkers:e_,viewerData:C}),eV?(0,i.jsx)(nq,{backgroundColor:(0,I.Yf)(r.type,!0,h),gridCellId:K,gutterSizeOffset:er,inlineMarkersRef:em,cellRef:ea,dispatchMarkersStatus:o,lineMarkersKey:ee,manuallyUpdateCommentsWithThisThreadId:R,annotations:e,batchingEnabled:!0,conversationListThreads:N,fileAnchor:s,filePath:d,onCloseFocusMode:eb,isMarkerListOpen:!!ea.current?.classList.contains("diff-text-cell")&&N.length>0,isRowSelected:h,lineType:r.type,returnFocusRef:ew,subjectId:w,suggestedChangesConfig:eM,onCloseConversationList:ej,onDeleteLineComment:()=>{N.length<=1&&setTimeout(()=>ea.current?.focus())},viewerData:C,ghostUser:tR,children:eS&&(0,i.jsx)("div",{className:(0,eJ.$)(" border rounded-2 color-border-default",(N.length,"mt-2 mb-1")),children:(0,i.jsx)(tB,{addCommentDialogTitle:el,anchorRef:ea,diffAnchor:s,batchingEnabled:!0,filePath:d,focusOnMount:!(H&&C.commentsPreference===nQ.sI.Visible),isLeftSide:!!m,isInDialogMode:z,isOpen:eS,lineNumber:e6,returnFocusRef:ew,startLineNumber:e7,subjectId:w,suggestedChangesConfig:eM,viewerData:C,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!r)return;let a=ex();if(ev){let s,l=new ReviewCommentFactory({filePath:d,newTreeEntry:eO,oldTreeEntry:eP,selectedDiffRange:eA,submitBatch:n,text:i});eR(s=a&&h&&a.startLineNumber&&a.endLineNumber&&a.startLineNumber!==a.endLineNumber?l.multilineRequestData(a):l.lineRequestData(r,m),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),eh(),A(t.thread.id)}})}else{let s,l,o=!!a&&a.startLineNumber!==a.endLineNumber,c=r.blobLineNumber,u=m&&!(0,I.Ji)(r)?"left":"right";a&&o&&h&&(u="left"===a.endOrientation?"left":"right",l="left"===a.startOrientation?"left":"right",c=a.endLineNumber,s=a.startLineNumber),eR({text:i,line:c,path:d,side:u,startSide:l,submitBatch:n,startLine:s,comparisonEndOid:eE,comparisonStartOid:eD},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),eh(),A(t.thread.id)}})}},onCloseCommentDialog:e2})})}):null,!$&&C.commentsPreference===nQ.sI.Collapsed&&C.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===C.lineSpacingPreference?"-8px":"-9px"},className:(0,eJ.$)("position-absolute top-0 d-flex user-select-none","ContentCell-module__in-progress-comment-indicator--Onob7"),children:H&&(0,i.jsx)(iW,{lineSpacingPreference:C.lineSpacingPreference,authorAvatarUrl:C.avatarUrl,authorLogin:C.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,eJ.$)("position-absolute top-0 d-flex user-select-none","ContentCell-module__comment-indicator--Avv5C"),children:(0,i.jsx)(io,{threads:N,annotations:e,shouldAnimateRef:eB,lineSpacingPreference:C.lineSpacingPreference})})]}),(0,i.jsx)(iJ,{annotationCount:en,threadCount:et})]},e4)}),ac=(0,l.memo)(ad);try{ad.displayName||(ad.displayName="ContentCellUnmemoized")}catch{}try{ac.displayName||(ac.displayName="ContentCell")}catch{}let au=["CONTEXT","INJECTED_CONTEXT"];function am(e,t,n,i){return("CONTEXT"!==e.type||!t||!n)&&i>0}let ah=(0,l.memo)(ap),af=(0,a.GV)();function ap(e){return af?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,L,T,E,D=(0,s.c)(70);if(D[0]!==e){let{children:i,columnIndex:s,diffAnchor:l,diffLine:v,handleDiffSideCellSelectionBlocking:b,isLeftSide:_,isRowSelected:j,isSplit:w,filePath:N,copilotChatReference:C,contentRef:S,contentColumnIndex:I,dispatchMarkersStatus:k,rowId:L,threadsAtPosition:T,annotationsAtPosition:E,...R}=e;n=i,a=s,d=l,c=v,m=b,h=_,f=j,p=w,o=S,r=I,u=k,y=L,x=T,t=E,g=R,D[0]=e,D[1]=t,D[2]=n,D[3]=a,D[4]=r,D[5]=o,D[6]=d,D[7]=c,D[8]=u,D[9]=m,D[10]=h,D[11]=f,D[12]=p,D[13]=g,D[14]=y,D[15]=x}else t=D[1],n=D[2],a=D[3],r=D[4],o=D[5],d=D[6],c=D[7],u=D[8],m=D[9],h=D[10],f=D[11],p=D[12],g=D[13],y=D[14],x=D[15];let R=(0,l.useRef)(null),A=c,O=F(),{addLineToSelection:P}=W();D[16]!==P||D[17]!==O||D[18]!==h||D[19]!==A?(v=e=>{1!==e.buttons||O()&&P({lineKey:(0,k.bo)(A),orientation:h?"left":"right"},eg)},D[16]=P,D[17]=O,D[18]=h,D[19]=A,D[20]=v):v=D[20];let $=v,{selectLine:B}=W(),V=M();D[21]!==P||D[22]!==V||D[23]!==h||D[24]!==A||D[25]!==B?(b=e=>{if(V()&&e.shiftKey)return void P({lineKey:(0,k.bo)(A),orientation:h?"left":"right"},eg);let t=h?A.left:A.right;t&&B({lineKey:(0,k.bo)(A),firstLineSelectionOnDrag:{orientation:h?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,k.bo)(A)}},eg)},D[21]=P,D[22]=V,D[23]=h,D[24]=A,D[25]=B,D[26]=b):b=D[26];let U=b,q=`LineNumberCell-left:${A.left}-right:${A.right}-leftSide:${h}`;D[27]!==r||D[28]!==y?(_=(0,I.u6)(y,r),D[27]=r,D[28]=y,D[29]=_):_=D[29];let G=_,H=nV(G,o,u);D[30]!==G||D[31]!==H?(j={cellId:G,onOpenDialog:H},D[30]=G,D[31]=H,D[32]=j):j=D[32];let{startNewConversation:K}=n5(j);D[33]!==a||D[34]!==y?(w=(0,I.u6)(y,a),D[33]=a,D[34]=y,D[35]=w):w=D[35];let z=w;D[36]!==A.type?(N=(0,eJ.$)("diff-line-number position-relative",au.includes(A.type)&&"diff-line-number-neutral"),D[36]=A.type,D[37]=N):N=D[37];let Q=!p&&0===a,Z=x.length+t.length;return D[38]!==h||D[39]!==p||D[40]!==A||D[41]!==Z?(C=am(A,h,p,Z),D[38]=h,D[39]=p,D[40]=A,D[41]=Z,D[42]=C):C=D[42],D[43]!==f||D[44]!==A.type?(S=(0,I.Yf)(A.type,!0,f),D[43]=f,D[44]=A.type,D[45]=S):S=D[45],D[46]!==S?(L={backgroundColor:S,textAlign:"center"},D[46]=S,D[47]=L):L=D[47],D[48]!==n?(T=(0,i.jsx)("code",{children:n}),D[48]=n,D[49]=T):T=D[49],D[50]!==z||D[51]!==a||D[52]!==d||D[53]!==c||D[54]!==H||D[55]!==m||D[56]!==U||D[57]!==$||D[58]!==h||D[59]!==f||D[60]!==p||D[61]!==q||D[62]!==g||D[63]!==K||D[64]!==L||D[65]!==T||D[66]!==N||D[67]!==Q||D[68]!==C?(E=(0,i.jsx)(iY,{ref:R,cellId:z,className:N,columnIndex:a,diffAnchor:d,diffLine:c,"data-first-unified-line-number-cell":Q,enterDialogMode:H,handleDiffSideCellSelectionBlocking:m,hasThreads:C,style:L,handleDiffCellMouseDown:U,handleStartConversation:K,isLeftSide:h,isRowSelected:f,isSplit:p,onMouseEnter:$,...g,children:T},q),D[50]=z,D[51]=a,D[52]=d,D[53]=c,D[54]=H,D[55]=m,D[56]=U,D[57]=$,D[58]=h,D[59]=f,D[60]=p,D[61]=q,D[62]=g,D[63]=K,D[64]=L,D[65]=T,D[66]=N,D[67]=Q,D[68]=C,D[69]=E):E=D[69],E}(e):function({children:e,columnIndex:t,diffAnchor:n,diffLine:a,handleDiffSideCellSelectionBlocking:s,isLeftSide:r,isRowSelected:o,isSplit:d,filePath:c,copilotChatReference:u,contentRef:m,contentColumnIndex:h,dispatchMarkersStatus:f,rowId:p,threadsAtPosition:g,annotationsAtPosition:y,...x}){let v=(0,l.useRef)(null),b=F(),{addLineToSelection:_}=W(),j=(0,l.useCallback)(e=>{1!==e.buttons||b()&&_({lineKey:(0,k.bo)(a),orientation:r?"left":"right"},eg)},[b,_,a,r]),{selectLine:w}=W(),N=M(),C=`LineNumberCell-left:${a.left}-right:${a.right}-leftSide:${r}`,S=(0,I.u6)(p,h),L=nV(S,m,f),{startNewConversation:T}=n5({cellId:S,onOpenDialog:L}),E=(0,I.u6)(p,t);return(0,i.jsx)(iY,{ref:v,cellId:E,className:(0,eJ.$)("diff-line-number position-relative",au.includes(a.type)&&"diff-line-number-neutral"),columnIndex:t,diffAnchor:n,diffLine:a,"data-first-unified-line-number-cell":!d&&0===t,enterDialogMode:L,handleDiffSideCellSelectionBlocking:s,hasThreads:am(a,r,d,g.length+y.length),style:{backgroundColor:(0,I.Yf)(a.type,!0,o),textAlign:"center"},handleDiffCellMouseDown:e=>{if(N()&&e.shiftKey)return void _({lineKey:(0,k.bo)(a),orientation:r?"left":"right"},eg);let t=r?a.left:a.right;t&&w({lineKey:(0,k.bo)(a),firstLineSelectionOnDrag:{orientation:r?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:(0,k.bo)(a)}},eg)},handleStartConversation:T,isLeftSide:r,isRowSelected:o,isSplit:d,onMouseEnter:j,...x,children:(0,i.jsx)("code",{children:e})},C)}(e)}try{ah.displayName||(ah.displayName="LineNumberCell")}catch{}try{ap.displayName||(ap.displayName="LineNumberCellUnmemoized")}catch{}let ag=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(9),{columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c,showRightBorder:u}=e;return a[0]!==u?(t=(0,eJ.$)("empty-diff-line",{"border-right":u}),a[0]=u,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==d||a[6]!==c||a[7]!==t?(n=(0,i.jsx)(iY,{className:t,columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c}),a[2]=r,a[3]=l,a[4]=o,a[5]=d,a[6]=c,a[7]=t,a[8]=n):n=a[8],n}:function({columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s,showRightBorder:r}){return(0,i.jsx)(iY,{className:(0,eJ.$)("empty-diff-line",{"border-right":r}),columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})};try{ag.displayName||(ag.displayName="EmptyCell")}catch{}function ay(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let ax=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(7),o=e===nQ.sI.Collapsed;r[0]!==o?(t={userMinimized:o,showMarkers:!1},r[0]=o,r[1]=t):t=r[1];let[d,c]=(0,l.useReducer)(ay,t),u=(0,l.useRef)(e);return r[2]!==e?(n=()=>{u.current!==e&&(u.current=e,e===nQ.sI.Visible?c("SHOW_MARKERS"):c("USER_MINIMIZED_MARKERS"))},i=[e,c],r[2]=e,r[3]=n,r[4]=i):(n=r[3],i=r[4]),(0,l.useEffect)(n,i),r[5]!==d?(a=[d,c],r[5]=d,r[6]=a):a=r[6],a}:function(e){let[t,n]=(0,l.useReducer)(ay,{userMinimized:e===nQ.sI.Collapsed,showMarkers:!1}),i=(0,l.useRef)(e);return(0,l.useEffect)(()=>{i.current!==e&&(i.current=e,e===nQ.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]};var av=n(87825);let ab=(0,a.GV)()?e=>{let t,n,a,r,o,d,c=(0,s.c)(66),{annotationsAtPosition:u,copilotChatReference:m,currentHunk:h,diffAnchor:f,diffLine:p,filePath:g,lineAnchor:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:v,isLeftSide:b,isRowSelected:_,isSplit:j,nextHunk:w,previousHunk:N,rowId:C,subjectId:S,threadsAtPosition:I,viewerData:k}=e,L=(0,l.useRef)(null),T="ADDITION"!==p.type,E=!j||b,D="DELETION"!==p.type,R=!j||!b;c[0]!==x?(t=()=>{x&&x("left")},c[0]=x,c[1]=t):t=c[1];let A=t;c[2]!==x?(n=()=>{x&&x("right")},c[2]=x,c[3]=n):n=c[3];let O=n,P=j?b?1:3:2,[F,M]=ax(k.commentsPreference);c[4]!==u||c[5]!==P||c[6]!==m||c[7]!==f||c[8]!==p||c[9]!==M||c[10]!==g||c[11]!==O||c[12]!==v||c[13]!==b||c[14]!==_||c[15]!==j||c[16]!==p.left||c[17]!==C||c[18]!==T||c[19]!==E||c[20]!==D||c[21]!==I?(a=E&&(0,i.jsxs)(ah,{threadsAtPosition:I,annotationsAtPosition:u,copilotChatReference:m,columnIndex:0,contentColumnIndex:P,contentRef:L,diffAnchor:f,diffLine:p,dispatchMarkersStatus:M,filePath:g,handleDiffSideCellSelectionBlocking:O,isLeftSide:b,isRowSelected:_,isSplit:j,rowId:C,children:[v&&!D&&(0,i.jsx)(aj,{children:(0,i.jsx)(av.o,{})}),T&&p.left]}),c[4]=u,c[5]=P,c[6]=m,c[7]=f,c[8]=p,c[9]=M,c[10]=g,c[11]=O,c[12]=v,c[13]=b,c[14]=_,c[15]=j,c[16]=p.left,c[17]=C,c[18]=T,c[19]=E,c[20]=D,c[21]=I,c[22]=a):a=c[22],c[23]!==u||c[24]!==P||c[25]!==m||c[26]!==f||c[27]!==p||c[28]!==M||c[29]!==g||c[30]!==A||c[31]!==v||c[32]!==b||c[33]!==_||c[34]!==j||c[35]!==p.right||c[36]!==C||c[37]!==D||c[38]!==R||c[39]!==I?(r=R&&(0,i.jsxs)(ah,{annotationsAtPosition:u,copilotChatReference:m,columnIndex:j?2:1,contentColumnIndex:P,contentRef:L,diffAnchor:f,diffLine:p,dispatchMarkersStatus:M,filePath:g,handleDiffSideCellSelectionBlocking:A,isLeftSide:b,isRowSelected:_,isSplit:j,rowId:C,threadsAtPosition:I,children:[v&&D&&(0,i.jsx)(aj,{children:(0,i.jsx)(av.o,{})}),D&&p.right]}),c[23]=u,c[24]=P,c[25]=m,c[26]=f,c[27]=p,c[28]=M,c[29]=g,c[30]=A,c[31]=v,c[32]=b,c[33]=_,c[34]=j,c[35]=p.right,c[36]=C,c[37]=D,c[38]=R,c[39]=I,c[40]=r):r=c[40];let $=b?O:A;return c[41]!==u||c[42]!==P||c[43]!==m||c[44]!==h||c[45]!==f||c[46]!==p||c[47]!==M||c[48]!==g||c[49]!==b||c[50]!==_||c[51]!==j||c[52]!==y||c[53]!==F||c[54]!==w||c[55]!==N||c[56]!==C||c[57]!==S||c[58]!==$||c[59]!==I||c[60]!==k?(o=(0,i.jsx)(ac,{annotationsAtPosition:u,copilotChatReference:m,columnIndex:P,currentHunk:h,diffAnchor:f,diffLine:p,dispatchMarkersStatus:M,filePath:g,lineAnchor:y,handleDiffSideCellSelectionBlocking:$,isLeftSide:b,isRowSelected:_,isSplit:j,markersStatus:F,nextHunk:w,previousHunk:N,ref:L,rowId:C,subjectId:S,threadsAtPosition:I,viewerData:k}),c[41]=u,c[42]=P,c[43]=m,c[44]=h,c[45]=f,c[46]=p,c[47]=M,c[48]=g,c[49]=b,c[50]=_,c[51]=j,c[52]=y,c[53]=F,c[54]=w,c[55]=N,c[56]=C,c[57]=S,c[58]=$,c[59]=I,c[60]=k,c[61]=o):o=c[61],c[62]!==a||c[63]!==r||c[64]!==o?(d=(0,i.jsxs)(n2,{children:[a,r,o]}),c[62]=a,c[63]=r,c[64]=o,c[65]=d):d=c[65],d}:({annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffAnchor:a,diffLine:s,filePath:r,lineAnchor:o,handleDiffSideCellSelectionBlocking:d,hasHiddenUnicodeCharacters:c,isLeftSide:u,isRowSelected:m,isSplit:h,nextHunk:f,previousHunk:p,rowId:g,subjectId:y,threadsAtPosition:x,viewerData:v})=>{let b=(0,l.useRef)(null),_="ADDITION"!==s.type,j=!h||u,w="DELETION"!==s.type,N=!h||!u,C=(0,l.useCallback)(()=>{d&&d("left")},[d]),S=(0,l.useCallback)(()=>{d&&d("right")},[d]),I=h?u?1:3:2,[k,L]=ax(v.commentsPreference);return(0,i.jsxs)(n2,{children:[j&&(0,i.jsxs)(ah,{threadsAtPosition:x,annotationsAtPosition:e,copilotChatReference:t,columnIndex:0,contentColumnIndex:I,contentRef:b,diffAnchor:a,diffLine:s,dispatchMarkersStatus:L,filePath:r,handleDiffSideCellSelectionBlocking:S,isLeftSide:u,isRowSelected:m,isSplit:h,rowId:g,children:[c&&!w&&(0,i.jsx)(aj,{children:(0,i.jsx)(av.o,{})}),_&&s.left]}),N&&(0,i.jsxs)(ah,{annotationsAtPosition:e,copilotChatReference:t,columnIndex:h?2:1,contentColumnIndex:I,contentRef:b,diffAnchor:a,diffLine:s,dispatchMarkersStatus:L,filePath:r,handleDiffSideCellSelectionBlocking:C,isLeftSide:u,isRowSelected:m,isSplit:h,rowId:g,threadsAtPosition:x,children:[c&&w&&(0,i.jsx)(aj,{children:(0,i.jsx)(av.o,{})}),w&&s.right]}),(0,i.jsx)(ac,{annotationsAtPosition:e,copilotChatReference:t,columnIndex:I,currentHunk:n,diffAnchor:a,diffLine:s,dispatchMarkersStatus:L,filePath:r,lineAnchor:o,handleDiffSideCellSelectionBlocking:u?S:C,isLeftSide:u,isRowSelected:m,isSplit:h,markersStatus:k,nextHunk:f,previousHunk:p,ref:b,rowId:g,subjectId:y,threadsAtPosition:x,viewerData:v})]})},a_=(0,a.GV)()?e=>{let t,n=(0,s.c)(40),{annotationsAtPosition:a,copilotChatReference:r,currentHunk:l,diffLine:o,diffAnchor:d,filePath:c,handleDiffSideCellSelectionBlocking:u,hasHiddenUnicodeCharacters:m,isLeftSide:h,isRowSelected:f,isSplit:p,nextHunk:g,previousHunk:y,rowId:x,subjectId:v,threadsAtPosition:b,viewerData:_}=e;if((0,I.Po)(o)){let e,t,a,s=2*!h;n[0]!==d||n[1]!==o||n[2]!==h||n[3]!==p||n[4]!==s?(e=(0,i.jsx)(ag,{columnIndex:s,diffAnchor:d,diffLine:o,isLeftSide:h,isSplit:p}),n[0]=d,n[1]=o,n[2]=h,n[3]=p,n[4]=s,n[5]=e):e=n[5];let r=h?1:3;return n[6]!==d||n[7]!==o||n[8]!==h||n[9]!==p||n[10]!==r?(t=(0,i.jsx)(ag,{columnIndex:r,diffAnchor:d,diffLine:o,isLeftSide:h,isSplit:p}),n[6]=d,n[7]=o,n[8]=h,n[9]=p,n[10]=r,n[11]=t):t=n[11],n[12]!==e||n[13]!==t?(a=(0,i.jsxs)(i.Fragment,{children:[e,t]}),n[12]=e,n[13]=t,n[14]=a):a=n[14],a}if(n[15]!==d||n[16]!==o.left||n[17]!==o.right||n[18]!==o.type||n[19]!==h){let e=h?"left":(0,eQ.XU)(o.type),i="left"===e?o.left:o.right;t=(0,eQ.IQ)(d,e,i??0),n[15]=d,n[16]=o.left,n[17]=o.right,n[18]=o.type,n[19]=h,n[20]=t}else t=n[20];let j=t;switch(o.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":{let e;return n[21]!==a||n[22]!==r||n[23]!==l||n[24]!==d||n[25]!==o||n[26]!==c||n[27]!==u||n[28]!==m||n[29]!==h||n[30]!==f||n[31]!==p||n[32]!==j||n[33]!==g||n[34]!==y||n[35]!==x||n[36]!==v||n[37]!==b||n[38]!==_?(e=(0,i.jsx)(aN,{annotationsAtPosition:a,copilotChatReference:r,currentHunk:l,diffAnchor:d,diffLine:o,filePath:c,handleDiffSideCellSelectionBlocking:u,hasHiddenUnicodeCharacters:m,isLeftSide:h,isRowSelected:f,isSplit:p,lineAnchor:j,nextHunk:g,previousHunk:y,rowId:x,subjectId:v,threadsAtPosition:b,viewerData:_}),n[21]=a,n[22]=r,n[23]=l,n[24]=d,n[25]=o,n[26]=c,n[27]=u,n[28]=m,n[29]=h,n[30]=f,n[31]=p,n[32]=j,n[33]=g,n[34]=y,n[35]=x,n[36]=v,n[37]=b,n[38]=_,n[39]=e):e=n[39],e}default:throw Error(`cannot handle type ${o.type}`)}}:({annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffLine:a,diffAnchor:s,filePath:r,handleDiffSideCellSelectionBlocking:l,hasHiddenUnicodeCharacters:o,isLeftSide:d,isRowSelected:c,isSplit:u,nextHunk:m,previousHunk:h,rowId:f,subjectId:p,threadsAtPosition:g,viewerData:y})=>{if((0,I.Po)(a))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ag,{columnIndex:2*!d,diffAnchor:s,diffLine:a,isLeftSide:d,isSplit:u}),(0,i.jsx)(ag,{columnIndex:d?1:3,diffAnchor:s,diffLine:a,isLeftSide:d,isSplit:u})]});let x=d?"left":(0,eQ.XU)(a.type),v="left"===x?a.left:a.right,b=(0,eQ.IQ)(s,x,v??0);switch(a.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(aN,{annotationsAtPosition:e,copilotChatReference:t,currentHunk:n,diffAnchor:s,diffLine:a,filePath:r,handleDiffSideCellSelectionBlocking:l,hasHiddenUnicodeCharacters:o,isLeftSide:d,isRowSelected:c,isSplit:u,lineAnchor:b,nextHunk:m,previousHunk:h,rowId:f,subjectId:p,threadsAtPosition:g,viewerData:y});default:throw Error(`cannot handle type ${a.type}`)}},aj=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},a[0]=t):t=a[0],a[1]!==r?(n=(0,i.jsx)("span",{className:"position-absolute",style:t,children:r}),a[1]=r,a[2]=n):n=a[2],n}:function({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})},aw=l.memo(a_),aN=l.memo(ab);try{ab.displayName||(ab.displayName="CodeDiffLineUnmemoized")}catch{}try{a_.displayName||(a_.displayName="DiffLineSideUnmemoized")}catch{}try{aj.displayName||(aj.displayName="DiffCodeAlert")}catch{}try{aw.displayName||(aw.displayName="DiffLineSide")}catch{}try{aN.displayName||(aN.displayName="CodeDiffLine")}catch{}let aC=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(5),{isSplit:l}=e,o=!l&&"hunk-kebab-icon-unified";return r[0]!==o?(t=(0,eJ.$)("hunk-kebab-icon pr-2 pb-1",o),r[0]=o,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.KebabHorizontalIcon,{}),r[2]=n):n=r[2],r[3]!==t?(a=(0,i.jsx)("div",{className:t,children:n}),r[3]=t,r[4]=a):a=r[4],a}:function({isSplit:e}){return(0,i.jsx)("div",{className:(0,eJ.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(c.KebabHorizontalIcon,{})})};try{aC.displayName||(aC.displayName="HunkKebabIcon")}catch{}let aS=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(17),[u,m]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),p=u?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let g=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let y=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),f(!1)},c[4]=e,c[5]=i):i=c[5];let x=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{e.stopPropagation(),f(!0)},c[6]=a):a=c[6];let v=a;c[7]!==g||c[8]!==y?(r={onFocus:y,onBlur:g},c[7]=g,c[8]=y,c[9]=r):r=c[9];let b=r,_=!h;c[10]!==p||c[11]!==x||c[12]!==_?(o={"aria-hidden":_,tabIndex:p,onBlur:x,onFocusCapture:v,onKeyDownCapture:aI},c[10]=p,c[11]=x,c[12]=_,c[13]=o):o=c[13];let j=o;return c[14]!==j||c[15]!==b?(d=[b,j],c[14]=j,c[15]=b,c[16]=d):d=c[16],d}:function(e){let[t,n]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),s=(0,l.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,l.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:s},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,l.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]),onFocusCapture:(0,l.useCallback)(e=>{e.stopPropagation(),a(!0)},[]),onKeyDownCapture:(0,l.useCallback)(e=>{tO(e.key)&&e.stopPropagation()},[])}]};function aI(e){tO(e.key)&&e.stopPropagation()}let ak=(0,a.GV)()?function(e){let t,n,a,r,o,d=(0,s.c)(18),{diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,renderHunkButton:f}=e,p=(0,l.useRef)(null),[g,y]=aS(p);if((0,I.Po)(u))return null;let x=`HunkCell-left:${u.left}-right:${u.right}`;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},d[0]=t):t=d[0],d[1]!==y||d[2]!==h||d[3]!==f?(n=f?.(y)??(0,i.jsx)(aC,{isSplit:h}),d[1]=y,d[2]=h,d[3]=f,d[4]=n):n=d[4];let v=u.html;return d[5]!==v?(a=(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eU.$6,{className:"diff-text-inner color-fg-muted",html:v})}),d[5]=v,d[6]=a):a=d[6],d[7]!==n||d[8]!==a?(r=(0,i.jsxs)("div",{className:"d-flex flex-row",children:[n,a]}),d[7]=n,d[8]=a,d[9]=r):r=d[9],d[10]!==g||d[11]!==c||d[12]!==u||d[13]!==m||d[14]!==h||d[15]!==x||d[16]!==r?(o=(0,i.jsx)(iY,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,ref:p,style:t,...g,children:r},x),d[10]=g,d[11]=c,d[12]=u,d[13]=m,d[14]=h,d[15]=x,d[16]=r,d[17]=o):o=d[17],o}:function({diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,renderHunkButton:s}){let r=(0,l.useRef)(null),[o,d]=aS(r);if((0,I.Po)(t))return null;let c=`HunkCell-left:${t.left}-right:${t.right}`;return(0,i.jsx)(iY,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,ref:r,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...o,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[s?.(d)??(0,i.jsx)(aC,{isSplit:a}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(eU.$6,{className:"diff-text-inner color-fg-muted",html:t.html})})]})},c)};try{ak.displayName||(ak.displayName="HunkCell")}catch{}let aL="ExpandableHunkHeaderDiffLine-module__expand-button-line--CbsbZ",aT="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--amzYl",aE="ExpandableHunkHeaderDiffLine-module__expand-button-unified--pt9f0",aD=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(24);p[0]!==e?({direction:l,icon:t,isSplit:o,label:d,onClick:c,ariaLabel:a,className:r,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=a,p[4]=r,p[5]=l,p[6]=o,p[7]=d,p[8]=c):(t=p[1],n=p[2],a=p[3],r=p[4],l=p[5],o=p[6],d=p[7],c=p[8]);let{sendAnalyticsEvent:g}=(0,t$.s)();p[9]!==c||p[10]!==g?(u=()=>{c(),g("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},p[9]=c,p[10]=g,p[11]=u):u=p[11];let y=!o&&aE;p[12]!==r||p[13]!==y?(m=(0,eJ.$)("Button Button--iconOnly Button--invisible",aL,y,r),p[12]=r,p[13]=y,p[14]=m):m=p[14];let x=a??d;return p[15]!==t?(h=(0,i.jsx)(t,{}),p[15]=t,p[16]=h):h=p[16],p[17]!==n||p[18]!==l||p[19]!==u||p[20]!==m||p[21]!==x||p[22]!==h?(f=(0,i.jsx)("button",{onClick:u,className:m,"aria-label":x,"data-direction":l,...n,children:h}),p[17]=n,p[18]=l,p[19]=u,p[20]=m,p[21]=x,p[22]=h,p[23]=f):f=p[23],f}:function({direction:e,icon:t,isSplit:n,label:a,onClick:s,ariaLabel:r,className:l,...o}){let{sendAnalyticsEvent:d}=(0,t$.s)();return(0,i.jsx)("button",{onClick:()=>{s(),d("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,eJ.$)("Button Button--iconOnly Button--invisible",aL,!n&&aE,l),"aria-label":r??a,"data-direction":e,...o,children:(0,i.jsx)(t,{})})},aR=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p=(0,s.c)(25),{currentHunk:g,diffAnchor:y,diffLine:x,fileLineCount:v,isLeftSide:b,isSplit:_,nextHunk:j,nextLine:w,previousHunk:N,prevLine:C}=e;p[0]!==g||p[1]!==j||p[2]!==N?(t={currentHunk:g,nextHunk:j,previousHunk:N},p[0]=g,p[1]=j,p[2]=N,p[3]=t):t=p[3];let{expandStartOfHunk:S,expandEndOfPreviousHunk:I}=ic(t),k=0===x.position&&0!==x.blobLineNumber||!C,L=!w,T=0===x.blobLineNumber,E=k||L,D=L&&C?.blobLineNumber===v;e:{if(E||x.blobLineNumber<=0){n=!1;break e}if(x.blobLineNumber-C.blobLineNumber<=20||w.blobLineNumber-x.blobLineNumber>=20){n=!0;break e}n=!1}let R=n;t:{if(E||D){a=!1;break t}if(x.blobLineNumber-C.blobLineNumber>20){a=!0;break t}a=!1}let A=a;n:{if(x.blobLineNumber<=0||T){r=!1;break n}if(k){r=!0;break n}r=!1}let O=r;i:{if(k||D){l=!1;break i}if(L){l=!0;break i}l=!1}let P=l;a:{switch(!0){case R:o="expand-all";break a;case A:o="expand-up-and-down";break a;case O:o="expand-up";break a;case P:o="expand-down";break a}o=void 0}let F=o;p[4]!==S?(d=()=>S(),p[4]=S,p[5]=d):d=p[5];let M=d;p[6]!==I?(u=()=>I(),p[6]=I,p[7]=u):u=p[7];let $=u;p[8]!==S?(m=()=>S(),p[8]=S,p[9]=m):m=p[9];let V=m,U=B();p[10]!==F||p[11]!==M||p[12]!==V||p[13]!==$||p[14]!==U||p[15]!==_||p[16]!==w?.blobLineNumber||p[17]!==C?.blobLineNumber?(h=e=>{if(U.has(iT.YR.expandLines))return null;switch(F){case"expand-all":return(0,i.jsx)(aD,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:_,label:`Expand file from line ${C?.blobLineNumber||""} to line ${w?.blobLineNumber||""}`,onClick:V});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(aD,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:_,label:`Expand file down from line ${C?.blobLineNumber||""}`,className:aT,onClick:$}),(0,i.jsx)(aD,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:_,label:`Expand file up from line ${w?.blobLineNumber||""}`,className:aT,onClick:M})]});case"expand-up":return(0,i.jsx)(aD,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:_,label:`Expand file up from line ${w?.blobLineNumber||""}`,onClick:M});case"expand-down":return(0,i.jsx)(aD,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:_,label:`Expand file down from line ${C?.blobLineNumber||""}`,onClick:$});default:return null}},p[10]=F,p[11]=M,p[12]=V,p[13]=$,p[14]=U,p[15]=_,p[16]=w?.blobLineNumber,p[17]=C?.blobLineNumber,p[18]=h):h=p[18];let q=h;return p[19]!==y||p[20]!==x||p[21]!==b||p[22]!==_||p[23]!==q?(f=(0,i.jsx)(ak,{renderHunkButton:q,diffAnchor:y,diffLine:x,isLeftSide:b,isSplit:_}),p[19]=y,p[20]=x,p[21]=b,p[22]=_,p[23]=q,p[24]=f):f=p[24],f}:function({currentHunk:e,diffAnchor:t,diffLine:n,fileLineCount:a,isLeftSide:s,isSplit:r,nextHunk:o,nextLine:d,previousHunk:u,prevLine:m}){let{expandStartOfHunk:h,expandEndOfPreviousHunk:f}=ic({currentHunk:e,nextHunk:o,previousHunk:u}),p=0===n.position&&0!==n.blobLineNumber||!m,g=!d,y=0===n.blobLineNumber,x=p||g,v=g&&m?.blobLineNumber===a,b=(0,l.useMemo)(()=>!x&&!(n.blobLineNumber<=0)&&(!!(n.blobLineNumber-m.blobLineNumber<=20)||!!(d.blobLineNumber-n.blobLineNumber>=20)),[x,n,d,m]),_=(0,l.useMemo)(()=>!x&&!v&&n.blobLineNumber-m.blobLineNumber>20,[x,v,n,m]),j=(0,l.useMemo)(()=>!(n.blobLineNumber<=0)&&!y&&!!p,[p,y,n]),w=(0,l.useMemo)(()=>!p&&!v&&!!g,[p,g,v]),N=(0,l.useMemo)(()=>{switch(!0){case b:return"expand-all";case _:return"expand-up-and-down";case j:return"expand-up";case w:return"expand-down"}},[b,_,j,w]),C=()=>h(),S=()=>f(),I=()=>h(),k=B();return(0,i.jsx)(ak,{renderHunkButton:e=>{if(k.has(iT.YR.expandLines))return null;switch(N){case"expand-all":return(0,i.jsx)(aD,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:r,label:`Expand file from line ${m?.blobLineNumber||""} to line ${d?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(aD,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:r,label:`Expand file down from line ${m?.blobLineNumber||""}`,className:aT,onClick:S}),(0,i.jsx)(aD,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:r,label:`Expand file up from line ${d?.blobLineNumber||""}`,className:aT,onClick:C})]});case"expand-up":return(0,i.jsx)(aD,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:r,label:`Expand file up from line ${d?.blobLineNumber||""}`,onClick:C});case"expand-down":return(0,i.jsx)(aD,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:r,label:`Expand file down from line ${m?.blobLineNumber||""}`,onClick:S});default:return null}},diffAnchor:t,diffLine:n,isLeftSide:s,isSplit:r})};try{aD.displayName||(aD.displayName="ExpandButtonLine")}catch{}try{aR.displayName||(aR.displayName="ExpandableHunkHeaderDiffLine")}catch{}var aA=n(12918);let aO=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f=(0,s.c)(53),{copilotChatReference:p,diffHasHiddenUnicodeCharacters:g,filePath:y,handleDiffSideCellSelectionBlocking:x,hunksData:v,leftDiffLine:b,nextDiffLine:_,prevDiffLine:w,rightDiffLine:N,showHiddenUnicode:C,subjectId:S,viewerData:k}=e,L=q(),T=G();f[0]!==g||f[1]!==C?(t=e=>{let t=!1;return g&&!(0,I.Po)(e)&&(t=(0,tM.Y)(e.text),C&&t&&(e=e.html?{...e,html:(0,aA.Gx)(e.html)??e.html}:{...e,text:(0,tM.TA)(e.text)})),[e,t]},f[0]=g,f[1]=C,f[2]=t):t=f[2];let E=t,[D,R]=E(b),[A,O]=E(N),P=K((0,I.Po)(D)?void 0:D),F=K((0,I.Po)(A)?void 0:A);e:{let e;if((0,I.Po)(D)){n=D;break e}f[3]!==D||f[4]!==P?(e={...D,...P},f[3]=D,f[4]=P,f[5]=e):e=f[5],n=e}let M=n;t:{let e;if((0,I.Po)(A)){a=A;break t}f[6]!==A||f[7]!==F?(e={...A,...F},f[6]=A,f[7]=F,f[8]=e):e=f[8],a=e}let $=a;f[9]!==M?(r=(0,I.qK)(M)&&"HUNK"===M.type,f[9]=M,f[10]=r):r=f[10];let B=r;f[11]!==L||f[12]!==b||f[13]!==N?(l=(0,I.qX)(L,b,N),f[11]=L,f[12]=b,f[13]=N,f[14]=l):l=f[14];let V=l;f[15]!==M||f[16]!==$?(o=(0,I.Po)(M)?(0,I.Po)($)?void 0:$:M,f[15]=M,f[16]=$,f[17]=o):o=f[17];let U=o;f[18]!==D?(d=(0,I.Po)(D)?void 0:(0,I.oH)(D.left,"LEFT"),f[18]=D,f[19]=d):d=f[19];let H=d,{threads:W,annotations:z}=(0,j.rP)(y,H??"");f[20]!==A?(c=(0,I.Po)(A)?void 0:(0,I.oH)(A.right,"RIGHT"),f[20]=A,f[21]=c):c=f[21];let Q=c,{threads:Z,annotations:J}=(0,j.rP)(y,Q??""),Y=!(((0,I.Po)(M)||!M.isSelected)&&((0,I.Po)($)||!$.isSelected));if(!U)return null;f[22]!==U||f[23]!==v?(u=e2(U,v),f[22]=U,f[23]=v,f[24]=u):u=f[24];let{currentHunk:X,nextHunk:ee,previousHunk:et}=u;return M?(f[25]!==p||f[26]!==X||f[27]!==L||f[28]!==T||f[29]!==y||f[30]!==x||f[31]!==B||f[32]!==Y||f[33]!==z||f[34]!==b||f[35]!==R||f[36]!==M||f[37]!==W||f[38]!==_||f[39]!==ee||f[40]!==w||f[41]!==et||f[42]!==J||f[43]!==O||f[44]!==$||f[45]!==Z||f[46]!==V||f[47]!==S||f[48]!==k?(m=B?(0,i.jsx)(aR,{currentHunk:X,diffAnchor:L,diffLine:b,fileLineCount:T,isLeftSide:!0,isSplit:!0,nextHunk:ee,nextLine:_,previousHunk:et,prevLine:w}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aw,{annotationsAtPosition:z,copilotChatReference:p,currentHunk:X,diffLine:M,diffAnchor:L,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:R,isLeftSide:!0,isRowSelected:Y,isSplit:!0,nextHunk:ee,previousHunk:et,rowId:V,subjectId:S,threadsAtPosition:W,viewerData:k}),(0,i.jsx)(aw,{threadsAtPosition:Z,annotationsAtPosition:J,copilotChatReference:p,currentHunk:X,diffLine:$,diffAnchor:L,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:O,isLeftSide:!1,isRowSelected:Y,isSplit:!0,nextHunk:ee,previousHunk:et,rowId:V,subjectId:S,viewerData:k})]}),f[25]=p,f[26]=X,f[27]=L,f[28]=T,f[29]=y,f[30]=x,f[31]=B,f[32]=Y,f[33]=z,f[34]=b,f[35]=R,f[36]=M,f[37]=W,f[38]=_,f[39]=ee,f[40]=w,f[41]=et,f[42]=J,f[43]=O,f[44]=$,f[45]=Z,f[46]=V,f[47]=S,f[48]=k,f[49]=m):m=f[49],f[50]!==V||f[51]!==m?(h=(0,i.jsx)("tr",{className:"diff-line-row",children:m},V),f[50]=V,f[51]=m,f[52]=h):h=f[52],h):null}:function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,handleDiffSideCellSelectionBlocking:a,hunksData:s,leftDiffLine:r,nextDiffLine:o,prevDiffLine:d,rightDiffLine:c,showHiddenUnicode:u,subjectId:m,viewerData:h}){let f=q(),p=G(),g=e=>{let n=!1;return t&&!(0,I.Po)(e)&&(n=(0,tM.Y)(e.text),u&&n&&(e=e.html?{...e,html:(0,aA.Gx)(e.html)??e.html}:{...e,text:(0,tM.TA)(e.text)})),[e,n]},[y,x]=g(r),[v,b]=g(c),_=K((0,I.Po)(y)?void 0:y),w=K((0,I.Po)(v)?void 0:v),N=(0,l.useMemo)(()=>(0,I.Po)(y)?y:{...y,..._},[y,_]),C=(0,l.useMemo)(()=>(0,I.Po)(v)?v:{...v,...w},[v,w]),S=(0,I.qK)(N)&&"HUNK"===N.type,k=(0,I.qX)(f,r,c),L=(0,I.Po)(N)?(0,I.Po)(C)?void 0:C:N,T=(0,I.Po)(y)?void 0:(0,I.oH)(y.left,"LEFT"),{threads:E,annotations:D}=(0,j.rP)(n,T??""),R=(0,I.Po)(v)?void 0:(0,I.oH)(v.right,"RIGHT"),{threads:A,annotations:O}=(0,j.rP)(n,R??""),P=(0,l.useMemo)(()=>!(((0,I.Po)(N)||!N.isSelected)&&((0,I.Po)(C)||!C.isSelected)),[N,C]);if(!L)return null;let{currentHunk:F,nextHunk:M,previousHunk:$}=e2(L,s);return N?(0,i.jsx)("tr",{className:"diff-line-row",children:S?(0,i.jsx)(aR,{currentHunk:F,diffAnchor:f,diffLine:r,fileLineCount:p,isLeftSide:!0,isSplit:!0,nextHunk:M,nextLine:o,previousHunk:$,prevLine:d}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aw,{annotationsAtPosition:D,copilotChatReference:e,currentHunk:F,diffLine:N,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:x,isLeftSide:!0,isRowSelected:P,isSplit:!0,nextHunk:M,previousHunk:$,rowId:k,subjectId:m,threadsAtPosition:E,viewerData:h}),(0,i.jsx)(aw,{threadsAtPosition:A,annotationsAtPosition:O,copilotChatReference:e,currentHunk:F,diffLine:C,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:b,isLeftSide:!1,isRowSelected:P,isSplit:!0,nextHunk:M,previousHunk:$,rowId:k,subjectId:m,viewerData:h})]})},k):null});try{aO.displayName||(aO.displayName="SplitDiffRow")}catch{}function aP(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(o.Vv);for(;n.length<t.length;)n.push(o.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}let aF=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(5);i[0]!==e?(t=aP(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:r}=t;return i[2]!==a||i[3]!==r?(n={leftLines:a,rightLines:r},i[2]=a,i[3]=r,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>aP(e),[e]);return{leftLines:t,rightLines:n}},aM=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(24),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,showHiddenUnicode:h,tableRef:f,copilotChatReference:p,subjectId:g,viewerData:y}=e,{leftLines:x,rightLines:v}=aF(d);l[0]!==x?(t=e3(x),l[0]=x,l[1]=t):t=l[1];let b=t,{addLineToSelection:_,clearSelectedLines:j,selectMultipleLines:w}=W(),N=F();return l[2]!==_||l[3]!==j||l[4]!==c||l[5]!==N||l[6]!==x||l[7]!==v||l[8]!==w||l[9]!==f?(n={addLineToSelection:_,clearSelectedLines:j,containerRef:f,fileAnchor:c,getfirstLineSelectionOnDrag:N,isSplitDiff:!0,leftLines:x,selectMultipleLines:w,rightLines:v,disabled:!1},l[2]=_,l[3]=j,l[4]=c,l[5]=N,l[6]=x,l[7]=v,l[8]=w,l[9]=f,l[10]=n):n=l[10],tP(n),l[11]!==p||l[12]!==o||l[13]!==u||l[14]!==m||l[15]!==b||l[16]!==x||l[17]!==v||l[18]!==h||l[19]!==g||l[20]!==y?(a=x.map((e,t)=>{let n=x[t],a=v[t],s=x[t-1],r=(0,I.Po)(x[t+1])?v[t+1]:x[t+1],l=`${(0,I.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,I.Po)(a)||!a?`empty-right-diff-${t}`:a.blobLineNumber}`;return(0,i.jsx)(aO,{copilotChatReference:p,diffHasHiddenUnicodeCharacters:o,filePath:u,handleDiffSideCellSelectionBlocking:m,hunksData:b,leftDiffLine:n,nextDiffLine:r,prevDiffLine:s,rightDiffLine:a,showHiddenUnicode:h,subjectId:g,viewerData:y},l)}),l[11]=p,l[12]=o,l[13]=u,l[14]=m,l[15]=b,l[16]=x,l[17]=v,l[18]=h,l[19]=g,l[20]=y,l[21]=a):a=l[21],l[22]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[22]=a,l[23]=r):r=l[23],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,handleDiffSideCellSelectionBlocking:s,showHiddenUnicode:r,tableRef:o,copilotChatReference:d,subjectId:c,viewerData:u}){let{leftLines:m,rightLines:h}=aF(t),f=(0,l.useMemo)(()=>e3(m),[m]),{addLineToSelection:p,clearSelectedLines:g,selectMultipleLines:y}=W();return tP({addLineToSelection:p,clearSelectedLines:g,containerRef:o,fileAnchor:n,getfirstLineSelectionOnDrag:F(),isSplitDiff:!0,leftLines:m,selectMultipleLines:y,rightLines:h,disabled:!1}),(0,i.jsx)(i.Fragment,{children:m.map((t,n)=>{let l=m[n],o=h[n],p=m[n-1],g=(0,I.Po)(m[n+1])?h[n+1]:m[n+1],y=`${(0,I.Po)(l)||!l?`empty-left-diff-${n}`:l.blobLineNumber}-${(0,I.Po)(o)||!o?`empty-right-diff-${n}`:o.blobLineNumber}`;return(0,i.jsx)(aO,{copilotChatReference:d,diffHasHiddenUnicodeCharacters:e,filePath:a,handleDiffSideCellSelectionBlocking:s,hunksData:f,leftDiffLine:l,nextDiffLine:g,prevDiffLine:p,rightDiffLine:o,showHiddenUnicode:r,subjectId:c,viewerData:u},y)})})});try{aM.displayName||(aM.displayName="SplitDiffLines")}catch{}let a$=(0,l.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,hunksData:a,currentDiffLine:s,nextDiffLine:r,prevDiffLine:o,showHiddenUnicode:d,subjectId:c,viewerData:u}){let m=q(),h=G(),f=K(s),p=(0,l.useMemo)(()=>({...s,...f}),[s,f]),g=(0,l.useMemo)(()=>!!p.isSelected,[p.isSelected]),y="DELETION"!==s.type?"RIGHT":"LEFT",x="RIGHT"===y?s.right:s.left,v=(0,I.oH)(x,y),{threads:b,annotations:_}=(0,j.rP)(n,v??""),w="HUNK"===p.type,N=(0,eQ.IQ)(m,(0,eQ.XU)(p.type),p.blobLineNumber),{currentHunk:C,nextHunk:S,previousHunk:k}=e2(p,a),L=(0,I.qX)(m,p,p),T=t&&(0,tM.Y)(p.text);d&&T&&(p=p.html?{...p,html:(0,aA.Gx)(p.html)??p.html}:{...p,text:(0,tM.TA)(p.text)});let E="DELETION"===p.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:w?(0,i.jsx)(aR,{currentHunk:C,diffAnchor:m,diffLine:p,fileLineCount:h,isLeftSide:E,isSplit:!1,nextHunk:S,nextLine:r,previousHunk:k,prevLine:o}):(0,i.jsx)(aN,{annotationsAtPosition:_,copilotChatReference:e,currentHunk:C,diffAnchor:m,diffLine:p,filePath:n,hasHiddenUnicodeCharacters:T,isLeftSide:E,isRowSelected:g,isSplit:!1,lineAnchor:N,nextHunk:S,previousHunk:k,rowId:L,subjectId:c,threadsAtPosition:b,viewerData:u})},L)});try{a$.displayName||(a$.displayName="UnifiedDiffRow")}catch{}let aB=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,tableRef:m,showHiddenUnicode:h,copilotChatReference:f,subjectId:p,viewerData:g}=e;l[0]!==d?(t=e3(d.map(aV)),l[0]=d,l[1]=t):t=l[1];let y=t,{addLineToSelection:x,clearSelectedLines:v,selectMultipleLines:b}=W(),_=F();return l[2]!==x||l[3]!==v||l[4]!==c||l[5]!==_||l[6]!==b||l[7]!==d||l[8]!==m?(n={addLineToSelection:x,clearSelectedLines:v,containerRef:m,fileAnchor:c,getfirstLineSelectionOnDrag:_,isSplitDiff:!1,leftLines:d,selectMultipleLines:b,disabled:!1},l[2]=x,l[3]=v,l[4]=c,l[5]=_,l[6]=b,l[7]=d,l[8]=m,l[9]=n):n=l[9],tP(n),l[10]!==f||l[11]!==o||l[12]!==d||l[13]!==u||l[14]!==y||l[15]!==h||l[16]!==p||l[17]!==g?(a=d.map((e,t)=>{let n=d[t+1],a=d[t-1],s=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(a$,{copilotChatReference:f,diffHasHiddenUnicodeCharacters:o,filePath:u,hunksData:y,currentDiffLine:e,nextDiffLine:n,prevDiffLine:a,showHiddenUnicode:h,subjectId:p,viewerData:g},s)}),l[10]=f,l[11]=o,l[12]=d,l[13]=u,l[14]=y,l[15]=h,l[16]=p,l[17]=g,l[18]=a):a=l[18],l[19]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[19]=a,l[20]=r):r=l[20],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,tableRef:s,showHiddenUnicode:r,copilotChatReference:o,subjectId:d,viewerData:c}){let u=(0,l.useMemo)(()=>e3(t.map(e=>e)),[t]),{addLineToSelection:m,clearSelectedLines:h,selectMultipleLines:f}=W();return tP({addLineToSelection:m,clearSelectedLines:h,containerRef:s,fileAnchor:n,getfirstLineSelectionOnDrag:F(),isSplitDiff:!1,leftLines:t,selectMultipleLines:f,disabled:!1}),(0,i.jsx)(i.Fragment,{children:t.map((n,s)=>{let l=t[s+1],m=t[s-1],h=`unified-diff-row-l:${n.left}-r:${n.right}-b:${n.blobLineNumber}`;return(0,i.jsx)(a$,{copilotChatReference:o,diffHasHiddenUnicodeCharacters:e,filePath:a,hunksData:u,currentDiffLine:n,nextDiffLine:l,prevDiffLine:m,showHiddenUnicode:r,subjectId:d,viewerData:c},h)})})});try{aB.displayName||(aB.displayName="UnifiedDiffLines")}catch{}function aV(e){return e}let aU="DiffLines-module__tableLayoutFixed--UBX7h",aq="DiffLines-module__compact--wxqBo";var aG=n(60745);let aH=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{diffAnchor:a,children:r}=e;return n[0]!==r||n[1]!==a?(t=(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":a,children:r}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}:function({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})},aK=(0,l.memo)((0,a.GV)()?function(e){let t,n=(0,s.c)(39),{diffEntryData:a,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:o,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m,viewerData:h}=e,f=`diff-${a.pathDigest}`;if(a.isBinary){let e;return n[0]!==f?(e=(0,i.jsx)(aH,{diffAnchor:f,children:"Binary file not shown."}),n[0]=f,n[1]=e):e=n[1],e}if((0,eW.dK)(a)){let e;return n[2]!==f?(e=(0,i.jsx)(aH,{diffAnchor:f,children:"File renamed without changes."}),n[2]=f,n[3]=e):e=n[3],e}if((0,eW.Jc)(a)){let e;return n[4]!==f?(e=(0,i.jsx)(aH,{diffAnchor:f,children:"File copied without changes."}),n[4]=f,n[5]=e):e=n[5],e}if((0,eW.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode)){let e;return n[6]!==f?(e=(0,i.jsx)(aH,{diffAnchor:f,children:"File mode changed."}),n[6]=f,n[7]=e):e=n[7],e}if(!r&&(0,eW.HI)(a)){let e,t,s=a.truncatedReason;return n[8]!==s?(e=(0,eW.l_)(s),n[8]=s,n[9]=e):e=n[9],n[10]!==f||n[11]!==o||n[12]!==e?(t=(0,i.jsx)(eX,{diffAnchor:f,onLoadDiff:o,children:e}),n[10]=f,n[11]=o,n[12]=e,n[13]=t):t=n[13],t}if((0,eW.s8)(a)){let e;return n[14]!==f?(e=(0,i.jsx)(aH,{diffAnchor:f,children:"Whitespace-only changes."}),n[14]=f,n[15]=e):e=n[15],e}if(!r&&(0,eW.lO)(a)){let e;return n[16]!==f||n[17]!==o?(e=(0,i.jsx)(eX,{diffAnchor:f,onLoadDiff:o,children:"This file was deleted."}),n[16]=f,n[17]=o,n[18]=e):e=n[18],e}if(!r&&(0,eW.xW)(a)){let e,t=`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return n[19]!==f||n[20]!==o||n[21]!==t?(e=(0,i.jsxs)(eX,{diffAnchor:f,helpText:"customizing how changed files appear on GitHub.",helpUrl:t,onLoadDiff:o,children:["Some generated files are not rendered by default. Learn more about"," "]}),n[19]=f,n[20]=o,n[21]=t,n[22]=e):e=n[22],e}if(a.isTooBig&&0===a.diffLines.length)if(r){let e,t,a=`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return n[23]!==a?(e=(0,i.jsx)(eZ.A,{inline:!0,href:a,children:"check out this pull request locally."}),n[23]=a,n[24]=e):e=n[24],n[25]!==f||n[26]!==e?(t=(0,i.jsxs)(aH,{diffAnchor:f,children:["Diff is too big to render. To view,"," ",e]}),n[25]=f,n[26]=e,n[27]=t):t=n[27],t}else{let e;return n[28]!==f||n[29]!==o?(e=(0,i.jsx)(eX,{diffAnchor:f,onLoadDiff:o,children:"Large diffs are not rendered by default."}),n[28]=f,n[29]=o,n[30]=e):e=n[30],e}return a.diffLines?(n[31]!==d||n[32]!==f||n[33]!==a||n[34]!==c||n[35]!==u||n[36]!==m||n[37]!==h?(t=(0,i.jsx)(aW,{diffAnchor:f,diffEntryData:a,viewerData:h,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m}),n[31]=d,n[32]=f,n[33]=a,n[34]=c,n[35]=u,n[36]=m,n[37]=h,n[38]=t):t=n[38],t):null}:function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:a,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o,viewerData:d}){let c=`diff-${e.pathDigest}`;if(e.isBinary)return(0,i.jsx)(aH,{diffAnchor:c,children:"Binary file not shown."});if((0,eW.dK)(e))return(0,i.jsx)(aH,{diffAnchor:c,children:"File renamed without changes."});if((0,eW.Jc)(e))return(0,i.jsx)(aH,{diffAnchor:c,children:"File copied without changes."});if((0,eW.Sn)(e,e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(aH,{diffAnchor:c,children:"File mode changed."});if(!t&&(0,eW.HI)(e))return(0,i.jsx)(eX,{diffAnchor:c,onLoadDiff:a,children:(0,eW.l_)(e.truncatedReason)});if((0,eW.s8)(e))return(0,i.jsx)(aH,{diffAnchor:c,children:"Whitespace-only changes."});if(!t&&(0,eW.lO)(e))return(0,i.jsx)(eX,{diffAnchor:c,onLoadDiff:a,children:"This file was deleted."});if(!t&&(0,eW.xW)(e))return(0,i.jsxs)(eX,{diffAnchor:c,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:a,children:["Some generated files are not rendered by default. Learn more about"," "]});if(e.isTooBig&&0===e.diffLines.length)if(t)return(0,i.jsxs)(aH,{diffAnchor:c,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(eZ.A,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(eX,{diffAnchor:c,onLoadDiff:a,children:"Large diffs are not rendered by default."});return e.diffLines?(0,i.jsx)(aW,{diffAnchor:c,diffEntryData:e,viewerData:d,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o}):null}),aW=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,f,p,y,x,v,b,_,j,w=(0,s.c)(55),{diffAnchor:N,viewerData:C,diffEntryData:S,copilotChatReference:I,hasExpandedAllRanges:k,isSplitView:L,subjectId:T}=e,E=(0,l.useRef)(null),{clearSelectedLines:D}=W(),[R,A]=(0,l.useState)(null),[O,P]=(0,l.useState)(!1),F=S.newTreeEntry?.lineCount??S.oldTreeEntry?.lineCount??0;e:{let e=S.diffLines[S.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<F){let n;w[0]!==S.diffLines||w[1]!==e.blobLineNumber?(n=S.diffLines.concat({__id:e0,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),w[0]=S.diffLines,w[1]=e.blobLineNumber,w[2]=n):n=w[2],t=n;break e}t=S.diffLines}let M=t,{lineSpacingPreference:B,tabSizePreference:V}=C,U=$();w[3]!==D||w[4]!==U?(n=e=>{if(!E.current||!e.target)return;let t=e.target;!E.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&U()&&(D(),ep(),(0,h.K3)())},w[3]=D,w[4]=U,w[5]=n):n=w[5];let q=n;w[6]!==q?(a=()=>(g.XC?.addEventListener("mousedown",q),()=>{g.XC?.removeEventListener("mousedown",q)}),r=[q],w[6]=q,w[7]=a,w[8]=r):(a=w[7],r=w[8]),(0,l.useEffect)(a,r);t:{let e,t=S.status,n=S.oldTreeEntry?.path,i=S.newTreeEntry?.path;if(!n&&!i){o=void 0;break t}e="RENAMED"===t?`${n} renamed to ${i}`:"DELETED"===t||"REMOVED"===t?n:i,o=`Diff for: ${e}`}let G=o;w[9]!==M?(d=(0,eQ.c7)(M),w[9]=M,w[10]=d):d=w[10];let H=d;w[11]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{A(e)},w[11]=c):c=w[11];let K=c;w[12]!==S.path||w[13]!==k?(u=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!k&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${S.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},w[12]=S.path,w[13]=k,w[14]=u):u=w[14];let z=u;w[15]!==R||w[16]!==L?(m=e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${L?`, ${"left"===R?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},w[15]=R,w[16]=L,w[17]=m):m=w[17];let Q=m;w[18]!==M?(f=M.some(az),w[18]=M,w[19]=f):f=w[19];let Z=f;w[20]!==I||w[21]!==N||w[22]!==S.path||w[23]!==Z||w[24]!==M||w[25]!==F||w[26]!==O||w[27]!==T||w[28]!==C?(p={diffHasHiddenUnicodeCharacters:Z,diffLines:M,fileAnchor:N,fileLineCount:F,filePath:S.path,handleDiffSideCellSelectionBlocking:K,showHiddenUnicode:O,tableRef:E,copilotChatReference:I,subjectId:T,viewerData:C},w[20]=I,w[21]=N,w[22]=S.path,w[23]=Z,w[24]=M,w[25]=F,w[26]=O,w[27]=T,w[28]=C,w[29]=p):p=w[29];let J=p;w[30]!==Z||w[31]!==O?(y=Z&&(0,i.jsx)(aG.a,{isShown:O,toggleShowHiddenCharacters:()=>P(!O)}),w[30]=Z,w[31]=O,w[32]=y):y=w[32];let Y="compact"===B;w[33]!==Y?(x=(0,eJ.$)("tab-size","width-full",aU,{[aq]:Y}),w[33]=Y,w[34]=x):x=w[34];let X=`${H}px`,ee=`${2*parseFloat(H)}px`;return w[35]!==X||w[36]!==ee?(v={"--line-number-cell-width":X,"--line-number-cell-width-unified":ee},w[35]=X,w[36]=ee,w[37]=v):v=w[37],w[38]!==J||w[39]!==L||w[40]!==H?(b=L?(0,i.jsx)(ez.wj,{lineWidth:H,children:(0,i.jsx)(aM,{...J})}):(0,i.jsx)(ez.Qe,{lineWidth:H,children:(0,i.jsx)(aB,{...J})}),w[38]=J,w[39]=L,w[40]=H,w[41]=b):b=w[41],w[42]!==N||w[43]!==R||w[44]!==z||w[45]!==Q||w[46]!==x||w[47]!==v||w[48]!==b||w[49]!==V||w[50]!==G?(_=(0,i.jsx)("table",{"aria-label":G,onKeyDown:z,ref:E,className:x,"data-block-diff-cell-selection":R,"data-diff-anchor":N,"data-tab-size":V,"data-paste-markdown-skip":!0,onCopy:Q,role:"grid",style:v,children:b}),w[42]=N,w[43]=R,w[44]=z,w[45]=Q,w[46]=x,w[47]=v,w[48]=b,w[49]=V,w[50]=G,w[51]=_):_=w[51],w[52]!==y||w[53]!==_?(j=(0,i.jsxs)(i.Fragment,{children:[y,_]}),w[52]=y,w[53]=_,w[54]=j):j=w[54],j}:function({diffAnchor:e,viewerData:t,diffEntryData:n,copilotChatReference:a,hasExpandedAllRanges:s,isSplitView:r,subjectId:o}){let d=(0,l.useRef)(null),{clearSelectedLines:c}=W(),[u,m]=(0,l.useState)(null),[f,p]=(0,l.useState)(!1),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,x=(0,l.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:e0,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{lineSpacingPreference:v,tabSizePreference:b}=t,_=$(),j=(0,l.useCallback)(e=>{if(!d.current||!e.target)return;let t=e.target;!d.current.contains(t)&&(t.closest("td.diff-line-number")||t.closest("[data-add-comment-button]"))&&_()&&(c(),ep(),(0,h.K3)())},[c,_]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",j),()=>{g.XC?.removeEventListener("mousedown",j)}),[j]);let w=(0,l.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,a=n.newTreeEntry?.path;if(i||a)return e="RENAMED"===t?`${i} renamed to ${a}`:"DELETED"===t||"REMOVED"===t?i:a,`Diff for: ${e}`},[n]),N=(0,eQ.c7)(x),C=(0,l.useCallback)(e=>{m(e)},[m]),S=(0,l.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!s&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[s,n.path]),I=(0,l.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${r?`, ${"left"===u?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length)continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[u,r]),k=(0,l.useMemo)(()=>x.some(e=>(0,tM.Y)(e.text)),[x]),L={diffHasHiddenUnicodeCharacters:k,diffLines:x,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffSideCellSelectionBlocking:C,showHiddenUnicode:f,tableRef:d,copilotChatReference:a,subjectId:o,viewerData:t};return(0,i.jsxs)(i.Fragment,{children:[k&&(0,i.jsx)(aG.a,{isShown:f,toggleShowHiddenCharacters:()=>p(!f)}),(0,i.jsx)("table",{"aria-label":w,onKeyDown:S,ref:d,className:(0,eJ.$)("tab-size","width-full",aU,{[aq]:"compact"===v}),"data-block-diff-cell-selection":u,"data-diff-anchor":e,"data-tab-size":b,"data-paste-markdown-skip":!0,onCopy:I,role:"grid",style:{"--line-number-cell-width":`${N}px`,"--line-number-cell-width-unified":`${2*parseFloat(N)}px`},children:r?(0,i.jsx)(ez.wj,{lineWidth:N,children:(0,i.jsx)(aM,{...L})}):(0,i.jsx)(ez.Qe,{lineWidth:N,children:(0,i.jsx)(aB,{...L})})})]})};function az(e){return(0,tM.Y)(e.text)}try{aH.displayName||(aH.displayName="PlainTextStatus")}catch{}try{aK.displayName||(aK.displayName="DiffLines")}catch{}try{aW.displayName||(aW.displayName="CodeDiffLines")}catch{}var aQ=n(8431),aZ=n(46251),aJ=n(78049);let aY="SubmoduleDiff-module__filesActionList--sbPQt",aX="SubmoduleDiff-module__fileRowLinkItem--Z1ES5",a0="SubmoduleDiff-module__path--hB1wm",a1="SubmoduleDiff-module__fileRow--Y9n2E",a2="SubmoduleDiff-module__linesAdded--tJqtP",a3="SubmoduleDiff-module__linesDeleted--nr9cp",a4=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(28),{submodule:u}=e,{basePath:m,changedFiles:h,contentsUrl:f,newCommitOid:p,oldCommitOid:g,status:y,submoduleUrl:x}=u,v=u.summary.length>0&&u.contentsUrl&&"MODIFIED"===y;switch(y){case"ADDED":{let e;d[0]!==f||d[1]!==p?(e=(0,i.jsx)(a7,{commitOid:p,contentsUrl:f,type:"added"}),d[0]=f,d[1]=p,d[2]=e):e=d[2],t=e;break}case"DELETED":case"REMOVED":{let e;d[3]!==f||d[4]!==g?(e=(0,i.jsx)(a7,{commitOid:g,contentsUrl:f,type:"deleted"}),d[3]=f,d[4]=g,d[5]=e):e=d[5],t=e;break}default:{let e;d[6]!==h||d[7]!==f||d[8]!==p||d[9]!==g?(e=(0,i.jsx)(a8,{newCommitOid:p,oldCommitOid:g,changedFiles:h,contentsUrl:f}),d[6]=h,d[7]=f,d[8]=p,d[9]=g,d[10]=e):e=d[10],t=e}}let b=t,_=`px-3 py-2 ${v?"border-bottom bgColor-muted":""}`;return d[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),d[11]=n):n=d[11],d[12]!==m||d[13]!==x?(a=(0,i.jsx)(a5,{basePath:m,submoduleUrl:x}),d[12]=m,d[13]=x,d[14]=a):a=d[14],d[15]!==b||d[16]!==_||d[17]!==a?(r=(0,i.jsxs)("div",{className:_,children:[n,a,b]}),d[15]=b,d[16]=_,d[17]=a,d[18]=r):r=d[18],d[19]!==f||d[20]!==p||d[21]!==g||d[22]!==v||d[23]!==u.summary?(l=v&&(0,i.jsx)(eL.l,{className:aY,showDividers:!0,variant:"full",children:u.summary.map(e=>(0,i.jsx)(a9,{compareUrl:`${f}/compare/${g}...${p}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),d[19]=f,d[20]=p,d[21]=g,d[22]=v,d[23]=u.summary,d[24]=l):l=d[24],d[25]!==r||d[26]!==l?(o=(0,i.jsxs)("div",{children:[r,l]}),d[25]=r,d[26]=l,d[27]=o):o=d[27],o}:function({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:a,newCommitOid:s,oldCommitOid:r,status:o,submoduleUrl:d}=e,u=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,m=(0,l.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(a7,{commitOid:s,contentsUrl:a,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(a7,{commitOid:r,contentsUrl:a,type:"deleted"});default:return(0,i.jsx)(a8,{newCommitOid:s,oldCommitOid:r,changedFiles:n,contentsUrl:a})}},[s,r,o,n,a]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${u?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(a5,{basePath:t,submoduleUrl:d}),m]}),u&&(0,i.jsx)(eL.l,{className:aY,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(a9,{compareUrl:`${a}/compare/${r}...${s}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})},a5=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{basePath:r,submoduleUrl:l}=e;return a[0]!==r||a[1]!==l?(t=l?(0,i.jsx)(eZ.A,{inline:!0,href:l,children:r}):r,a[0]=r,a[1]=l,a[2]=t):t=a[2],a[3]!==t?(n=(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t," "]}),a[3]=t,a[4]=n):n=a[4],n}:function({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(eZ.A,{inline:!0,href:t,children:e}):e," "]})};function a6(e){return e.slice(0,7)}let a7=(0,a.GV)()?function(e){let t=(0,s.c)(13),{commitOid:n,contentsUrl:a,type:r}=e,l=void 0===n?"":n,o="added"===r?"added at":"deleted from";if(a){let e,n,s,r=`${a}/tree/${l}`;return t[0]!==l?(e=a6(l),t[0]=l,t[1]=e):e=t[1],t[2]!==r||t[3]!==e?(n=(0,i.jsx)(eZ.A,{inline:!0,href:r,children:e}),t[2]=r,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==o?(s=(0,i.jsxs)(i.Fragment,{children:[o," ",n]}),t[5]=n,t[6]=o,t[7]=s):s=t[7],s}{let e,n;return t[8]!==l?(e=a6(l),t[8]=l,t[9]=e):e=t[9],t[10]!==e||t[11]!==o?(n=(0,i.jsxs)(i.Fragment,{children:[o," ",e]}),t[10]=e,t[11]=o,t[12]=n):n=t[12],n}}:function({commitOid:e="",contentsUrl:t,type:n}){let a="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[a," ",(0,i.jsx)(eZ.A,{inline:!0,href:`${t}/tree/${e}`,children:a6(e)})]}):(0,i.jsxs)(i.Fragment,{children:[a," ",a6(e)]})},a8=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(12),{newCommitOid:l,oldCommitOid:o,changedFiles:d,contentsUrl:c}=e,u=void 0===l?"":l,m=void 0===o?"":o,h=void 0===d?0:d;r[0]!==h||r[1]!==c||r[2]!==u||r[3]!==m?(t=h>0&&c?`${h} ${1===h?"file":"files"}`:`from ${a6(m)} to ${a6(u)}`,r[0]=h,r[1]=c,r[2]=u,r[3]=m,r[4]=t):t=r[4];let f=t;return r[5]!==f||r[6]!==c||r[7]!==u||r[8]!==m?(n=c?(0,i.jsx)(eZ.A,{inline:!0,href:`${c}/compare/${m}...${u}`,children:f}):f,r[5]=f,r[6]=c,r[7]=u,r[8]=m,r[9]=n):n=r[9],r[10]!==n?(a=(0,i.jsxs)(i.Fragment,{children:["updated"," ",n]}),r[10]=n,r[11]=a):a=r[11],a}:function({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:a}){let s=n>0&&a?`${n} ${1===n?"file":"files"}`:`from ${a6(t)} to ${a6(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",a?(0,i.jsx)(eZ.A,{inline:!0,href:`${a}/compare/${t}...${e}`,children:s}):s]})},a9=(0,a.GV)()?function(e){let t,n,a,l,o,d,c=(0,s.c)(16),{compareUrl:u,linesAdded:m,linesDeleted:h,path:f,pathDigest:p,status:g}=e,y=`${u}#diff-${p}`;return c[0]!==g?(t=(0,i.jsx)(aJ.E,{status:g}),c[0]=g,c[1]=t):t=c[1],c[2]!==f?(n=(0,i.jsx)("span",{className:a0,children:f}),c[2]=f,c[3]=n):n=c[3],c[4]!==m||c[5]!==h?(a=(m>0||h>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:a2,children:m>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",se(m)]})}),(0,i.jsx)("div",{className:a3,children:h>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",se(h)]})})]}),c[4]=m,c[5]=h,c[6]=a):a=c[6],c[7]!==n||c[8]!==a?(l=(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,a]}),c[7]=n,c[8]=a,c[9]=l):l=c[9],c[10]!==t||c[11]!==l?(o=(0,i.jsxs)(aZ.B,{gap:"condensed",direction:"horizontal",align:"center",className:a1,children:[t,l]}),c[10]=t,c[11]=l,c[12]=o):o=c[12],c[13]!==y||c[14]!==o?(d=(0,i.jsx)(eL.l.LinkItem,{href:y,className:aX,children:o}),c[13]=y,c[14]=o,c[15]=d):d=c[15],d}:function({compareUrl:e,linesAdded:t,linesDeleted:n,path:a,pathDigest:s,status:l}){return(0,i.jsx)(eL.l.LinkItem,{href:`${e}#diff-${s}`,className:aX,children:(0,i.jsxs)(aZ.B,{gap:"condensed",direction:"horizontal",align:"center",className:a1,children:[(0,i.jsx)(aJ.E,{status:l}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:a0,children:a}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:a2,children:t>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",se(t)]})}),(0,i.jsx)("div",{className:a3,children:n>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",se(n)]})})]})]})]})})};function se(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{a4.displayName||(a4.displayName="SubmoduleDiff")}catch{}try{a5.displayName||(a5.displayName="SubmodulePath")}catch{}try{a7.displayName||(a7.displayName="SubmoduleCommitChange")}catch{}try{a8.displayName||(a8.displayName="SubmoduleModified")}catch{}try{a9.displayName||(a9.displayName="SubmoduleFileRow")}catch{}let st=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:a,status:s})=>!!e&&!t&&!n&&!!i&&"DELETED"!==s&&"REMOVED"!==s&&!!a.id&&!!a.name&&!!a.ownerLogin&&!0,sn=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:a,pathDigest:s,repository:r})=>{let l=n&&e?(0,nI.IO9)({repo:r,commitish:n,action:"raw",path:a}):"";return{baseFile:si({path:i?.path,oid:n,repository:r}),headFile:si({path:t?.path,oid:e,repository:r}),baseBranchRef:n,id:`#diff-${s}`,type:"file-diff",url:l}},si=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,nI.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,sa=(0,a.GV)()?function(e){let t,n=(0,s.c)(8),{isBinary:i,isSubmodule:a,path:r,status:l,repository:o,newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,pathDigest:h,hasCopilotAccess:f}=e;e:{let e;if(!st({isBinary:i,isSubmodule:a,path:r,status:l,repository:o,hasCopilotAccess:f})){t=void 0;break e}n[0]!==d||n[1]!==c||n[2]!==u||n[3]!==m||n[4]!==r||n[5]!==h||n[6]!==o?(e=sn({newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,path:r,pathDigest:h,repository:o}),n[0]=d,n[1]=c,n[2]=u,n[3]=m,n[4]=r,n[5]=h,n[6]=o,n[7]=e):e=n[7],t=e}return t}:function({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,l.useMemo)(()=>{if(st({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,hasCopilotAccess:u}))return sn({newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:a})},[s,r,o,d,c,a,u,e,t,n,i])},ss="FileReviewThread-module__ReviewThreadContainer--InwxI",sr="FileReviewThread-module__ReviewThreadHeading--oFg3s",sl="FileReviewThread-module__ReviewThreadInnerContainer--jYE3S",so="FileReviewThread-module__SpinnerWrapper--zQOoj",sd=(0,a.GV)()?function(e){let t,n,a,r,d,u,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R=(0,s.c)(69);if(R[0]!==e){let{fileAnchor:i,filePath:s,thread:l,isFirstThread:o,ghostUser:c,manuallyUpdateCommentsWithThisThreadId:u,...m}=e;t=s,d=l,a=o,n=c,r=m,R[0]=e,R[1]=t,R[2]=n,R[3]=a,R[4]=r,R[5]=d}else t=R[1],n=R[2],a=R[3],r=R[4],d=R[5];let A=(0,l.useRef)(null);R[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,ne.A)("localStorage"),R[6]=u):u=R[6];let O=u,P=d?.isResolved,[F,M]=(0,l.useState)(""),[$,B]=(0,l.useState)(P??!1);R[7]!==P||R[8]!==d.id?(h=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d.id}`);null!==e?B(JSON.parse(e)):P&&B(!0)},f=[P,d.id],R[7]=P,R[8]=d.id,R[9]=h,R[10]=f):(h=R[9],f=R[10]),(0,l.useEffect)(h,f),R[11]!==$||R[12]!==d.id?(p=()=>{window.requestAnimationFrame(()=>{O.setItem(`reviewThreadIsCollapsed_${d.id}`,JSON.stringify(!$))}),B(su)},R[11]=$,R[12]=d.id,R[13]=p):p=R[13];let V=p,{sendAnalyticsEvent:U}=(0,t$.s)(),{mutate:q}=(0,nC.H)(t,o.zW);R[14]!==q||R[15]!==U||R[16]!==d?(g=()=>{d&&!d.isResolved&&(q({threadId:d.id},{onError:()=>M("Failed to resolve thread"),onSuccess:()=>{B(!0),O.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),U("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[14]=q,R[15]=U,R[16]=d,R[17]=g):g=R[17];let G=g,{mutate:H}=(0,nS.i)(t,o.zW);R[18]!==U||R[19]!==d||R[20]!==H?(y=()=>{d&&(H({threadId:d.id},{onError:()=>M("Failed to unresolve thread"),onSuccess:()=>{B(!1),O.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),U("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[18]=U,R[19]=d,R[20]=H,R[21]=y):y=R[21];let K=y;if(!d||!(d.commentsData?.comments&&d.commentsData.comments.length>0))return null;let W=d?.commentsData?.comments[0]?.reviewVariantType===tZ.hH.Automated?d.commentsData?.comments[0]?.automatedComment:null,z=W&&W.dismissable,Q=W&&W.source===tZ.vk.LicenseCompliance,Z=!!d.isResolved;R[22]===Symbol.for("react.memo_cache_sentinel")?(x=(0,nk.M3)(),R[22]=x):x=R[22];let J=x;R[23]!==d.commentsData?.comments?(v=J&&d.commentsData?.comments?.some(sc),R[23]=d.commentsData?.comments,R[24]=v):v=R[24];let Y=v,X=d.commentsData?.comments[0]?.createdAt,ee=d.commentsData?.comments[0]?.author?.login??"Unknown Author",et=`${P?"Unresolve":"Resolve"} comment`;if(X){let e;R[25]!==X?(e=(0,t8.C)(new Date(X)),R[25]=X,R[26]=e):e=R[26];let t=e;et=`${P?"Unresolve":"Resolve"} ${ee}'s comment, ${t}`}R[27]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(na,{}),R[27]=b):b=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,eJ.$)("px-1",ss),R[28]=_):_=R[28];let en=$?"Expand comment":"Collapse comment",ei=$?c.ChevronRightIcon:c.ChevronDownIcon;return R[29]!==V||R[30]!==a||R[31]!==en||R[32]!==ei?(j=(0,i.jsx)(m.K,{"aria-label":en,icon:ei,size:"small",variant:"invisible",onClick:V,"data-is-first-collapse-button":a}),R[29]=V,R[30]=a,R[31]=en,R[32]=ei,R[33]=j):j=R[33],R[34]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)("h2",{className:sr,children:"Comment on file"}),R[34]=w):w=R[34],R[35]!==d.positioning?.isOutdated?(N=d.positioning?.isOutdated&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Outdated"}),R[35]=d.positioning?.isOutdated,R[36]=N):N=R[36],R[37]!==Z?(C=Z&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Resolved"}),R[37]=Z,R[38]=C):C=R[38],R[39]!==N||R[40]!==C?(S=(0,i.jsxs)("div",{className:sl,children:[N,C]}),R[39]=N,R[40]=C,R[41]=S):S=R[41],R[42]!==j||R[43]!==S?(I=(0,i.jsxs)("div",{className:_,children:[j,w,S]}),R[42]=j,R[43]=S,R[44]=I):I=R[44],R[45]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsxs)("div",{className:so,children:[(0,i.jsx)(eq.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),R[45]=k):k=R[45],R[46]!==F?(L=F&&(0,i.jsxs)(nn.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),F]}),R[46]=F,R[47]=L):L=R[47],R[48]!==W||R[49]!==z||R[50]!==t||R[51]!==n||R[52]!==G||R[53]!==K||R[54]!==$||R[55]!==Y||R[56]!==P||R[57]!==Z||R[58]!==Q||R[59]!==et||R[60]!==r||R[61]!==d?(T=!$&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nN,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:d,shouldLimitHeight:!1,...r,ghostUser:n}),Y&&!z&&!Q&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ej.Q,{"aria-label":et,onClick:Z?K:G,className:"mr-2",children:P?"Unresolve comment":"Resolve comment"}),Z&&d.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:d.resolvedBy})," marked this comment as resolved"]})]}),z&&(0,i.jsx)(nR,{automatedComment:W,thread:d,filePath:t,lineMarkersKey:o.zW,setErrorMessage:M,setIsCollapsed:B,safeLocalStorage:O})]}),R[48]=W,R[49]=z,R[50]=t,R[51]=n,R[52]=G,R[53]=K,R[54]=$,R[55]=Y,R[56]=P,R[57]=Z,R[58]=Q,R[59]=et,R[60]=r,R[61]=d,R[62]=T):T=R[62],R[63]!==L||R[64]!==T?(E=(0,i.jsxs)(l.Suspense,{fallback:k,children:[L,T]}),R[63]=L,R[64]=T,R[65]=E):E=R[65],R[66]!==I||R[67]!==E?(D=(0,i.jsx)(t9.t,{fallback:b,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:A,children:[I,E]})}),R[66]=I,R[67]=E,R[68]=D):D=R[68],D}:function({fileAnchor:e,filePath:t,thread:n,isFirstThread:a,ghostUser:s,manuallyUpdateCommentsWithThisThreadId:r,...d}){let u=(0,l.useRef)(null),h=(0,ne.A)("localStorage"),f=n?.isResolved,[p,g]=(0,l.useState)(""),[y,x]=(0,l.useState)(f??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${n.id}`);null!==e?x(JSON.parse(e)):f&&x(!0)},[f,n.id]);let{sendAnalyticsEvent:v}=(0,t$.s)(),{mutate:b}=(0,nC.H)(t,o.zW),{mutate:_}=(0,nS.i)(t,o.zW);if(!n||!(n.commentsData?.comments&&n.commentsData.comments.length>0))return null;let j=n?.commentsData?.comments[0]?.reviewVariantType===tZ.hH.Automated?n.commentsData?.comments[0]?.automatedComment:null,w=j&&j.dismissable,N=j&&j.source===tZ.vk.LicenseCompliance,C=!!n.isResolved,S=(0,nk.M3)()&&n.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),I=n.commentsData?.comments[0]?.createdAt,k=n.commentsData?.comments[0]?.author?.login??"Unknown Author",L=`${f?"Unresolve":"Resolve"} comment`;if(I){let e=(0,t8.C)(new Date(I));L=`${f?"Unresolve":"Resolve"} ${k}'s comment, ${e}`}return(0,i.jsx)(t9.t,{fallback:(0,i.jsx)(na,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:u,children:[(0,i.jsxs)("div",{className:(0,eJ.$)("px-1",ss),children:[(0,i.jsx)(m.K,{"aria-label":y?"Expand comment":"Collapse comment",icon:y?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{h.setItem(`reviewThreadIsCollapsed_${n.id}`,JSON.stringify(!y))}),x(e=>!e)},"data-is-first-collapse-button":a}),(0,i.jsx)("h2",{className:sr,children:"Comment on file"}),(0,i.jsxs)("div",{className:sl,children:[n.positioning?.isOutdated&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Outdated"}),C&&(0,i.jsx)(nt.A,{variant:"secondary",children:"Resolved"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:so,children:[(0,i.jsx)(eq.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[p&&(0,i.jsxs)(nn.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),p]}),!y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nN,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:n,shouldLimitHeight:!1,...d,ghostUser:s}),S&&!w&&!N&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(ej.Q,{"aria-label":L,onClick:C?()=>{n&&(_({threadId:n.id},{onError:()=>g("Failed to unresolve thread"),onSuccess:()=>{x(!1),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),v("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{n&&!n.isResolved&&(b({threadId:n.id},{onError:()=>g("Failed to resolve thread"),onSuccess:()=>{x(!0),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),v("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:f?"Unresolve comment":"Resolve comment"}),C&&n.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:n.resolvedBy})," marked this comment as resolved"]})]}),w&&(0,i.jsx)(nR,{automatedComment:j,thread:n,filePath:t,lineMarkersKey:o.zW,setErrorMessage:g,setIsCollapsed:x,safeLocalStorage:h})]})]})]})})};function sc(e){return e.state?.toUpperCase()!=="PENDING"}function su(e){return!e}try{sd.displayName||(sd.displayName="FileReviewThread")}catch{}let sm=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u=(0,s.c)(19);if(u[0]!==e){let{conversationListThreads:i,filePath:s,manuallyUpdateCommentsWithThisThreadId:l,ghostUser:o,...d}=e;t=i,n=s,a=o,r=d,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r}else t=u[1],n=u[2],a=u[3],r=u[4];let m=(0,l.useRef)(null);if(u[5]!==t?(o={containerRef:m,markers:t,disabled:!1,focusInStrategy:"closest"},u[5]=t,u[6]=o):o=u[6],tq(o),u[7]!==t||u[8]!==n||u[9]!==a||u[10]!==r){let e;u[12]!==t.length||u[13]!==n||u[14]!==a||u[15]!==r?(e=(e,s)=>(0,i.jsx)("div",{className:(0,eJ.$)("mt-1 border rounded-2 color-border-default color-shadow-small",s===t.length-1?"mb-1":"mb-2"),"data-first-marker":0===s,"data-marker-id":`${e.id}`,tabIndex:0,children:(0,i.jsx)(sd,{subjectId:r.subjectId,viewerData:r.viewerData,filePath:n,thread:e,ghostUser:a},e.id)},`review-thread-${e.id}`),u[12]=t.length,u[13]=n,u[14]=a,u[15]=r,u[16]=e):e=u[16],d=t.map(e),u[7]=t,u[8]=n,u[9]=a,u[10]=r,u[11]=d}else d=u[11];return u[17]!==d?(c=(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:t6,ref:m,children:d})}),u[17]=d,u[18]=c):c=u[18],c}:function({conversationListThreads:e,filePath:t,manuallyUpdateCommentsWithThisThreadId:n,ghostUser:a,...s}){let r=(0,l.useRef)(null);return tq({containerRef:r,markers:e,disabled:!1,focusInStrategy:"closest"}),(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:t6,ref:r,children:e.map((n,r)=>(0,i.jsx)("div",{className:(0,eJ.$)("mt-1 border rounded-2 color-border-default color-shadow-small",r===e.length-1?"mb-1":"mb-2"),"data-first-marker":0===r,"data-marker-id":`${n.id}`,tabIndex:0,children:(0,i.jsx)(sd,{subjectId:s.subjectId,viewerData:s.viewerData,filePath:t,thread:n,ghostUser:a},n.id)},`review-thread-${n.id}`))})})};try{sm.displayName||(sm.displayName="FileMarkers")}catch{}let sh=new Set,sf="b:0-l:null-r:null",sp=(0,l.forwardRef)((0,a.GV)()?function(e,t){let n,a,d,u,m,h,f,p,y,x,v,b,_,w,N,C,S,I=(0,s.c)(129),{addFileCommentButtonRef:k,collapsed:L,currentUser:T,diffLines:E,diffManuallyExpanded:R,diffSize:A,helpUrl:O,fileComments:P,headerStickyOffset:F,hiddenFeatures:M,isAddingFileComment:$,isBinary:B,isSelected:V,isSubmodule:U,isTooBig:q,leftSideContent:G,linesAdded:H,linesChanged:K,linesDeleted:W,newTreeEntry:z,newCommitOid:Q,objectId:Z,oldTreeEntry:J,oldCommitOid:Y,onToggleCollapse:X,path:ee,pathDigest:et,pullRequestGlobalRelayId:en,repository:ei,richDiffState:ea,rightSideContent:es,setIsAddingFileComment:er,hasExpandedAllRanges:el,expandAllContextLines:eo,canExpandOrCollapseLines:ed,status:ec,submodule:eu,truncatedReason:em,addInjectedContextLines:eh,loadDiff:ef}=e,ep=void 0===M?sh:M,eg=void 0!==V&&V,ey=U&&!!eu,ex=!ey&&!ea?.showRichDiff,[ev,eb]=(0,l.useState)(R),e_=(0,j.j5)();I[0]!==T.hasCopilotAccess||I[1]!==B||I[2]!==U||I[3]!==Q||I[4]!==z||I[5]!==Y||I[6]!==J||I[7]!==ee||I[8]!==et||I[9]!==ei||I[10]!==ec?(n={isBinary:B,isSubmodule:U,path:ee,status:ec,repository:ei,newCommitOid:Q,newTreeEntry:z,oldCommitOid:Y,oldTreeEntry:J,pathDigest:et,hasCopilotAccess:T.hasCopilotAccess},I[0]=T.hasCopilotAccess,I[1]=B,I[2]=U,I[3]=Q,I[4]=z,I[5]=Y,I[6]=J,I[7]=ee,I[8]=et,I[9]=ei,I[10]=ec,I[11]=n):n=I[11];let ej=sa(n);I[12]!==ef?(a=async()=>{await ef(),eb(!0)},I[12]=ef,I[13]=a):a=I[13];let ew=a,{endOid:eN,startOid:eC}=(0,nw.Xv)(),eS=(0,eF.u)("cotd_ui"),{selectedRange:eI}=(0,j.L3)(),{mutate:ek}=i1();I[14]!==er?(d=()=>{er(!0)},I[14]=er,I[15]=d):d=I[15];let eL=d;I[16]!==eL?(u={F0:{startNewComment:eL,diffLineKey:sf}},I[16]=eL,I[17]=u):u=I[17];let eT=u;I[18]!==eS||I[19]!==ek||I[20]!==eN||I[21]!==ee||I[22]!==eI||I[23]!==er||I[24]!==eC?(m=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:a}=e;eS?ek(new ReviewCommentFactory({filePath:ee,selectedDiffRange:eI,submitBatch:i,text:a}).fileRequestData(),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),er(!1)}}):ek({text:a,path:ee,submitBatch:i,subjectType:o.Wr.File,comparisonEndOid:eN,comparisonStartOid:eC},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),er(!1)}})},I[18]=eS,I[19]=ek,I[20]=eN,I[21]=ee,I[22]=eI,I[23]=er,I[24]=eC,I[25]=m):m=I[25];let eE=m;I[26]!==k||I[27]!==er?(h=()=>{er(!1),k?.current?.focus()},I[26]=k,I[27]=er,I[28]=h):h=I[28];let eD=h,eR=T?.avatarURL??"",eA=T?.splitPreference,eO=T?.login??"",eP=T?.lineSpacing,e$=T?.shouldDisplayComments,eB=T?.shouldDisplayEditOptions,eV=T?.tabSize??4,eU=T?.canComment,eq=T?.canApplySuggestion,eG=T?.commentsPreference;I[29]!==eR||I[30]!==eA||I[31]!==eO||I[32]!==eP||I[33]!==e$||I[34]!==eB||I[35]!==eV||I[36]!==eU||I[37]!==eq||I[38]!==eG?(f={avatarUrl:eR,diffViewPreference:eA,login:eO,lineSpacingPreference:eP,shouldDisplayComments:e$,shouldDisplayEditOptions:eB,tabSizePreference:eV,viewerCanComment:eU,viewerCanApplySuggestion:eq,commentsPreference:eG},I[29]=eR,I[30]=eA,I[31]=eO,I[32]=eP,I[33]=e$,I[34]=eB,I[35]=eV,I[36]=eU,I[37]=eq,I[38]=eG,I[39]=f):f=I[39];let eH=f,eW=(0,l.useId)(),ez=`heading-${eW}`;e:{if("split"===new URLSearchParams(g.cg?.location.search).get("diff")){p=!0;break e}p="split"===T.splitPreference}let eQ=p,eZ=z?.lineCount??J?.lineCount??0,eY=`diff-${et}`,eX=`diff-${et}`;I[40]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eJ.$)(aQ.A.diffTargetable,aQ.A.diff),I[40]=y):y=I[40];let e0=`${et}_${E.length}`,e1=`${void 0===F?0:F}px`;I[41]!==e1?(x={"--header-sticky-offset":e1},I[41]=e1,I[42]=x):x=I[42];let e2=`#diff-${et}`,e3=ea?.richDiff?.canToggleRichDiff,e4=z?.mode,e5=z?.path,e6=J?.mode,e7=J?.path;I[43]!==L||I[44]!==X?(v=e=>X(e,!L),I[43]=L,I[44]=X,I[45]=v):v=I[45];let e8=ea?.onToggleRichDiff,e9=ea?.showRichDiff;return I[46]!==ed||I[47]!==L||I[48]!==A||I[49]!==eo||I[50]!==el||I[51]!==ez||I[52]!==ep||I[53]!==B||I[54]!==e_||I[55]!==G||I[56]!==H||I[57]!==K||I[58]!==W||I[59]!==ee||I[60]!==es||I[61]!==ec||I[62]!==e2||I[63]!==e3||I[64]!==e4||I[65]!==e5||I[66]!==e6||I[67]!==e7||I[68]!==v||I[69]!==e8||I[70]!==e9?(b=(0,i.jsx)(r.B,{headingId:ez,hiddenFeatures:ep,areLinesExpanded:el,canExpandOrCollapseLines:ed,fileLinkHref:e2,isCollapsed:L,isBinary:B,size:A,canToggleRichDiff:e3,linesAdded:H,linesChanged:K,linesDeleted:W,newMode:e4,newPath:e5,oldMode:e6,oldPath:e7,patchStatus:ec,path:ee,onToggleExpandAllLines:eo,onToggleFileCollapsed:v,onToggleDiffDisplay:e8,additionalLeftSideContent:G,rightSideContent:es,showRichDiff:e9,isInSingleFileMode:e_}),I[46]=ed,I[47]=L,I[48]=A,I[49]=eo,I[50]=el,I[51]=ez,I[52]=ep,I[53]=B,I[54]=e_,I[55]=G,I[56]=H,I[57]=K,I[58]=W,I[59]=ee,I[60]=es,I[61]=ec,I[62]=e2,I[63]=e3,I[64]=e4,I[65]=e5,I[66]=e6,I[67]=e7,I[68]=v,I[69]=e8,I[70]=e9,I[71]=b):b=I[71],I[72]!==x||I[73]!==b?(_=(0,i.jsx)("div",{className:aQ.A.diffHeaderWrapper,style:x,children:b}),I[72]=x,I[73]=b,I[74]=_):_=I[74],I[75]!==L||I[76]!==ej||I[77]!==E||I[78]!==P||I[79]!==eE||I[80]!==el||I[81]!==O||I[82]!==$||I[83]!==B||I[84]!==eQ||I[85]!==q||I[86]!==K||I[87]!==ev||I[88]!==Q||I[89]!==z||I[90]!==Z||I[91]!==Y||I[92]!==J||I[93]!==eD||I[94]!==ew||I[95]!==ee||I[96]!==et||I[97]!==en||I[98]!==ea||I[99]!==ex||I[100]!==ey||I[101]!==ec||I[102]!==eu||I[103]!==em||I[104]!==eH?(w=L?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[P.length>0&&(0,i.jsx)(sm,{conversationListThreads:P,filePath:ee,subjectId:en||""}),$&&(0,i.jsx)("div",{className:(0,eJ.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",aQ.A.diffAddFileThread),children:(0,i.jsx)(eM,{batchingEnabled:!0,filePath:ee,fileLevelComment:!0,isLeftSide:void 0,subjectId:en||"",viewerData:eH,onAddComment:eE,onClose:eD})})]}),ey&&(0,i.jsx)(a4,{submodule:eu}),ea?.showRichDiff&&(0,i.jsx)(eK,{queryConfig:ea.queryConfig,initialData:ea.richDiff}),ex&&(0,i.jsx)(aK,{hasExpandedAllRanges:el,copilotChatReference:ej,diffEntryData:{diffLines:E,isBinary:B,isTooBig:q,linesChanged:K,newTreeEntry:z,newCommitOid:Q,objectId:Z,oldTreeEntry:J,oldCommitOid:Y,path:ee,pathDigest:et,status:ec,truncatedReason:em},baseHelpUrl:O,subjectId:en||"",viewerData:eH,isSplitView:eQ,diffLinesManuallyUnhidden:ev,onHandleLoadDiff:ew})]}),I[75]=L,I[76]=ej,I[77]=E,I[78]=P,I[79]=eE,I[80]=el,I[81]=O,I[82]=$,I[83]=B,I[84]=eQ,I[85]=q,I[86]=K,I[87]=ev,I[88]=Q,I[89]=z,I[90]=Z,I[91]=Y,I[92]=J,I[93]=eD,I[94]=ew,I[95]=ee,I[96]=et,I[97]=en,I[98]=ea,I[99]=ex,I[100]=ey,I[101]=ec,I[102]=eu,I[103]=em,I[104]=eH,I[105]=w):w=I[105],I[106]!==ez||I[107]!==eg||I[108]!==t||I[109]!==eX||I[110]!==e0||I[111]!==_||I[112]!==w?(N=(0,i.jsxs)("div",{role:"region",ref:t,"aria-labelledby":ez,id:eX,className:y,"data-targeted":eg,children:[_,w]},e0),I[106]=ez,I[107]=eg,I[108]=t,I[109]=eX,I[110]=e0,I[111]=_,I[112]=w,I[113]=N):N=I[113],I[114]!==e_?(C=e_&&(0,i.jsxs)("div",{className:aQ.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:"Due to the large number of changes in this pull request, only one file is being shown at a time."})]}),I[114]=e_,I[115]=C):C=I[115],I[116]!==eh||I[117]!==E||I[118]!==eZ||I[119]!==ep||I[120]!==eQ||I[121]!==z||I[122]!==J||I[123]!==ee||I[124]!==eT||I[125]!==eY||I[126]!==N||I[127]!==C?(S=(0,i.jsxs)(D,{addInjectedContextLines:eh,diffAnchor:eY,diffLines:E,fileLineCount:eZ,path:ee,startNewConversationForLineOrFileMap:eT,hiddenFeatures:ep,isSplitView:eQ,oldTreeEntry:J,newTreeEntry:z,children:[N,C]}),I[116]=eh,I[117]=E,I[118]=eZ,I[119]=ep,I[120]=eQ,I[121]=z,I[122]=J,I[123]=ee,I[124]=eT,I[125]=eY,I[126]=N,I[127]=C,I[128]=S):S=I[128],S}:function({addFileCommentButtonRef:e,collapsed:t,currentUser:n,diffLines:a,diffManuallyExpanded:s,diffSize:d,helpUrl:u,fileComments:m,headerStickyOffset:h=0,hiddenFeatures:f=sh,isAddingFileComment:p,isBinary:y,isSelected:x=!1,isSubmodule:v,isTooBig:b,leftSideContent:_,linesAdded:w,linesChanged:N,linesDeleted:C,newTreeEntry:S,newCommitOid:I,objectId:k,oldTreeEntry:L,oldCommitOid:T,onToggleCollapse:E,path:R,pathDigest:A,pullRequestGlobalRelayId:O,repository:P,richDiffState:F,rightSideContent:M,setIsAddingFileComment:$,hasExpandedAllRanges:B,expandAllContextLines:V,canExpandOrCollapseLines:U,status:q,submodule:G,truncatedReason:H,addInjectedContextLines:K,loadDiff:W},z){let Q=v&&!!G,Z=!Q&&!F?.showRichDiff,[J,Y]=(0,l.useState)(s),X=(0,j.j5)(),ee=sa({isBinary:y,isSubmodule:v,path:R,status:q,repository:P,newCommitOid:I,newTreeEntry:S,oldCommitOid:T,oldTreeEntry:L,pathDigest:A,hasCopilotAccess:n.hasCopilotAccess}),et=async()=>{await W(),Y(!0)},{endOid:en,startOid:ei}=(0,nw.Xv)(),ea=(0,eF.u)("cotd_ui"),{selectedRange:es}=(0,j.L3)(),{mutate:er}=i1(),el=(0,l.useCallback)(()=>{$(!0)},[$]),eo=(0,l.useMemo)(()=>({F0:{startNewComment:el,diffLineKey:sf}}),[el]),ed=(0,l.useMemo)(()=>({avatarUrl:n?.avatarURL??"",diffViewPreference:n?.splitPreference,login:n?.login??"",lineSpacingPreference:n?.lineSpacing,shouldDisplayComments:n?.shouldDisplayComments,shouldDisplayEditOptions:n?.shouldDisplayEditOptions,tabSizePreference:n?.tabSize??4,viewerCanComment:n?.canComment,viewerCanApplySuggestion:n?.canApplySuggestion,commentsPreference:n?.commentsPreference}),[n]),ec=(0,l.useId)(),eu=`heading-${ec}`,em=(0,l.useMemo)(()=>"split"===new URLSearchParams(g.cg?.location.search).get("diff")||"split"===n.splitPreference,[n.splitPreference]),eh=S?.lineCount??L?.lineCount??0;return(0,i.jsxs)(D,{addInjectedContextLines:K,diffAnchor:`diff-${A}`,diffLines:a,fileLineCount:eh,path:R,startNewConversationForLineOrFileMap:eo,hiddenFeatures:f,isSplitView:em,oldTreeEntry:L,newTreeEntry:S,children:[(0,i.jsxs)("div",{role:"region",ref:z,"aria-labelledby":eu,id:`diff-${A}`,className:(0,eJ.$)(aQ.A.diffTargetable,aQ.A.diff),"data-targeted":x,children:[(0,i.jsx)("div",{className:aQ.A.diffHeaderWrapper,style:{"--header-sticky-offset":`${h}px`},children:(0,i.jsx)(r.B,{headingId:eu,hiddenFeatures:f,areLinesExpanded:B,canExpandOrCollapseLines:U,fileLinkHref:`#diff-${A}`,isCollapsed:t,isBinary:y,size:d,canToggleRichDiff:F?.richDiff?.canToggleRichDiff,linesAdded:w,linesChanged:N,linesDeleted:C,newMode:S?.mode,newPath:S?.path,oldMode:L?.mode,oldPath:L?.path,patchStatus:q,path:R,onToggleExpandAllLines:V,onToggleFileCollapsed:e=>E(e,!t),onToggleDiffDisplay:F?.onToggleRichDiff,additionalLeftSideContent:_,rightSideContent:M,showRichDiff:F?.showRichDiff,isInSingleFileMode:X})}),t?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[m.length>0&&(0,i.jsx)(sm,{conversationListThreads:m,filePath:R,subjectId:O||""}),p&&(0,i.jsx)("div",{className:(0,eJ.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",aQ.A.diffAddFileThread),children:(0,i.jsx)(eM,{batchingEnabled:!0,filePath:R,fileLevelComment:!0,isLeftSide:void 0,subjectId:O||"",viewerData:ed,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{ea?er(new ReviewCommentFactory({filePath:R,selectedDiffRange:es,submitBatch:n,text:i}).fileRequestData(),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),$(!1)}}):er({text:i,path:R,submitBatch:n,subjectType:o.Wr.File,comparisonEndOid:en,comparisonStartOid:ei},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),$(!1)}})},onClose:()=>{$(!1),e?.current?.focus()}})})]}),Q&&(0,i.jsx)(a4,{submodule:G}),F?.showRichDiff&&(0,i.jsx)(eK,{queryConfig:F.queryConfig,initialData:F.richDiff}),Z&&(0,i.jsx)(aK,{hasExpandedAllRanges:B,copilotChatReference:ee,diffEntryData:{diffLines:a,isBinary:y,isTooBig:b,linesChanged:N,newTreeEntry:S,newCommitOid:I,objectId:k,oldTreeEntry:L,oldCommitOid:T,path:R,pathDigest:A,status:q,truncatedReason:H},baseHelpUrl:u,subjectId:O||"",viewerData:ed,isSplitView:em,diffLinesManuallyUnhidden:J,onHandleLoadDiff:et})]})]},`${A}_${a.length}`),X&&(0,i.jsxs)("div",{className:aQ.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:"Due to the large number of changes in this pull request, only one file is being shown at a time."})]})]})}),sg=(0,a.GV)()?function(e){let t,n,a,o,d,u=(0,s.c)(24),{path:m,pathDigest:h,linesAdded:f,linesChanged:p,linesDeleted:g,oldTreeEntry:y,newTreeEntry:x,status:v}=e,b=(0,l.useId)(),_=`heading-${b}`,[j,w]=(0,l.useState)(!1),N=`diff-${h}`;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eJ.$)(aQ.A.diffTargetable,aQ.A.diff),u[0]=t):t=u[0];let C=`${h}_error`,S=x?.mode,I=x?.path,k=y?.mode,L=y?.path;return u[1]!==j?(n=()=>w(!j),u[1]=j,u[2]=n):n=u[2],u[3]!==_||u[4]!==j||u[5]!==f||u[6]!==p||u[7]!==g||u[8]!==m||u[9]!==v||u[10]!==S||u[11]!==I||u[12]!==k||u[13]!==L||u[14]!==n?(a=(0,i.jsx)("div",{className:aQ.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:_,isCollapsed:j,isBinary:!1,linesAdded:f,linesChanged:p,linesDeleted:g,newMode:S,newPath:I,oldMode:k,oldPath:L,patchStatus:v,path:m,onToggleFileCollapsed:n})}),u[3]=_,u[4]=j,u[5]=f,u[6]=p,u[7]=g,u[8]=m,u[9]=v,u[10]=S,u[11]=I,u[12]=k,u[13]=L,u[14]=n,u[15]=a):a=u[15],u[16]!==j?(o=!j&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(ni.E,{children:[(0,i.jsx)(ni.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(ni.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(ni.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}),u[16]=j,u[17]=o):o=u[17],u[18]!==_||u[19]!==N||u[20]!==o||u[21]!==C||u[22]!==a?(d=(0,i.jsxs)("div",{role:"region","aria-labelledby":_,id:N,className:t,children:[a,o]},C),u[18]=_,u[19]=N,u[20]=o,u[21]=C,u[22]=a,u[23]=d):d=u[23],d}:function({path:e,pathDigest:t,linesAdded:n,linesChanged:a,linesDeleted:s,oldTreeEntry:o,newTreeEntry:d,status:u}){let m=(0,l.useId)(),h=`heading-${m}`,[f,p]=(0,l.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":h,id:`diff-${t}`,className:(0,eJ.$)(aQ.A.diffTargetable,aQ.A.diff),children:[(0,i.jsx)("div",{className:aQ.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:h,isCollapsed:f,isBinary:!1,linesAdded:n,linesChanged:a,linesDeleted:s,newMode:d?.mode,newPath:d?.path,oldMode:o?.mode,oldPath:o?.path,patchStatus:u,path:e,onToggleFileCollapsed:()=>p(!f)})}),!f&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(ni.E,{children:[(0,i.jsx)(ni.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(ni.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(ni.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)},sy=(0,l.memo)(sp);try{sp.displayName||(sp.displayName="DiffUnmemoized")}catch{}try{sg.displayName||(sg.displayName="DiffErrorFallback")}catch{}try{sy.displayName||(sy.displayName="Diff")}catch{}},65529:(e,t,n)=>{n.d(t,{as:()=>h,fp:()=>m,vQ:()=>u});var i=n(47865),a=n(76977),s=n(93654),r=n(2635),l=n(53419),o=n(96540);let d="copilot-chat-spec-task";function c(e,t){if(e&&t)return`${d}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=c((0,r.Pk)().selectedThreadID,e.tag),[a,s]=(0,o.useState)(null);(0,o.useEffect)(()=>{s(null)},[e.id]);let u=(0,o.useCallback)(e=>{let n;e instanceof i.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,l.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:h}=(0,i.Z)({onError:u}),f=e.name,p=(0,o.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,o.useCallback)(i=>{if(h)return;s(null),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let a=i?.nameWithOwner??e.repository;if(!a)return void u(Error("Repository is required to start a task"));let r=a.split("/");2===r.length&&r[0]&&r[1]?n?m({nwo:a,baseRef:i?.branch,customAgent:i?.subAgent||void 0,problemStatement:p,title:f,eventType:d},n):u(Error("Unable to generate task ID - thread or task tag missing")):u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,h,p,e.repository,t,f]),isStarting:h,error:a}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>c(t.selectedThreadID,e.tag));(0,a._)();let{tasks:i,isLoading:l}=(0,s.si)({});return(0,o.useMemo)(()=>n.map(e=>!e||l||0===i.length?{isLoading:!!e&&l,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,i=t.pullRequest?.created_at;e&&(!i||new Date(e).getTime()>new Date(i).getTime())&&(t=n)}return t}(i.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,i,l])}function h(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},68874:(e,t,n)=>{n.d(t,{o:()=>u,V:()=>c});var i=n(74848),a=n(69497),s=n(12683);let r=[{unit:"month",ms:2592e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],l=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:void 0,timeZoneName:"short"}),o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"});function c(e,t=!0){let n="",i=new Date,a=i.getTime()-e.getTime(),s=r.find(e=>e.ms<a);if(s&&"month"!==s.unit){let e=Math.floor(a/s.ms);n="day"===s.unit&&1===e?"yesterday":`${e} ${s.unit}${e>1?"s":""} ago`}else{let a=e.getFullYear()===i.getFullYear()?d:o;n=`${t?"on ":""}${a.format(e)}`}return n}function u({timestamp:e,usePreposition:t=!0,linkUrl:n,sx:r}){let o=c(e,t),d=l.format(e);return n?(0,i.jsx)(s.N_,{sx:{...r},href:n,target:"_blank",className:"Ago-module__AgoTimestampLink--cfwj_",children:(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)("span",{title:d,className:"Ago-module__timestampText--rtBsS",children:o})})}):(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)(s.EY,{title:d,sx:r,children:o})})}try{u.displayName||(u.displayName="Ago")}catch{}},69510:(e,t,n)=>{n.d(t,{XG:()=>c,_l:()=>m});var i=n(68273),a=n(21728),s=n(65510),r=n(20622),l=n(96379);function o(e){return null!==e&&"object"==typeof e&&"previewInfo"in e}function d(e){return{thread:{id:e.threadId,isResolved:e.isResolved,isOutdated:e.isOutdated,line:e.line,subjectType:e.subjectType,subject:e.subject,commentsData:e.commentsData},previewInfo:{threadId:e.threadId,commentId:e.commentId,path:e.path,threadPreviewComments:e.threadPreviewComments,originalDiffPathUri:e.originalDiffPathUri,firstComment:e.firstComment,subject:e.subject}}}function c(e){return[r.uT.threadPreviews,e]}function u(e){let t=`${e}/page_data/${r.uT.threadPreviews}`;return{queryKey:c(e),queryFn:async()=>{let e=await (0,l.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return n.length>0&&!o(n[0])?n.map(d):n}}}let m=(0,i.Z6)()?function(e){let t,n,i,r=(0,a.c)(8),{pathName:l,initialData:c}=e;r[0]!==l?(t=u(l),r[0]=l,r[1]=t):t=r[1];let{queryFn:m,queryKey:h}=t;r[2]!==c?(n=c&&c.length>0&&!o(c[0])?c.map(d):c,r[2]=c,r[3]=n):n=r[3];let f=n;return r[4]!==m||r[5]!==h||r[6]!==f?(i={queryKey:h,queryFn:m,initialData:f,staleTime:1/0},r[4]=m,r[5]=h,r[6]=f,r[7]=i):i=r[7],(0,s.U)(i)}:function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=u(e),a=t&&t.length>0&&!o(t[0])?t.map(d):t;return(0,s.U)({queryKey:i,queryFn:n,initialData:a,staleTime:1/0})}},70109:(e,t,n)=>{n.d(t,{S:()=>d});var i=n(74848),a=n(68273),s=n(21728),r=n(42118),l=n(96540),o=n(27011);let d=(0,l.forwardRef)((0,a.GV)()?(e,t)=>{let n,a,l,d,c,u,m,h=(0,s.c)(21);h[0]!==e?({children:n,...a}=e,h[0]=e,h[1]=n,h[2]=a):(n=h[1],a=h[2]);let f=(0,o.Yp)(),{baseRepository:p}=(0,o.GK)(),g=(0,o.L3)();h[3]!==f.id?(l={id:f.id},h[3]=f.id,h[4]=l):l=h[4];let y=`${p.ownerLogin}/${p.name}`;h[5]!==p.id||h[6]!==y?(d={databaseId:p.id,nwo:y,slashCommandsEnabled:!1},h[5]=p.id,h[6]=y,h[7]=d):d=h[7],h[8]!==g.selectedRange.baseOid||h[9]!==g.selectedRange.headOid?(c={startCommitOid:g.selectedRange.baseOid,endCommitOid:g.selectedRange.headOid},h[8]=g.selectedRange.baseOid,h[9]=g.selectedRange.headOid,h[10]=c):c=h[10],h[11]!==f.number||h[12]!==l||h[13]!==d||h[14]!==c?(u={type:"pull_request",id:l,pullRequestNumber:f.number,repository:d,comparison:c},h[11]=f.number,h[12]=l,h[13]=d,h[14]=c,h[15]=u):u=h[15];let x=u;return h[16]!==n||h[17]!==t||h[18]!==a||h[19]!==x?(m=(0,i.jsx)(r.hF,{...a,ref:t,placeholder:"Leave a comment",actions:n,subject:x,showLabel:!1}),h[16]=n,h[17]=t,h[18]=a,h[19]=x,h[20]=m):m=h[20],m}:({children:e,...t},n)=>{let a=(0,o.Yp)(),{baseRepository:s}=(0,o.GK)(),l=(0,o.L3)(),d={type:"pull_request",id:{id:a.id},pullRequestNumber:a.number,repository:{databaseId:s.id,nwo:`${s.ownerLogin}/${s.name}`,slashCommandsEnabled:!1},comparison:{startCommitOid:l.selectedRange.baseOid,endCommitOid:l.selectedRange.headOid}};return(0,i.jsx)(r.hF,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:d,showLabel:!1})});d.displayName="ConversationCommentBox"},70138:(e,t,n)=>{n.d(t,{v:()=>$,n:()=>M});var i=n(74848),a=n(68273),s=n(96540),r=n(71323),l=n(97283),o=n(87134),d=n(1932),c=n(21132),u=n(15697);function m({diffSummaries:e,diffSummariesArray:t,loadedPathDigests:n,loadingPathDigests:i,selectedPathDigest:a}){let s=!0,r=t??Object.values(e),l=r.findIndex(e=>e.pathDigest===a);return r.map(({path:e,pathDigest:t},a)=>{let r,o;switch(!0){case n.has(t):r=c.s.Loaded;break;case i.has(t):r=c.s.Loading;break;default:r=c.s.NotLoaded}let d=!1;return r===c.s.Loaded?(o="RENDER",d=!1):(a===l?(o="EAGER_AUTO_LOAD",d=!0):(o=a<l?"LAZY_AUTO_LOAD":a===l+1?"EAGER_AUTO_LOAD":s?"EAGER_AUTO_LOAD":"HIDE",d=!1),s&&"LAZY_AUTO_LOAD"!==o&&(s=!1)),{path:e,pathDigest:t,loadingStatus:r,renderMode:o,loadSolo:d}})}function h({progressiveDiffEntries:e,startingAt:t,preferAnySoloEntry:n}){if(n){let t=e.find(e=>e.loadSolo&&e.loadingStatus===c.s.NotLoaded);if(t)return[t]}let i=e.findIndex(e=>e.pathDigest===t.pathDigest);if(-1===i)return[];let a=e[i];if(a&&a.loadSolo&&a.loadingStatus===c.s.NotLoaded)return[a];let s=[];for(let t=i;t<e.length;t++){let n=e[t];if(!n||(n.loadingStatus===c.s.NotLoaded&&s.push(n),s.length>=4))break}return s}let f="undefined"!=typeof globalThis&&void 0!==globalThis.window,p="undefined"!=typeof process&&!1,g={timeout:150,useIdleCallback:!0},y=({initialDiffSummaries:e,initialLoadedPathDigests:t,selectedPathDigest:n})=>(i,a)=>{let r=new Set,l=e=>{for(let t of e)r.delete(t)},o=()=>{let e=new Set,t=new Set;for(let n of a().entries)n.loadingStatus===c.s.Loaded?e.add(n.pathDigest):n.loadingStatus===c.s.Loading&&t.add(n.pathDigest);return{loaded:e,loading:t}},d=e,y=Object.values(e),x=m({diffSummaries:e,diffSummariesArray:y,loadedPathDigests:t,loadingPathDigests:new Set,selectedPathDigest:n}),v=({loadedPathDigests:e,loadingPathDigests:t},n,r)=>{let l=Array.from(e),o=Array.from(t);!function(e,t={}){let{timeout:n,useIdleCallback:i}={...g,...t};if(!f||p)return e();let a=()=>{"function"==typeof s.startTransition?(0,s.startTransition)(e):e()},r=globalThis;i&&"function"==typeof r.requestIdleCallback?r.requestIdleCallback(a,{timeout:n}):setTimeout(a,0)}(()=>i(e=>{let t,n=m({diffSummaries:e.diffSummaries,diffSummariesArray:(t=e.diffSummaries??a().diffSummaries)?d===t?y:(d=t,y=Object.values(t)):[],loadedPathDigests:new Set(l),loadingPathDigests:new Set(o),selectedPathDigest:e.selectedPathDigest});return{...e,entries:n}},void 0,n),r)};return{entries:x,selectedPathDigest:n,internalProgressiveDiffsActions:{loadSelectedEntries:async e=>{let t;if(0===e.length)return;let n=e.filter(e=>!r.has(e.pathDigest));if(0===n.length)return;let i=n.map(e=>e.path),s=n.map(e=>e.pathDigest);for(let e of s)r.add(e);let{loaded:d,loading:c}=o();v({loadedPathDigests:d,loadingPathDigests:new Set([...c,...r])},"loadSelectedEntries#preFetch");let{loadDiffEntries:m}=a().diffEntriesActions,h=(0,u.i)({paths:new Set(i),diffSummaries:a().diffSummaries});try{t=await m({paths:i,contextRanges:h})}catch(e){throw l(s),e}let f=t??[],p=new Set(f.map(e=>e.pathDigest));l(s);let{loaded:g,loading:y}=o(),x=new Set(g);for(let e of p)x.add(e);let b=new Set(y);for(let e of p)b.delete(e);for(let e of r)b.add(e);v({loadedPathDigests:x,loadingPathDigests:b},0===f.length?"loadSelectedEntries#postFetch#noAPIData":"loadSelectedEntries#postFetch")}},progressiveDiffsActions:{loadMore:async(e,{preferAnySoloEntry:t}={})=>{let n=h({progressiveDiffEntries:a().entries,startingAt:e,preferAnySoloEntry:t});return a().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{i(t=>({...t,selectedPathDigest:e}));let t=a().entries.find(t=>t.pathDigest===e);if(t)return a().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}};var x=n(70170);let v=({prxFilesLiteThrottle:e,prxFilesMediumThrottle:t,initialDiffSummaries:n,initialLoadedPathDigests:i,selectedPathDigest:a})=>(s,r)=>{let l;return l=t?100:50*!!e,{entries:m({diffSummaries:n,loadedPathDigests:i,loadingPathDigests:new Set,selectedPathDigest:a}),selectedPathDigest:a,internalProgressiveDiffsActions:{loadSelectedEntries:(0,x.n)(async e=>{if(0===e.length)return;let t=e.map(e=>e.path),n=e.map(e=>e.pathDigest),i=r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),a=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);s(e=>({entries:m({diffSummaries:e.diffSummaries,loadedPathDigests:new Set(i),loadingPathDigests:new Set([...a,...n]),selectedPathDigest:e.selectedPathDigest})}),void 0,"loadSelectedEntries#preFetch");let{loadDiffEntries:l}=r().diffEntriesActions,o=(0,u.i)({paths:new Set(t),diffSummaries:r().diffSummaries}),d=await l({paths:t,contextRanges:o});if(!d||0===d.length){let e=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest)],t=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);return s({entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(e),loadingPathDigests:new Set(t),selectedPathDigest:r().selectedPathDigest})},void 0,"loadSelectedEntries#postFetch#noAPIData")}let h=d.map(e=>e.pathDigest),f=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),...h],p=r().entries.filter(e=>e.loadingStatus===c.s.Loading).filter(e=>!h.includes(e.pathDigest)).map(e=>e.pathDigest);s(e=>({...e,entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(f),loadingPathDigests:new Set(p),selectedPathDigest:r().selectedPathDigest})}),void 0,"loadSelectedEntries#postFetch")},l)},progressiveDiffsActions:{loadMore:async(e,{preferAnySoloEntry:t}={})=>{let n=h({progressiveDiffEntries:r().entries,startingAt:e,preferAnySoloEntry:t});return r().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{s(t=>({...t,selectedPathDigest:e}));let t=r().entries.find(t=>t.pathDigest===e);if(t)return r().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}};var b=n(91747),_=n(61583),j=n(79472),w=n(45270),N=n(43362),C=n(48845),S=n(20622),I=n(96379),k=n(16235),L=n(69599);function T({basePath:e,selectedRange:t,hideWhitespace:n}){return[S.uT.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`hideWhitespace:${n}`]}async function E(e){let t=(0,k.S)(),n=T(e),i=await R(e);return i&&i.length>0&&t.setQueryData(n,(0,d.jM)(e=>{if(!e)return i;for(let t of i)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),i}async function D(e){let t,n=(0,k.S)(),i=T(e),a=n.getQueryData(i);if(a?.length){let n=new Set(a.map(e=>e.path));if(0===(t=e.paths.filter(e=>!n.has(e))).length)return a}else t=e.paths;let s=await R({...e,paths:t});return s&&s.length>0&&n.setQueryData(i,(0,d.jM)(e=>{if(!e)return s;for(let t of s)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),(n.getQueryData(i)||[]).filter(t=>e.paths.includes(t.path))}async function R({basePath:e,fullDiff:t,selectedRange:n,paths:i,contextRanges:a,signal:s,hideWhitespace:r}){let l=new URLSearchParams,o=i.map(e=>encodeURIComponent(e));if(l.append("paths",o.join(",")),a){let e=i.map(e=>(a[e]??[]).map(([e,t])=>`${e}-${t}`).join(",")).join(":");l.append("ctx",e)}l.append("w",r?"1":"0"),n.baseOid===t.baseOid?l.append("range",n.headOid):l.append("range",`${n.baseOid}..${n.headOid}`);let d=`${e}/page_data/${S.uT.diffEntries}?${l.toString()}`;try{let e=await (0,I.Sr)(d,{signal:s});if(s?.aborted)return;let t=await (0,C.hp)(e);return(0,C.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}function A(e,t,n,i){return[S.uT.diffContextLines,e,t,n,i]}async function O({contextLineRanges:e,basePath:t,path:n,w:i="0",fullDiff:a,selectedRange:s}){let r=new URLSearchParams;for(let t of(r.append("path",n),e))r.append("context_line_ranges[]",JSON.stringify(t));r.append("w",i),s.baseOid===a.baseOid?r.append("range",s.headOid):r.append("range",`${s.baseOid}..${s.headOid}`);let l=`${t}/page_data/${S.uT.diffContextLines}?${r.toString()}`,o=await (0,I.QJ)(l);if(o.ok)return await o.json()??void 0}var P=n(88008);let F=(0,s.createContext)(null),M=(0,a.Z6)()?function(e){let t=(0,s.useContext)(F);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)}:function(e){let t=(0,s.useContext)(F);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)},$=({initData:e,children:t})=>{var n,a,r,l,o,d;let c,u,m=(0,s.useRef)(null),h=(0,b.u)("prx_files_lite_throttle"),f=(0,b.u)("prx_files_medium_throttle"),p=(0,b.u)("pr_react_loading_optimizations"),g=(0,j.Qn)(e.user.viewSettings.hideWhitespace),y=(0,w.Xv)(),x=(0,N.Wp)(e.diffSummaries),v=(0,N.Be)(e.diffSummaries),C=(0,N.wm)(e.viewerPendingReview),S=(0,N.Sl)(e.diffContents),I=(0,N.jH)(e.markers,e.diffSummaries),L=(0,P.Ol)(e.pullRequest.pathName,e.pullRequest.comparison.headOid);return m.current||(n=y.startOid,a=y.endOid,r=e.pullRequest.pathName,l=e.diffContents,o=e.pullRequest.comparison,d=g,c=(0,k.S)(),u=T({basePath:r,selectedRange:{baseOid:n??o.baseOid,headOid:a??o.headOid},hideWhitespace:d}),c.setQueryData(u,l),m.current=B({baseOid:e.pullRequest.comparison.baseOid,headOid:e.pullRequest.comparison.headOid,selectedCommitRange:{baseOid:y.startOid??void 0,headOid:y.endOid??void 0},changeGroupGeneration:e.changeGroupGeneration,hideWhitespace:g,isSingleFileMode:e.isSingleFileMode,collapsedFilesMap:v,initialSummariesViewedStatus:v,initialSummariesViewedCount:e.user.viewedFilesCount,diffEntries:S,initialDiffSummaries:x,initialLoadedPathDigests:new Set(e.diffContents.map(e=>e.pathDigest)),markers:I,basePath:e.pullRequest.pathName,pendingReview:C,prxFilesLiteThrottle:h,prxFilesMediumThrottle:f,prReactLoadingOptimizations:p,pullRequest:e.pullRequest,baseRepository:e.repository,selectedPathDigest:(0,_.jU)((0,_.o9)()),initialActiveBatch:L.length>0?L:void 0,showChangeGroupPreference:e.user.viewSettings.showChangeGroups})),(0,i.jsx)(F.Provider,{value:m.current,children:t})},B=e=>{let t=e.prReactLoadingOptimizations?y:v;return(0,l.y)()((0,o.lt)((...n)=>({...(({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r})=>l=>({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r,changeGroupGenerationActions:{updateChangeGroupGeneration:e=>l(t=>({changeGroupGeneration:{...t.changeGroupGeneration,...e},showChangeGroupPreference:t.showChangeGroupPreference}),void 0,"updateChangeGroupGeneration"),updateChangeGroupPreference:e=>l(t=>({changeGroupGeneration:t.changeGroupGeneration,showChangeGroupPreference:e}),void 0,"updateChangeGroupPreference")}}))(e)(...n),...((e,t)=>({codeowners:void 0,codeownersActions:{setCodeowners:t=>{e({codeowners:t},void 0,"updateCodeowners")}}}))(...n),...(({baseOid:e,headOid:t,selectedCommitRange:n,hideWhitespace:i})=>a=>({comparisonInfo:{fullDiff:{baseOid:e,headOid:t},selectedRange:{baseOid:n.baseOid??e,headOid:n.headOid??t},hideWhitespace:i},comparisonInfoActions:{updateWhitespace:e=>a(t=>({comparisonInfo:{...t.comparisonInfo,hideWhitespace:e}}),void 0,"comparisonInfo#updateWhitespace")}}))(e)(...n),...((e,t)=>({diffFilter:{state:{activeChangeGroupId:void 0,filterText:"",fileExtensions:{},unselectedFileExtensions:new Set,showDeletedFiles:!0,showOnlyManifestFiles:!1,showOnlyOwnedFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!1},diffFilterActions:{updateDiffFilter:(n,i)=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,...n},filtersInteractedWith:t().diffFilter.filtersInteractedWith||!!i}},void 0,"updateFilters")},clearAllFilters:()=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,filterText:"",unselectedFileExtensions:new Set,showOnlyOwnedFiles:!1,showDeletedFiles:!0,showOnlyManifestFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!0}},void 0,"clearAllFilters")}}}))(...n),...(({initialDiffSummaries:e,initialSummariesViewedStatus:t,initialSummariesViewedCount:n})=>(i,a)=>({diffSummaries:e,summariesViewedCount:n,summariesViewedStatus:t,codeowners:void 0,getPathDigestFromThreadID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.threads.some(t=>Number(t.id)===Number(e)))return t.pathDigest}},getPathDigestFromAnnotationID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.annotations.some(t=>t.id===e))return t.pathDigest}},diffSummariesActions:{setDiffSummaries:e=>{i({diffSummaries:e},void 0,"updateDiffSummaries")},setDiffViewed:(e,t)=>{i(n=>n.diffSummaries?{summariesViewedStatus:(0,d.jM)(n.summariesViewedStatus,n=>{n[e]=t}),summariesViewedCount:n.summariesViewedCount+(t?1:-1),diffSummaries:(0,d.jM)(n.diffSummaries,n=>{n[e]&&(n[e].markedAsViewed=t)})}:n)},onCommentThreadAdded:({path:e,diffLineKey:t,startPosition:n,threadID:a})=>{i((0,d.jM)(i=>{if(!i.diffSummaries)return;let s=i.diffSummaries[e];if(!s)return;let r=s.markersMap??{};r[t]||(r[t]={threads:[],annotations:[]}),r[t].threads.push({id:parseInt(a),start:n}),s.totalCommentsCount=(s.totalCommentsCount||0)+1}),void 0,"commentAddedForDiffSummary")},onCommentThreadDeleted:({path:e,threadID:t})=>{i((0,d.jM)(n=>{if(!n.diffSummaries)return;let i=n.diffSummaries[e];if(i&&i?.totalCommentsCount&&i?.markersMap)for(let[e,n]of Object.entries(i.markersMap))n.threads=n.threads.filter(e=>e.id!==parseInt(t)),0===n.threads.length&&0===n.annotations.length&&delete i.markersMap[e]}),void 0,"commentDeletedForDiffSummary")}}}))(e)(...n),...(({markers:e})=>(t,n)=>({markers:e,getThread:(e,t,i)=>{let a=n().markers;if(a)return a[t]?.[i]?.threads?.find(t=>Number(t.id)===e)},getThreadFromCommentID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(i){for(let t of Object.values(i))if(t?.commentsData?.comments.some(t=>t.databaseId===e))return t}},getAnnotationFromID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(i){for(let t of Object.values(i))if(t.databaseId===e)return t}},markersActions:{updateThread:(e,i,a,s)=>{let r=n().markers;if(!r)return;let l=s(r[i]?.[a]?.threads?.find(t=>Number(t.id)===e));l&&t({markers:(0,d.jM)(r,t=>{let n=t[i]?.[a]?.threads?.findIndex(t=>Number(t.id)===e);if(void 0===n||-1===n)t[i]||(t[i]={}),t[i][a]||(t[i][a]={threads:[],annotations:[]}),t[i][a].threads.push(l);else if(t[i]&&t[i][a]&&-1!==n){let e=l.positioning??t[i][a].threads[n]?.positioning,s=l.subject??t[i][a].threads[n]?.subject,r={...l,positioning:e,subject:s};t[i][a].threads[n]=r}})},void 0,"updateThread")},updateThreads:e=>{let i=n().markers;i&&t({markers:(0,d.jM)(i,t=>{for(let n of Object.keys(i)){let i=t[n];if(i)for(let t of Object.keys(i)){let n=i[t];if(!n)continue;let a=n.threads;a&&(n.threads=e(a))}}})})},deleteThreadComment:(e,i,a,s)=>{let r="not_found",l=n().markers;return l&&t({markers:(0,d.jM)(l,t=>{let n=t[a]?.[s]?.threads?.find(t=>Number(t.id)===e);if(!n){r="not_found";return}let l=n.commentsData,o=l?.comments.filter(e=>e.id!==i)??[];if(!l||l.comments.length===o.length){r="not_found";return}if(0===o.length){r="thread_deleted";let n=t[a]?.[s]?.threads;if(n){let t=n.findIndex(t=>Number(t.id)===e);-1!==t&&n.splice(t,1)}}else r="comment_deleted",l&&(l.comments=o)})},void 0,"deleteThreadComment"),r},updateThreadComment:({threadID:e,filePath:i,lineMarkersKey:a,match:s,transform:r})=>{let l=n().markers;l&&t({markers:(0,d.jM)(l,t=>{let n,l=t[i]?.[a]?.threads?.find(t=>Number(t.id)===e);if(!l)return;let o=l.commentsData,d=o?.comments.findIndex(s);"number"==typeof d&&-1!==d&&(n=o?.comments[d]);let c=r(n);c&&(-1===d||"number"!=typeof d?o?.comments.push(c):o&&o.comments&&(o.comments[d]=c))})},void 0,"updateThreadComment")}}}))(e)(...n),...t(e)(...n),...(({collapsedFilesMap:e})=>(t,n)=>({collapsedFilesMap:e,filesCollapsedStatusActions:{updateFileCollapsedStatus:(e,i)=>{let a=n().collapsedFilesMap;a&&t({collapsedFilesMap:(0,d.jM)(a,t=>{t[e]=i})},void 0,"updateFileCollapsedStatus")},updateAllFilesCollapsedStatus:e=>{let i=n().collapsedFilesMap;i&&t({collapsedFilesMap:(0,d.jM)(i,t=>{for(let n of Object.keys(t))t[n]=e})},void 0,"deleteThreadComment")}}}))(e)(...n),...(({pendingReview:e})=>(t,n)=>({pendingReview:e,pendingReviewActions:{addPendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{t.pendingReviewIDs||(t.pendingReviewIDs=[]),t.pendingReviewIDs.push(e)})},void 0,"addPendingComment")},removePendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{let n=t.pendingReviewIDs?.filter(t=>t!==e);t.pendingReviewIDs=n})},void 0,"removePendingComment")},clearPendingReview:()=>{let e=n().pendingReview;e&&t({pendingReview:(0,d.jM)(e,e=>{e.id=void 0,e.pendingReviewIDs=[],e.comments=[]})},void 0,"clearPendingReview")}}}))(e)(...n),...(({basePath:e,diffEntries:t,baseOid:n,headOid:i,selectedCommitRange:a})=>(s,r)=>{let l=(0,k.S)();for(let[s,r]of Object.entries(t)){let t=A(e,r.path,a.baseOid??n,a.headOid??i);l.setQueryData(t,()=>r.diffLines)}return{diffEntries:t,diffEntriesActions:{updateDiffEntries:t=>{let n=r().diffEntries??{},i={};for(let n of t){let t=A(e,n.path,r().comparisonInfo.selectedRange.baseOid,r().comparisonInfo.selectedRange.headOid);l.setQueryData(t,n.diffLines),i[n.path]=n}s({diffEntries:(0,d.jM)(n,e=>{for(let t of Object.keys(i))i[t]&&(e[t]=i[t])})},void 0,"updateDiffEntriesInMap")},loadDiffEntries:async t=>{var n;let i=await (n={basePath:e,...t,...r().comparisonInfo},(0,L.G7)("pr_sfv_new_diff_fetch")?D(n):E(n));return i&&0!==i.length?(r().diffEntriesActions.updateDiffEntries(i),i):[]},fetchContextLines:async({path:t,contextLineRanges:n,w:i="0"})=>{let a=A(e,t,r().comparisonInfo.selectedRange.baseOid,r().comparisonInfo.selectedRange.headOid),o=r().diffEntries[t];o&&await l.fetchQuery({queryKey:a,queryFn:async()=>{let d=await O({contextLineRanges:n,basePath:e,path:t,w:i,...r().comparisonInfo}),c=o.diffLines,u=l.setQueryData(a,e=>c=function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})}(e??o.diffLines,d?.diffEntryLines??[]));return s(e=>({...e,diffEntries:{...e.diffEntries,[t]:{...o,diffLines:c}}}),void 0,"addContextLinesToDiffEntry"),u}})}}}})(e)(...n),...(({markers:e})=>(t,n)=>{let i,a,s=(0,_.Gl)(),r=(0,_.e3)();if(e){if(s){let t=Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(t){let e=Number(s);for(let n of Object.values(t)){let t=n?.commentsData?.comments;if(n&&t)for(let s of t)Number(s.databaseId)===e&&(i=n.id,a=e)}}}else if(r){let t=Object.values(e).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(t){let e=Number(r);for(let n of Object.values(t))Number(n.databaseId)===e&&(i=n.id)}}}return{markerAndDiffNavigation:{markerId:i,commentId:a,getCommentId:()=>n().markerAndDiffNavigation.commentId,getMarkerId:()=>n().markerAndDiffNavigation.markerId},markerAndDiffNavigationActions:{navigateToSelectedComment:e=>{let i=n().getThreadFromCommentID(e);if(i){let a=n().getPathDigestFromThreadID(i.id);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(t=>({markerAndDiffNavigation:{...t.markerAndDiffNavigation,commentId:e,markerId:i?.id}}))}},navigateToSelectedAnnotation:e=>{let i=n().getAnnotationFromID(e);if(i){let a=n().getPathDigestFromAnnotationID(e);n().progressiveDiffsActions.updateSelectedPathDigest(a),t(e=>({markerAndDiffNavigation:{...e.markerAndDiffNavigation,commentId:void 0,markerId:i.id}}))}},handleHashUpdate:()=>{let e=(0,_.Gl)(),t=(0,_.e3)(),i=(0,_.jU)(window.location.hash),a=n(),s=a.markerAndDiffNavigation.commentId,r=a.markerAndDiffNavigation.markerId,l=a.selectedPathDigest;if(e&&e!==s)a.markerAndDiffNavigationActions.navigateToSelectedComment(e);else if(t){let e=a.getAnnotationFromID(t),n=e?.id;n&&n!==r&&a.markerAndDiffNavigationActions.navigateToSelectedAnnotation(t)}else i&&i!==l?a.progressiveDiffsActions.updateSelectedPathDigest(i):e||t||i||!l||a.progressiveDiffsActions.updateSelectedPathDigest(void 0)}}}})(e)(...n),...(({isSingleFileMode:e})=>t=>({isSingleFileMode:e}))(e)(...n),...(({pullRequest:e})=>(t,n)=>({pullRequest:{state:e.state,basePath:e.pathName,id:e.id,number:e.number},pullRequestActions:{updatePullRequestState:e=>{t({pullRequest:{...n().pullRequest,state:e}},void 0,"pullRequest#updatePullRequestState")}}}))(e)(...n),...(({baseRepository:e})=>()=>({repository:{baseRepository:{id:e.id,ownerLogin:e.ownerLogin,name:e.name}}}))(e)(...n),...(t=>({suggestionBatch:{activeBatch:e.initialActiveBatch??[],isSuggestionBatchPending:(e.initialActiveBatch?.length??0)>0},suggestionBatchActions:{addSuggestionToBatch:e=>t(t=>{if(t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex))return t;let n=[...t.suggestionBatch.activeBatch,e];return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),removeSuggestionFromBatch:e=>t(t=>{let n=t.suggestionBatch.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex);return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),clearSuggestionBatch:()=>t(e=>({suggestionBatch:{...e.suggestionBatch,activeBatch:[],isSuggestionBatchPending:!1}})),loadActiveBatchFromStorage:e=>t(t=>({suggestionBatch:{...t.suggestionBatch,activeBatch:e,isSuggestionBatchPending:e.length>0}}))}}))(...n)}),{name:"pull-request-store"}))};try{F.displayName||(F.displayName="PullRequestStoreContext")}catch{}try{$.displayName||($.displayName="PullRequestStoreProvider")}catch{}},70840:(e,t,n)=>{n.d(t,{G:()=>x});var i=n(74848),a=n(21728),s=n(34522),r=n(73189),l=n(97286),o=n(24880),d=n(73017),c=n(96379),u=n(38621),m=n(69726),h=n(40090),f=n(34164),p=n(74022),g=n(96540),y=n(25506);function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let i,s,r,l=(0,a.c)(8),[o,d]=(0,g.useState)(e),[c,u]=(0,g.useState)(t);2e3!==l[0]?(i=(0,p.A)(d,2e3),l[0]=2e3,l[1]=i):i=l[1];let m=i;return l[2]!==c||l[3]!==t||l[4]!==m||l[5]!==e?(s=()=>{t!==c?(m.cancel(),d(e),u(t)):m(e)},r=[m,e,t,c],l[2]=c,l[3]=t,l[4]=m,l[5]=e,l[6]=s,l[7]=r):(s=l[6],r=l[7]),(0,g.useEffect)(s,r),o}(e.value,e.name,2e3),{status:x,data:b}=(0,l.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,c.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:o.rX,staleTime:1/0});return(0,i.jsx)("div",{className:(0,f.$)("readme html-blob blob","MarkdownPreview-module__markdownPreview--KrJBX",s&&"MarkdownPreview-module__hideHeadingAnchors--wU3US",t),children:"pending"===x?r?(0,i.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(h.r,{size:e.size,lines:e.lines})},t))}):(0,i.jsx)("div",{className:"MarkdownPreview-module__spinner--rHtSt",children:(0,i.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,i.jsx)(v,{content:e}):(0,i.jsxs)("div",{className:"MarkdownPreview-module__error--Kjmwv",children:[(0,i.jsx)("span",{className:"MarkdownPreview-module__errorIcon--msbkW",children:(0,i.jsx)(u.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:"MarkdownPreview-module__errorHeader--yOGh9",children:"Markdown rendering failed"}),(0,i.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,i.jsx)(d.$6,{className:"markdown-body",html:b.html})})}function v(e){let t,n,l,o,d=(0,a.c)(13),{content:c}=e,u=(0,g.useId)();d[0]!==c.value?(t={value:c.value,language:"markdown"},d[0]=c.value,d[1]=t):t=d[1];let m=(0,y.a)(t);return d[2]!==c.name||d[3]!==u?(n=(0,i.jsxs)("span",{id:u,className:"sr-only",children:[c.name," raw markdown contents"]}),d[2]=c.name,d[3]=u,d[4]=n):n=d[4],d[5]!==m||d[6]!==c.name||d[7]!==c.value||d[8]!==u?(l=(0,i.jsx)(s.default,{ariaLabelledBy:u,fileName:c.name,isReadOnly:!0,spacing:m,value:c.value,onChange:r.l,hideHelp:!0}),d[5]=m,d[6]=c.name,d[7]=c.value,d[8]=u,d[9]=l):l=d[9],d[10]!==n||d[11]!==l?(o=(0,i.jsxs)(i.Fragment,{children:[n,l]}),d[10]=n,d[11]=l,d[12]=o):o=d[12],o}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{v.displayName||(v.displayName="RawMarkdownPreview")}catch{}},71317:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(71315);function a(e,t=0){if(void 0===i.XC)return;let n=i.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===i.XC)return;let e=i.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),i.XC.body.appendChild(e),e}()),!n)return;let s=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=s)},t)}},72994:(e,t,n)=>{n.d(t,{c:()=>s,t:()=>a});var i=n(35247);function a(e){return e&&0!==e.length?i.W.draftIssueProjectsWithID?e.filter(e=>!!e.title||!!e.id):e.filter(e=>!!e.title).map(e=>e.title):[]}function s(e){return e&&0!==e.length?e.filter(e=>"string"==typeof e?""!==e.trim():!!e.title||!!e.id).map(e=>"string"==typeof e?{title:e}:e):[]}},73262:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(21728),s=n(96540),r=n(21373),l=n(34164),o=n(48505),d=n(18373);function c(e){let t,n,c,u,m,h,f,p,g,y,x,v=(0,a.c)(21),{automatedComment:b,isButtonDisabled:_,dismissError:j,onDismiss:w,onReopen:N,className:C}=e,[S,I]=(0,s.useState)(!1),{isDismissable:k,isReopenable:L,resourceName:T,toggleButtonLabel:E}=(h=(0,a.c)(6),p=!(f=b.isDismissed)&&b.viewerCanDismiss,g=f&&b.viewerCanReopen,y="alert",b.source===o.vk.CodeQuality&&(y="finding"),x=f?`Reopen ${y}`:`Dismiss ${y}`,h[0]!==p||h[1]!==f||h[2]!==g||h[3]!==y||h[4]!==x?(m={isDismissed:f,isDismissable:p,isReopenable:g,resourceName:y,toggleButtonLabel:x},h[0]=p,h[1]=f,h[2]=g,h[3]=y,h[4]=x,h[5]=m):m=h[5],m);return v[0]!==b||v[1]!==S||v[2]!==j||v[3]!==w?(t=S&&(0,i.jsx)(d.U,{setOpen:I,count:1,error:j,dismissalOptions:b.dismissalOptions,onSubmit:e=>{let{resolution:t,dismissalComment:n}=e;return w({reason:t,resolutionNote:n},{onSuccess:()=>I(!1)})},delegatedAlertDismissalEnabled:!1,codeSecurity:b.source===o.vk.CodeScanning}),v[0]=b,v[1]=S,v[2]=j,v[3]=w,v[4]=t):t=v[4],v[5]!==C||v[6]!==_||v[7]!==k||v[8]!==T||v[9]!==E?(n=k&&(0,i.jsxs)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",C),children:[(0,i.jsx)(r.Q,{"aria-label":E,className:"mr-2",onClick:()=>I(!0),disabled:_,children:E}),(0,i.jsxs)("span",{className:"fgColor-muted f6",children:["Dismissing the ",T," will mark this conversation as resolved."]})]}),v[5]=C,v[6]=_,v[7]=k,v[8]=T,v[9]=E,v[10]=n):n=v[10],v[11]!==C||v[12]!==_||v[13]!==L||v[14]!==N||v[15]!==E?(c=L&&(0,i.jsx)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",C),children:(0,i.jsx)(r.Q,{"aria-label":E,onClick:N,disabled:_,children:E})}),v[11]=C,v[12]=_,v[13]=L,v[14]=N,v[15]=E,v[16]=c):c=v[16],v[17]!==t||v[18]!==n||v[19]!==c?(u=(0,i.jsxs)(i.Fragment,{children:[t,n,c]}),v[17]=t,v[18]=n,v[19]=c,v[20]=u):u=v[20],u}try{c.displayName||(c.displayName="BaseAutomatedReviewCommentActions")}catch{}},73282:(e,t,n)=>{n.d(t,{Yl:()=>a,yB:()=>i});let i="/:owner/:repo/pull/:pr_number/files",a="/:owner/:repo/pull/:pr_number/changes"},76219:(e,t,n)=>{n.d(t,{Q:()=>l,U:()=>o});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(null);function l(e){let t,n,s=(0,a.c)(8),{availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c,children:u}=e;s[0]!==l||s[1]!==o||s[2]!==d||s[3]!==c?(t={availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c},s[0]=l,s[1]=o,s[2]=d,s[3]=c,s[4]=t):t=s[4];let m=t;return s[5]!==u||s[6]!==m?(n=(0,i.jsx)(r.Provider,{value:m,children:u}),s[5]=u,s[6]=m,s[7]=n):n=s[7],n}function o(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e,t){if(!Array.isArray(e.nodes))return[{error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}];let n=function(e,t){let n=[];for(let a of("string"!=typeof e.title&&n.push({error:"Loop is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),0===e.nodes.length&&n.push({error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))n=n.concat(function(e,t){let n=[];return("string"!=typeof e.title||0===e.title.length)&&n.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),n.concat(s.C.validateNode(e,t))}(a,t));return n}(e,t),r=(0,a.f0)(e.nodes);for(let t of r.edges){let a=e.nodes.find(e=>e.id===t.from),s=e.nodes.find(e=>e.id===t.to);a&&s||n.push({error:`Node ${t.to} references a nonexistent node {{${t.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[t.to]})}let l=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(r);if(l&&l.length>0){let e=[...l,l[0]];n.push({error:`Loop contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:l})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(r);return o.length>0&&n.push({error:`Loop contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),n}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),l=n(71988),o=n(96540);let d=(0,o.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:c=8,...u},m)=>{let[h,f]=(0,o.useState)(!1),p=(0,o.useRef)(null),{refs:g,floatingStyles:y,context:x,isPositioned:v}=(0,s.we)({open:h,onOpenChange:f,placement:t,middleware:[(0,r.cY)(c),...t?[]:[(0,r.RK)()]],whileElementsMounted:l.ll}),b=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),_=(0,s.iQ)(x),j=(0,s.s9)(x),w=(0,s.It)(x,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:N,getFloatingProps:C}=(0,s.bv)([b,_,j,w]),S=N();"label"===d?u["aria-label"]=e:"description"===d&&(u["aria-describedby"]=x.floatingId);let I=(0,s.SV)([g.setReference,m]),k=(0,o.cloneElement)(n,{...S,...u,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),p.current&&(clearTimeout(p.current),p.current=null)},ref:I});return(0,i.jsxs)(i.Fragment,{children:[k,h&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:g.setFloating,id:x.floatingId,style:{...y,visibility:v?"visible":"hidden"},className:(0,a.$)("Tooltip-module__tooltip--hAat9"),...C(),children:e})})]})});d.displayName="Tooltip"},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79196:(e,t,n)=>{n.d(t,{U:()=>aY});var i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R,A,O,P,F,M,$,B,V,U,q,G,H,K,W=n(74848),z=n(21728),Q=n(2635),Z=n(33592),J=n(7730),Y=n(25641),X=n(35247),ee=n(72206),et=n(53419),en=n(75202),ei=n(6551),ea=n(11683),es=n(38621),er=n(45800),el=n(26108),eo=n(94236),ed=n(5524),ec=n(71941),eu=n(34164),em=n(96540),eh=n(22116);let ef="ContentPreview-module__toolbar--_XWuB",ep="ContentPreview-module__actions--o_YRg",eg="ContentPreview-module__rightDivider--LY__Z",ey="ContentPreview-module__leftDivider--FCyvC",ex="ContentPreview-module__content--FgZZL";var ev=n(1747),eb=n(47789),e_=n(90651),ej=n(49246),ew=n(66827),eN=n(29731),eC=n(46251),eS=n(84078),eI=n(43715),ek=n(38598);function eL(e){let t,n,i,a,s,r=(0,z.c)(11),{title:l,description:o,icon:d}=e;return r[0]!==d?(t=(0,W.jsx)(d,{size:24,className:"FailureState-module__icon--TP632"}),r[0]=d,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==l?(i=(0,W.jsx)("h2",{className:"FailureState-module__heading--ohXqD",children:l}),r[3]=l,r[4]=i):i=r[4],r[5]!==o?(a=(0,W.jsx)("p",{className:"FailureState-module__subtitle--VM7x1",children:o}),r[5]=o,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,W.jsxs)("div",{className:"FailureState-module__container--EliAz",children:[t,n,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}try{eL.displayName||(eL.displayName="FailureState")}catch{}var eT=n(26100),eE=n(7812);function eD(e){let t,n,i,a,s,r=(0,z.c)(16),{item:l,onVersionSelect:o}=e,{versionedItems:d,openItem:c}=(0,ev.xx)(),u=(0,eE.oy)(l.id),m=d.get(u)??[],h=m.indexOf(l.id);if((0,em.useEffect)(()=>{o&&m.length>1&&o(`Version${h+1}`)},[h,o,m.length]),m.length<=1)return null;let f=eo.W,p=h+1;r[0]!==p?(t=(0,W.jsx)(eo.W.Button,{variant:"invisible",className:"VersionSelector-module__anchor--Tx_UX",children:(0,W.jsx)(eT.g,{version:p,"data-testid":"version-selector"})}),r[0]=p,r[1]=t):t=r[1];let g=eo.W,y=ed.l;r[2]!==l.id||r[3]!==o||r[4]!==c?(n=(e,t)=>(0,W.jsxs)(ed.l.Item,{onSelect:()=>{c(e),o&&o(`Version${t+1}`)},selected:e===l.id,children:[(0,W.jsx)(ed.l.LeadingVisual,{children:(0,W.jsx)(eT.g,{version:t+1})}),"Version ",t+1]},e),r[2]=l.id,r[3]=o,r[4]=c,r[5]=n):n=r[5];let x=m.map(n);return r[6]!==y||r[7]!==x?(i=(0,W.jsx)(y,{selectionVariant:"single",children:x}),r[6]=y,r[7]=x,r[8]=i):i=r[8],r[9]!==g.Overlay||r[10]!==i?(a=(0,W.jsx)(g.Overlay,{children:i}),r[9]=g.Overlay,r[10]=i,r[11]=a):a=r[11],r[12]!==f||r[13]!==t||r[14]!==a?(s=(0,W.jsxs)(f,{children:[t,a]}),r[12]=f,r[13]=t,r[14]=a,r[15]=s):s=r[15],s}try{eD.displayName||(eD.displayName="VersionSelector")}catch{}var eR=n(17831),eA=n(83494),eO=n(15220),eP=n(69726),eF=n(21373),eM=n(79431),e$=n(28177),eB=n(39344),eV=n(62559),eU=n(81724),eq=n(977),eG=n(81171),eH=n(18501),eK=n(30721),eW=n(40961),ez=n(5338),eQ=n(18312),eZ=n(46461);let eJ={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};eJ.hash="a175c12fb4b38762491470789bca7dee";let eY=(i={defaultValue:null,kind:"LocalArgument",name:"name"},a={defaultValue:null,kind:"LocalArgument",name:"number"},s={defaultValue:null,kind:"LocalArgument",name:"owner"},r=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],l=[{kind:"Variable",name:"number",variableName:"number"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g=[p={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],y={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},v=[f],_={alias:null,args:b=[{kind:"Literal",name:"first",value:20}],concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[o,u],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},j={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},w=[f,o],{fragment:{argumentDefinitions:[i,a,s],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:g,storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:v,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:v,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:v,storageKey:null},_,j],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,i,a],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},p,o],storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:w,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[p,o],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:w,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u,o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:w,storageKey:null},_,j],storageKey:null},o],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}});async function eX(e,t,n,i,a=!1){try{var s;let r=await (0,eQ.fetchQuery)(e,eY,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,eQ.readInlineData)(eJ,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}eY.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var e0=n(62670),e1=n(93997),e2=n(97286);function e3(e){let t,n,i,a,s=(0,z.c)(13),{repoId:r,filename:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,l],s[2]=l,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==l||s[8]!==r?(i=async()=>r&&l?await e4(o,r,l):null,s[6]=o,s[7]=l,s[8]=r,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}async function e4(e,t,n){let i=await (0,eQ.fetchQuery)(e,e0.d,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,e1.EV)(i.node)??null:null}let e5=crypto.randomUUID();async function e6(e,t,n){let i={},a=new Map;if((0,eZ.YR)(n,e=>a.set(e.item.tag,e)),a.size>60)return i[e5]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return i[e5]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,s]of a){let r=s.item;if(i[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=a.get(r.parentTag)?.item?.repository),!r.repository)){i[n].errorMessages.push("Repository is required");continue}let[l,o]=r.repository?.split("/")||[];if(!l||!o){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,eG.tZ)(e,l,o);if(!d){i[n].errorMessages.push("Repository not found");continue}if(d.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){i[n].errorMessages.push("Issue number is required");continue}let t=await eX(e,l,o,r.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(s.children.length>0){let e=t.subIssues?.totalCount??0,a=s.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let c=r.template?.split("/").findLast(Boolean),u=c?await e4(e,d.id,c):void 0;if(r.template&&!u){i[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!u){i[n].errorMessages.push("Issue template is required");continue}let m=(0,eV.O_)(r.name);if(m.isValid||i[n].errorMessages.push(m.errorMessage||"Issue title is invalid"),u&&(0,eU.GQ)(u.data)){t.current=null;let a=document.createElement("div"),s=(0,ez.H)(a);if((0,eW.flushSync)(()=>{s.render((0,W.jsx)(eH.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,W.jsx)(eK.mf,{environment:e,children:(0,W.jsx)(e7,{repository:d,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let l=t.current;try{if(l.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}r.body=l.markdown()}finally{l.clearSessionStorage(),s.unmount(),a.remove()}}let h=(0,eV.QK)(r.body??"");h.isValid||i[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return i}function e7(e){let t,n,i=(0,z.c)(10),{repository:a,draftIssue:s,template:r,outputRef:l}=e,o=`${a.owner.login}/${a.name}`;i[0]!==a.databaseId||i[1]!==a.slashCommandsEnabled||i[2]!==o?(t={type:"issue",repository:{databaseId:a.databaseId,nwo:o,slashCommandsEnabled:a.slashCommandsEnabled}},i[0]=a.databaseId,i[1]=a.slashCommandsEnabled,i[2]=o,i[3]=t):t=i[3];let d=t;if(!(0,eU.GQ)(r.data))return;let c=`copilot-creates-issues:${s.tag}`;return i[4]!==s.defaultValuesById||i[5]!==l||i[6]!==d||i[7]!==c||i[8]!==r.data?(n=(0,W.jsx)(eq.Z,{outputRef:l,issueFormRef:r.data,subject:d,sessionStorageKey:c,defaultValuesById:s.defaultValuesById}),i[4]=s.defaultValuesById,i[5]=l,i[6]=d,i[7]=c,i[8]=r.data,i[9]=n):n=i[9],n}try{e5.displayName||(e5.displayName="TREE_ERROR_KEY")}catch{}try{e7.displayName||(e7.displayName="IssueFormWrapper")}catch{}var e8=n(50467),e9=n(72994),te=n(94747),tt=n(96379),tn=n(16049),ti=n(73952);function ta(){let e,t,n=(0,z.c)(4),{messages:i}=(0,Q.Pk)();n[0]!==i?(e=(0,ti.B)(i),n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):ts(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function ts(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,tn.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function tr(e){return e.item.tag}function tl(e){return e.item.tag}function to(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var td=n(17855),tc=n(51213),tu=n(72303),tm=n(20382);let th={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function tf(){let e,t=(0,z.c)(8),n=(0,Z.b)(),i=(0,Q.Pk)(),{closeItems:a,openItem:s,openPreviewPane:r,versionedItems:l,updateItem:o}=(0,ev.xx)();return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==i||t[5]!==o||t[6]!==l?(e=async e=>{if(0===e.length)return;let t=e.find(tw)??e[0];(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,tu.W)(i)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(t_).length,savedIssuesCount:e.length});let d=[],c=[],u=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,a=t.number;o({type:"issue",id:tS(t),messageId:tc.Wp,name:t.title,owner:n,repo:i,number:a,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=X.W.draftIssuesWithDependencies?t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(tb):void 0,l=X.W.draftIssuesWithDependencies?t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(tv):void 0;c.push({tag:`${n}/${i}#${a}`,parentTag:s?tC(s):void 0,blockedByTags:r?.map(tx),isBlockingTags:l?.map(ty),title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(tN(t)),u.push(t.tag)}a(e.map(tg).flatMap(e=>l.get(e)??[])),s(tS(t)),r();let m=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=tN(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,tm.Bh)({data:c},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${u.join(", ")}`},...i.currentReferences],h=e.flatMap(tp);h.length&&m.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=th[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(h)}`});let f=d.length>1?`Saved the issues: ${d.join(", ")}`:`Saved the issue: ${d[0]}`;await n.sendChatMessage({thread:(0,tu.W)(i),content:f,references:m,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=o,t[6]=l,t[7]=e):e=t[7],e}function tp(e){return e.errors||[]}function tg(e){return`${e.draftType}:${e.tag}`}function ty(e){return tC(e)}function tx(e){return tC(e)}function tv(e){return null!=e}function tb(e){return null!=e}function t_(e){return e.assignees.some(tj)}function tj(e){return(0,td.v)(e)}function tw(e){return!e.parentTag}function tN(e){return`[${tC(e)}](${e.url})`}function tC(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`${t}/${n}#${i}`}function tS(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,e8._)(this,"type",void 0),(0,e8._)(this,"bannerTitle",void 0),(0,e8._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function tI(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(34),{issueNode:c,onComplete:u,onError:m,issueFormRef:h,issueTemplate:f}=e;d[0]!==h||d[1]!==c||d[2]!==f?(t={issueNode:c,issueFormRef:h,issueTemplate:f},d[0]=h,d[1]=c,d[2]=f,d[3]=t):t=d[3];let{mutate:p,isLoading:g,data:y,isComplete:x,isError:v,error:b}=function(e){var t;let n,i,a,s,r,l,o,d,c=(0,z.c)(15),{issueNode:u,issueFormRef:m,issueTemplate:h}=e;c[0]!==m||c[1]!==u||c[2]!==h?(l={issueNode:u,issueFormRef:m,issueTemplate:h},c[0]=m,c[1]=u,c[2]=h,c[3]=l):l=c[3];let f=function(e){let t,n,i,a=(0,z.c)(12),{issueNode:s,issueFormRef:r,issueTemplate:l}=e,o=(0,eQ.useRelayEnvironment)(),d=ta(),c=!s.parent&&0===s.children.length;return a[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],a[0]=s.item.tag,a[1]=t):t=a[1],a[2]!==o||a[3]!==c||a[4]!==r||a[5]!==s||a[6]!==l||a[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,eZ.Pq)(s,async n=>{let i=n.item;if("existing-issue"===i.type)return void e.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tl):void 0});let a=i.body;if(c&&l&&(0,eU.GQ)(l.data)&&r?.current&&(a=r.current.markdown()??i.body),a&&i.repository){let e=t.get(i.repository);if(!e){let[n,a]=i.repository.split("/");null!=n&&null!=a&&(e=await (0,eG.tZ)(o,n,a),t.set(i.repository,e))}a=await d(e,a)}e.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:a,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:l?.fileName,projects:(0,e9.t)(i.projects),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tr):void 0})});let n=await (0,tt.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},a[2]=o,a[3]=c,a[4]=r,a[5]=s,a[6]=l,a[7]=d,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={mutationKey:t,mutationFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,te.n)(i)}(l),p=(t=f.data?.jobStatusUrl,s=(0,z.c)(7),r=!!t,s[0]!==t?(n=["copilot-issues-bulk-create-status",t],i=async e=>{let n=await (0,tt.Sr)(t);if(!n.ok){let t=await n.json();throw e.client.setQueryData(e.queryKey,t),Error(t?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=t,s[1]=n,s[2]=i):(n=s[1],i=s[2]),s[3]!==r||s[4]!==n||s[5]!==i?(a={enabled:r,queryKey:n,queryFn:i,refetchInterval:to},s[3]=r,s[4]=n,s[5]=i,s[6]=a):a=s[6],(0,e2.I)(a)),g=f.error||p.error,y=f.isError||p.isError;c[4]!==f.isPending||c[5]!==p.data?.job.state||c[6]!==p.isLoading?(o=f.isPending||p.isLoading||["pending","queued","started"].includes(p.data?.job.state||""),c[4]=f.isPending,c[5]=p.data?.job.state,c[6]=p.isLoading,c[7]=o):o=c[7];let x=p.data?.job.state==="success";return c[8]!==f.mutate||c[9]!==p.data||c[10]!==g||c[11]!==y||c[12]!==o||c[13]!==x?(d={mutate:f.mutate,data:p.data,error:g,isError:y,isLoading:o,isComplete:x},c[8]=f.mutate,c[9]=p.data,c[10]=g,c[11]=y,c[12]=o,c[13]=x,c[14]=d):d=c[14],d}(t),_=tf();d[4]!==h||d[5]!==c||d[6]!==f||d[7]!==m?(n=()=>{let e;if(!c)return!1;let t=c.item;if("new-issue"!==t.type)return!0;let n=t.name||"",i=(0,eV.O_)(n);if(!i.isValid)return m?.(new ValidationError(i.errorMessage||"Issue title is invalid")),!1;let a=(0,eV.QK)(t.body||"");if(!a.isValid)return m?.(new ValidationError(a.errorMessage||"Issue body is invalid")),!1;if(f&&(0,eU.GQ)(f.data)&&h.current){let t=h.current.getInvalidInputs();if(t.length>0)return e=t[0],m?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=h,d[5]=c,d[6]=f,d[7]=m,d[8]=n):n=d[8];let j=n;d[9]!==x||d[10]!==g||d[11]!==c||d[12]!==p||d[13]!==j?(i=()=>{!g&&!x&&(c.parent||0!==c.children.length||j())&&p()},d[9]=x,d[10]=g,d[11]=c,d[12]=p,d[13]=j,d[14]=i):i=d[14];let w=i,N=tk;return d[15]!==b||d[16]!==v||d[17]!==m?(a=()=>{v&&b&&m?.(new CreateError(b.message))},s=[v,b,m],d[15]=b,d[16]=v,d[17]=m,d[18]=a,d[19]=s):(a=d[18],s=d[19]),(0,em.useEffect)(a,s),d[20]!==y||d[21]!==x||d[22]!==c||d[23]!==u||d[24]!==_?(r=()=>{if(!y||!x)return;let e=N(y,c);u(),_(e)},l=[y,x,c,u,_,N],d[20]=y,d[21]=x,d[22]=c,d[23]=u,d[24]=_,d[25]=r,d[26]=l):(r=d[25],l=d[26]),(0,em.useEffect)(r,l),d[27]!==y||d[28]!==b||d[29]!==w||d[30]!==x||d[31]!==v||d[32]!==g?(o={handleCreate:w,isLoading:g,isComplete:x,isError:v,error:b,data:y},d[27]=y,d[28]=b,d[29]=w,d[30]=x,d[31]=v,d[32]=g,d[33]=o):o=d[33],o}function tk(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,eZ.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[i,a]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:a,owner:{login:i}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function tL({issueNode:e,onComplete:t,onCancel:n}){let i=(0,em.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,em.useMemo)(()=>{let e=0;return(0,eZ.YR)(i,t=>{"new-issue"===t.item.type&&e++}),e},[i]),{handleCreate:s,isLoading:r,isComplete:l,isError:o,error:d,data:c}=tI({issueNode:i,onComplete:t}),{loading:u,result:m}=function(e){let t,n,i,a,s=(0,z.c)(8),[r,l]=(0,em.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[o,d]=(0,em.useState)(t),c=(0,eQ.useRelayEnvironment)(),u=(0,em.useRef)(null);return s[1]!==c||s[2]!==e?(n=()=>{!async function(){l(!0),d(await e6(c,u,e)),l(!1)}()},i=[c,e],s[1]=c,s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,em.useEffect)(n,i),s[5]!==r||s[6]!==o?(a={loading:r,result:o},s[5]=r,s[6]=o,s[7]=a):a=s[7],a}(i),h=(0,em.useMemo)(()=>m&&Object.values(m).some(e=>e.errorMessages.length>0),[m]),f=(0,em.useCallback)(()=>{r||l||n()},[r,l,n]),p=(0,em.useMemo)(()=>{let e=new Set;return((0,eZ.YR)(i,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===i.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===a?"Create 1 issue":`Create ${a} issues`}:e.size>1&&"new-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===a?"Create 1 issue":`Create ${a} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===a?"Create 1 issue":`Create ${a} issues`}},[i,a]),{openItem:g,openPreviewPane:y}=(0,ev.xx)(),x=(0,em.useCallback)(e=>{r||l||(g(e.item.id,!0),y(),n())},[l,r,n,g,y]),v=(0,em.useMemo)(()=>m[e5]?m[e5]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[m]);return(0,W.jsx)(eO.l,{title:p.title,onClose:f,renderFooter:()=>u?null:(0,W.jsxs)(eO.l.Footer,{className:"BulkCreateDialog-module__dialogFooter--aWAd9",children:[(0,W.jsx)("div",{className:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",children:o&&(0,W.jsx)(eM.v,{variant:"critical",children:d?.message})}),(0,W.jsxs)("div",{className:"BulkCreateDialog-module__dialogFooterActions--BvuR4",children:[(0,W.jsx)(eF.Q,{variant:"default",onClick:f,inactive:r||l,children:"Cancel"}),(0,W.jsx)(eF.Q,{variant:"primary",onClick:s,loading:r||l,disabled:h||o,children:p.button})]})]}),children:u?(0,W.jsx)("div",{className:"BulkCreateDialog-module__loadingIndicator--sRZcS",role:"status","aria-label":"Validating issues",children:(0,W.jsx)(eP.A,{})}):h?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(eS.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:v,className:"mb-3"}),(0,W.jsx)(tT,{issueNode:i,onNodeClick:x,statusSelector:e=>{let t=m[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,W.jsx)(es.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,W.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{children:p.description}),(0,W.jsx)(tT,{issueNode:i,onNodeClick:x,statusSelector:e=>({trailingVisual:c?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,W.jsx)(es.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function tT({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i}=(0,ev.xx)(),a=(0,em.useMemo)(()=>{let t=0;return(0,eZ.YR)(e,e=>{e.parent&&t++}),t},[e]),s=e=>{if(X.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}}))},r=e=>{let a=(0,eE.LU)(e.item.id,i),l=n?.(e);return(0,W.jsx)(eB.K.Item,{title:e.item.name,leadingVisual:(0,W.jsx)(e$.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=a?(0,W.jsx)(eT.g,{version:a}):void 0,(0,W.jsx)(tE,{node:e})]}),trailingVisual:l?.trailingVisual,description:l?.description,onClick:()=>t(e),blockedBy:s(e),children:e.children.map(r)},e.item.tag)},l=(0,eE.LU)(e.item.id,i),o=n?.(e);return(0,W.jsxs)(eB.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:a,hasTrailingVisuals:!0,children:[(0,W.jsx)(eB.K.RootItem,{title:e.item.name,leadingVisual:(0,W.jsx)(e$.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=l?(0,W.jsx)(eT.g,{version:l}):void 0,(0,W.jsx)(tE,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:s(e)}),e.children.map(r)]})}function tE(e){let t,n=(0,z.c)(2),{node:i}=e;if(i.item.repository&&i.item.repository!==i.parent?.item.repository)return n[0]!==i.item.repository?(t=(0,W.jsx)("span",{className:"fgColor-muted",children:i.item.repository}),n[0]=i.item.repository,n[1]=t):t=n[1],t}try{tL.displayName||(tL.displayName="BulkCreateDialog")}catch{}try{tT.displayName||(tT.displayName="IssueTree")}catch{}try{tE.displayName||(tE.displayName="IssueLocation")}catch{}function tD(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l,disabled:o,onSuccess:d}=e,c=void 0!==o&&o,[u,m]=(0,em.useState)(!1),h=l;for(;h?.parent;)h=h.parent;let f=h,p=new Set;(0,eZ.YR)(f,e=>p.add(e.item.type));e:{if(1===p.size&&p.has("existing-issue")){t="Review and update";break e}t="Review and create"}let g=t;return p.size>1&&"existing-issue"===l.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),m(!0)},r[0]=n):n=r[0],r[1]!==g||r[2]!==c?(i=(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary",disabled:c,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:g}),r[1]=g,r[2]=c,r[3]=i):i=r[3],r[4]!==d||r[5]!==f||r[6]!==u?(a=u&&(0,W.jsx)(tL,{issueNode:f,onComplete:()=>{m(!1),d()},onCancel:()=>{m(!1)}}),r[4]=d,r[5]=f,r[6]=u,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,W.jsxs)(W.Fragment,{children:[i,a]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s)}try{tD.displayName||(tD.displayName="BulkCreateButton")}catch{}function tR(e){let t,n,i,a,s,r,l=(0,z.c)(29),{issueTemplate:o,issueNode:d,issueFormRef:c,noRepoAccess:u,onClose:m,onError:h,onClearError:f}=e,p=void 0!==u&&u,[g,y]=em.useState(!1),x=em.useRef(null),[v,b]=em.useState(!1),{repository:_}=(0,eR.u)(),j=_&&!o&&!_.isBlankIssuesEnabled,{clearSessionData:w}=(0,eR.u)();l[0]!==w||l[1]!==c?(t=()=>{w(),c.current?.clearSessionStorage()},l[0]=w,l[1]=c,l[2]=t):t=l[2];let N=t;l[3]!==N||l[4]!==m?(n=()=>{N(),m?.(),b(!1)},l[3]=N,l[4]=m,l[5]=n):n=l[5];let C=n;l[6]!==h?(i=e=>{h?.(e),b(!1)},l[6]=h,l[7]=i):i=l[7];let S=i;l[8]!==C||l[9]!==S||l[10]!==c||l[11]!==d||l[12]!==o?(a={issueNode:d,onComplete:C,onError:S,issueFormRef:c,issueTemplate:o},l[8]=C,l[9]=S,l[10]=c,l[11]=d,l[12]=o,l[13]=a):a=l[13];let{handleCreate:I}=tI(a);if(d?.parent||d?.children.length){let e;return l[14]!==C||l[15]!==d||l[16]!==p?(e=(0,W.jsx)(tD,{issueNode:d,disabled:p,onSuccess:C}),l[14]=C,l[15]=d,l[16]=p,l[17]=e):e=l[17],e}if(!_||!_.hasIssuesEnabled)return null;if(j){let e,t,n;return l[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:x,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),y(!0)},children:"Create"}),l[18]=e):e=l[18],l[19]!==g?(t=g&&(0,W.jsx)(eO.l,{title:"Select a template",onClose:()=>y(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>y(!1)}],returnFocusRef:x,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),l[19]=g,l[20]=t):t=l[20],l[21]!==t?(n=(0,W.jsxs)(W.Fragment,{children:[e,t]}),l[21]=t,l[22]=n):n=l[22],n}return l[23]!==I||l[24]!==f?(s=e=>{e.preventDefault(),f?.(),b(!0),I()},l[23]=I,l[24]=f,l[25]=s):s=l[25],l[26]!==v||l[27]!==s?(r=(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(eA.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-button",ref:x,inactive:v,showKeybindingHint:!0,onClick:s,children:"Create"})}),l[26]=v,l[27]=s,l[28]=r):r=l[28],r}try{tR.displayName||(tR.displayName="CreateIssueButton")}catch{}var tA=n(75953),tO=n(73189),tP=n(38447),tF=n(15106),tM=n(66457),t$=n(58321),tB=n(921),tV=n(85391),tU=n(97764),tq=n(46036),tG=n(43063),tH=n(57478);function tK(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(32),{listItem:m,actions:h}=e,{openItem:f,versionedItems:p}=(0,ev.xx)(),{item:g}=m;u[0]!==g.id||u[1]!==p?(t=(0,eE.LU)(g.id,p),u[0]=g.id,u[1]=p,u[2]=t):t=u[2];let y=t,x=g.tag;if(u[3]!==g.id||u[4]!==f?(n=()=>f(g.id,!0),u[3]=g.id,u[4]=f,u[5]=n):n=u[5],u[6]!==g.tag||u[7]!==y?(i=null!=y?[(0,W.jsx)(eT.g,{version:y},`${g.tag}#${y}`)]:void 0,u[6]=g.tag,u[7]=y,u[8]=i):i=u[8],u[9]!==g.name||u[10]!==n||u[11]!==i?(a=(0,W.jsx)(tU.T,{value:g.name,onClick:n,trailingBadges:i}),u[9]=g.name,u[10]=n,u[11]=i,u[12]=a):a=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(s=[],u[13]=s):s=u[13],u[14]!==h||u[15]!==g){let e;u[17]!==g?(e=e=>({key:e.key,render:()=>(0,W.jsxs)(ed.l.Item,{onSelect:()=>e.onSelect(g),children:[(0,W.jsx)(ed.l.LeadingVisual,{children:e.icon}),e.label]},`${g.tag}-${e.key}`)}),u[17]=g,u[18]=e):e=u[18],r=h.map(e),u[14]=h,u[15]=g,u[16]=r}else r=u[16];return u[19]!==r?(l=(0,W.jsx)(t$.o,{actions:s,staticMenuActions:r}),u[19]=r,u[20]=l):l=u[20],u[21]!==h||u[22]!==m.children?(o=m.children?.length?m.children?.map(e=>(0,W.jsx)(tK,{listItem:e,actions:h},e.item.tag)):void 0,u[21]=h,u[22]=m.children,u[23]=o):o=u[23],u[24]!==g?(d=(0,W.jsx)(tB.Q,{children:(0,W.jsx)(tV.D,{children:(0,W.jsx)(e$.n,{...g})})}),u[24]=g,u[25]=d):d=u[25],u[26]!==g.tag||u[27]!==d||u[28]!==a||u[29]!==l||u[30]!==o?(c=(0,W.jsx)(tM.r,{title:a,secondaryActions:l,subItems:o,defaultExpanded:!0,children:d},x),u[26]=g.tag,u[27]=d,u[28]=a,u[29]=l,u[30]=o,u[31]=c):c=u[31],c}function tW(e){let t,n,i,a,s,r=(0,z.c)(15),{title:l,items:o,totalCount:d,actions:c}=e;if(0===o.length)return null;if(r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eu.$)("RelationshipList-module__container--djndN","mt-2 pb-1 border rounded-2"),r[0]=t):t=r[0],r[1]!==d?(n=(0,W.jsx)(tH.A,{children:d}),r[1]=d,r[2]=n):n=r[2],r[3]!==n||r[4]!==l?(i=(0,W.jsx)(tq.s,{title:(0,W.jsx)(tG.c,{title:l,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),r[3]=n,r[4]=l,r[5]=i):i=r[5],r[6]!==c||r[7]!==o){let e;r[9]!==c?(e=e=>(0,W.jsx)(tK,{listItem:e,actions:c},e.item.tag),r[9]=c,r[10]=e):e=r[10],a=o.map(e),r[6]=c,r[7]=o,r[8]=a}else a=r[8];return r[11]!==i||r[12]!==a||r[13]!==l?(s=(0,W.jsx)("div",{className:t,children:(0,W.jsx)(tF.v,{title:l,header:i,children:a})}),r[11]=i,r[12]=a,r[13]=l,r[14]=s):s=r[14],s}try{tK.displayName||(tK.displayName="RelationshipListItemComponent")}catch{}try{tW.displayName||(tW.displayName="RelationshipList")}catch{}function tz(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t)=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,tu.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};a(r);let l={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};a(l);let o=[r,l].map(tQ);await n.sendChatMessage({thread:(0,tu.W)(i),content:"Remove the blocking dependency from the issue",references:[s,...o],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}function tQ(e){return"existing-issue"===e.type?(0,eE.yA)(e):(0,eE.PO)(e)}function tZ(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=tz();e:{if("existing-issue"===l.item.type){t="Newly blocked by";break e}t="Blocked by"}let d=t;return X.W.draftIssuesWithDependencies?(r[0]!==l.blockedBy?(n=l.blockedBy.map(tJ),r[0]=l.blockedBy,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(es.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(l.item,e)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.blockedBy.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(tW,{title:d,items:n,totalCount:l.blockedBy.length,actions:a}),r[6]=l.blockedBy.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s):null}function tJ(e){return{item:e.item}}try{tZ.displayName||(tZ.displayName="BlockedByList")}catch{}function tY(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=tz();e:{if("existing-issue"===l.item.type){t="Newly blocking";break e}t="Is blocking"}let d=t;return X.W.draftIssuesWithDependencies?(r[0]!==l.isBlocking?(n=l.isBlocking.map(tX),r[0]=l.isBlocking,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(es.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(e,l.item)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.isBlocking.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(tW,{title:d,items:n,totalCount:l.isBlocking.length,actions:a}),r[6]=l.isBlocking.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s):null}function tX(e){return{item:e.item}}try{tY.displayName||(tY.displayName="BlockingList")}catch{}function t0({issueNode:e}){let t=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async e=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,tu.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};a(s);let r="existing-issue"===s.type?(0,eE.yA)(s):(0,eE.PO)(s);await n.sendChatMessage({thread:(0,tu.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),n=(0,em.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),i=(0,em.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,eZ.YR)(e,()=>t++),t},[e]);return(0,W.jsx)(tW,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:i,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,W.jsx)(es.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{t0.displayName||(t0.displayName="SubissuesList")}catch{}function t1(e){let t,n=(0,z.c)(2),{issueNode:i}=e;return n[0]!==i?(t=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(t0,{issueNode:i}),(0,W.jsx)(tZ,{issueNode:i}),(0,W.jsx)(tY,{issueNode:i})]}),n[0]=i,n[1]=t):t=n[1],t}try{t1.displayName||(t1.displayName="RelationshipsSection")}catch{}var t2=n(33987),t3=n(46996),t4=n(69599),t5=n(48494),t6=n(66040),t7=n(97665);function t8(e,t){let n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(45),{draftValue:f,formValue:p,setFormValue:g,onChange:y,resolverResult:x,hasPermission:v,isEqual:b,defaultValue:_}=t,{repository:j}=(0,eR.u)(),w=(0,em.useRef)(!0),N=(0,em.useRef)(void 0),C=(0,em.useRef)(e.id);h[0]!==e.id?(n=()=>{C.current!==e.id&&(w.current=!0,N.current=void 0,C.current=e.id)},h[0]=e.id,h[1]=n):n=h[1],h[2]!==e.id||h[3]!==p?(i=[e.id,p],h[2]=e.id,h[3]=p,h[4]=i):i=h[4],(0,em.useEffect)(n,i),j?.nameWithOwner;let S=e.repository&&j?.nameWithOwner===e.repository,{isLoading:I,data:k}=x,L=(null!=f||!e.isStreaming)&&!I;h[5]!==S||h[6]!==L?(a=()=>{S&&!L&&(w.current=!0)},s=[S,L],h[5]=S,h[6]=L,h[7]=a,h[8]=s):(a=h[7],s=h[8]),(0,em.useEffect)(a,s),h[9]!==b||h[10]!==y?(r=(e,t)=>{void 0!==N.current&&b(N.current,e)||(y(e,t),N.current=e)},h[9]=b,h[10]=y,h[11]=r):r=h[11];let T=r;h[12]!==_||h[13]!==S||h[14]!==v||h[15]!==L||h[16]!==T||h[17]!==j||h[18]!==k||h[19]!==g?(l=()=>{S&&L&&(v(j)?(g(k),T(k,!0)):null!=j&&(g(_),T(_,!0)))},o=[S,L,T,j,k,g,v,_],h[12]=_,h[13]=S,h[14]=v,h[15]=L,h[16]=T,h[17]=j,h[18]=k,h[19]=g,h[20]=l,h[21]=o):(l=h[20],o=h[21]),(0,em.useEffect)(l,o),h[22]!==_||h[23]!==p||h[24]!==S||h[25]!==v||h[26]!==b||h[27]!==L||h[28]!==j||h[29]!==k?(d=()=>{if(!w.current||void 0===N.current||!S||!L||!j)return;let e=v(j);e&&p===k?w.current=!1:!e&&b(p,_)&&(w.current=!1)},h[22]=_,h[23]=p,h[24]=S,h[25]=v,h[26]=b,h[27]=L,h[28]=j,h[29]=k,h[30]=d):d=h[30],h[31]!==_||h[32]!==e.id||h[33]!==p||h[34]!==S||h[35]!==v||h[36]!==b||h[37]!==L||h[38]!==j||h[39]!==k?(c=[e.id,S,L,k,j,p,v,_,b],h[31]=_,h[32]=e.id,h[33]=p,h[34]=S,h[35]=v,h[36]=b,h[37]=L,h[38]=j,h[39]=k,h[40]=c):c=h[40],(0,em.useEffect)(d,c),h[41]!==p||h[42]!==T?(m=()=>{w.current||T(p,!1)},u=[p,T],h[41]=p,h[42]=T,h[43]=u,h[44]=m):(u=h[43],m=h[44]),(0,em.useEffect)(m,u)}var t9=n(40104);function ne(e){let{openItem:t,updateItem:n}=(0,ev.xx)(),{selectedThreadID:i}=(0,Q.Pk)(),a=function(e){let{messages:t}=(0,Q.Pk)(),{tag:n,issueNumber:i}=e,a=i&&X.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),s=`edited-${i}-${a}`,[r,l]=(0,t9.Fo)(s,void 0);return(0,em.useCallback)((s,r=!1)=>{let o,d=!1;for(o in s)(0,t3.A)(s[o],e[o])||(d=!0,"name"!==o&&"body"!==o&&"defaultValuesById"!==o&&(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:o,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[o])}));if(!d)return;let c={...e,...s};!r&&(c.id=a,c.isUserEdited=!0,X.W.copilotPersistEditedDraftIssues&&l(c)),n(c),t(c.id)},[e,n,t,i,a,l])}function nt(e){return e?.viewerIssueCreationPermissions?.assignable}function nn(e){return(0,t2.i)(e)}let ni={fragment:{argumentDefinitions:[N={defaultValue:100,kind:"LocalArgument",name:"count"},C={defaultValue:"",kind:"LocalArgument",name:"labelNames"},S={defaultValue:null,kind:"LocalArgument",name:"owner"},I={defaultValue:null,kind:"LocalArgument",name:"repo"}],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:k=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[T={alias:null,args:[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[L={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[S,I,C,N],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:k,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[T,L],storageKey:null}]},params:{id:"b83819e3267088a514ba0c0458c33d5e",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}};function na(e){return e}function ns(e){return!!e}function nr(e){return e?.viewerIssueCreationPermissions?.labelable}function nl(e){return e.name}ni.hash="d071175b5fcd3e6223eb6f9ac83d6996";var no=n(90921);function nd(e,t){var n,i;return n=e?.title,i=t?.title,n?.toLowerCase()===i?.toLowerCase()}function nc(e){return e?.viewerIssueCreationPermissions?.milestoneable}var nu=n(82909);function nm(e){return!1===e.hasReachedItemsLimit}function nh(e){return!1===e.closed}function nf(e,t){return e.set(t.id,t),e}function np(e){return!!e.id}function ng(e){return e.toLowerCase()}function ny(e){return!!e}function nx(e){return e.title}function nv(e){return e.id}function nb(e){return!!e.id}function n_(e){return e?.viewerIssueCreationPermissions?.triageable}function nj(e){return{id:e.id,title:e.title}}var nw=n(85346);function nN(e,t){return e?.toLowerCase()===t?.toLowerCase()}function nC(e,t){return nN(e?.name,t?.name)}function nS(e){return e?.viewerIssueCreationPermissions?.typeable}function nI(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(44),{draftIssue:g,issueNode:y,template:x,issueFormRef:v,loadingDraftIssueRepo:b,onChange:_,onClose:j,onBeforeCreate:w,onFieldChange:N}=e,{name:C,body:S,defaultValuesById:I}=g,k=void 0===S?"":S,{repository:L,clearSessionData:T}=(0,eR.u)(),[E,D]=(0,em.useState)(C),[R,A]=(0,em.useState)(k),O=(m=(0,z.c)(3),h=(0,Z.b)(),f=(0,Q.Pk)(),m[0]!==h||m[1]!==f?(u=async(e,t,n)=>{let i;if(e.parentMessageID&&(i=f.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!i||!i.content)return;(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,tu.W)(f)?.id,customMessage:t});let a={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:n,icon:es.XIcon};await h.sendChatMessage({thread:(0,tu.W)(f),content:i.content,references:[...i.references??[],a],topic:f.currentTopic,context:f.context,customInstructions:f.customInstructions,model:f.model,parentMessageId:e.id})},m[0]=h,m[1]=f,m[2]=u):u=m[2],u),P=(0,Q.Pk)();p[0]!==T||p[1]!==v?(t=()=>{T(),v.current?.clearSessionStorage()},p[0]=T,p[1]=v,p[2]=t):t=p[2];let F=t;p[3]!==F||p[4]!==j?(n=()=>{F(),j?.()},p[3]=F,p[4]=j,p[5]=n):n=p[5];let M=n;if(p[6]!==k||p[7]!==C?(i=()=>{D(C),A(k)},a=[k,C],p[6]=k,p[7]=C,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,em.useEffect)(i,a),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,assignees:o,setAssignees:d}=(0,eR.u)(),c=ne(e),u=e.assignees;r[0]!==c?(t=(e,t)=>c({assignees:e.map(nn)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.assignees?(n=e.assignees??[],r[2]=e.assignees,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,assignees:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s,r=(0,z.c)(17),{owner:l,repo:o,assignees:d}=e,c=(0,eQ.useRelayEnvironment)(),u=(0,t7.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,t2.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let m=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t4.G7)("item_picker_assignee_tsq_migration"),r[1]=n):n=r[1];let h=n;r[2]!==d||r[3]!==c||r[4]!==l||r[5]!==u||r[6]!==o?(i=h?["copilot-immersive-assignees",JSON.stringify(u),m,l,o,d]:["copilot-immersive-assignees",JSON.stringify(c),m,l,o,d],r[2]=d,r[3]=c,r[4]=l,r[5]=u,r[6]=o,r[7]=i):i=r[7];let f=i;r[8]!==d||r[9]!==c||r[10]!==l||r[11]!==u||r[12]!==o?(a=async()=>l&&o&&d?h?(await (0,t6.nH)(u,{owner:l,repo:o,query:"",loginNames:d,capabilities:m})).assignees:await (0,t5.fH)(c,{owner:l,repo:o,assignees:d,capabilities:m}):[],r[8]=d,r[9]=c,r[10]=l,r[11]=u,r[12]=o,r[13]=a):a=r[13];let p=a;return r[14]!==p||r[15]!==f?(s={queryKey:f,queryFn:p},r[14]=p,r[15]=f,r[16]=s):s=r[16],(0,e2.I)(s)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.assignees||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nt,isEqual:t3.A,defaultValue:a},r[9]=e.assignees,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],t8(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,labels:o,setLabels:d}=(0,eR.u)(),c=ne(e),u=e.labels;r[0]!==c?(t=(e,t)=>c({labels:e.map(nl)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.labels?(n=e.labels??[],r[2]=e.labels,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,labels:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,labels:o}=e,d=(0,eQ.useRelayEnvironment)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-labels",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==d||s[8]!==o||s[9]!==r||s[10]!==l?(i=async()=>{if(!r||!l||!o)return[];let e=await (0,eK.SD)({environment:d,query:ni,variables:{owner:r,repo:l,labelNames:o.join(","),count:o.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(ns).map(na)},s[7]=d,s[8]=o,s[9]=r,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e2.I)(a)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.labels||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nr,isEqual:t3.A,defaultValue:a},r[9]=e.labels,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],t8(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(16),{repository:l,issueType:o,setIssueType:d}=(0,eR.u)(),c=ne(e),u=l?.owner.login;r[0]!==u?(t={owner:u},r[0]=u,r[1]=t):t=r[1];let m=function(e){let t,n,i,a,s=(0,z.c)(11),{owner:r}=e,l=(0,t7.jE)();s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==t?(n=["copilot-immersive-issue-types",t,r],s[2]=r,s[3]=t,s[4]=n):n=s[4];let o=n;s[5]!==r||s[6]!==l?(i=async()=>r?(await (0,nw.R)(l,{owner:r,query:"",count:25})).issueTypes:[],s[5]=r,s[6]=l,s[7]=i):i=s[7];let d=i;return s[8]!==d||s[9]!==o?(a={queryKey:o,queryFn:d},s[8]=d,s[9]=o,s[10]=a):a=s[10],(0,e2.I)(a)}(t);e:{let t;if(m.isLoading||!e.issueType){n=null;break e}r[2]!==e.issueType||r[3]!==m.data?(t=m.data?.find(t=>nN(t.name,e.issueType))||null,r[2]=e.issueType,r[3]=m.data,r[4]=t):t=r[4],n=t}let h=n;r[5]!==c?(i=(e,t)=>c({issueType:e?.name},t),r[5]=c,r[6]=i):i=r[6],r[7]!==h||r[8]!==m.isLoading?(a={isLoading:m.isLoading,data:h},r[7]=h,r[8]=m.isLoading,r[9]=a):a=r[9],r[10]!==e.issueType||r[11]!==o||r[12]!==d||r[13]!==i||r[14]!==a?(s={draftValue:e.issueType,formValue:o,setFormValue:d,onChange:i,resolverResult:a,hasPermission:nS,isEqual:nC,defaultValue:null},r[10]=e.issueType,r[11]=o,r[12]=d,r[13]=i,r[14]=a,r[15]=s):s=r[15],t8(e,s)}(g),!function(e){let t,n,i,a,s=(0,z.c)(15),{repository:r,milestone:l,setMilestone:o}=(0,eR.u)(),d=ne(e),c=r?.owner.login,u=r?.name;s[0]!==e.milestone||s[1]!==c||s[2]!==u?(t={owner:c,repo:u,milestone:e.milestone},s[0]=e.milestone,s[1]=c,s[2]=u,s[3]=t):t=s[3];let m=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,milestone:o}=e,d=(0,t7.jE)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-milestones",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==o||s[8]!==r||s[9]!==d||s[10]!==l?(i=async()=>r&&l&&o?(await (0,no.U)(d,{owner:r,repo:l,query:o,count:1})).milestones:[],s[7]=o,s[8]=r,s[9]=d,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e2.I)(a)}(t),h=m.data?.[0]??null;s[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),s[4]=d,s[5]=n):n=s[5],s[6]!==h||s[7]!==m.isLoading?(i={isLoading:m.isLoading,data:h},s[6]=h,s[7]=m.isLoading,s[8]=i):i=s[8],s[9]!==e.milestone||s[10]!==l||s[11]!==o||s[12]!==n||s[13]!==i?(a={draftValue:e.milestone,formValue:l,setFormValue:o,onChange:n,resolverResult:i,hasPermission:nc,isEqual:nd,defaultValue:null},s[9]=e.milestone,s[10]=l,s[11]=o,s[12]=n,s[13]=i,s[14]=a):a=s[14],t8(e,a)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,projects:o,setProjects:d}=(0,eR.u)(),c=ne(e),u=e.projects;r[0]!==c?(t=(e,t)=>c({projects:e.map(nj)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.projects?(n=e.projects??[],r[2]=e.projects,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,projects:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,projects:o}=e,d=(0,eQ.useRelayEnvironment)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==l||s[5]!==t?(n=["copilot-immersive-projects",t,r,l,o],s[2]=r,s[3]=o,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==d||s[8]!==r||s[9]!==o||s[10]!==l?(i=async()=>{if(!r||!l||!o||!o.length)return[];let e=new Set(o.filter(nb).map(nv)),t=o.map(nx).filter(ny),n=new Set(t.map(ng)),i=o.length>0&&o.every(np),a=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:s,recentRepositoryProjects:c,ownerProjects:u,recentOwnerProjects:m}=await (0,nu.vj)(d,{owner:r,repo:l,query:a}),h=[...[...s,...c,...u,...m].reduce(nf,new Map).values()].filter(nh).filter(nm).filter(t=>i?t.id&&e.has(t.id):!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase()));if(i)return h;{let t=new Set;return h.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let n=e.title.toLowerCase();return!t.has(n)&&(t.add(n),!0)})}},s[7]=d,s[8]=r,s[9]=o,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e2.I)(a)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.projects||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:n_,isEqual:t3.A,defaultValue:a},r[9]=e.projects,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],t8(e,s)}(g),null==L){let e;if(void 0===g.repository&&g.isStreaming||b){let e;return p[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),p[10]=e):e=p[10],e}return p[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:es.IssueDraftIcon}),p[11]=e):e=p[11],e}let $=P.messages.at(-1);if($&&(0,tP.E)($,["switch-issue-template","switch-issue-repo"])){let e;return p[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),p[12]=e):e=p[12],e}let B=P.messages;if(p[13]!==I||p[14]!==g.messageId||p[15]!==O||p[16]!==P.isWaitingOnCopilot||p[17]!==P.messages||p[18]!==x){s=Symbol.for("react.early_return_sentinel");e:{let e=B.find(e=>e.id===g.messageId),t=e?.parentMessageIndex!==void 0?P.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=x&&(0,eU.GQ)(x.data),i=0===Object.keys(I||{}).length,a=!P.isWaitingOnCopilot,r=e.messageIndex===P.messages.length-1,l="assistant"===e.role,o=(0,tP.E)(t,["automatic-retry"]);if(n&&i)if(a)if(r&&l&&!o){let t;O(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),p[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),p[21]=t):t=p[21],s=t;break e}else{let e;p[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:es.IssueDraftIcon}),p[22]=e):e=p[22],s=e;break e}else{let e;p[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),p[20]=e):e=p[20],s=e;break e}}}p[13]=I,p[14]=g.messageId,p[15]=O,p[16]=P.isWaitingOnCopilot,p[17]=P.messages,p[18]=x,p[19]=s}else s=p[19];return s!==Symbol.for("react.early_return_sentinel")?s:(p[23]!==_?(r=e=>{D(e),_?.({name:e})},l=e=>{A(e),_?.({body:e})},p[23]=_,p[24]=r,p[25]=l):(r=p[24],l=p[25]),p[26]!==I||p[27]!==R||p[28]!==g.messageId||p[29]!==v||p[30]!==w||p[31]!==M||p[32]!==N||p[33]!==L||p[34]!==r||p[35]!==l||p[36]!==x||p[37]!==E?(o=(0,W.jsx)(tA.e,{repository:L,title:E,body:R,setTitle:r,setBody:l,clearOnCreate:M,issueFormRef:v,onCreateSuccess:tO.l,onCreateError:tO.l,onCancel:M,onBeforeCreate:w,defaultValuesById:I,selectedTemplate:x,onFieldChange:N,clientMutationId:g.messageId}),p[26]=I,p[27]=R,p[28]=g.messageId,p[29]=v,p[30]=w,p[31]=M,p[32]=N,p[33]=L,p[34]=r,p[35]=l,p[36]=x,p[37]=E,p[38]=o):o=p[38],p[39]!==y?(d=y&&(0,W.jsx)(t1,{issueNode:y}),p[39]=y,p[40]=d):d=p[40],p[41]!==o||p[42]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),p[41]=o,p[42]=d,p[43]=c):c=p[43],c)}try{nI.displayName||(nI.displayName="CreateIssueForm")}catch{}let nk="CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",nL="CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",nT="CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",nE="CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",nD="CreateIssuePreview-module__form--X4Vwp";var nR=n(12683);function nA({node:e,onItemSelected:t}){let n=(0,em.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,W.jsxs)(eo.W,{children:[(0,W.jsxs)(eo.W.Button,{variant:"invisible",className:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",children:[(0,W.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,W.jsx)(eo.W.Overlay,{width:"large",children:(0,W.jsx)(nR.lF,{children:n.map((n,i)=>(0,W.jsxs)(nR.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,W.jsx)(nR.lF.LeadingVisual,{children:(0,W.jsx)(e$.n,{...n.item})}),(0,W.jsx)("div",{className:"CreateIssuePreview-module__truncateText--Cyrbf",children:n.item.name})]},n.item.tag))})})]})}try{nA.displayName||(nA.displayName="ParentSelector")}catch{}var nO=n(3398),nP=n(33544);let nF="RepositoryPicker-module__container--codNO",nM="RepositoryPicker-module__label--WplGo";function n$(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(21),{draftIssue:c,resolvedDraftIssueRepo:u,loadingDraftIssueRepo:m,topRepos:h}=e,[f,p]=(0,em.useState)(void 0),{repository:g}=(0,eR.u)(),y=function(e){let t,n=(0,z.c)(5),i=(0,Z.b)(),a=(0,Q.Pk)(),{updateItem:s}=(0,ev.xx)();return n[0]!==e||n[1]!==i||n[2]!==a||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,l=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),l.push((0,eE.PO)(t))}await i.sendChatMessage({thread:(0,tu.W)(a),content:`Use the ${r} repository`,references:[...l,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=e,n[1]=i,n[2]=a,n[3]=s,n[4]=t):t=n[4],t}(c);d[0]!==y?(t=e=>{null!=e&&y(e.name,e.owner.login)},d[0]=y,d[1]=t):t=d[1];let x=t;!function(e,t,n,i){let a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(32),{repository:g,setRepository:y}=(0,eR.u)(),x=(0,em.useRef)(!0),v=(0,em.useRef)(null),b=(0,em.useRef)(void 0),_=ne(e);p[0]!==e.id?(a=()=>{v.current!==e.id&&(x.current=!0,b.current=void 0,v.current=e.id)},p[0]=e.id,p[1]=a):a=p[1],p[2]!==e.id||p[3]!==g?(s=[e.id,g],p[2]=e.id,p[3]=g,p[4]=s):s=p[4],(0,em.useEffect)(a,s);let j=(null!=e.repository||!e.isStreaming)&&!n;p[5]!==j?(r=()=>{j||(x.current=!0)},l=[j],p[5]=j,p[6]=r,p[7]=l):(r=p[6],l=p[7]),(0,em.useEffect)(r,l),p[8]!==_?(o=(e,t)=>{var n,i;(void 0===b.current||(n=b.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(_({repository:e?.nameWithOwner},t),b.current=e??null)},p[8]=_,p[9]=o):o=p[9];let w=o;p[10]!==j||p[11]!==w||p[12]!==t||p[13]!==y||p[14]!==i?(d=()=>{j&&(null!=t?(y(t),w(t,!0)):i.length>0?(y(i[0]),w(i[0],!0)):(y(void 0),w(void 0,!0)))},c=[j,w,t,y,i],p[10]=j,p[11]=w,p[12]=t,p[13]=y,p[14]=i,p[15]=d,p[16]=c):(d=p[15],c=p[16]),(0,em.useEffect)(d,c),p[17]!==g||p[18]!==j||p[19]!==t||p[20]!==i?(u=()=>{x.current&&void 0!==b.current&&j&&(null!=t&&t===g||null==t&&i.length>0&&g===i[0]?x.current=!1:null==t&&i.length<=0&&void 0===g&&(x.current=!1))},p[17]=g,p[18]=j,p[19]=t,p[20]=i,p[21]=u):u=p[21],p[22]!==e.id||p[23]!==g||p[24]!==j||p[25]!==t||p[26]!==i?(m=[e.id,j,t,i,g],p[22]=e.id,p[23]=g,p[24]=j,p[25]=t,p[26]=i,p[27]=m):m=p[27],(0,em.useEffect)(u,m),p[28]!==g||p[29]!==w?(f=()=>{x.current||w(g,!1)},h=[g,w],p[28]=g,p[29]=w,p[30]=h,p[31]=f):(h=p[30],f=p[31]),(0,em.useEffect)(f,h)}(c,u,m,h),d[2]!==g||d[3]!==m||d[4]!==h?(n=()=>{m||null==g||null==h||h.find(e=>e.id===g.id)||p(g.id)},i=[g,m,h],d[2]=g,d[3]=m,d[4]=h,d[5]=n,d[6]=i):(n=d[5],i=d[6]),(0,em.useEffect)(n,i);let{ssoOrganizations:v}=(0,Q.Pk)();d[7]!==v?(a=v?.map(nV)??[],d[7]=v,d[8]=a):a=d[8];let b=a,_=g??h?.[0],j=c.isStreaming||m;return d[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,W.jsx)(nO.A,{className:(0,eu.$)(nM,"sr-only"),required:!0,children:"Repository"}),d[9]=s):s=d[9],d[10]!==j?(r={hasIssuesEnabled:!0,readonly:j},d[10]=j,d[11]=r):r=d[11],d[12]!==b?(l=(0,t4.G7)("global_sso_banner")?void 0:(0,W.jsx)(nP.x,{className:"RepositoryPicker-module__ssoBanner--TbTWl",forceWrap:!0,protectedOrgs:b,maxVisibleOrgNames:0,redirectURI:nB}),d[12]=b,d[13]=l):l=d[13],d[14]!==f||d[15]!==x||d[16]!==_||d[17]!==r||d[18]!==l||d[19]!==h?(o=(0,W.jsxs)("div",{className:nF,children:[s,(0,W.jsx)(eG.f0,{initialRepository:_,onSelect:x,options:r,topRepositories:h,enforceAtleastOneSelected:!0,subtitle:l},f)]}),d[14]=f,d[15]=x,d[16]=_,d[17]=r,d[18]=l,d[19]=h,d[20]=o):o=d[20],o}function nB(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function nV(e){return e.login}try{n$.displayName||(n$.displayName="RepositoryPicker")}catch{}let nU=(E=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],D=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],P=[R={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],F=[R,A,O,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}],{fragment:{argumentDefinitions:E,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:D,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[R,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:P,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[R,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:F,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:E,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:D,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:P,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:F,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}});nU.hash="582a468668cd62a5a95ad0f91f7ea5e5";let nq={kind:"InlineDataFragment",name:"TemplatePickerForm"};nq.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let nG={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};nG.hash="fa6038bb9389af7bff23ba3491dd0507";var nH=n(86391),nK=n(69487);function nW(e,t){return e.filename.localeCompare(t.filename)}function nz(e){return(0,nK.readInlineData)(nq,e)}function nQ(e){return(0,nK.readInlineData)(nG,e)}function nZ(e){let t,n,i,a,s=(0,z.c)(10),{draftIssue:r}=e,{repository:l}=(0,eR.u)(),o=l?.owner.login,d=l?.name;s[0]!==o||s[1]!==d?(t={owner:o,repo:d},s[0]=o,s[1]=d,s[2]=t):t=s[2];let{data:c}=function(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-templates",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>{if(!r||!l)return[];let e=await (0,nK.fetchQuery)(o,nU,{owner:r,repo:l}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nQ),...(e?.repository?.issueForms||[]).map(nz)].sort(nW)},s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}(t);if(null==c||0===c.length)return null;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("span",{children:"/"}),s[3]=n):n=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(nO.A,{className:(0,eu.$)(nM,"sr-only"),children:"Template"}),s[4]=i):i=s[4];let u=l?.nameWithOwner,m=l?.isBlankIssuesEnabled;return s[5]!==r||s[6]!==u||s[7]!==m||s[8]!==c?(a=(0,W.jsxs)(W.Fragment,{children:[n,(0,W.jsxs)("div",{className:nF,children:[i,(0,W.jsx)(nJ,{templates:c,draftIssue:r,repositoryNwo:u,isBlankIssuesEnabled:m})]})]}),s[5]=r,s[6]=u,s[7]=m,s[8]=c,s[9]=a):a=s[9],a}function nJ(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{templates:c,draftIssue:u,isBlankIssuesEnabled:m,repositoryNwo:h}=e,[f,p]=(0,em.useState)("");e:{let e;if(!f){t=c;break e}d[0]!==f||d[1]!==c?(e=c?.filter(e=>e.name?.toLowerCase().includes(f.toLowerCase())),d[0]=f,d[1]=c,d[2]=e):e=d[2],t=e}let g=t,[y,x]=(0,em.useState)(void 0);d[3]!==u.template||d[4]!==c?(n=()=>{if(!u.template)return void x(void 0);let e=u.template.split("/").findLast(Boolean);x(c?.find(t=>t.filename===e||t.name===e))},i=[c,u.template],d[3]=u.template,d[4]=c,d[5]=n,d[6]=i):(n=d[5],i=d[6]),(0,em.useEffect)(n,i);let v=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,ev.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};a(t),r.push((0,eE.PO)(t))}await n.sendChatMessage({thread:(0,tu.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),b=(0,em.useRef)(null),_="new-issue"===u.type&&null!=m&&!m;return d[7]!==g?(a=g??[],d[7]=g,d[8]=a):a=d[8],d[9]!==y?(s=y?[y]:[],d[9]=y,d[10]=s):s=d[10],d[11]!==y||d[12]!==_?(r=e=>(0,W.jsxs)(eF.Q,{trailingVisual:es.TriangleDownIcon,...e,ref:b,children:[y?(0,W.jsx)("span",{children:y.name}):"Select a template",_&&(0,W.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),d[11]=y,d[12]=_,d[13]=r):r=d[13],d[14]!==u||d[15]!==v||d[16]!==h?(l=async e=>{let[t]=e;x(t),await v(u,t,h)},d[14]=u,d[15]=v,d[16]=h,d[17]=l):l=d[17],d[18]!==a||d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(nH.O,{items:a,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:p,title:"Select a template",renderAnchor:r,getItemKey:nX,convertToItemProps:nY,onSelectionChange:l,selectPanelRef:b,height:"large",width:"medium"}),d[18]=a,d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}function nY(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function nX(e){return e.filename}try{nZ.displayName||(nZ.displayName="TemplatePicker")}catch{}try{nJ.displayName||(nJ.displayName="TemplatePickerInternal")}catch{}var n0=n(10286);function n1(e,t){return(0,em.useCallback)((n,i,a)=>{let s=n||`${n0.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function n2(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eQ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>r&&l?await (0,eG.tZ)(o,r,l):null,s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e2.I)(a)}function n3(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R,A,O,P,F,M,$,B,V,U=(0,z.c)(84),{isPreviewOpening:q,issue:G,onClose:H}=e,{openItem:K}=(0,ev.xx)(),Z=(0,eZ.u0)();U[0]!==G.tag||U[1]!==Z?(r=Z.get(G.tag),U[0]=G.tag,U[1]=Z,U[2]=r):r=U[2];let J=r,[Y,X]=(0,em.useState)(q);U[3]!==Y?(l=()=>{if(Y){let e=setTimeout(()=>X(!1),ek.t);return()=>clearTimeout(e)}},o=[Y],U[3]=Y,U[4]=l,U[5]=o):(l=U[4],o=U[5]),(0,em.useEffect)(l,o);let[ee,et]=(0,em.useState)(null),en=(0,em.useRef)(null),{selectedThreadID:ei}=(0,Q.Pk)(),{isLoading:ea,data:er}=(B=(0,z.c)(9),V=(0,eQ.useRelayEnvironment)(),B[0]!==V?(P=JSON.stringify(V),B[0]=V,B[1]=P):P=B[1],B[2]!==P?(F=["copilot-immersive-top-repos",P],B[2]=P,B[3]=F):F=B[3],B[4]!==V?(M=async()=>await (0,eG.St)(V,{first:10,hasIssuesEnabled:!0}),B[4]=V,B[5]=M):M=B[5],B[6]!==F||B[7]!==M?($={queryKey:F,queryFn:M},B[6]=F,B[7]=M,B[8]=$):$=B[8],(0,e2.I)($));U[6]!==G.repository?(d=G.repository?.split("/")??[],U[6]=G.repository,U[7]=d):d=U[7];let[el,eo]=d;U[8]!==el||U[9]!==eo?(c={owner:el,repo:eo},U[8]=el,U[9]=eo,U[10]=c):c=U[10];let{isLoading:ed,data:ec}=n2(c),[eu,eh]=(0,em.useState)(ec);U[11]!==ec?(u=()=>{ec&&eh(ec)},m=[ec],U[11]=ec,U[12]=u,U[13]=m):(u=U[12],m=U[13]),(0,em.useEffect)(u,m);let ef=null!=eu&&(!eu.hasIssuesEnabled||null!=eu.viewerInteractionLimitReasonHTML&&eu.viewerInteractionLimitReasonHTML?.length>0);U[14]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{et(e)},U[14]=h):h=U[14];let ep=h;U[15]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{et(null)},U[15]=f):f=U[15];let eg=f;U[16]!==ee?(p=()=>{ee&&en?.current&&en.current.focus()},g=[ee],U[16]=ee,U[17]=p,U[18]=g):(p=U[17],g=U[18]),(0,em.useEffect)(p,g);let ey=ne(G),ex=n1(G,ey),eb=(0,em.useRef)(null),eT=(t=eb,(a=(0,z.c)(2))[0]!==t?(i=()=>!t.current||t.current.clientWidth<1024,a[0]=t,a[1]=i):i=a[1],s=i,(0,em.useSyncExternalStore)(n4,s)),eE=J?.parent!=null,eR=(0,em.useRef)(null),eA=ec?.id??"",eO=G.template||"";U[19]!==eA||U[20]!==eO?(y={repoId:eA,filename:eO},U[19]=eA,U[20]=eO,U[21]=y):y=U[21];let{isLoading:eP,data:eF}=e3(y),eM=ec??void 0;U[22]!==eM?(x={repository:eM},U[22]=eM,U[23]=x):x=U[23];let e$=x;if(Y||ea||eP){let e;return U[24]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),U[24]=e):e=U[24],e}let eB=`${G.id}@${ei}`;return U[25]!==eT||U[26]!==eB?(v=(0,e_.S)({storageKeyPrefix:eB,insidePortal:eT,disableCopilotAssignmentModal:!0}),U[25]=eT,U[26]=eB,U[27]=v):v=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,eN.G)("create-issue-preview"),U[28]=b):b=U[28],U[29]!==G?(_=(0,W.jsx)("div",{children:(0,W.jsx)(eD,{item:G})}),U[29]=G,U[30]=_):_=U[30],U[31]!==J||U[32]!==K||U[33]!==eE?(j=eE&&(0,W.jsx)("div",{children:(0,W.jsx)(nA,{node:J,onItemSelected:e=>K(e.item.id,!0)})}),U[31]=J,U[32]=K,U[33]=eE,U[34]=j):j=U[34],U[35]!==_||U[36]!==j?(w=(0,W.jsxs)("div",{className:nT,children:[_,j]}),U[35]=_,U[36]=j,U[37]=w):w=U[37],U[38]!==J||U[39]!==ef||U[40]!==H||U[41]!==eF?(N=(0,W.jsx)("div",{className:nE,children:(0,W.jsx)(tR,{issueTemplate:eF,issueNode:J,issueFormRef:eR,noRepoAccess:ef,onClose:H,onError:ep,onClearError:eg})}),U[38]=J,U[39]=ef,U[40]=H,U[41]=eF,U[42]=N):N=U[42],U[43]!==w||U[44]!==N?(C=(0,W.jsxs)("div",{className:nL,children:[w,N]}),U[43]=w,U[44]=N,U[45]=C):C=U[45],U[46]!==er?(S=er||[],U[46]=er,U[47]=S):S=U[47],U[48]!==G||U[49]!==ec||U[50]!==ed||U[51]!==S?(I=(0,W.jsx)(n$,{draftIssue:G,resolvedDraftIssueRepo:ec,loadingDraftIssueRepo:ed,topRepos:S}),U[48]=G,U[49]=ec,U[50]=ed,U[51]=S,U[52]=I):I=U[52],U[53]!==G?(k=(0,W.jsx)(nZ,{draftIssue:G}),U[53]=G,U[54]=k):k=U[54],U[55]!==I||U[56]!==k?(L=(0,W.jsxs)(eC.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[I,k]}),U[55]=I,U[56]=k,U[57]=L):L=U[57],U[58]!==ee?(T=ee&&(0,W.jsx)(eS.l,{ref:en,hideTitle:!0,title:ee.bannerTitle,description:(0,W.jsx)(eI.o,{children:ee.message}),variant:ee.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),U[58]=ee,U[59]=T):T=U[59],U[60]!==ec||U[61]!==ef?(E=ef&&((n=ec)&&!n.hasIssuesEnabled?(0,W.jsx)(eL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:es.IssueDraftIcon}):n&&n.viewerInteractionLimitReasonHTML?(0,W.jsx)(eL,{title:"You cannot create issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:es.IssueDraftIcon}):void 0),U[60]=ec,U[61]=ef,U[62]=E):E=U[62],U[63]!==J||U[64]!==G||U[65]!==ed||U[66]!==ef||U[67]!==ey||U[68]!==H||U[69]!==ex||U[70]!==eF?(D=!ef&&(0,W.jsx)(nI,{draftIssue:G,issueNode:J,template:eF??void 0,issueFormRef:eR,loadingDraftIssueRepo:ed,onChange:ey,onClose:H,onFieldChange:ex}),U[63]=J,U[64]=G,U[65]=ed,U[66]=ef,U[67]=ey,U[68]=H,U[69]=ex,U[70]=eF,U[71]=D):D=U[71],U[72]!==L||U[73]!==T||U[74]!==E||U[75]!==D?(R=(0,W.jsxs)("div",{className:nD,children:[L,T,E,D]}),U[72]=L,U[73]=T,U[74]=E,U[75]=D,U[76]=R):R=U[76],U[77]!==C||U[78]!==R?(A=(0,W.jsxs)("div",{className:nk,ref:eb,children:[C,R]}),U[77]=C,U[78]=R,U[79]=A):A=U[79],U[80]!==e$||U[81]!==v||U[82]!==A?(O=(0,W.jsx)(ej.S,{optionConfig:v,preselectedData:e$,...b,children:A}),U[80]=e$,U[81]=v,U[82]=A,U[83]=O):O=U[83],O}function n4(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{n3.displayName||(n3.displayName="CreateIssuePreview")}catch{}var n5=n(82547),n6=n(76158);function n7({isPreviewOpening:e,issue:t,onClose:n}){let[i,a]=(0,em.useState)(e),{openItem:s}=(0,ev.xx)(),r=(0,eZ.u0)().get(t.tag);(0,em.useEffect)(()=>{if(i){let e=setTimeout(()=>a(!1),ek.t);return()=>clearTimeout(e)}},[i]);let l=(0,em.useMemo)(()=>(0,W.jsx)(el.K,{icon:es.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),o=(0,t4.G7)("copilot_immersive_issues_readonly_viewer"),d=(0,t4.G7)("copilot_immersive_issues_show_relationships"),c=(0,em.useMemo)(()=>({isReadonly:o,hideTimeline:o,navigate:tO.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,additionalHeaderActions:l,showRepositoryPill:!0}),[n,l,o]),u=(0,em.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!u?(0,W.jsx)(ew.Q,{optionConfig:c}):(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",children:[(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",children:r.parent&&(0,W.jsx)(nA,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(tD,{issueNode:r,onSuccess:n})})]}),(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",children:[(0,W.jsx)(n6.e,{children:(0,W.jsx)(n5.cI,{itemIdentifier:u,optionConfig:c})}),d&&(0,W.jsx)("div",{className:"ExistingIssuePreview-module__relationshipsContainer--CHUGP",children:(0,W.jsx)(t1,{issueNode:r})})]})]})}try{n7.displayName||(n7.displayName="ExistingIssuePreview")}catch{}let n8={fragment:{argumentDefinitions:M=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:$=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:M,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:$},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}};n8.hash="470cf4272c31ec8565dec1240c55030a";let n9={fragment:{argumentDefinitions:B=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:V=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:B,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:V},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}};n9.hash="f03ef95aad392077538992e2c84a9752";var ie=n(61491),it=n(75908),ii=n(36285),ia=n(78137),is=n(37630),ir=n(52590),il=n(81688);async function io({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r,l,o=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],d=i.labels?.map(e=>e.name)||[],c=void 0!==i.labels&&!(0,t3.A)(o.sort(),d.sort()),u=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),m=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,h=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],f=i.projects?.map(e=>e.id)||[],p=void 0!==i.projects&&!(0,t3.A)(h.sort(),f.sort()),g=n.name!==t.title,y=void 0!==i.body&&i.body!==(t.body||""),x=[];if(c){let a=new Promise((a,s)=>{(0,ii.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"labels",promise:a})}let v=t.assignees?.nodes?.filter(e=>null!=e),b=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,td.v)(e.login))??[],l=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(l,t??[]))return new Promise((t,n)=>{(0,ia.j)({environment:a,input:{issueId:e.id,assignedActors:l,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:v,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(b&&x.push({operation:"assignees",promise:b}),u){let a=new Promise((a,s)=>{(0,ir.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"milestone",promise:a})}if(m){let a=new Promise((a,s)=>{(0,is._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"issueType",promise:a})}if(p){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await ic(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});x.push({operation:"projects",promise:a})}if(g||y){let a=new Promise((a,s)=>{(0,eQ.commitMutation)(e,{mutation:n8,variables:{input:{id:t.id,clientMutationId:n.messageId,...g&&{title:n.name},...y&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"content",promise:a})}let _=[],j=[];if(x.length>0)for(let[e,t]of(await Promise.allSettled(x.map(e=>e.promise))).entries()){let n=x[e]?.operation;n&&("fulfilled"===t.status?_.push(n):j.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let w="assignCopilot";try{await id({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:j.length>0,onCompleted:()=>_.push(w)})}catch(e){j.push({operation:w,error:e instanceof Error?e:Error("Unknown error")})}if(0===_.length&&0===j.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let N=(r=_.includes("content")?n.name:t.title,l=_.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[],{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:r,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:l});s&&s({result:{successful:_,failed:j,issue:N}})}async function id({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,td.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,ie.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,it.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function ic(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),l=t.filter(e=>!r.some(t=>t?.project.id===e.id)),o=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===l.length&&0===o.length)return;let d=[],c=[];for(let t of l){let n=new Promise(n=>{(0,il.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{d.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});c.push(n)}for(let e of o){let t=new Promise(t=>{(0,eQ.commitMutation)(i,{mutation:n9,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{d.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});c.push(t)}if(await Promise.all(c),d.length>0){let e=`Failed to update ${d.length} project(s): ${d.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=d,t.detailedMessage=e,t}}function iu({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:a,onUpdateError:s,onClose:r}){let l=(0,eQ.useRelayEnvironment)(),[o,d]=(0,em.useState)(!1),{clearSessionData:c,assignees:u,labels:m,milestone:h,issueType:f,projects:p}=(0,eR.u)(),g=(0,em.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?u:void 0,labels:n?.labelable?m:void 0,milestone:n?.milestoneable?h:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?p:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[u,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,m,h,p]),y=(0,em.useCallback)(()=>{c(),i.current?.clearSessionStorage()},[c,i]),x=(0,em.useCallback)(()=>{y(),r?.()},[y,r]),v=ta(),b=(0,em.useCallback)(async o=>{o.preventDefault(),d(!0);try{let[o,c]=t.repository?.split("/")??[];if(!o||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",s?.(e),d(!1);return}let u=await eX(l,o,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",s?.(e),d(!1);return}let m=(0,eV.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",s?.(e);return}let h=t.body??"";if(n&&(0,eU.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",s?.(t),e[0]?.focus();return}h=i.current.markdown()??""}h=await v(e,h);let f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,td.v)(e.login)),p=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&!f,y=g(),b={body:h,assignees:y.assignees,labels:y.labels,milestone:y.milestone,issueType:y.issueType,projects:y.projects,hasInaccessibleProject:y.hasInaccessibleProject};await io({environment:l,currentIssue:u,draftIssue:t,proposedChanges:b,canUseCopilotAssignment:p,onCompleted:e=>{e.result.failed.length>0?s?.(e):e.result.successful.length>0&&e.result.issue?(x(),r(),a?.(e.result.issue)):(x(),r())}})}catch{let e=Error("Update failed");e.name="OTHER",s?.(e)}finally{d(!1)}},[x,t,l,g,i,e,r,a,s,n,v]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(eF.Q,{variant:"primary","data-testid":"update-issue-button",onClick:b,disabled:o||!t.bodyVersion,children:o?"Updating...":"Update"})})}try{iu.displayName||(iu.displayName="UpdateIssueButton")}catch{}function im(e){var t,n,i;let a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T=(0,z.c)(72),{isPreviewOpening:E,issue:D,onClose:R}=e,[A,O]=(0,em.useState)(E),[P,F]=(0,em.useState)(null),[M,$]=(0,em.useState)(D.id);T[0]!==A?(l=()=>{if(A){let e=setTimeout(()=>O(!1),ek.t);return()=>clearTimeout(e)}},o=[A],T[0]=A,T[1]=l,T[2]=o):(l=T[1],o=T[2]),(0,em.useEffect)(l,o),M!==D.id&&($(D.id),F(null));let{selectedThreadID:B}=(0,Q.Pk)(),V=null!=D.repository||!D.isStreaming,U=(null!=D.bodyVersion||!D.isStreaming)&&!D.bodyVersion;T[3]!==D.repository?(d=D.repository?.split("/")??[],T[3]=D.repository,T[4]=d):d=T[4];let[q,G]=d;T[5]!==q||T[6]!==G?(c={owner:q,repo:G},T[5]=q,T[6]=G,T[7]=c):c=T[7];let{isLoading:H,data:K}=n2(c),Z=K?.id??"",J=D.template||"";T[8]!==Z||T[9]!==J?(u={repoId:Z,filename:J},T[8]=Z,T[9]=J,T[10]=u):u=T[10];let{isLoading:Y,data:X}=e3(u),ee=null!=K&&(!K.hasIssuesEnabled||null!=K.viewerInteractionLimitReasonHTML&&K.viewerInteractionLimitReasonHTML?.length>0),en=ta(),ei=tf();T[11]!==ei?(m=async e=>{await ei([e])},T[11]=ei,T[12]=m):m=T[12];let ea=m;T[13]!==ei||T[14]!==D.id||T[15]!==D.repository?(h=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",F([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:D.id,sourceIssueId:n,repository:D.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(iw))}),F(t.failed.map(ij));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(i_).join(", ");t.issue.errors=t.failed.map(ib);let i=t.successful.join(", ");(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:D.id,sourceIssueId:n,repository:D.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(iv)),successfulOperations:JSON.stringify(t.successful)});try{await ei([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",F([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:D.id,errorType:"OTHER"}),F([t])}},T[13]=ei,T[14]=D.id,T[15]=D.repository,T[16]=h):h=T[16];let er=h,el=ne(D),eo=n1(D,el),ed=(0,em.useRef)(null),ec=(t=ed,(s=(0,z.c)(2))[0]!==t?(a=()=>!t.current||t.current.clientWidth<1024,s[0]=t,s[1]=a):a=s[1],r=a,(0,em.useSyncExternalStore)(iN,r)),eu=(0,em.useRef)(null);e:{let e;if(!P||0===P.length){f=null;break e}T[17]!==P?(e=P.map(ih),T[17]=P,T[18]=e):e=T[18],f=e}let eh=f,ef=K??void 0;T[19]!==ef?(p={repository:ef},T[19]=ef,T[20]=p):p=T[20];let ep=p;if(A||!V||H||Y){let e;return T[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(ew.Q,{optionConfig:{useViewportQueries:!1}}),T[21]=e):e=T[21],e}if(!K){let e;return T[22]!==D.repository?(e=(n=D.repository)?(0,W.jsx)(eL,{title:`${n} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:es.IssueDraftIcon}):(0,W.jsx)(eL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:es.IssueDraftIcon}),T[22]=D.repository,T[23]=e):e=T[23],e}if(ee){let e;return T[24]!==K?(e=(i=K).hasIssuesEnabled?i.viewerInteractionLimitReasonHTML?(0,W.jsx)(eL,{title:"You cannot update issues in this repository",description:i.viewerInteractionLimitReasonHTML,icon:es.IssueDraftIcon}):void 0:(0,W.jsx)(eL,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:es.IssueDraftIcon}),T[24]=K,T[25]=e):e=T[25],e}if(U){let e;return T[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eL,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:es.IssueDraftIcon}),T[26]=e):e=T[26],e}let eg=`${D.id}@${B}`;T[27]!==ec||T[28]!==eg?(g=(0,e_.S)({storageKeyPrefix:eg,insidePortal:ec,disableCopilotAssignmentModal:!0}),T[27]=ec,T[28]=eg,T[29]=g):g=T[29],T[30]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eN.G)("update-issue-preview"),T[30]=y):y=T[30],T[31]!==D?(x=(0,W.jsx)("div",{className:nT,children:(0,W.jsx)(eD,{item:D})}),T[31]=D,T[32]=x):x=T[32];let ey=X??void 0;T[33]!==K||T[34]!==R||T[35]!==ea||T[36]!==er||T[37]!==ey||T[38]!==D?(v=(0,W.jsx)("div",{className:nE,children:(0,W.jsx)(iu,{issueRepo:K,draftIssue:D,template:ey,issueFormRef:eu,onUpdate:ea,onUpdateError:er,onClose:R})}),T[33]=K,T[34]=R,T[35]=ea,T[36]=er,T[37]=ey,T[38]=D,T[39]=v):v=T[39],T[40]!==x||T[41]!==v?(b=(0,W.jsxs)("div",{className:nL,children:[x,v]}),T[40]=x,T[41]=v,T[42]=b):b=T[42];let ex=P&&eh;T[43]===Symbol.for("react.memo_cache_sentinel")?(_=(0,W.jsx)(es.RepoIcon,{}),T[43]=_):_=T[43];let ev=`${K.owner.login}/${K.name}`;T[44]!==ev?(j=(0,W.jsx)("b",{children:ev}),T[44]=ev,T[45]=j):j=T[45],T[46]!==D?(w=(0,W.jsx)(nZ,{draftIssue:D}),T[46]=D,T[47]=w):w=T[47],T[48]!==j||T[49]!==w?(N=(0,W.jsxs)(eC.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[_,j,w]}),T[48]=j,T[49]=w,T[50]=N):N=T[50];let eb=X??void 0;return T[51]!==K||T[52]!==en?(C=e=>en(K,e),T[51]=K,T[52]=en,T[53]=C):C=T[53],T[54]!==el||T[55]!==R||T[56]!==eo||T[57]!==eb||T[58]!==C||T[59]!==D?(S=(0,W.jsx)(nI,{draftIssue:D,template:eb,issueFormRef:eu,onChange:el,onClose:R,onBeforeCreate:C,onFieldChange:eo}),T[54]=el,T[55]=R,T[56]=eo,T[57]=eb,T[58]=C,T[59]=D,T[60]=S):S=T[60],T[61]!==ex||T[62]!==N||T[63]!==S?(I=(0,W.jsxs)("div",{className:nD,children:[ex,N,S]}),T[61]=ex,T[62]=N,T[63]=S,T[64]=I):I=T[64],T[65]!==b||T[66]!==I?(k=(0,W.jsxs)("div",{className:nk,ref:ed,children:[b,I]}),T[65]=b,T[66]=I,T[67]=k):k=T[67],T[68]!==ep||T[69]!==g||T[70]!==k?(L=(0,W.jsx)(ej.S,{optionConfig:g,preselectedData:ep,...y,children:k}),T[68]=ep,T[69]=g,T[70]=k,T[71]=L):L=T[71],L}function ih(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(ix),t=i.filter(iy),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(ig).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(ip).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,W.jsx)(eS.l,{variant:i,title:t,description:n},`error-${e.name}`)}function ip(e){return`"${e.projectTitle}"`}function ig(e){return`"${e.projectTitle}"`}function iy(e){return"remove"===e.operation}function ix(e){return"add"===e.operation}function iv(e){return{operation:e.operation,error:e.error.message}}function ib(e){return{message:e.error.message,type:"update"}}function i_(e){return e.operation}function ij(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function iw(e){return{operation:e.operation,error:e.error.message}}function iN(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{im.displayName||(im.displayName="UpdateIssuePreview")}catch{}var iC=n(98755);function iS(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,Z.b)(),{isLoading:r,isError:l,data:o}=(0,e2.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,Y.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,em.useEffect)(()=>{o?.contents&&i.value!==o.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:o.contents,isStreaming:!1}})},[o?.contents,e,t,i,n]),{isLoading:r,isError:l,data:o}}var iI=n(36903),ik=n(55099),iL=n(25506);function iT(e){let t,n,i,a,s,r=(0,z.c)(24),{left:l,right:o,view:d}=e,c=(0,em.useId)(),u=(0,em.useId)(),m=(0,em.useId)(),h=(0,iL.a)(l);return r[0]!==l.name||r[1]!==c?(t=(0,W.jsxs)("span",{id:c,className:"sr-only",children:[l.name," original file contents"]}),r[0]=l.name,r[1]=c,r[2]=t):t=r[2],r[3]!==o.name||r[4]!==u?(n=(0,W.jsxs)("span",{id:u,className:"sr-only",children:[o.name," modified file contents"]}),r[3]=o.name,r[4]=u,r[5]=n):n=r[5],r[6]!==l.name||r[7]!==o.name||r[8]!==m?(i=(0,W.jsxs)("span",{id:m,className:"sr-only",children:[l.name," and ",o.name," unified diff view"]}),r[6]=l.name,r[7]=o.name,r[8]=m,r[9]=i):i=r[9],r[10]!==h||r[11]!==l.name||r[12]!==l.value||r[13]!==c||r[14]!==o.value||r[15]!==u||r[16]!==m||r[17]!==d?(a=(0,W.jsx)(ik.C,{fileName:l.name,left:l.value,leftLabelledBy:c,right:o.value,rightLabelledBy:u,spacing:h,unifiedLabelledBy:m,view:d}),r[10]=h,r[11]=l.name,r[12]=l.value,r[13]=c,r[14]=o.value,r[15]=u,r[16]=m,r[17]=d,r[18]=a):a=r[18],r[19]!==t||r[20]!==n||r[21]!==i||r[22]!==a?(s=(0,W.jsxs)("div",{children:[t,n,i,a]}),r[19]=t,r[20]=n,r[21]=i,r[22]=a,r[23]=s):s=r[23],s}try{iT.displayName||(iT.displayName="DiffView")}catch{}function iE(e){let t,n,i,a,s,r,l,o=(0,z.c)(15),{isUnifiedDiff:d,setIsUnifiedDiff:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(eo.W.Anchor,{children:(0,W.jsx)(el.K,{icon:es.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)(ed.l.GroupHeading,{children:"Layout"}),o[1]=n):n=o[1],o[2]!==c?(i=()=>c(!0),o[2]=c,o[3]=i):i=o[3],o[4]!==d||o[5]!==i?(a=(0,W.jsx)(ed.l.Item,{selected:d,onSelect:i,children:"Unified"}),o[4]=d,o[5]=i,o[6]=a):a=o[6];let u=!d;return o[7]!==c?(s=()=>c(!1),o[7]=c,o[8]=s):s=o[8],o[9]!==u||o[10]!==s?(r=(0,W.jsx)(ed.l.Item,{selected:u,onSelect:s,children:"Split"}),o[9]=u,o[10]=s,o[11]=r):r=o[11],o[12]!==a||o[13]!==r?(l=(0,W.jsxs)(eo.W,{children:[t,(0,W.jsx)(eo.W.Overlay,{children:(0,W.jsx)(ed.l,{children:(0,W.jsxs)(ed.l.Group,{selectionVariant:"single",children:[n,a,r]})})})]}),o[12]=a,o[13]=r,o[14]=l):l=o[14],l}try{iE.displayName||(iE.displayName="DiffViewSettings")}catch{}let iD=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function iR(e){let t,n,i,a,s,r,l,o,d,c=(0,z.c)(29),{fileDiff:u}=e,{updateItem:m}=(0,ev.xx)(),h=u.baseFile,f=u.headFile,[p,g]=(0,em.useState)(!0),y=h.value&&f.value,x=!h.value&&f.value,v=h.value&&!f.value,{linesOfCode:b,size:_}=(0,iI.K3)(x||y?f:h),j=`${x?"Added: ":v?"Deleted: ":""} ${b} `;iS(u,m,"base"),iS(u,m,"head");let w=1===b?"line":"lines";c[0]!==j||c[1]!==_||c[2]!==w?(t=(0,W.jsx)("div",{className:"DiffPreview-module__toolbarLeft--o4LQ6",children:(0,W.jsxs)("p",{className:"DiffPreview-module__toolbarLoC--xR8Qi",children:[j," ",w," \xb7 ",_]})}),c[0]=j,c[1]=_,c[2]=w,c[3]=t):t=c[3],c[4]!==h.reference?(n=h.reference&&"url"in h.reference&&(0,W.jsx)(el.K,{as:"a","aria-label":"Go to the file",icon:es.LinkExternalIcon,variant:"invisible",href:h.reference.url}),c[4]=h.reference,c[5]=n):n=c[5],c[6]!==f.value?(i=(0,W.jsx)(iC.T,{textToCopy:f.value,ariaLabel:"Copy code",onCopy:iA}),c[6]=f.value,c[7]=i):i=c[7],c[8]!==f.name||c[9]!==f.value?(a=(0,W.jsx)(el.K,{"aria-label":"Download code",icon:es.DownloadIcon,variant:"invisible",onClick:()=>{let e=f.name;iD(new File([f.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),c[8]=f.name,c[9]=f.value,c[10]=a):a=c[10],c[11]!==y||c[12]!==p?(s=y&&(0,W.jsx)(iE,{setIsUnifiedDiff:g,isUnifiedDiff:p}),c[11]=y,c[12]=p,c[13]=s):s=c[13],c[14]!==n||c[15]!==i||c[16]!==a||c[17]!==s?(r=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbarActions--EAoyT",children:[n,i,a,s]}),c[14]=n,c[15]=i,c[16]=a,c[17]=s,c[18]=r):r=c[18],c[19]!==t||c[20]!==r?(l=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbar--RiBuK",children:[t,r]}),c[19]=t,c[20]=r,c[21]=l):l=c[21];let N=p?"unified":"split";return c[22]!==h||c[23]!==f||c[24]!==N?(o=(0,W.jsx)(iT,{left:h,right:f,view:N}),c[22]=h,c[23]=f,c[24]=N,c[25]=o):o=c[25],c[26]!==o||c[27]!==l?(d=(0,W.jsxs)("div",{className:"DiffPreview-module__container--BN04s",children:[l,o]}),c[26]=o,c[27]=l,c[28]=d):d=c[28],d}function iA(){return(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{iR.displayName||(iR.displayName="DiffPreview")}catch{}var iO=n(34522),iP=n(72439),iF=n(50899),iM=n(52070),i$=n(84268),iB=n(23125);let iV="FilePreview-module__previewContainer--KRQup",iU="FilePreview-module__footer--o2xcM";var iq=n(74807),iG=n(79634);let iH="ERROR",iK="LOADING",iW="READY";function iz(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var iQ=n(71315);function iZ(e){let t,n=(0,z.c)(4),{error:i}=e;if(n[0]!==i){let e,a,s=i?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("span",{className:"ErrorMessage-module__errorIcon--ODD8l",children:(0,W.jsx)(es.StopIcon,{size:24})}),a=(0,W.jsx)("h2",{className:"ErrorMessage-module__errorHeader--hmJF7",children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,W.jsxs)("div",{className:"ErrorMessage-module__error--xol56",children:[e,a,s.length>0?(0,W.jsx)("p",{children:s.map(iJ)}):(0,W.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=i,n[1]=t}else t=n[1];return t}function iJ(e){return(0,W.jsxs)(W.Fragment,{children:[e,(0,W.jsx)("br",{})]},`error-line-${e}}`)}try{iZ.displayName||(iZ.displayName="ErrorMessage")}catch{}function iY(e){let t,n,i,a,s=(0,z.c)(14),{content:r,inlineScripts:l,inlineStyles:o,headScripts:d,bodyScripts:c,styles:u,viewscreenUrl:m}=e,h=(0,t4.G7)("viewscreen_sandbox");s[0]!==m?(n=new URL("view/sandbox?url=client://sandbox",m).toString(),t=new URL(n,iQ.fV.origin),s[0]=m,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let f=t.origin,p=(0,em.useRef)(null),g=(0,em.useRef)(null);s[3]!==c||s[4]!==r||s[5]!==d||s[6]!==l||s[7]!==o||s[8]!==u?(i={content:r,headScripts:d,bodyScripts:c,inlineScripts:l,inlineStyles:o,styles:u},s[3]=c,s[4]=r,s[5]=d,s[6]=l,s[7]=o,s[8]=u,s[9]=i):i=s[9];let{renderState:y,errorMessage:x}=function(e,t,n,i){let a,s,r,l,o,d,c=(0,z.c)(16),[u,m]=(0,em.useState)(iK),[h,f]=(0,em.useState)();c[0]!==t||c[1]!==e||c[2]!==i?(a=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let l=r.body,o=n.current?.contentWindow;switch(l){case"hello":iz(o,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),iz(o,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(iH),r.payload?.error&&a(r.payload.error);break;case"loading":s(iK);break;case"loaded":if(!n.current||!i.current)return;s("LOADED");break;case"ready":if(!n.current||!i.current)return;s(iW)}})(n,0,e,t,f,m),c[0]=t,c[1]=e,c[2]=i,c[3]=a):a=c[3];let p=a;return c[4]!==p?(s=()=>(window.addEventListener("message",p),()=>window.removeEventListener("message",p)),r=[p],c[4]=p,c[5]=s,c[6]=r):(s=c[5],r=c[6]),(0,em.useEffect)(s,r),c[7]!==t||c[8]!==e||c[9]!==n||c[10]!==u?(l=()=>{if(u===iW&&e.current&&t.current){var i;let a;i=e.current,t.current,a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}},iz(i.contentWindow,a)}},o=[t,e,n,u],c[7]=t,c[8]=e,c[9]=n,c[10]=u,c[11]=l,c[12]=o):(l=c[11],o=c[12]),(0,em.useEffect)(l,o),c[13]!==h||c[14]!==u?(d={renderState:u,errorMessage:h},c[13]=h,c[14]=u,c[15]=d):d=c[15],d}(p,g,i,f);if(!h)return null;for(let e of((0,et.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:h}),Array.from(new Set([...d||[],...c||[],...u||[]].map(e=>{try{return new URL(e,f).origin}catch{return null}}).filter(Boolean)))))(0,et.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==x||s[11]!==y||s[12]!==n?(a=(0,W.jsx)("div",{ref:g,className:"SandboxView-module__container--PAb4m",children:y===iH?(0,W.jsx)(iZ,{error:x}):(0,W.jsx)("iframe",{ref:p,className:"SandboxView-module__iframe--r6S4N",sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=x,s[11]=y,s[12]=n,s[13]=a):a=s[13],a}try{iY.displayName||(iY.displayName="SandboxView")}catch{}function iX(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function i0(e){var t;let n,i,a,s,r,l=(0,z.c)(15),{file:o}=e,{previewUrl:d}=(0,iG.X)(),{items:c,versionedItems:u}=(0,ev.xx)(),{scripts:m,styles:h,files:f}=(t=o.value,a=Array.from(t.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>iX(e,c,u)),s=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(t).map(e=>iX(e,c,u)),r=Array.from(t.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e),{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:s.map(e=>e?.value??"").join(`
`),files:a.concat(s)}),[p,g]=(0,em.useState)(!1),y=(o.isStreaming||f.some(i1))&&!p;l[0]!==y||l[1]!==g?(n=()=>{if(y){let e=setTimeout(()=>{g(!0)},3e3);return()=>clearTimeout(e)}},l[0]=y,l[1]=g,l[2]=n):n=l[2],(0,em.useEffect)(n),l[3]!==o.value?(i=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(o.value),l[3]=o.value,l[4]=i):i=l[4];let{headScripts:x,bodyScripts:v,styles:b}=i;if(y){let e;return l[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)("div",{className:"HtmlPreview-module__loadingContainer--t3YC7",children:[(0,W.jsx)("div",{className:"HtmlPreview-module__loadingHead--XAabR",children:(0,W.jsx)(iq.N,{animationType:"thinking",loopAnimation:!0})}),(0,W.jsx)("p",{className:"HtmlPreview-module__loadingText--WYn1B",children:"Preparing your preview\u2026"})]}),l[5]=e):e=l[5],e}{let e;return l[6]!==v||l[7]!==b||l[8]!==o.id||l[9]!==o.value||l[10]!==x||l[11]!==d||l[12]!==m||l[13]!==h?(e=(0,W.jsx)(iY,{inlineScripts:m,inlineStyles:h,headScripts:x,bodyScripts:v,styles:b,content:o.value,viewscreenUrl:d},o.id),l[6]=v,l[7]=b,l[8]=o.id,l[9]=o.value,l[10]=x,l[11]=d,l[12]=m,l[13]=h,l[14]=e):e=l[14],e}}function i1(e){return!e||e.isStreaming}try{i0.displayName||(i0.displayName="HtmlPreview")}catch{}var i2=n(70840);function i3({isPreviewOpening:e,file:t,onClose:n}){var i;let{updateItem:a,items:s,versionedItems:r}=(0,ev.xx)(),l=(0,Q.Pk)(),o=t.isStreaming?l.messages[l.messages.length-1]:l.messages.find(e=>e.id===t.messageId),{linesOfCode:d,isPreviewable:c,size:u}=(0,iI.K3)(t);!function(e,t){let n,i,a,s,r,l,o,d=(0,z.c)(25),{reference:c}=e,u=(0,Z.b)(),m=c?.type;d[0]!==c?(n=c?(0,Y.Vb)(c):void 0,d[0]=c,d[1]=n):n=d[1],d[2]!==m||d[3]!==n?(i=["copilot-reference-preview","copilot","references",m,n],d[2]=m,d[3]=n,d[4]=i):i=d[4],d[5]!==e||d[6]!==u||d[7]!==c||d[8]!==t?(a=async()=>{if(!c||"file"!==c.type||e.value)return null;let n=await u.service.hydrateReference(c);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=u,d[7]=c,d[8]=t,d[9]=a):a=d[9],d[10]!==i||d[11]!==a?(s={queryKey:i,queryFn:a,staleTime:1/0},d[10]=i,d[11]=a,d[12]=s):s=d[12];let{isLoading:h,isError:f,data:p}=(0,e2.I)(s);d[13]!==p||d[14]!==e||d[15]!==t?(r=()=>{p?.contents&&e.value!==p.contents&&t({...e,value:p.contents,isStreaming:!1})},d[13]=p,d[14]=e,d[15]=t,d[16]=r):r=d[16];let g=p?.contents;d[17]!==e||d[18]!==g||d[19]!==t?(l=[g,e,t],d[17]=e,d[18]=g,d[19]=t,d[20]=l):l=d[20],(0,em.useEffect)(r,l),d[21]!==p||d[22]!==f||d[23]!==h?(o={isLoading:h,isError:f,data:p},d[21]=p,d[22]=f,d[23]=h,d[24]=o):o=d[24]}(t,a);let[m,h]=(0,em.useState)("code"),[f,p]=(0,em.useState)(!0),[g,y]=(0,em.useState)(void 0),x=(0,em.useCallback)(e=>{y(e)},[]),v=(0,eE.SX)(t,s,r),b=!!v;(0,em.useEffect)(()=>{(o?.error?.type==="publicCode"||o?.error?.type==="filtered")&&n()},[o?.error,n]);let _=[["code","Code"]],j="code";c&&(_.unshift(["preview","Preview"]),j="preview"===m?"preview":j),b&&(_.push(["diff","Diff"]),j="diff"===m?"diff":j);let w="object"==typeof(i=t.reference)&&null!==i&&"repoOwner"in i&&"repoName"in i&&"string"==typeof i.repoOwner&&"string"==typeof i.repoName?`${t.reference.repoOwner}/${t.reference.repoName}/${t.name}`:t.name;return(0,W.jsxs)("div",{className:"FilePreview-module__container--P2h3J",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbarLeft--RCKxW",children:[(c||b)&&(0,W.jsx)(iM.I,{"aria-label":"File view",onChange:e=>{let t=_[e]?.[0]||"code";h(t),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:_.map(([e,t])=>(0,W.jsx)(iM.I.Button,{selected:m===e,children:t},e))}),(0,W.jsx)(eD,{item:t,onVersionSelect:x}),X.W.copilotLinkableFilePaths&&(0,W.jsx)(i7,{file:t}),(0,W.jsxs)("p",{className:"FilePreview-module__toolbarLoC--I7tcY",children:[d," ",1===d?"line":"lines"," \xb7 ",u]})]}),(0,W.jsxs)("div",{className:"FilePreview-module__toolbarActions--h04aW",children:[t.reference&&"url"in t.reference&&(0,W.jsx)(el.K,{as:"a","aria-label":"Go to the file",icon:es.LinkExternalIcon,variant:"invisible",href:t?.reference?.url}),(0,W.jsx)(iC.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,W.jsx)(el.K,{"aria-label":"Download code",icon:es.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),i=t.name.substring(e);return void 0!==g?`${n}_${g}${i}`:t.name}return void 0!==g?`${t.name}_${g}`:t.name})();iD(new File([t.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),"diff"===j&&(0,W.jsx)(iE,{isUnifiedDiff:f,setIsUnifiedDiff:p})]})]}),(0,W.jsx)("div",{className:"FilePreview-module__content--HoIot",children:"preview"===j?(0,W.jsx)(i6,{file:t}):"diff"===j?(0,W.jsx)(iT,{left:v,right:t,view:f?"unified":"split"}):(0,W.jsx)(i5,{file:t,isPreviewOpening:e})}),(0,W.jsx)("footer",{className:iU,children:(0,W.jsx)("span",{"aria-live":"polite",children:w})})]})}let i4=(0,iB.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function i5({file:e,isPreviewOpening:t}){var n,i;let a,{openItem:s,updateItem:r,versionedItems:l}=(0,ev.xx)(),o=(0,Z.b)(),d=(0,em.useRef)(!1),c=(n=l,i=e,(a=n.get((0,eE.oy)(i.id))??[])[a.length-1]===i.id),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&c,h=(0,em.useId)(),f=(0,iL.a)(e),[p,g]=(0,em.useState)(),y=p?.id===e.id?p.value:e.value,[x,v]=(0,em.useState)(!0),{messages:b,currentReferences:_}=(0,Q.Pk)(),j=(0,em.useRef)(""),w=(0,em.useRef)(null),[N,C]=(0,em.useState)(void 0);(0,em.useEffect)(()=>{!_||_.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||C(null)},[_,e.name]);let S=(0,em.useMemo)(()=>{if(!X.W.selectionAttachments)return;let t=iP.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:s})=>{if(!i||""===i.trim()||!o)return;let r=n.state.doc.line(a),l=n.state.doc.line(s),d=r.from,c=l.to,u=n.state.doc.sliceString(d,c),m=`${e.id}:${d}-${c}:${e.value.length}`;if(j.current===m||new Blob([u]).size>t)return;let h={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:s}};w.current?o.replaceReference(w.current,h):o.addReference(h,"immersive-selection"),w.current=h,C({from:d,to:c}),j.current=m},onClear:()=>{j.current&&(o&&w.current&&o.removeReference(w.current),j.current="",w.current=null,C(null))}}},[e.id,e.name,e.value,e.language,o]);(0,em.useEffect)(()=>{o&&w.current&&o.removeReference(w.current),w.current=null,j.current="",C(null)},[e.id,o]),(0,em.useEffect)(()=>()=>{o&&w.current&&o.removeReference(w.current),w.current=null,j.current=""},[o]),(0,em.useEffect)(()=>{v(!1)},[]),(0,em.useEffect)(()=>{t&&(d.current=!0)},[t]);let I=(0,iF.K)((0,em.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),i4(e,t,r);else{let n={...e,messageId:tc.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};r(n),s(n.id),g({value:t,id:n.id})}},[e,m,b.length,s,r]));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("span",{id:h,className:"sr-only",children:[e.name," file contents"]}),(0,W.jsx)(iO.default,{ariaLabelledBy:h,containerClassName:"FilePreview-module__codeMirrorContainer--lxGn_",fileName:e.name,height:"100%",isReadOnly:!m,spacing:f,value:x?"":y,onChange:I,focusNextRenderRef:d,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:S,selectionAttachmentRange:N}),u&&!c&&(0,W.jsx)("div",{className:iU,children:"Switch to the latest version to edit this file."})]})}function i6({file:e}){return"markdown"===e.language?(0,W.jsx)("div",{className:iV,children:(0,W.jsx)(i2.G,{content:e})}):"html"===e.language?(0,W.jsx)("div",{className:iV,children:(0,W.jsx)(i0,{file:e})}):null}function i7({file:e}){let t=e.reference;if(!t||"file"!==t.type||!t.url)return null;let n=(0,iI.as)(t.url);if(!n)return null;let{repoOwner:i,repoName:a,filePath:s}=n;return(0,W.jsx)("div",{className:"FilePreview-module__fileLinkContainer--FTT5B",children:(0,W.jsx)(i$.A,{className:"FilePreview-module__filePath--rER6j",href:t.url,rel:"noopener noreferrer",children:(0,iI.L2)(i,a,s)})})}try{i3.displayName||(i3.displayName="FilePreview")}catch{}try{i5.displayName||(i5.displayName="CodeMirrorView")}catch{}try{i6.displayName||(i6.displayName="PreviewComponent")}catch{}try{i7.displayName||(i7.displayName="FileLink")}catch{}function i8(e){let t,n=(0,z.c)(3),{image:i}=e;return n[0]!==i.altText||n[1]!==i.url?(t=(0,W.jsx)("div",{className:"ImagePreview-module__container--lxQZb",children:(0,W.jsx)("img",{className:"ImagePreview-module__imageElement--WTRgY",src:i.url,alt:i.altText})}),n[0]=i.altText,n[1]=i.url,n[2]=t):t=n[2],t}try{i8.displayName||(i8.displayName="ImagePreview")}catch{}let i9=(0,em.memo)(function(e){let t,n,i,a,s,r,l=(0,z.c)(17),{isPreviewOpening:o,issue:d,onClose:c}=e,[u,m]=(0,em.useState)(o);l[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>m(!1),ek.t);return()=>clearTimeout(e)}},n=[u],l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,em.useEffect)(t,n),l[3]!==d.href?(i=(0,W.jsx)(el.K,{icon:es.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(d.href,"_blank")}}),l[3]=d.href,l[4]=i):i=l[4];let h=i;l[5]!==c||l[6]!==h?(a={navigate:tO.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:c,additionalHeaderActions:h,showRepositoryPill:!0},l[5]=c,l[6]=h,l[7]=a):a=l[7];let f=a;l[8]!==d.number||l[9]!==d.owner||l[10]!==d.repo?(s={owner:d.owner,repo:d.repo,number:d.number,type:"Issue"},l[8]=d.number,l[9]=d.owner,l[10]=d.repo,l[11]=s):s=l[11];let p=s;if(u){let e;return l[12]!==f?(e=(0,W.jsx)(ew.Q,{optionConfig:f}),l[12]=f,l[13]=e):e=l[13],e}return l[14]!==p||l[15]!==f?(r=(0,W.jsx)("div",{className:"IssuePreview-module__container--O4xBI",children:(0,W.jsx)(n6.e,{children:(0,W.jsx)(n5.cI,{itemIdentifier:p,optionConfig:f})})}),l[14]=p,l[15]=f,l[16]=r):r=l[16],r});try{i9.displayName||(i9.displayName="IssuePreview")}catch{}function ae(e){e.stopPropagation()}function at(e){let t,n,i,a,s=(0,z.c)(7),{jobResult:r}=e,l=em.useRef(null),[o,d]=(0,em.useState)(null),[c,u]=(0,em.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(u("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},s[0]=t):t=s[0];let m=t;return s[1]!==r?(n=()=>{if(l.current){var e;let t,n,i=l.current;return i.addEventListener("turbo:before-fetch-request",ae),i.addEventListener("turbo:before-fetch-response",m),d((t=[(e=r).repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],(n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin)).searchParams.set("partial","true"),n.toString())),()=>{i.removeEventListener("turbo:before-fetch-request",ae),i.removeEventListener("turbo:before-fetch-response",m)}}},i=[m,r],s[1]=r,s[2]=n,s[3]=i):(n=s[2],i=s[3]),(0,em.useEffect)(n,i),s[4]!==c||s[5]!==o?(a=(0,W.jsx)("div",{className:"JobResultPreview-module__container--ITPQp",children:c?(0,W.jsxs)("div",{className:"JobResultPreview-module__error--UiqJQ",children:[(0,W.jsx)("span",{className:"JobResultPreview-module__errorIcon--Gr5_m",children:(0,W.jsx)(es.StopIcon,{size:24})}),(0,W.jsx)("h2",{className:"JobResultPreview-module__errorHeader--u1d_F",children:"Failed to load job results"})]}):(0,W.jsx)("turbo-frame",{src:o,ref:l,id:"workflow_run_content",target:"_top",children:(0,W.jsx)("div",{className:"JobResultPreview-module__spinner--NGGeF",children:(0,W.jsx)(eP.A,{srText:"Loading Markdown preview\u2026"})})})}),s[4]=c,s[5]=o,s[6]=a):a=s[6],a}try{at.displayName||(at.displayName="JobResultPreview")}catch{}var an=n(97189),ai=n(73783);function aa(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(18),{spec:g}=e,[y,x]=(0,em.useState)(!1),{createBreakdown:v}=(u=(0,z.c)(6),m=(0,Z.b)(),h=(0,Q.Pk)(),u[0]!==m||u[1]!==g||u[2]!==h?(d=async e=>{let t=g.name||g.tag;(0,et.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${e.toUpperCase()}`,mode:"immersive",threadId:(0,tu.W)(h)?.id,messageId:g.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${t}' into ${e}s..."}`},i="task"===e?`
Break down the ${g.tag} spec into tasks.
`:`
Break down the ${g.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${g.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await m.sendChatMessage({thread:(0,tu.W)(h),content:i,references:[n],topic:h.currentTopic,context:h.context,customInstructions:h.customInstructions,model:h.model,intent:tc.wh.planningAgent})},u[0]=m,u[1]=g,u[2]=h,u[3]=d):d=u[3],f=d,u[4]!==f?(c={createBreakdown:f},u[4]=f,u[5]=c):c=u[5],c),b=g.isStreaming||!g.content;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__footerText--NBYrK",children:"Consider breaking this up into multiple tasks"}),p[0]=t):t=p[0],p[1]!==v?(n=()=>v("task"),p[1]=v,p[2]=n):n=p[2],p[3]!==b||p[4]!==n?(i=(0,W.jsx)(eF.Q,{className:"SpecPreviewFooter-module__button--jMuoa",leadingVisual:es.TasklistIcon,onClick:n,disabled:b,inactive:b,children:"Break down into smaller tasks"}),p[3]=b,p[4]=n,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__divider--U_nTw"}),p[6]=a):a=p[6],p[7]!==b?(s=(0,W.jsx)(eo.W.Anchor,{children:(0,W.jsx)(el.K,{"aria-label":"Task break down options\u2026",className:"SpecPreviewFooter-module__menuButton--r_s5t",icon:es.TriangleDownIcon,disabled:b,inactive:b})}),p[7]=b,p[8]=s):s=p[8],p[9]!==v?(r=(0,W.jsx)(eo.W.Overlay,{children:(0,W.jsx)(ed.l,{children:(0,W.jsx)(ed.l.Item,{onSelect:()=>v("issue"),children:"Break down into issues"})})}),p[9]=v,p[10]=r):r=p[10],p[11]!==y||p[12]!==s||p[13]!==r?(l=(0,W.jsxs)(eo.W,{open:y,onOpenChange:x,children:[s,r]}),p[11]=y,p[12]=s,p[13]=r,p[14]=l):l=p[14],p[15]!==i||p[16]!==l?(o=(0,W.jsxs)("div",{className:"SpecPreviewFooter-module__footer--M1fJw",children:[t,(0,W.jsxs)(ai.A,{className:"SpecPreviewFooter-module__buttonGroup--ZKWsL",children:[i,a,l]})]}),p[15]=i,p[16]=l,p[17]=o):o=p[17],o}try{aa.displayName||(aa.displayName="SpecPreviewFooter")}catch{}function as(e){let t,n,i,a=(0,z.c)(7),{error:s,onDismiss:r}=e,[l,o]=(0,em.useState)(0);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{o(ar)},a[0]=t):t=a[0],a[1]!==s?(n=[s],a[1]=s,a[2]=n):n=a[2],(0,em.useEffect)(t,n),a[3]!==l||a[4]!==s.message||a[5]!==r?(i=(0,W.jsx)(eS.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:s.message,onDismiss:r},l),a[3]=l,a[4]=s.message,a[5]=r,a[6]=i):i=a[6],i}function ar(e){return e+1}try{as.displayName||(as.displayName="TaskErrorBanner")}catch{}var al=n(62189),ao=n(91747);let ad=(0,em.forwardRef)((e,t)=>{let n,i,a,s,r,l,o,d=(0,z.c)(23),{children:c,inactive:u,isLoading:m,isMenuOpen:h,loadingAnnouncement:f,menuItems:p,onMenuOpenChange:g,onStartClick:y,primaryButtonText:x}=e,v=void 0===f?"Starting task\u2026":f,b=void 0===x?"Start agent task":x;return d[0]!==u||d[1]!==m||d[2]!==v||d[3]!==y||d[4]!==b||d[5]!==t?(n=(0,W.jsx)(eF.Q,{className:"TaskActions-module__button--mfKv1",inactive:u,leadingVisual:es.AgentIcon,loading:m,loadingAnnouncement:v,onClick:y,ref:t,variant:"primary",children:b}),d[0]=u,d[1]=m,d[2]=v,d[3]=y,d[4]=b,d[5]=t,d[6]=n):n=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)("div",{className:"TaskActions-module__divider--mfTun"}),d[7]=i):i=d[7],d[8]!==m?(a=(0,W.jsx)(eo.W.Anchor,{"aria-label":"Task options",children:(0,W.jsx)(el.K,{"aria-label":"Task options\u2026",className:"TaskActions-module__menuButton--KexmI",disabled:m,icon:es.TriangleDownIcon,variant:"primary"})}),d[8]=m,d[9]=a):a=d[9],d[10]!==p?(s=p.map(ac),d[10]=p,d[11]=s):s=d[11],d[12]!==s?(r=(0,W.jsx)(eo.W.Overlay,{children:(0,W.jsx)(ed.l,{children:s})}),d[12]=s,d[13]=r):r=d[13],d[14]!==h||d[15]!==g||d[16]!==a||d[17]!==r?(l=(0,W.jsxs)(eo.W,{open:h,onOpenChange:g,children:[a,r]}),d[14]=h,d[15]=g,d[16]=a,d[17]=r,d[18]=l):l=d[18],d[19]!==c||d[20]!==n||d[21]!==l?(o=(0,W.jsxs)(ai.A,{className:"TaskActions-module__buttonGroup--HfUFm",children:[n,c,i,l]}),d[19]=c,d[20]=n,d[21]=l,d[22]=o):o=d[22],o});function ac(e){return(0,W.jsx)(ed.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}ad.displayName="TaskActions";var au=n(65529),am=n(73608),ah=n(66990),af=n(86877),ap=n(82156),ag=n(44095);let ay={fragment:{argumentDefinitions:[U={defaultValue:null,kind:"LocalArgument",name:"name"},q={defaultValue:null,kind:"LocalArgument",name:"owner"}],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:G=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[H={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[q,U],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:G,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[H,K={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},K],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}};function ax(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L=(0,z.c)(51),{previewItem:T,initialRepo:E,topRepos:D,onStart:R,onCancel:A}=e,[O,P]=(0,em.useState)(E),[F,M]=(0,em.useState)(""),[$,B]=(0,em.useState)(""),[V,U]=(0,em.useState)(null);L[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t4.G7)("copilot_swe_agent_use_subagents"),L[0]=i):i=L[0];let q=i&&$,{data:G,isLoading:H}=(t=O?.owner?.login,n=O?.name,I=(0,z.c)(13),k=(0,eQ.useRelayEnvironment)(),I[0]!==k?(w=JSON.stringify(k),I[0]=k,I[1]=w):w=I[1],I[2]!==n||I[3]!==t||I[4]!==w?(N=["repository-default-branch",w,t,n],I[2]=n,I[3]=t,I[4]=w,I[5]=N):N=I[5],I[6]!==k||I[7]!==n||I[8]!==t?(C=async()=>{if(!t||!n)return null;let e=await (0,nK.fetchQuery)(k,ay,{owner:t,name:n},{fetchPolicy:"store-or-network"}).toPromise();return e?.repository?.defaultBranchRef?.name||null},I[6]=k,I[7]=n,I[8]=t,I[9]=C):C=I[9],I[10]!==N||I[11]!==C?(S={queryKey:N,queryFn:C},I[10]=N,I[11]=C,I[12]=S):S=I[12],(0,e2.I)(S));L[1]!==G?(a=()=>{null!=G?(M(G),B(G)):M("")},s=[G],L[1]=G,L[2]=a,L[3]=s):(a=L[2],s=L[3]),(0,em.useEffect)(a,s),L[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{B(e)},L[4]=r):r=L[4];let K=r;L[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{P(e)},L[5]=l):l=L[5];let Q=l;L[6]!==R||L[7]!==$||L[8]!==O||L[9]!==V?(o=()=>{R(O,$,V)},L[6]=R,L[7]=$,L[8]=O,L[9]=V,L[10]=o):o=L[10];let Z=o,J=!!O&&!!$;L[11]!==A?(d={buttonType:"default",content:"Cancel",onClick:A},L[11]=A,L[12]=d):d=L[12];let Y=!J;L[13]!==Z||L[14]!==Y?(c={buttonType:"primary",content:"Start",onClick:Z,disabled:Y},L[13]=Z,L[14]=Y,L[15]=c):c=L[15],L[16]!==d||L[17]!==c?(u=[d,c],L[16]=d,L[17]=c,L[18]=u):u=L[18],L[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,W.jsx)(af.A.Label,{children:"Target repository"}),L[19]=m):m=L[19];let X=O||void 0;if(L[20]===Symbol.for("react.memo_cache_sentinel")?(h={includeForks:!0},L[20]=h):h=L[20],L[21]!==X||L[22]!==D?(f=(0,W.jsxs)(af.A,{children:[m,(0,W.jsx)(eG.f0,{initialRepository:X,onSelect:Q,topRepositories:D,enforceAtleastOneSelected:!0,options:h,preventDefault:!0,responsiveOnNarrow:!0})]}),L[21]=X,L[22]=D,L[23]=f):f=L[23],L[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,W.jsx)(af.A.Label,{children:"Base branch"}),L[24]=p):p=L[24],L[25]!==H||L[26]!==F||L[27]!==$||L[28]!==O?(g=(0,W.jsxs)(af.A,{children:[p,O||$?(0,W.jsx)(ah.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:F?$:"None available",defaultBranch:F,owner:O?.owner?.login||"",repo:O?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:H,onSelectItem:K,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,W.jsx)(ap.f,{height:"32px",width:"100px"})]}),L[25]=H,L[26]=F,L[27]=$,L[28]=O,L[29]=g):g=L[29],L[30]!==H||L[31]!==F||L[32]!==$||L[33]!==O||L[34]!==V||L[35]!==q)y=q&&O&&(0,W.jsxs)(af.A,{children:[(0,W.jsx)(af.A.Label,{children:"Custom agent"}),(0,W.jsx)(am.b,{repo:{id:O.databaseId||0,graphQLId:O.id,name:O.nameWithOwner,nameWithOwner:O.nameWithOwner,nameOnly:O.name,owner:O.owner.login,private:O.isPrivate||!1,defaultBranch:F||"",isEmpty:!1,enabled:!0},branch:$,selectedAgent:V,onSelect:U,iconOnly:!1,disabled:H})]}),L[30]=H,L[31]=F,L[32]=$,L[33]=O,L[34]=V,L[35]=q,L[36]=y;else y=L[36];return L[37]!==f||L[38]!==g||L[39]!==y?(x=(0,W.jsxs)("div",{className:"StartTaskDialog-module__selectorsRow--t23fd",children:[f,g,y]}),L[37]=f,L[38]=g,L[39]=y,L[40]=x):x=L[40],L[41]===Symbol.for("react.memo_cache_sentinel")?(v=(0,W.jsx)(af.A.Label,{children:"Task"}),L[41]=v):v=L[41],L[42]!==T?(b=(0,W.jsx)("div",{className:"StartTaskDialog-module__taskContainer--jUtk2",children:(0,W.jsxs)(af.A,{children:[v,(0,W.jsx)(ag.m,{previewItem:T})]})}),L[42]=T,L[43]=b):b=L[43],L[44]!==x||L[45]!==b?(_=(0,W.jsxs)("div",{className:"StartTaskDialog-module__formContainer--fvFyc",children:[x,b]}),L[44]=x,L[45]=b,L[46]=_):_=L[46],L[47]!==A||L[48]!==u||L[49]!==_?(j=(0,W.jsx)(eO.l,{width:"xlarge",title:"Start task",onClose:A,footerButtons:u,children:_}),L[47]=A,L[48]=u,L[49]=_,L[50]=j):j=L[50],j}ay.hash="606cda456dcdccbb61e31c769c1ea96c";try{ax.displayName||(ax.displayName="StartTaskDialog")}catch{}function av(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S=(0,z.c)(37),{spec:I,onError:k}=e,[L,T]=(0,em.useState)(!1),[E,D]=(0,em.useState)(!1);S[0]!==I?(t={messageId:I.messageId,name:I.name,isUserEdited:I.isUserEdited,tag:I.tag,repository:I.repository,type:"planning-task",id:I.id.replace("planning-spec:","planning-task:"),description:I.content,isStreaming:I.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},S[0]=I,S[1]=t):t=S[1];let R=t,{repositoryData:A,isLoading:O}=function(e){let t,n,i,a,s,r,l=(0,z.c)(18);l[0]!==e.repository?(t=e.repository?.split("/")??[],l[0]=e.repository,l[1]=t):t=l[1];let[o,d]=t,c=(0,eQ.useRelayEnvironment)();l[2]!==c?(n=JSON.stringify(c),l[2]=c,l[3]=n):n=l[3],l[4]!==o||l[5]!==d||l[6]!==n?(i=["copilot-immersive-spec-repo",n,o,d],l[4]=o,l[5]=d,l[6]=n,l[7]=i):i=l[7],l[8]!==c||l[9]!==o||l[10]!==d?(a=async()=>o&&d?await (0,eG.tZ)(c,o,d):null,l[8]=c,l[9]=o,l[10]=d,l[11]=a):a=l[11],l[12]!==i||l[13]!==a?(s={queryKey:i,queryFn:a},l[12]=i,l[13]=a,l[14]=s):s=l[14];let{data:u,isLoading:m}=(0,e2.I)(s);return l[15]!==m||l[16]!==u?(r={repositoryData:u,isLoading:m},l[15]=m,l[16]=u,l[17]=r):r=l[17],r}(I),{isLoading:P,data:F}=(x=(0,z.c)(9),v=(0,eQ.useRelayEnvironment)(),x[0]!==v?(f=JSON.stringify(v),x[0]=v,x[1]=f):f=x[1],x[2]!==f?(p=["copilot-immersive-spec-top-repos",f],x[2]=f,x[3]=p):p=x[3],x[4]!==v?(g=async()=>await (0,eG.St)(v,{first:10,hasIssuesEnabled:!0}),x[4]=v,x[5]=g):g=x[5],x[6]!==p||x[7]!==g?(y={queryKey:p,queryFn:g},x[6]=p,x[7]=g,x[8]=y):y=x[8],(0,e2.I)(y)),{start:M,error:$}=(0,au.vQ)(R),{pullRequest:B,isLoading:V}=(0,au.as)(R),{createIssue:U}=(j=(0,z.c)(6),w=(0,Z.b)(),N=(0,Q.Pk)(),j[0]!==w||j[1]!==I||j[2]!==N?(b=async()=>{let e=I.name||I.tag,t=(0,tu.W)(N);(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:t?.id,messageId:I.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${e}' spec as an issue..."}`},i=`
Create an issue based on the ${I.tag} spec${I.repository?` in the ${I.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await w.sendChatMessage({thread:t,content:i,references:[n],topic:N.currentTopic,context:N.context,customInstructions:N.customInstructions,model:N.model,intent:tc.wh.planningAgent})},j[0]=w,j[1]=I,j[2]=N,j[3]=b):b=j[3],C=b,j[4]!==C?(_={createIssue:C},j[4]=C,j[5]=_):_=j[5],_);S[2]!==$||S[3]!==k?(n=()=>{k?.($)},i=[$,k],S[2]=$,S[3]=k,S[4]=n,S[5]=i):(n=S[4],i=S[5]),(0,em.useEffect)(n,i);let q=(0,ao.u)("copilot_swe_agent_progress_commands");S[6]!==q||S[7]!==B?(a=B?q?(0,al.U)(B.global_relay_id):`/${B.repository_nwo}/pull/${B.number}`:void 0,S[6]=q,S[7]=B,S[8]=a):a=S[8];let G=a,H=q?"View task":"View pull request",K=I.isStreaming??!1;S[9]!==I.content?(s=I.content?.trim(),S[9]=I.content,S[10]=s):s=S[10];let J=K||O||P||V,Y=!s||J;S[11]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{D(!0)},S[11]=r):r=S[11];let X=r;S[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{D(!1)},S[12]=l):l=S[12];let ee=l;S[13]!==M?(o=(e,t,n)=>{M({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),D(!1)},S[13]=M,S[14]=o):o=S[14];let en=o;S[15]!==U?(d=()=>{U()},S[15]=U,S[16]=d):d=S[16];let ei=d;if(B){let e;return S[17]!==G||S[18]!==H?(e=(0,W.jsx)(eF.Q,{as:"a",href:G,variant:"primary",size:"small",children:H}),S[17]=G,S[18]=H,S[19]=e):e=S[19],e}let ea=Y||A?.hasIssuesEnabled===!1;return S[20]!==ei||S[21]!==ea?(c=[{label:"Create issue",onSelect:ei,disabled:ea}],S[20]=ei,S[21]=ea,S[22]=c):c=S[22],S[23]!==Y||S[24]!==J||S[25]!==L||S[26]!==c?(u=(0,W.jsx)(ad,{inactive:Y,isLoading:J,isMenuOpen:L,loadingAnnouncement:"Loading spec\u2026",menuItems:c,onMenuOpenChange:T,onStartClick:X,primaryButtonText:"Start task"}),S[23]=Y,S[24]=J,S[25]=L,S[26]=c,S[27]=u):u=S[27],S[28]!==en||S[29]!==E||S[30]!==A||S[31]!==I||S[32]!==F?(m=E&&(0,W.jsx)(ax,{previewItem:I,initialRepo:A,topRepos:F||[],onStart:en,onCancel:ee}),S[28]=en,S[29]=E,S[30]=A,S[31]=I,S[32]=F,S[33]=m):m=S[33],S[34]!==u||S[35]!==m?(h=(0,W.jsxs)(W.Fragment,{children:[u,m]}),S[34]=u,S[35]=m,S[36]=h):h=S[36],h}try{av.displayName||(av.displayName="SpecActions")}catch{}function ab(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j=(0,z.c)(60),{spec:w,linesOfCode:N,size:C,isDiffable:S,onViewModeChange:I}=e,{selectedThreadID:k}=(0,Q.Pk)(),[L,T]=(0,em.useState)("preview"),[E,D]=(0,em.useState)(void 0),[R,A]=(0,em.useState)(null),[O,P]=(0,em.useState)(null),F=R&&R!==O;j[0]!==R?(t=()=>{P(R)},j[0]=R,j[1]=t):t=j[1];let M=t;j[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{A(e)},j[2]=n):n=j[2];let $=n;if(j[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{P(null)},j[3]=i):i=j[3],j[4]!==w.id?(a=[w.id],j[4]=w.id,j[5]=a):a=j[5],(0,em.useEffect)(i,a),j[6]===Symbol.for("react.memo_cache_sentinel")?(s=["preview","Preview"],j[6]=s):s=j[6],j[7]!==S){if(r=[s],S){let e;j[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],j[9]=e):e=j[9],r.push(e)}j[7]=S,j[8]=r}else r=j[8];let B=r;j[10]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{D(e)},j[10]=l):l=j[10];let V=l;j[11]!==B||j[12]!==I||j[13]!==w.messageId||j[14]!==k?(o=e=>{let t=B[e]?.[0]||"preview";T(t),I(t),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:k,messageId:w.messageId})},j[11]=B,j[12]=I,j[13]=w.messageId,j[14]=k,j[15]=o):o=j[15];let U=o;j[16]!==E||j[17]!==w.content||j[18]!==w.messageId||j[19]!==w.tag||j[20]!==k?(d=()=>{let e,t=(e=w.tag,void 0!==E?`${e}_${E}.md`:`${e}.md`);iD(new File([w.content],t)),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:k,messageId:w.messageId})},j[16]=E,j[17]=w.content,j[18]=w.messageId,j[19]=w.tag,j[20]=k,j[21]=d):d=j[21];let q=d;j[22]!==w.messageId||j[23]!==k?(c=()=>{(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:k,messageId:w.messageId})},j[22]=w.messageId,j[23]=k,j[24]=c):c=j[24];let G=c;j[25]!==R||j[26]!==M||j[27]!==F?(u=F&&(0,W.jsx)(as,{error:R,onDismiss:M}),j[25]=R,j[26]=M,j[27]=F,j[28]=u):u=j[28],j[29]!==B||j[30]!==U||j[31]!==L?(m=B.length>1&&(0,W.jsx)(iM.I,{"aria-label":"Spec view",onChange:U,children:B.map(e=>{let[t,n]=e;return(0,W.jsx)(iM.I.Button,{selected:L===t,children:n},t)})}),j[29]=B,j[30]=U,j[31]=L,j[32]=m):m=j[32],j[33]!==w?(h=(0,W.jsx)(eD,{item:w,onVersionSelect:V}),j[33]=w,j[34]=h):h=j[34];let H=1===N?"line":"lines";return j[35]!==N||j[36]!==C||j[37]!==H?(f=(0,W.jsxs)("p",{className:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",children:[N," ",H," \xb7 ",C]}),j[35]=N,j[36]=C,j[37]=H,j[38]=f):f=j[38],j[39]!==m||j[40]!==h||j[41]!==f?(p=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",children:[m,h,f]}),j[39]=m,j[40]=h,j[41]=f,j[42]=p):p=j[42],j[43]!==G||j[44]!==w.content?(g=(0,W.jsx)(iC.T,{textToCopy:w.content,ariaLabel:"Copy spec content",onCopy:G}),j[43]=G,j[44]=w.content,j[45]=g):g=j[45],j[46]!==q?(y=(0,W.jsx)(el.K,{"aria-label":"Download spec",icon:es.DownloadIcon,variant:"invisible",onClick:q}),j[46]=q,j[47]=y):y=j[47],j[48]!==w?(x=(0,W.jsx)(av,{spec:w,onError:$}),j[48]=w,j[49]=x):x=j[49],j[50]!==g||j[51]!==y||j[52]!==x?(v=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW",children:[g,y,x]}),j[50]=g,j[51]=y,j[52]=x,j[53]=v):v=j[53],j[54]!==p||j[55]!==v?(b=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",children:[p,v]}),j[54]=p,j[55]=v,j[56]=b):b=j[56],j[57]!==u||j[58]!==b?(_=(0,W.jsxs)(W.Fragment,{children:[u,b]}),j[57]=u,j[58]=b,j[59]=_):_=j[59],_}try{ab.displayName||(ab.displayName="SpecToolbar")}catch{}function a_(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function aj(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{spec:c}=e,{items:u,versionedItems:m}=(0,ev.xx)(),[h,f]=(0,em.useState)("preview");d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{f(e)},d[0]=t):t=d[0];let p=t;if(d[1]!==u||d[2]!==c||d[3]!==m){let e=(0,eE.SX)(c,u,m);n=!!e,i=e?a_(e):null,d[1]=u,d[2]=c,d[3]=m,d[4]=n,d[5]=i}else n=d[4],i=d[5];let g=i;d[6]!==c?(a=a_(c),d[6]=c,d[7]=a):a=d[7];let y=a,{linesOfCode:x,size:v}=(0,iI.K3)(y);return d[8]!==n||d[9]!==x||d[10]!==v||d[11]!==c?(s=(0,W.jsx)(ab,{spec:c,linesOfCode:x,size:v,isDiffable:n,onViewModeChange:p}),d[8]=n,d[9]=x,d[10]=v,d[11]=c,d[12]=s):s=d[12],d[13]!==g||d[14]!==y||d[15]!==h?(r=(0,W.jsx)("div",{className:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot",children:"preview"===h?(0,W.jsx)(i2.G,{content:{value:y.value,name:y.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,W.jsx)(iT,{left:g,right:y,view:"unified"})}),d[13]=g,d[14]=y,d[15]=h,d[16]=r):r=d[16],d[17]!==c?(l=(0,W.jsx)(aa,{spec:c}),d[17]=c,d[18]=l):l=d[18],d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(an.Fn,{children:(0,W.jsxs)("div",{className:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",children:[s,r,l]})}),d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}try{aj.displayName||(aj.displayName="SpecPreview")}catch{}function aw(e){let t,n,i,a,s=(0,z.c)(14),{title:r,description:l,onClose:o,onSubmit:d,buttonRef:c}=e;return s[0]!==o?(t={buttonType:"default",content:"Cancel",onClick:o},s[0]=o,s[1]=t):t=s[1],s[2]!==o||s[3]!==d?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{d(),o()}},s[2]=o,s[3]=d,s[4]=n):n=s[4],s[5]!==t||s[6]!==n?(i=[t,n],s[5]=t,s[6]=n,s[7]=i):i=s[7],s[8]!==c||s[9]!==l||s[10]!==o||s[11]!==i||s[12]!==r?(a=(0,W.jsx)(eO.l,{title:r,onClose:o,returnFocusRef:c,footerButtons:i,children:l}),s[8]=c,s[9]=l,s[10]=o,s[11]=i,s[12]=r,s[13]=a):a=s[13],a}try{aw.displayName||(aw.displayName="StartTaskWarningDialog")}catch{}function aN(e){let t,n=(0,z.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,W.jsx)(aw,{buttonRef:i,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:a,onSubmit:s,title:"Unmerged dependencies"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{aN.displayName||(aN.displayName="UnmergedDependenciesWarningDialog")}catch{}var aC=n(35104);function aS(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function aI(e){return null!=e}function ak(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(33),{loading:m,task:h,startTask:f}=e,[p,g]=(0,em.useState)(!1),[y,x]=(0,em.useState)(!1),{convertToDraftIssue:v}=(0,aC.Y)(h),b=(0,em.useRef)(null),[_,j]=(0,em.useState)(!1),w=function(e){let t,n,i=(0,z.c)(6),{items:a,versionedItems:s}=(0,ev.xx)();i[0]!==a||i[1]!==e.dependencyTags||i[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return null==t||0===t.length?null:a.get(t.at(-1))}).filter(aI)??[],i[0]=a,i[1]=e.dependencyTags,i[2]=s,i[3]=t):t=i[3];let r=t,l=(0,au.fp)(r);return i[4]!==l?(n=l.some(aS),i[4]=l,i[5]=n):n=i[5],n}(h);u[0]!==m||u[1]!==h?(t={externalLoading:m,task:h},u[0]=m,u[1]=h,u[2]=t):t=u[2];let{selectedRepo:N,topRepos:C,isLoading:S}=function(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(42),{externalLoading:g,task:y}=e;p[0]!==y.repository?(t=y.repository?.split("/")??[],p[0]=y.repository,p[1]=t):t=p[1];let[x,v]=t,[b,_]=(0,em.useState)(void 0),{updateItem:j}=(0,ev.xx)(),w=(0,eQ.useRelayEnvironment)();p[2]!==w?(n=JSON.stringify(w),p[2]=w,p[3]=n):n=p[3],p[4]!==n?(i=["copilot-immersive-top-repos",n],p[4]=n,p[5]=i):i=p[5],p[6]!==w?(a=async()=>await (0,eG.St)(w,{first:10}),p[6]=w,p[7]=a):a=p[7],p[8]!==i||p[9]!==a?(s={queryKey:i,queryFn:a},p[8]=i,p[9]=a,p[10]=s):s=p[10];let{data:N,isLoading:C}=(0,e2.I)(s);p[11]!==N?(r=void 0===N?[]:N,p[11]=N,p[12]=r):r=p[12];let S=r;p[13]!==w?(l=JSON.stringify(w),p[13]=w,p[14]=l):l=p[14],p[15]!==x||p[16]!==v||p[17]!==l?(o=["copilot-immersive-current-repo",l,x,v],p[15]=x,p[16]=v,p[17]=l,p[18]=o):o=p[18],p[19]!==w||p[20]!==x||p[21]!==v?(d=async()=>x&&v?await (0,eG.tZ)(w,x,v):null,p[19]=w,p[20]=x,p[21]=v,p[22]=d):d=p[22],p[23]!==o||p[24]!==d?(c={queryKey:o,queryFn:d},p[23]=o,p[24]=d,p[25]=c):c=p[25];let{data:I,isLoading:k}=(0,e2.I)(c),L=void 0!==g&&g||C||k;p[26]!==y||p[27]!==j?(u=e=>{_(e),e&&j({...y,isUserEdited:!0,repository:e.nameWithOwner})},p[26]=y,p[27]=j,p[28]=u):u=p[28];let T=u;return p[29]!==I||p[30]!==T||p[31]!==L||p[32]!==b||p[33]!==y.repository||p[34]!==S?(m=()=>{if(!L){if(y.repository){I&&I.nameWithOwner!==b?.nameWithOwner&&_(I);return}!b&&S&&S.length>0&&T(S[0])}},h=[I,T,L,b,y.repository,S],p[29]=I,p[30]=T,p[31]=L,p[32]=b,p[33]=y.repository,p[34]=S,p[35]=m,p[36]=h):(m=p[35],h=p[36]),(0,em.useEffect)(m,h),p[37]!==T||p[38]!==L||p[39]!==b||p[40]!==S?(f={handleRepoSelect:T,isLoading:L,selectedRepo:b,topRepos:S},p[37]=T,p[38]=L,p[39]=b,p[40]=S,p[41]=f):f=p[41],f}(t);u[3]!==w?(n=()=>{w?j(!0):x(!0)},u[3]=w,u[4]=n):n=u[4];let I=n;u[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{x(!1)},u[5]=i):i=u[5];let k=i;u[6]!==f?(a=(e,t,n)=>{f({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),x(!1)},u[6]=f,u[7]=a):a=u[7];let L=a;u[8]!==v?(s=()=>{v()},u[8]=v,u[9]=s):s=u[9];let T=s,E=!N,D=S?"Loading\u2026":"Starting task\u2026",R=N?.hasIssuesEnabled===!1;return u[10]!==T||u[11]!==R?(r=[{disabled:R,label:"Draft issue",onSelect:T}],u[10]=T,u[11]=R,u[12]=r):r=u[12],u[13]!==I||u[14]!==_?(l=_&&(0,W.jsx)(aN,{buttonRef:b,onClose:()=>j(!1),onSubmit:I}),u[13]=I,u[14]=_,u[15]=l):l=u[15],u[16]!==I||u[17]!==S||u[18]!==p||u[19]!==l||u[20]!==E||u[21]!==D||u[22]!==r?(o=(0,W.jsx)("div",{className:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(ad,{inactive:E,isLoading:S,isMenuOpen:p,loadingAnnouncement:D,menuItems:r,onMenuOpenChange:g,onStartClick:I,ref:b,children:l})}),u[16]=I,u[17]=S,u[18]=p,u[19]=l,u[20]=E,u[21]=D,u[22]=r,u[23]=o):o=u[23],u[24]!==L||u[25]!==y||u[26]!==h||u[27]!==N||u[28]!==C?(d=y&&(0,W.jsx)(ax,{previewItem:h,initialRepo:N,topRepos:C||[],onStart:L,onCancel:k}),u[24]=L,u[25]=y,u[26]=h,u[27]=N,u[28]=C,u[29]=d):d=u[29],u[30]!==o||u[31]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),u[30]=o,u[31]=d,u[32]=c):c=u[32],c}try{ak.displayName||(ak.displayName="NoPullRequestTaskToolbar")}catch{}var aL=n(26607);function aT(e){let t,n,i,a,s,r,l=(0,z.c)(19),{pullRequest:o}=e,d=(0,ao.u)("copilot_swe_agent_progress_commands");l[0]!==d||l[1]!==o.global_relay_id||l[2]!==o.number||l[3]!==o.repository_nwo?(t=d?(0,al.U)(o.global_relay_id):`/${o.repository_nwo}/pull/${o.number}`,l[0]=d,l[1]=o.global_relay_id,l[2]=o.number,l[3]=o.repository_nwo,l[4]=t):t=l[4];let c=t,u=d?"View task":"View pull request";l[5]!==o.repository_nwo?(n=(0,W.jsx)("div",{className:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",children:(0,W.jsx)(aL.A,{variant:"accent",size:"large",className:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp",children:o.repository_nwo})}),l[5]=o.repository_nwo,l[6]=n):n=l[6];let m="merged"===o.state?"success":"accent",h="merged"===o.state?"Merged":"In progress";return l[7]!==m||l[8]!==h?(i=(0,W.jsx)(aL.A,{variant:m,size:"small",children:h}),l[7]=m,l[8]=h,l[9]=i):i=l[9],l[10]!==c||l[11]!==u?(a=(0,W.jsx)(eF.Q,{as:"a",href:c,variant:"primary",size:"small",children:u}),l[10]=c,l[11]=u,l[12]=a):a=l[12],l[13]!==i||l[14]!==a?(s=(0,W.jsxs)("div",{className:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",children:[i,a]}),l[13]=i,l[14]=a,l[15]=s):s=l[15],l[16]!==n||l[17]!==s?(r=(0,W.jsxs)(W.Fragment,{children:[n,s]}),l[16]=n,l[17]=s,l[18]=r):r=l[18],r}try{aT.displayName||(aT.displayName="PullRequestTaskToolbar")}catch{}function aE(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(22),{className:c,task:u}=e,{pullRequest:m,isLoading:h}=(0,au.as)(u),{start:f,error:p}=(0,au.vQ)(u),[g,y]=(0,em.useState)(null),x=p&&p!==g;d[0]!==p?(t=()=>{y(p)},d[0]=p,d[1]=t):t=d[1];let v=t;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(null)},d[2]=n):n=d[2],d[3]!==u.id?(i=[u.id],d[3]=u.id,d[4]=i):i=d[4],(0,em.useEffect)(n,i),d[5]!==p||d[6]!==v||d[7]!==x?(a=x&&(0,W.jsx)(as,{error:p,onDismiss:v}),d[5]=p,d[6]=v,d[7]=x,d[8]=a):a=d[8],d[9]!==c?(s=(0,eu.$)("TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1",c),d[9]=c,d[10]=s):s=d[10],d[11]!==h||d[12]!==m||d[13]!==f||d[14]!==u?(r=m?(0,W.jsx)(aT,{pullRequest:m}):(0,W.jsx)(ak,{loading:h,task:u,startTask:f}),d[11]=h,d[12]=m,d[13]=f,d[14]=u,d[15]=r):r=d[15],d[16]!==s||d[17]!==r?(l=(0,W.jsx)("div",{className:s,children:r}),d[16]=s,d[17]=r,d[18]=l):l=d[18],d[19]!==a||d[20]!==l?(o=(0,W.jsxs)(W.Fragment,{children:[a,l]}),d[19]=a,d[20]=l,d[21]=o):o=d[21],o}try{aE.displayName||(aE.displayName="TaskToolbar")}catch{}function aD(e){let t,n,i,a=(0,z.c)(8),{task:s}=e,r=s.description;s.name&&(r=`# ${s.name}

${r}`);let l=r;a[0]!==s?(t=(0,W.jsx)(aE,{task:s}),a[0]=s,a[1]=t):t=a[1];let o=`${s.tag}.md`;return a[2]!==l||a[3]!==o?(n=(0,W.jsx)(i2.G,{content:{value:l,name:o},fallbackToRaw:!0,hideHeadingAnchors:!0}),a[2]=l,a[3]=o,a[4]=n):n=a[4],a[5]!==t||a[6]!==n?(i=(0,W.jsx)(an.Fn,{children:(0,W.jsxs)("div",{className:"TaskPreview-module__container--RZnMV",children:[t,n]})}),a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{aD.displayName||(aD.displayName="TaskPreview")}catch{}function aR(e){let t,n=(0,z.c)(35),{isOpening:i,onClose:a,previewItem:s}=e,r=(0,eb.qw)(),l=null;switch(s.type){case"file":{let e;n[0]!==i||n[1]!==a||n[2]!==s?(e=(0,W.jsx)(i3,{isPreviewOpening:i,file:s,onClose:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=e):e=n[3],l=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,W.jsx)(iR,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],l=e;break}case"issue":{let e;n[6]!==i||n[7]!==a||n[8]!==s?(e=(0,W.jsx)(i9,{isPreviewOpening:i,issue:s,onClose:a}),n[6]=i,n[7]=a,n[8]=s,n[9]=e):e=n[9],l=e;break}case"new-issue":{let e;n[10]!==i||n[11]!==a||n[12]!==s?(e=(0,W.jsx)(n3,{isPreviewOpening:i,issue:s,onClose:a}),n[10]=i,n[11]=a,n[12]=s,n[13]=e):e=n[13],l=e;break}case"update-issue":{let e;n[14]!==i||n[15]!==a||n[16]!==s?(e=(0,W.jsx)(im,{isPreviewOpening:i,issue:s,onClose:a}),n[14]=i,n[15]=a,n[16]=s,n[17]=e):e=n[17],l=e;break}case"existing-issue":{let e;n[18]!==i||n[19]!==a||n[20]!==s?(e=(0,W.jsx)(n7,{isPreviewOpening:i,issue:s,onClose:a}),n[18]=i,n[19]=a,n[20]=s,n[21]=e):e=n[21],l=e;break}case"image":{let e;n[22]!==s?(e=(0,W.jsx)(i8,{image:s}),n[22]=s,n[23]=e):e=n[23],l=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,W.jsx)(aD,{task:s}),n[24]=s,n[25]=e):e=n[25],l=e;break}case"planning-spec":{let e;n[26]!==s?(e=(0,W.jsx)(aj,{spec:s}),n[26]=s,n[27]=e):e=n[27],l=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){l=(0,W.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=l}else l=n[30];break;case"job-result":{let e;n[31]!==s?(e=(0,W.jsx)(at,{jobResult:s}),n[31]=s,n[32]=e):e=n[32],l=e}}return n[33]!==l?(t=l?(0,W.jsx)(en.t,{fallback:(0,W.jsx)(eh.x,{regionName:"This workbench item"}),children:l}):null,n[33]=l,n[34]=t):t=n[34],t}try{aR.displayName||(aR.displayName="ContentPreviewItem")}catch{}var aA=n(77999);function aO(e){let t=(0,z.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eP.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.CodeIcon,{}),t[2]=e):e=t[2],e}}function aP(e){let t=(0,z.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,W.jsx)(aO,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(es.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,W.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}let aF=(0,em.forwardRef)(function(e,t){let n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j=(0,z.c)(52);j[0]!==e?({onClick:s,onClose:r,isActive:i,item:a,controlHintId:n,tabPanelId:o,...l}=e,j[0]=e,j[1]=n,j[2]=i,j[3]=a,j[4]=s,j[5]=r,j[6]=l,j[7]=o):(n=j[1],i=j[2],a=j[3],s=j[4],r=j[5],l=j[6],o=j[7]);let[w,N]=(0,em.useState)(!1),C=(0,em.useRef)(null),S=!a.disableCloseButton;j[8]!==r?(d=()=>{r&&r(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},j[8]=r,j[9]=d):d=j[9];let I=d,k=(0,em.useRef)(null),L=a.name;j[10]!==w?(c=()=>{let e=C.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==w&&N(t)},j[10]=w,j[11]=c):c=j[11];let T=c,E=`content-preview-tab-${a.id}`;j[12]!==T||j[13]!==E||j[14]!==L?(u=(0,W.jsx)("span",{className:"ContentPreviewTab-module__title--l571P","data-title":L,"data-testid":E,ref:C,onMouseEnter:T,children:L}),j[12]=T,j[13]=E,j[14]=L,j[15]=u):u=j[15];let D=u;j[16]!==i?(m=(0,eu.$)("ContentPreviewTab-module__tabContent--xe28k",{"ContentPreviewTab-module__isActive--Pi2gz":i}),j[16]=i,j[17]=m):m=j[17];let R=i?"true":void 0;return j[18]!==s?(h=e=>{s&&s(e),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},j[18]=s,j[19]=h):h=j[19],j[20]!==I||j[21]!==S?(f=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":S&&I();break;case"tab":if(e.shiftKey)break;S&&(e.preventDefault(),k.current?.focus())}},p=e=>{1===e.button&&S&&I()},j[20]=I,j[21]=S,j[22]=f,j[23]=p):(f=j[22],p=j[23]),j[24]!==a?(g=(0,W.jsx)("span",{className:"ContentPreviewTab-module__icon--lefqk",children:(0,W.jsx)(aP,{item:a})}),j[24]=a,j[25]=g):g=j[25],j[26]!==w||j[27]!==L||j[28]!==D?(y=w?(0,W.jsx)(aA.m,{text:L,position:"bottom",children:D}):D,j[26]=w,j[27]=L,j[28]=D,j[29]=y):y=j[29],j[30]!==a.trailingComponent?(x=a.trailingComponent?(0,W.jsx)("div",{className:"ContentPreviewTab-module__trailingComponent--lAh8u",children:a.trailingComponent}):null,j[30]=a.trailingComponent,j[31]=x):x=j[31],j[32]!==n||j[33]!==t||j[34]!==l||j[35]!==g||j[36]!==y||j[37]!==x||j[38]!==R||j[39]!==h||j[40]!==f||j[41]!==p||j[42]!==o?(v=(0,W.jsxs)("button",{className:"ContentPreviewTab-module__mainButton--vLx58",type:"button",role:"tab","aria-selected":R,"aria-describedby":n,"aria-controls":o,onClick:h,onKeyDown:f,onAuxClick:p,ref:t,...l,children:[g,y,x]}),j[32]=n,j[33]=t,j[34]=l,j[35]=g,j[36]=y,j[37]=x,j[38]=R,j[39]=h,j[40]=f,j[41]=p,j[42]=o,j[43]=v):v=j[43],j[44]!==I||j[45]!==S||j[46]!==L?(b=S&&(0,W.jsx)("div",{className:"ContentPreviewTab-module__closeButton--SByWv",children:(0,W.jsx)(el.K,{icon:es.XIcon,size:"small",variant:"invisible","aria-label":`Close ${L}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:I,ref:k})}),j[44]=I,j[45]=S,j[46]=L,j[47]=b):b=j[47],j[48]!==v||j[49]!==b||j[50]!==m?(_=(0,W.jsx)("div",{className:"ContentPreviewTab-module__tabContainer--ApaB_",children:(0,W.jsxs)("div",{className:m,children:[v,b]})}),j[48]=v,j[49]=b,j[50]=m,j[51]=_):_=j[51],_});try{aO.displayName||(aO.displayName="CodeTabIcon")}catch{}try{aP.displayName||(aP.displayName="TabIcon")}catch{}try{aF.displayName||(aF.displayName="ContentPreviewTab")}catch{}var aM=n(61526);function a$(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,W.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{a$.displayName||(a$.displayName="DiceIcon")}catch{}function aB(e){let t,n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(23),{isOpening:f}=e,p=(0,Z.b)(),g=(0,Q.Pk)(),y=(0,aM.zy)(),x=(0,em.useRef)(null);h[0]!==g?(t=(0,tu.W)(g),h[0]=g,h[1]=t):t=h[1];let v=t,b=(0,iG.X)();h[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],h[2]=n):n=h[2];let[_,j]=(0,em.useState)(n);h[3]!==b.icebreakers?(i=()=>{var e;if(Array.isArray(e=b.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=b.icebreakers.find(aV);e&&e.data.length>0&&j(e.data)}},h[3]=b.icebreakers,h[4]=i):i=h[4],h[5]!==y||h[6]!==b.icebreakers?(a=[b.icebreakers,y],h[5]=y,h[6]=b.icebreakers,h[7]=a):a=h[7],(0,em.useEffect)(i,a),h[8]!==f?(s=()=>{f&&x.current&&window.requestAnimationFrame(()=>{x.current?.focus({preventScroll:!0})})},r=[f],h[8]=f,h[9]=s,h[10]=r):(s=h[9],r=h[10]),(0,em.useEffect)(s,r),h[11]!==v||h[12]!==_||h[13]!==p||h[14]!==g?(l=()=>{if(0===_.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(_),t=0===g.messages.length?v:(0,tu.W)(g),n=g.currentUserLogin,i=e.message;p.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:g.currentReferences,topic:g.currentTopic,context:g.context,customInstructions:g.customInstructions,model:g.model}),(0,et.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:g.currentTopic?.name,mode:"immersive",suggestionId:e.id})},h[11]=v,h[12]=_,h[13]=p,h[14]=g,h[15]=l):l=h[15];let w=l;return h[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,W.jsx)(es.BrowserIcon,{size:24,className:"EmptyState-module__icon--Ur91O"}),u=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o=(0,W.jsx)("h2",{className:"EmptyState-module__heading--fStvv",children:"View files directly within Copilot"}),d=(0,W.jsx)("p",{className:"EmptyState-module__subtitle--tjaBc",children:"Ask to generate a file or app, or use the button below to try it yourself."}),h[16]=o,h[17]=d,h[18]=c,h[19]=u):(o=h[16],d=h[17],c=h[18],u=h[19]),h[20]!==w||h[21]!==g.isWaitingOnCopilot?(m=(0,W.jsxs)("div",{className:"EmptyState-module__container--LAYqE",children:[c,u,o,d,(0,W.jsx)(eF.Q,{ref:x,leadingVisual:a$,onClick:w,disabled:g.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),h[20]=w,h[21]=g.isWaitingOnCopilot,h[22]=m):m=h[22],m}function aV(e){return"interactional"===e.type}try{aB.displayName||(aB.displayName="EmptyState")}catch{}function aU(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("div",{className:"LoadingState-module__container--dKvYJ",children:(0,W.jsx)(eP.A,{size:"large"})}),t[0]=e):e=t[0],e}try{aU.displayName||(aU.displayName="LoadingState")}catch{}function aq(e,t,n={}){(0,et.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function aG(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T,E,D,R,A,O,P,F,M,$,B,V,U=(0,z.c)(128),{returnFocusRef:q,disableResourcePanel:G,disableActionsMenu:H}=e,K=void 0!==H&&H,en=(0,ev.tZ)(),eh=(0,ev.wI)(),{selectedThreadID:eb}=(0,Q.bP)("selectedThreadID"),e_=(0,ee.tD)(),ej=(0,Z.b)(),ew=(0,ei.S)(eb),{items:eN,allOpenItems:eC,selectedItem:eS,openItem:eI,closeItem:ek,closeItems:eL,closePreviewPane:eT,showLoadingState:eE,openResourcePanel:eD,returnFocusElementRef:eR}=(0,ev.xx)(),eA=(0,ei.S)(en),eO=en&&!eA,eP=eA&&!en;if(U[0]!==eN||U[1]!==eC){let e;U[3]!==eN?(e=e=>eN.get(e),U[3]=eN,U[4]=e):e=U[4],t=eC.map(e).filter(aQ),U[0]=eN,U[1]=eC,U[2]=t}else t=U[2];let eF=t,eM=(0,em.useId)(),e$=(0,em.useId)(),eB=(0,em.useId)();if(U[5]!==eN||U[6]!==eC||U[7]!==eS){let e;U[10]!==eN?(e=e=>eN.get(e),U[10]=eN,U[11]=e):e=U[11],i=(n=eC.map(e).filter(az)).find(e=>e.id===eS)??n[0],U[5]=eN,U[6]=eC,U[7]=eS,U[8]=n,U[9]=i}else n=U[8],i=U[9];let eV=i,eU=(0,ei.S)(eS),eq=X.W.copilotResourcePanel&&!(void 0!==G&&G),eG=(0,em.useRef)(!0);U[12]!==eP||U[13]!==eO||U[14]!==eR||U[15]!==q||U[16]!==eV?(a=()=>{if(eP||X.W.focusTextAreaInsteadOfWorkbench&&eG.current&&eV&&"file"===eV.type&&!eO){eG.current=!1;let e=eR.current;e?e.focus():q.current?.focus()}},s=[eP,eO,q,eV,eR],U[12]=eP,U[13]=eO,U[14]=eR,U[15]=q,U[16]=eV,U[17]=a,U[18]=s):(a=U[17],s=U[18]),(0,em.useEffect)(a,s),U[19]!==eT||U[20]!==ew||U[21]!==eb?(r=()=>{null!=ew&&ew!==eb&&eT()},l=[eT,ew,eb],U[19]=eT,U[20]=ew,U[21]=eb,U[22]=r,U[23]=l):(r=U[22],l=U[23]),(0,em.useEffect)(r,l),U[24]!==en||U[25]!==n||U[26]!==eS?(d=()=>{if(!eS||!en)return;let e=n.findIndex(e=>e.id===eS),t=eW.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},o=[eS,n,en],U[24]=en,U[25]=n,U[26]=eS,U[27]=o,U[28]=d):(o=U[27],d=U[28]),(0,em.useEffect)(d,o),U[29]!==eh||U[30]!==eD||U[31]!==eU||U[32]!==eq||U[33]!==eS||U[34]!==eV?(c=()=>{eq&&eS&&eS!==eU&&!eh&&eV?.type==="file"&&(0,Y.SI)(eV.reference)&&eD()},u=[eh,eD,eU,eq,eS,eV],U[29]=eh,U[30]=eD,U[31]=eU,U[32]=eq,U[33]=eS,U[34]=eV,U[35]=c,U[36]=u):(c=U[35],u=U[36]),(0,em.useEffect)(c,u),U[37]!==e_||U[38]!==ej||U[39]!==eU||U[40]!==eS||U[41]!==eV?(m=()=>{if(!X.W.copilotResourcePanel||eS===eU)return;let{currentReferences:e,implicitReferences:t}=e_();if(eS&&eV?.type==="file"){let n=eV.reference;(0,Y.SI)(n)&&!e.some(e=>(0,Y.x_)(e,n))&&(t.size>0&&ej.clearImplicitReferences(),ej.addReference(n,"ContentPreview",{implicit:!0}))}else t.size>0&&ej.clearImplicitReferences()},h=[e_,ej,eU,eS,eV],U[37]=e_,U[38]=ej,U[39]=eU,U[40]=eS,U[41]=eV,U[42]=m,U[43]=h):(m=U[42],h=U[43]),(0,em.useEffect)(m,h),U[44]!==eF?(f=async()=>{let e=eF.map(aW);iD(new File([await (0,ec._6)(e).blob()],"files.zip"))},U[44]=eF,U[45]=f):f=U[45];let eH=f;U[46]!==ek||U[47]!==eT||U[48]!==n.length||U[49]!==eV?(p=e=>{if(eV){let t=void 0!==e&&e&&1===n.length;ek(eV.id),t&&(eT(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},U[46]=ek,U[47]=eT,U[48]=n.length,U[49]=eV,U[50]=p):p=U[50];let eK=p;U[51]===Symbol.for("react.memo_cache_sentinel")?(g=[],U[51]=g):g=U[51];let eW=(0,em.useRef)(g),ez=(0,em.useRef)(null);U[52]===Symbol.for("react.memo_cache_sentinel")?(y={containerRef:ez,focusableElementFilter:aK,bindKeys:ea.z0.ArrowHorizontal|ea.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},U[52]=y):y=U[52],U[53]!==n?(x=[n],U[53]=n,U[54]=x):x=U[54],(0,er.G)(y,x);let eQ=!(0,J.g)(ez);if(U[55]!==eM||U[56]!==ek||U[57]!==eL||U[58]!==eT||U[59]!==eB||U[60]!==eh||U[61]!==eI||U[62]!==n||U[63]!==eD||U[64]!==eq||U[65]!==eS||U[66]!==e$){let e;U[78]!==eL||U[79]!==eT?(e=()=>{eL(),eT(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},U[78]=eL,U[79]=eT,U[80]=e):e=U[80],v=e,k=ef,U[81]!==eh||U[82]!==eD||U[83]!==eq?(L=eq&&!eh&&(0,W.jsx)("div",{className:(0,eu.$)(ep,eg),children:(0,W.jsx)(el.K,{icon:es.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:eD,variant:"invisible"})}),U[81]=eh,U[82]=eD,U[83]=eq,U[84]=L):L=U[84],I="ContentPreview-module__tabsContainer--t0I1P",b="ContentPreview-module__tabs--X2Pn9",_="tablist",j="Workbench items",w=ez,N=-1,C=aH,S=n.map((e,t)=>(0,W.jsx)(aF,{id:e.id===eS?eM:void 0,tabPanelId:e.id===eS?e$:void 0,controlHintId:eB,isActive:e.id===eS,onClick:()=>{eI(e.id),aq("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=eW.current[e+1]??eW.current[e-1]??ez.current;i?.focus();let a=1===n.length;ek(t.id),a&&eT(),aq("filePreviewTab.close",t)})(t),item:e,ref:e=>{eW.current[t]=e}},e.id)),U[55]=eM,U[56]=ek,U[57]=eL,U[58]=eT,U[59]=eB,U[60]=eh,U[61]=eI,U[62]=n,U[63]=eD,U[64]=eq,U[65]=eS,U[66]=e$,U[67]=v,U[68]=b,U[69]=_,U[70]=j,U[71]=w,U[72]=N,U[73]=C,U[74]=S,U[75]=I,U[76]=k,U[77]=L}else v=U[67],b=U[68],_=U[69],j=U[70],w=U[71],N=U[72],C=U[73],S=U[74],I=U[75],k=U[76],L=U[77];return U[85]!==eB?(T=(0,W.jsx)("span",{id:eB,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),U[85]=eB,U[86]=T):T=U[86],U[87]===Symbol.for("react.memo_cache_sentinel")?(E=(0,W.jsx)("span",{}),U[87]=E):E=U[87],U[88]!==b||U[89]!==_||U[90]!==j||U[91]!==w||U[92]!==N||U[93]!==C||U[94]!==S||U[95]!==T?(D=(0,W.jsxs)("div",{className:b,role:_,"aria-label":j,ref:w,tabIndex:N,onWheel:C,children:[S,T,E]}),U[88]=b,U[89]=_,U[90]=j,U[91]=w,U[92]=N,U[93]=C,U[94]=S,U[95]=T,U[96]=D):D=U[96],U[97]!==I||U[98]!==D?(R=(0,W.jsx)("div",{className:I,children:D}),U[97]=I,U[98]=D,U[99]=R):R=U[99],U[100]!==v||U[101]!==K||U[102]!==eH||U[103]!==eF.length||U[104]!==eC.length||U[105]!==eQ?(A=!K&&eC.length>0&&(0,W.jsx)("div",{className:(0,eu.$)(ep,eQ&&ey),children:(0,W.jsxs)(eo.W,{children:[(0,W.jsx)(eo.W.Anchor,{children:(0,W.jsx)(el.K,{icon:es.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,W.jsx)(eo.W.Overlay,{children:(0,W.jsxs)(ed.l,{children:[eF.length>0&&(0,W.jsxs)(ed.l.Item,{onSelect:eH,children:[(0,W.jsx)(ed.l.LeadingVisual,{children:(0,W.jsx)(es.FileZipIcon,{})}),"Download all files"]}),(0,W.jsxs)(ed.l.Item,{onSelect:v,children:[(0,W.jsx)(ed.l.LeadingVisual,{children:(0,W.jsx)(es.XIcon,{})}),"Close all tabs"]})]})})]})}),U[100]=v,U[101]=K,U[102]=eH,U[103]=eF.length,U[104]=eC.length,U[105]=eQ,U[106]=A):A=U[106],U[107]===Symbol.for("react.memo_cache_sentinel")?(O=(0,W.jsx)("div",{className:(0,eu.$)(ep,ey),children:(0,W.jsx)(aZ,{})}),U[107]=O):O=U[107],U[108]!==A?(P=(0,W.jsxs)("div",{className:"ContentPreview-module__rightActions--Ed1c0",children:[A,O]}),U[108]=A,U[109]=P):P=U[109],U[110]!==k||U[111]!==L||U[112]!==R||U[113]!==P?(F=(0,W.jsxs)("div",{className:k,children:[L,R,P]}),U[110]=k,U[111]=L,U[112]=R,U[113]=P,U[114]=F):F=U[114],U[115]===Symbol.for("react.memo_cache_sentinel")?(M=(0,eu.$)(ex,"content-preview-content"),U[115]=M):M=U[115],U[116]!==eK||U[117]!==eO||U[118]!==eV||U[119]!==eE?($=eE?(0,W.jsx)(aU,{}):eV?(0,W.jsx)(aR,{isOpening:eO,previewItem:eV,onClose:eK}):(0,W.jsx)(aB,{isOpening:eO}),U[116]=eK,U[117]=eO,U[118]=eV,U[119]=eE,U[120]=$):$=U[120],U[121]!==eM||U[122]!==e$||U[123]!==$?(B=(0,W.jsx)("div",{className:M,role:"tabpanel",id:e$,"aria-labelledby":eM,children:$}),U[121]=eM,U[122]=e$,U[123]=$,U[124]=B):B=U[124],U[125]!==F||U[126]!==B?(V=(0,W.jsxs)(W.Fragment,{children:[F,B]}),U[125]=F,U[126]=B,U[127]=V):V=U[127],V}function aH(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function aK(e){return"tab"===e.role}function aW(e){return new File([e.value],e.name)}function az(e){return!!e}function aQ(e){return e?.type==="file"}function aZ(){let e,t=(0,z.c)(2),{closePreviewPane:n}=(0,ev.xx)();return t[0]!==n?(e=(0,W.jsx)(el.K,{variant:"invisible",icon:es.XIcon,"aria-label":"Close workbench",onClick:()=>{n(),(0,et.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}),t[0]=n,t[1]=e):e=t[1],e}function aJ(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:ef,children:(0,W.jsx)("div",{className:(0,eu.$)(ep,eg),children:(0,W.jsx)(aZ,{})})}),(0,W.jsx)("div",{className:(0,eu.$)(ex),children:(0,W.jsx)(eh.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function aY(e){let t,n,i,a,s,r=(0,z.c)(16),{returnFocusRef:l,disableResourcePanel:o,disableActionsMenu:d,className:c}=e,u=void 0!==o&&o,m=void 0!==d&&d,h=(0,em.useId)(),{contentPreviewRef:f}=(0,ev.xx)(),p=(0,ev.tZ)(),g=(0,ev.wI)()&&"ContentPreview-module__resourcePanelOpen--YIQql";r[0]!==c||r[1]!==g?(t=(0,eu.$)("ContentPreview-module__container--y5_MG",g,c),r[0]=c,r[1]=g,r[2]=t):t=r[2];let y=p?f:void 0;return r[3]!==h?(n=(0,W.jsx)("h2",{id:h,className:"sr-only",children:"Workbench"}),r[3]=h,r[4]=n):n=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(aJ,{}),r[5]=i):i=r[5],r[6]!==m||r[7]!==u||r[8]!==l?(a=(0,W.jsx)(en.t,{fallback:i,children:(0,W.jsx)(aG,{returnFocusRef:l,disableResourcePanel:u,disableActionsMenu:m})}),r[6]=m,r[7]=u,r[8]=l,r[9]=a):a=r[9],r[10]!==h||r[11]!==t||r[12]!==y||r[13]!==n||r[14]!==a?(s=(0,W.jsxs)("div",{"aria-labelledby":h,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:y,children:[n,a]}),r[10]=h,r[11]=t,r[12]=y,r[13]=n,r[14]=a,r[15]=s):s=r[15],s}try{aG.displayName||(aG.displayName="ContentPreviewInner")}catch{}try{aZ.displayName||(aZ.displayName="CloseContentPreviewButton")}catch{}try{aJ.displayName||(aJ.displayName="ContentPreviewFallback")}catch{}try{aY.displayName||(aY.displayName="ContentPreview")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(74848),a=n(21728),s=n(96540),r=n(61526),l=n(94236),o=n(5524);let d="Breadcrumbs-module__container--bnnIp",c="Breadcrumbs-module__list--hG7n1",u="Breadcrumbs-module__item--fekY7",m="Breadcrumbs-module__link--A48Bt",h="Breadcrumbs-module__text--yZS1N";var f=n(38621),p=n(40090);let g=e=>{let t,n,r,h,f,p=(0,a.c)(31),{children:g,"aria-label":_,condensed:j}=e,w=void 0===_?"Breadcrumbs":_;if(p[0]!==g){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===y?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===x&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(g),p[0]=g,p[1]=t}else t=p[1];let N=t[t.length-1];p[2]!==t?(n=t.slice(0,-1),p[2]=t,p[3]=n):n=p[3];let C=n,S=t.length>=3,I=void 0!==j&&j&&S,k=s.useRef(null);if(void 0!==j)if(I){let e,t,n,a,s;return p[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),p[4]=e):e=p[4],p[5]!==C?(t=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[e,(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:C.map(v)})})]})}),p[5]=C,p[6]=t):t=p[6],p[7]!==N?(n=N&&(N.hasMenu&&N.menuOverlay?(0,i.jsx)(x,{menuOverlay:N.menuOverlay,children:N.children}):N.href?(0,i.jsx)(y,{href:N.href,children:N.children}):null),p[7]=N,p[8]=n):n=p[8],p[9]!==t||p[10]!==n?(a=(0,i.jsxs)("ol",{className:c,children:[t,n]}),p[9]=t,p[10]=n,p[11]=a):a=p[11],p[12]!==w||p[13]!==a?(s=(0,i.jsx)("nav",{className:`${d} Breadcrumbs-module__condensed--l60Z1`,"aria-label":w,children:a}),p[12]=w,p[13]=a,p[14]=s):s=p[14],s}else{let e,t;return p[15]!==g?(e=(0,i.jsx)("ol",{className:c,children:g}),p[15]=g,p[16]=e):e=p[16],p[17]!==w||p[18]!==e?(t=(0,i.jsx)("nav",{className:d,"aria-label":w,children:e}),p[17]=w,p[18]=e,p[19]=t):t=p[19],t}let L=`${c} ${S?"Breadcrumbs-module__fullList--aHVvT":"Breadcrumbs-module__alwaysVisible--dK_nL"}`;return p[20]!==g||p[21]!==L?(r=(0,i.jsx)("ol",{className:L,children:g}),p[20]=g,p[21]=L,p[22]=r):r=p[22],p[23]!==S||p[24]!==N||p[25]!==C?(h=S&&(0,i.jsxs)("ol",{className:`${c} Breadcrumbs-module__condensedList--vpMXO`,children:[(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:C.map(b)})})]})}),N&&(N.hasMenu&&N.menuOverlay?(0,i.jsx)(x,{menuOverlay:N.menuOverlay,children:N.children}):N.href?(0,i.jsx)(y,{href:N.href,children:N.children}):null)]}),p[23]=S,p[24]=N,p[25]=C,p[26]=h):h=p[26],p[27]!==w||p[28]!==r||p[29]!==h?(f=(0,i.jsxs)("nav",{className:d,"aria-label":w,children:[r,h]}),p[27]=w,p[28]=r,p[29]=h,p[30]=f):f=p[30],f},y=e=>{let t,n,s,l,o,d=(0,a.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...l}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=l):(t=d[1],n=d[2],s=d[3],l=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(p.r,{className:"Breadcrumbs-module__skeleton--_d2ba"})}),d[5]=e):e=d[5],e}if(n){let e,a;return d[6]!==t?(e=(0,i.jsx)("span",{className:h,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==l||d[10]!==e?(a=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(r.N_,{...l,to:n,className:m,"aria-current":"page",children:e})}),d[8]=n,d[9]=l,d[10]=e,d[11]=a):a=d[11],a}return d[12]!==t?(o=(0,i.jsx)("li",{className:u,children:(0,i.jsx)("span",{className:"Breadcrumbs-module__textOnly--v7ypW",children:t})}),d[12]=t,d[13]=o):o=d[13],o},x=e=>{let t,n,s,r,o=(0,a.c)(9),{buttonRef:d,children:c,menuOverlay:p}=e;return o[0]!==c?(t=(0,i.jsx)("span",{className:h,children:c}),o[0]=c,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:"Breadcrumbs-module__icon--CWnGJ",children:(0,i.jsx)(f.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsxs)("button",{className:m,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==d||o[6]!==p||o[7]!==s?(r=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{anchorRef:d,children:[s,p]})}),o[5]=d,o[6]=p,o[7]=s,o[8]=r):r=o[8],r};g.Item=y,g.ItemWithMenu=x;try{g.displayName||(g.displayName="Breadcrumbs")}catch{}try{y.displayName||(y.displayName="Item")}catch{}try{x.displayName||(x.displayName="ItemWithMenu")}catch{}function v(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}function b(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}},79988:(e,t,n)=>{n.d(t,{c$:()=>i,n5:()=>a,z4:()=>s});let i="global_sso_banner",a=3,s="dismissed_sso_orgs"},80081:(e,t,n)=>{n.d(t,{EJ:()=>a,Lm:()=>s,o_:()=>i});function i({suggestedChange:e,hasCommitRange:t,isOutdated:n,isPending:i,isResolved:a,pullRequestIsClosed:s,pullRequestIsInMergeQueue:r,userCanApplySuggestion:l,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(n)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(a)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(s)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(r)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(t)return{isValid:!1,reason:"Unable to apply suggestions when viewing a specific commit range."};if(!d)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function a(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function s(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},80770:(e,t,n)=>{n.d(t,{C:()=>l,n:()=>r});var i=n(21728),a=n(97286),s=n(99519);let r="all-loops";function l(){let e,t,n=(0,i.c)(3),l=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==l?(t={queryKey:e,queryFn:async()=>{let e=await l.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(o)},refetchOnMount:!0},n[1]=l,n[2]=t):t=n[2],(0,a.I)(t)}function o(e,t){return t.updatedAt-e.updatedAt}},82130:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(68273),a=n(21728),s=n(30459),r=n(96540);let l=(0,i.Z6)()?function(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:i}=(0,s.s)();n[0]!==i?(e=(e,t,n)=>{i(e,t,void 0===n?{}:n)},n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={sendPullRequestAnalyticsEvent:r},n[2]=r,n[3]=t):t=n[3],t}:function(){let{sendAnalyticsEvent:e}=(0,s.s)();return{sendPullRequestAnalyticsEvent:(0,r.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}},82590:(e,t,n)=>{n.d(t,{J1:()=>d,Os:()=>l,QK:()=>o,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>c});var i=n(25641);let a="loops",s="loops",r="loop",l="Loops",o=`${i.Jz}/loops`,d=`${i.Jz}/l`,c=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},82603:(e,t,n)=>{n.d(t,{dG:()=>u,hG:()=>f,o5:()=>m});var i=n(68273),a=n(21728),s=n(96540),r=n(97286),l=n(65510),o=n(96379),d=n(20622);function c(e){return{queryKey:[d.uT.codeowners,e],queryFn:async()=>{let t=`${e}/page_data/${d.uT.codeowners}`,n=await (0,o.QJ)(t);if(!n.ok)throw Error(`HTTP ${n.status}`);return await n.json()},staleTime:1/0}}let u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),{basePath:s,initialData:l}=e;i[0]!==s?(t=c(s),i[0]=s,i[1]=t):t=i[1];let{queryFn:o,queryKey:d}=t;return i[2]!==l||i[3]!==o||i[4]!==d?(n={queryKey:d,queryFn:o,initialData:l,staleTime:1/0},i[2]=l,i[3]=o,i[4]=d,i[5]=n):n=i[5],(0,r.I)(n)}:function({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}=c(e);return(0,r.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})},m=(0,i.Z6)()?function(e){let t,n,i,s=(0,a.c)(8),{basePath:r,diffPath:o}=e;s[0]!==r?(t=c(r),s[0]=r,s[1]=t):t=s[1];let{queryFn:d,queryKey:u}=t;s[2]!==o?(n=e=>f({codeownersData:e,diffPath:o}),s[2]=o,s[3]=n):n=s[3];let m=n;return s[4]!==d||s[5]!==u||s[6]!==m?(i={queryKey:u,queryFn:d,staleTime:1/0,select:m},s[4]=d,s[5]=u,s[6]=m,s[7]=i):i=s[7],(0,l.U)(i)}:function({basePath:e,diffPath:t}){let{queryFn:n,queryKey:i}=c(e);return(0,l.U)({queryKey:i,queryFn:n,staleTime:1/0,select:(0,s.useCallback)(e=>f({codeownersData:e,diffPath:t}),[t])})},h={isOwnedByViewer:!1,owners:[],ruleLineNumber:void 0,ruleUrl:void 0};function f({diffPath:e,codeownersData:t}){if(!t)return h;let n=t.ownershipByPath[e];return n?{isOwnedByViewer:n.isOwnedByViewer,owners:n.owners||[],ruleLineNumber:n.ruleLineNumber,ruleUrl:n.ruleUrl}:h}},83796:(e,t,n)=>{n.d(t,{A:()=>i});let i={container:"DraftIssueTreeBlock-module__container--framP"}},86909:(e,t,n)=>{n.d(t,{YH:()=>C,Gt:()=>N,Vv:()=>T});var i,a=n(74848),s=n(68273),r=n(21728),l=n(77430),o=n(73017),d=n(38621),c=n(26108),u=n(98552),m=n(69497),h=n(21373),f=n(34164),p=n(48505);let g="Annotation-module__annotation--KlX5M",y="Annotation-module__annotationSource--fZyli",x="Annotation-module__annotationMessage--gFM9M",v="Annotation-module__inlineReviewThreadHeading--Qj9j8";var b=n(90274),_=n(96540),j=n(82075),w=n(71315);let N={[p.UZ.Failure]:(0,a.jsx)(d.StopIcon,{className:"fgColor-danger mr-2"}),[p.UZ.Warning]:(0,a.jsx)(d.AlertIcon,{className:"fgColor-attention mr-2"}),[p.UZ.Notice]:(0,a.jsx)(d.InfoIcon,{className:"fgColor-muted mr-2"})},C=(0,s.GV)()?function(e){let t,n,i,s,p,v,_,j=(0,r.c)(31),{annotation:w,inSidePanel:N}=e,C=N?"h3":"h2",{isCollapsed:S,handleToggleCollapsed:L}=T(w),E=b.GF[w.annotationLevel];return j[0]!==E.borderColor?(t=(0,f.$)("p-1 bgColor-default",E.borderColor,g),j[0]=E.borderColor,j[1]=t):t=j[1],j[2]!==L||j[3]!==N||j[4]!==S?(n=!N&&(0,a.jsx)(c.K,{"aria-label":S?"Expand annotation":"Collapse annotation",icon:S?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:L}),j[2]=L,j[3]=N,j[4]=S,j[5]=n):n=j[5],j[6]!==w||j[7]!==N?(i=!N&&(0,a.jsx)(I,{annotation:w}),j[6]=w,j[7]=N,j[8]=i):i=j[8],j[9]!==w||j[10]!==N?(s=N&&(0,a.jsx)(k,{annotation:w}),j[9]=w,j[10]=N,j[11]=s):s=j[11],j[12]!==n||j[13]!==i||j[14]!==s?(p=(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[n,i,s]}),j[12]=n,j[13]=i,j[14]=s,j[15]=p):p=j[15],j[16]!==C||j[17]!==w.annotationLevel||j[18]!==w.appAvatarAltText||j[19]!==w.appAvatarUrl||j[20]!==w.checkRun||j[21]!==w.checkSuiteName||j[22]!==w.message||j[23]!==w.title||j[24]!==N||j[25]!==S?(v=(!S||N)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:w.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[w.annotationLevel].primaryColorClass,children:w.title})}),(0,a.jsxs)(C,{className:"sr-only",children:[b.GF[w.annotationLevel].ariaLabel,": ",w.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:w.message&&(0,a.jsx)(o.$6,{html:w.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:w.appAvatarUrl,alt:w.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${w.checkSuiteName} / ${w.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:w.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:w.checkRun.name})]})]}),w.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:w.checkRun.detailsUrl,size:"small",children:"View details"})]})]}),j[16]=C,j[17]=w.annotationLevel,j[18]=w.appAvatarAltText,j[19]=w.appAvatarUrl,j[20]=w.checkRun,j[21]=w.checkSuiteName,j[22]=w.message,j[23]=w.title,j[24]=N,j[25]=S,j[26]=v):v=j[26],j[27]!==t||j[28]!==p||j[29]!==v?(_=(0,a.jsxs)("div",{className:t,children:[p,v]}),j[27]=t,j[28]=p,j[29]=v,j[30]=_):_=j[30],_}:function({annotation:e,inSidePanel:t}){let n=(0,_.useMemo)(()=>t?"h3":"h2",[t]),{isCollapsed:i,handleToggleCollapsed:s}=T(e);return(0,a.jsxs)("div",{className:(0,f.$)("p-1 bgColor-default",b.GF[e.annotationLevel].borderColor,g),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[!t&&(0,a.jsx)(c.K,{"aria-label":i?"Expand annotation":"Collapse annotation",icon:i?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:s}),!t&&(0,a.jsx)(I,{annotation:e}),t&&(0,a.jsx)(k,{annotation:e})]}),(!i||t)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:e.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,a.jsxs)(n,{className:"sr-only",children:[b.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(o.$6,{html:e.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})]})},S=(0,s.GV)()?function(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:i}),n[0]=i,n[1]=t):t=n[1],t}:function({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})},I=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(6),{annotation:s}=e,l=N[s.annotationLevel],o=b.GF[s.annotationLevel];return i[0]!==s.endLine?(t=(0,a.jsxs)(S,{children:["R",s.endLine]}),i[0]=s.endLine,i[1]=t):t=i[1],i[2]!==l||i[3]!==o.ariaLabel||i[4]!==t?(n=(0,a.jsxs)("h2",{className:v,children:[l,o.ariaLabel," on line"," ",t]}),i[2]=l,i[3]=o.ariaLabel,i[4]=t,i[5]=n):n=i[5],n}:function({annotation:e}){return(0,a.jsxs)("h2",{className:v,children:[N[e.annotationLevel],b.GF[e.annotationLevel].ariaLabel," on line"," ",(0,a.jsxs)(S,{children:["R",e.endLine]})]})},k=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(3),{annotation:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.$)(v,"ml-4","pt-1","pl-0"),i[0]=t):t=i[0];let l=b.GF[s.annotationLevel];return i[1]!==l.ariaLabel?(n=(0,a.jsx)("div",{className:t,children:(0,a.jsx)(S,{children:l.ariaLabel})}),i[1]=l.ariaLabel,i[2]=n):n=i[2],n}:function({annotation:e}){return(0,a.jsx)("div",{className:(0,f.$)(v,"ml-4","pt-1","pl-0"),children:(0,a.jsx)(S,{children:b.GF[e.annotationLevel].ariaLabel})})};function L(e){return`AnnotationIsCollapsed_${e.path}_${e.endLine}_${e.annotationLevel}_${e.title}`}let T=(0,s.GV)()?function(e){let t,n,i,a,s,l=(0,r.c)(10);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,j.A)("localStorage"),l[0]=t):t=l[0];let o=t,[d,c]=(0,_.useState)(!1);l[1]!==e?(n=()=>{let t=localStorage.getItem(L(e));null!==t&&c(JSON.parse(t))},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,_.useEffect)(n,i),l[4]!==e||l[5]!==d?(a=()=>{w.cg?.requestAnimationFrame(()=>{o.setItem(L(e),JSON.stringify(!d))}),c(E)},l[4]=e,l[5]=d,l[6]=a):a=l[6];let u=a;return l[7]!==u||l[8]!==d?(s={isCollapsed:d,handleToggleCollapsed:u},l[7]=u,l[8]=d,l[9]=s):s=l[9],s}:function(e){let t=(0,j.A)("localStorage"),[n,i]=(0,_.useState)(!1);return(0,_.useEffect)(()=>{let t=localStorage.getItem(L(e));null!==t&&i(JSON.parse(t))},[e]),{isCollapsed:n,handleToggleCollapsed:()=>{w.cg?.requestAnimationFrame(()=>{t.setItem(L(e),JSON.stringify(!n))}),i(e=>!e)}}};function E(e){return!e}try{C.displayName||(C.displayName="Annotation")}catch{}try{(i=AnnotationHeadingTag).displayName||(i.displayName="AnnotationHeadingTag")}catch{}try{S.displayName||(S.displayName="Emphasis")}catch{}try{I.displayName||(I.displayName="AnnotationBanner")}catch{}try{k.displayName||(k.displayName="SidePanelAnnotationBanner")}catch{}},87255:(e,t,n)=>{n.d(t,{Y:()=>C});var i,a=n(74848),s=n(21728),r=n(70170),l=n(53419),o=n(29731),d=n(83494),c=n(88431),u=n(96379),m=n(56149),h=n(86877),f=n(4175),p=n(21373),g=n(15220),y=n(96540),x=n(40961),v=n(2635),b=n(33592),_=n(38621),j=n(5524);let w={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,y.forwardRef)(function(e,t){let n,i,r,l,o,d,c,u,m=(0,s.c)(19),{onSelect:h}=e,[f,p]=(0,y.useState)(!1);m[0]!==f?(n=()=>p(!f),m[0]=f,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(i={marginBottom:"1px"},m[2]=i):i=m[2],m[3]!==h||m[4]!==f?(r=f&&Object.entries(w)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(j.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,n.body),children:[(0,a.jsx)(_.PlusIcon,{}),t]},t)}),m[3]=h,m[4]=f,m[5]=r):r=m[5],m[6]!==r?(l=(0,a.jsx)(j.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=l):l=m[7];let x=f?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(o={border:"1px solid transparent"},m[8]=o):o=m[8],m[9]!==f?(d=f?(0,a.jsx)(_.XIcon,{}):(0,a.jsx)(_.LightBulbIcon,{}),m[9]=f,m[10]=d):d=m[10],m[11]!==x||m[12]!==d||m[13]!==g?(c=(0,a.jsx)(j.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(j.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:o,onSelect:g,children:d})}),m[11]=x,m[12]=d,m[13]=g,m[14]=c):c=m[14],m[15]!==t||m[16]!==l||m[17]!==c?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:i,children:[l,c]}),m[15]=t,m[16]=l,m[17]=c,m[18]=u):u=m[18],u});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(i=PersonalInstructionsTemplatesWithRef).displayName||(i.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let C=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),i=(0,b.b)(),[_,j]=(0,y.useState)(n.personalInstructions??""),[w,C]=(0,y.useState)(void 0),[I,k]=(0,y.useState)(!1),L=(0,y.useRef)(null),T=(0,y.useRef)(null),[E,D]=(0,y.useState)(""),R=((e,t)=>{let n,i,a=(0,s.c)(4),[l,o]=(0,y.useState)(48);return a[0]!==e||500!==a[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],a[0]=e,a[1]=500,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,y.useEffect)(n,i),l})(T);(0,c.N)(()=>{L?.current&&(L.current.scrollTop=L.current.scrollHeight)},[_]);let A=(0,y.useCallback)(async()=>{if(!I){k(!0),E&&(0,l.BI)("copilot_personal_instruction_template_usage",{content:E});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:_}});if(t.ok)(0,l.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),i.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:_}),(0,x.flushSync)(()=>e());else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{k(!1)}}},[I,_,i,e,E]),O=(e,t)=>{t&&(j(_?`${_}
${t}`:t),D(e),L?.current?.focus())},P=()=>{A()},F=(0,y.useCallback)(()=>{(0,l.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.ZL,{children:(0,a.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:A,children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(d.tL,{commands:{"github:submit-form":P},children:[(0,a.jsx)(f.Ay,{ref:L,className:"width-full",style:{paddingBottom:`${R}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:_,validationStatus:w||_.length>4e3?"error":void 0,...(0,o.G)("prompt-input"),onChange:e=>{j(e.target.value),C(void 0)}}),(0,a.jsx)(N,{ref:T,onSelect:O})]})}),(0,a.jsx)(S,{text:_,promptCharLimit:4e3}),w&&(0,a.jsx)(h.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,o.G)("error-message"),children:w})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:"PersonalInstructionsDialog-module__footerContainer--T9wxr",children:[(0,a.jsx)(p.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,a.jsx)(p.Q,{loading:I,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:A,children:"Save"})]})})})};function S(e){let t,n,i,r,l=(0,s.c)(10),{text:d,promptCharLimit:c}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G)("current-character-count"),l[0]=t):t=l[0],l[1]!==d.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:d.length}),l[1]=d.length,l[2]=n):n=l[2],l[3]!==c||l[4]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",c," characters"]}),l[3]=c,l[4]=n,l[5]=i):i=l[5];let u=i;return l[6]!==u||l[7]!==c||l[8]!==d.length?(r=(0,a.jsx)(a.Fragment,{children:d.length>c?(0,a.jsx)(h.A.Validation,{variant:"error",children:u}):(0,a.jsx)(h.A.Caption,{children:u})}),l[6]=u,l[7]=c,l[8]=d.length,l[9]=r):r=l[9],r}try{C.displayName||(C.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},88008:(e,t,n)=>{n.d(t,{CE:()=>s,Ol:()=>r,hW:()=>l});var i=n(95800);function a(e,t){return`${e}-${t}-active-batch-suggestions`}function s(e,t,n){let s=a(e,t);(0,i.SO)(s,JSON.stringify(n))}function r(e,t){let n=a(e,t),s=(0,i.Gq)(n);if(!s)return[];try{let e=JSON.parse(s);return Array.isArray(e)?e:[]}catch{return[]}}function l(e,t){let n=a(e,t);(0,i.Ai)(n)}},89155:(e,t,n)=>{n.d(t,{F:()=>l});var i=n(68273),a=n(21728),s=n(39029),r=n(34261);let l=(0,i.Z6)()?function(e){let t,n=(0,a.c)(1),{refetch:i}=(0,r.W)();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={git_updated:!0,title_updated:!0},n[0]=t):t=n[0],(0,s.og)(e,i,t)}:function(e){let{refetch:t}=(0,r.W)();(0,s.og)(e,t,{git_updated:!0,title_updated:!0})}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90177:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),l=n(94236),o=n(5524),d=n(73783),c=n(26108);let u=(0,n(96540).forwardRef)(function(e,t){let n,u,m,h,f=(0,a.c)(40),{value:p,isLoading:g,onClick:y,onStop:x,variant:v,disabled:b,iconOnly:_,showPickInputsOption:j,onRunWithInputs:w,leadingVisual:N}=e,C=void 0===v?"invisible":v;f[0]!==g||f[1]!==p?(n=()=>g?"Loading...":p?"Run node":"Run loop",f[0]=g,f[1]=p,f[2]=n):n=f[2];let S=n;f[3]!==g||f[4]!==y||f[5]!==x?(u=e=>{g?x?.(e):y(e)},f[3]=g,f[4]=y,f[5]=x,f[6]=u):u=f[6];let I=u;f[7]!==w?(m=()=>{w?.()},f[7]=w,f[8]=m):m=f[8];let k=m;if(void 0!==j&&j&&!g&&!_){let e,n,a,c,u;return f[9]!==b||f[10]!==I||f[11]!==N||f[12]!==t||f[13]!==C?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:C,onClick:I,leadingVisual:N,children:"Run"}),f[9]=b,f[10]=I,f[11]=N,f[12]=t,f[13]=C,f[14]=e):e=f[14],f[15]!==b||f[16]!==C?(n=(0,i.jsx)(l.W.Button,{disabled:b,variant:C,icon:s.TriangleDownIcon,"aria-label":"More run options",className:"ExecuteButton-module__executeButtonSplitDropdown--WsP8k"}),f[15]=b,f[16]=C,f[17]=n):n=f[17],f[18]!==k?(a=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:(0,i.jsx)(o.l.Item,{onSelect:k,children:"Run with custom inputs"})})}),f[18]=k,f[19]=a):a=f[19],f[20]!==n||f[21]!==a?(c=(0,i.jsxs)(l.W,{children:[n,a]}),f[20]=n,f[21]=a,f[22]=c):c=f[22],f[23]!==e||f[24]!==c?(u=(0,i.jsxs)(d.A,{children:[e,c]}),f[23]=e,f[24]=c,f[25]=u):u=f[25],u}if(!_){let e,n=g?"danger":C,a=g?"Stop":"Run";return f[26]!==b||f[27]!==I||f[28]!==N||f[29]!==t||f[30]!==n||f[31]!==a?(e=(0,i.jsx)(r.Q,{ref:t,disabled:b,variant:n,onClick:I,leadingVisual:N,children:a}),f[26]=b,f[27]=I,f[28]=N,f[29]=t,f[30]=n,f[31]=a,f[32]=e):e=f[32],e}let L=S(),T=g?s.SquareFillIcon:s.SyncIcon,E=g?"danger":C;return f[33]!==b||f[34]!==I||f[35]!==t||f[36]!==L||f[37]!==T||f[38]!==E?(h=(0,i.jsx)(c.K,{ref:t,disabled:b,"aria-label":L,icon:T,onClick:I,variant:E}),f[33]=b,f[34]=I,f[35]=t,f[36]=L,f[37]=T,f[38]=E,f[39]=h):h=f[39],h});try{u.displayName||(u.displayName="ExecuteButton")}catch{}},90274:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>o,Xh:()=>r});var i=n(74848),a=n(38267),s=n(48505);function r({annotationLevel:e,...t}){let{icon:n,...a}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:s}){return(0,i.jsx)("svg",{"aria-label":n,className:s,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let l=(0,a.i7)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,a.Ay)(r).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-a1b10f9c-0"})(["animation:"," 0.1s ease-in;"],l),d={[s.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[s.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[s.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{r.displayName||(r.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},91348:(e,t,n)=>{n.d(t,{FT:()=>p,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>o,kX:()=>h,nT:()=>c});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),l=n(45363);function o(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of d(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let l=e.nodes.get(s);if(!l)return t[s]=0,0;let o=d(l);if(o&&0!==o.size){let e=[...o].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function d(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function c(e){return new Set([...d(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:l.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},h=(e,t)=>{var n;let i={...n=e,nodes:n.nodes.map(f)};return{...i,nodes:(i.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function f(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function p(e){let t=o(e.nodes);return e.nodes.filter(e=>x(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>x(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function x(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93161:(e,t,n)=>{n.d(t,{D:()=>i});let i={value:null,startedAt:void 0,completedAt:void 0}},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"==typeof n.error?n.error:(void 0)??s:(void 0)??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[l,o]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>o(!0),r[0]=t):t=r[0];let d=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>o(!1),r[1]=n):n=r[1];let c=n;return r[2]!==l?(s=[l,d,c],r[2]=l,r[3]=s):s=r[3],s}},93642:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){var i,s;let r;if(""===t)return n;let l=t.match(a());if(!l)return n;let o=l.groups.fence;if(!o)return n;let d=o.includes("~")?"~":"`",c=t.match((r=a([i=d],s=o.length),RegExp(`${r.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${s},}[ 	]*$`,"ms")));if(!c)return n;let u=0,m=l.groups.indent;""!==m&&(u=m.length);let h=c.groups.suggestion;if(u>0){let e=RegExp(`^ {0,${u}}`,"m");h=h.replace(e,"")}return n.push(h),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},95254:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(47723);function a(e){if(e&&0!==e.length)for(let t of e){let e=function(e){let t=`${i.qY}::`;if(!e.startsWith(t))return;let n=e.slice(t.length),a=n.indexOf("::");if(-1!==a)return n.slice(0,a)||void 0}(t);if(e)return e}}},95772:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(74848),a=n(21728),s=n(69093),r=n(17925),l=n(53419),o=n(96459),d=n(26607);let c=e=>{let t,n,s,r,l,o,c,u,m=(0,a.c)(16);m[0]!==e?({children:s,icon:t,isNew:r,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]);let h=void 0!==r&&r;return m[5]!==t?(l=(0,i.jsx)(t,{}),m[5]=t,m[6]=l):l=m[6],m[7]!==s?(o=(0,i.jsx)("span",{className:"CommandPill-module__text--ggGhT",children:s}),m[7]=s,m[8]=o):o=m[8],m[9]!==h?(c=h&&(0,i.jsx)(d.A,{size:"small",variant:"accent",children:"New"}),m[9]=h,m[10]=c):c=m[10],m[11]!==n||m[12]!==l||m[13]!==o||m[14]!==c?(u=(0,i.jsxs)("button",{className:"CommandPill-module__button--dwT_a",...n,children:[l,o,c]}),m[11]=n,m[12]=l,m[13]=o,m[14]=c,m[15]=u):u=m[15],u};try{c.displayName||(c.displayName="CommandPill")}catch{}let u=e=>{let t,n,r,l=(0,a.c)(8),{onSelect:o}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},l[0]=t):t=l[0];let{availableCommands:d}=(0,s.j)(t);if(0===d.length)return null;if(l[1]!==d||l[2]!==o){let e;l[4]!==o?(e=e=>(0,i.jsx)("li",{children:(0,i.jsx)(c,{icon:e.icon,onClick:()=>o(e),isNew:e.isNew,children:e.name})},e.key),l[4]=o,l[5]=e):e=l[5],n=d.map(e),l[1]=d,l[2]=o,l[3]=n}else n=l[3];return l[6]!==n?(r=(0,i.jsx)("div",{className:"CommandStarters-module__container--y1QAx",children:(0,i.jsx)("ul",{className:"CommandStarters-module__list--sK_4w",children:n})}),l[6]=n,l[7]=r):r=l[7],r};try{u.displayName||(u.displayName="CommandStarters")}catch{}var m=n(11683),h=n(5524),f=n(79080),p=n(96540);let g=e=>{let t,n,s,r,l,o,d,c,u,g,y,x,v,b,_,j,w,N,C,S,I,k,L,T,E=(0,a.c)(67),{chatCommand:D,suggestions:R,onSelect:A,anchorRef:O,textAreaRef:P}=e,[F,M]=(0,p.useState)(0),[$,B]=(0,p.useState)(0),[V,U]=(0,p.useState)(!1),[q,G]=(0,p.useState)(void 0),[H,K]=(0,p.useState)(-1),[W,z]=(0,p.useState)(""),Q=(0,p.useRef)(null),Z=(0,p.useRef)(null);if(E[0]!==D||E[1]!==R||E[2]!==W){let e;E[4]!==D||E[5]!==W?(e=e=>{let t=`/${D} ${e}`.toLowerCase(),n=W.toLowerCase().trim();return t.includes(n)&&t!==n},E[4]=D,E[5]=W,E[6]=e):e=E[6],t=R.filter(e),E[0]=D,E[1]=R,E[2]=W,E[3]=t}else t=E[3];let J=t,Y=V&&J.length>0;E[7]!==O?(n=()=>{if(Z.current&&O.current){let{top:e,left:t}=(0,m.uG)(Z.current,O.current,{align:"start",side:"outside-bottom",anchorOffset:4});M(e),B(t)}},E[7]=O,E[8]=n):n=E[8];let X=n;E[9]!==P?(s=()=>{P.current===document.activeElement&&U(!0)},r=[P],E[9]=P,E[10]=s,E[11]=r):(s=E[10],r=E[11]),(0,p.useEffect)(s,r),E[12]!==P?(l=()=>{let e=P.current;if(!e)return;let t=()=>{z(e.value)};return z(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},o=[P],E[12]=P,E[13]=l,E[14]=o):(l=E[13],o=E[14]),(0,p.useEffect)(l,o),E[15]!==O||E[16]!==Y||E[17]!==X?(d=()=>{let e=O.current;if(!Y||!e)return;let t=()=>{O.current&&(G(O.current.getBoundingClientRect().width),X())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},c=[Y,O,X],E[15]=O,E[16]=Y,E[17]=X,E[18]=d,E[19]=c):(d=E[18],c=E[19]),(0,p.useEffect)(d,c),E[20]!==P?(u=e=>!!e&&((P.current?.contains(e)??!1)||(Z.current?.contains(e)??!1)),E[20]=P,E[21]=u):u=E[21];let ee=u;E[22]!==ee||E[23]!==P?(g=()=>{let e=P.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},y=[P,ee],E[22]=ee,E[23]=P,E[24]=g,E[25]=y):(g=E[24],y=E[25]),(0,p.useEffect)(g,y),E[26]!==D||E[27]!==P?(x=()=>{let e=P.current;if(!e)return;let t=()=>{D&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},v=[P,D],E[26]=D,E[27]=P,E[28]=x,E[29]=v):(x=E[28],v=E[29]),(0,p.useEffect)(x,v),E[30]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{U(!1),K(-1)},E[30]=b):b=E[30];let et=b;E[31]!==Y||E[32]!==P?(_=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||K(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},j=[P,Y],E[31]=Y,E[32]=P,E[33]=_,E[34]=j):(_=E[33],j=E[34]),(0,p.useEffect)(_,j),E[35]!==D||E[36]!==Y||E[37]!==A||E[38]!==P||E[39]!==J?(w=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";K(e=>{let n,i;return n="down"===t?-1===e?0:Math.min(e+1,J.length-1):-1===e?J.length-1:Math.max(e-1,0),(i=J[n])&&A(D,i),n})}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},N=[P,Y,J,D,A],E[35]=D,E[36]=Y,E[37]=A,E[38]=P,E[39]=J,E[40]=w,E[41]=N):(w=E[40],N=E[41]),(0,p.useEffect)(w,N),E[42]!==ee?(C=e=>{e.target instanceof Node&&ee(e.target)||et()},E[42]=ee,E[43]=C):C=E[43];let en=C;E[44]!==D||E[45]!==A?(S=e=>{A(D,e),K(-1)},E[44]=D,E[45]=A,E[46]=S):S=E[46];let ei=S;if(!Y)return null;if(E[47]!==q?(I=q?{width:`${q}px`}:void 0,E[47]=q,E[48]=I):I=E[48],E[49]!==D||E[50]!==ei||E[51]!==H||E[52]!==J){let e;E[54]!==D||E[55]!==ei||E[56]!==H?(e=(e,t)=>(0,i.jsxs)(h.l.Item,{size:"large",onSelect:()=>ei(e),active:t===H,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsxs)("span",{className:"fgColor-muted",children:["/",D]})}),e]},e),E[54]=D,E[55]=ei,E[56]=H,E[57]=e):e=E[57],k=J.map(e),E[49]=D,E[50]=ei,E[51]=H,E[52]=J,E[53]=k}else k=E[53];return E[58]!==k?(L=(0,i.jsx)(h.l,{children:k}),E[58]=k,E[59]=L):L=E[59],E[60]!==O||E[61]!==$||E[62]!==en||E[63]!==I||E[64]!==L||E[65]!==F?(T=(0,i.jsx)(f.Ay,{top:F,left:$,onClickOutside:en,onEscape:et,returnFocusRef:O,"aria-label":"Command suggestions",style:I,"data-testid":"command-suggestions-overlay",ref:Z,preventFocusOnOpen:!0,children:L}),E[60]=O,E[61]=$,E[62]=en,E[63]=I,E[64]=L,E[65]=F,E[66]=T):T=E[66],T};try{g.displayName||(g.displayName="CommandSuggestions")}catch{}function y(e){let t,n,d,c,m,h,f,p,y=(0,a.c)(25),{chatCommand:x,chatInputRef:v,containerRef:b,textAreaRef:_}=e;y[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},y[0]=t):t=y[0];let{availableCommands:j,availableCommandKeys:w}=(0,s.j)(t),N=(0,o.Z)();y[1]!==w||y[2]!==v||y[3]!==N||y[4]!==_?(n=e=>{((0,l.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e.key}),e.enabled?.()===!1&&e.disabledAction)?e.disabledAction(N):(v.current?.setText(t=>{let n=(0,r.V)(t,w);return n?t.replace(`/${n}`,`/${e.key}`):`/${e.key} ${t}`}),_.current?.focus())},y[1]=w,y[2]=v,y[3]=N,y[4]=_,y[5]=n):n=y[5];let C=n;y[6]!==v||y[7]!==_?(d=(e,t)=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t}),v.current?.setText(`/${e} ${t}`.trim()),_.current?.focus()},y[6]=v,y[7]=_,y[8]=d):d=y[8];let S=d;y[9]!==j||y[10]!==x?(c=x?j.find(e=>e.key===x)?.suggestions:null,y[9]=j,y[10]=x,y[11]=c):c=y[11];let I=c,k=I&&I.length>0;return y[12]!==x||y[13]!==b||y[14]!==S||y[15]!==k||y[16]!==I||y[17]!==_?(m=x&&k&&(0,i.jsx)(g,{chatCommand:x,suggestions:I,onSelect:S,anchorRef:b,textAreaRef:_},x),y[12]=x,y[13]=b,y[14]=S,y[15]=k,y[16]=I,y[17]=_,y[18]=m):m=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),y[19]=h):h=y[19],y[20]!==C?(f=(0,i.jsxs)(i.Fragment,{children:[h,(0,i.jsx)(u,{onSelect:C})]}),y[20]=C,y[21]=f):f=y[21],y[22]!==m||y[23]!==f?(p=(0,i.jsxs)(i.Fragment,{children:[m,f]}),y[22]=m,y[23]=f,y[24]=p):p=y[24],p}try{y.displayName||(y.displayName="CommandStartersAndSuggestions")}catch{}},95807:(e,t,n)=>{n.d(t,{i:()=>v});var i=n(74848),a=n(68273),s=n(21728),r=n(96379),l=n(21373),o=n(69726),d=n(11196),c=n(96540),u=n(30459),m=n(57224),h=n(70263);let f="PullRequestsProcessingIndicator-module__button--IKkby",p="PullRequestsProcessingIndicator-module__indicator--iNiwb",g="PullRequestsProcessingIndicator-module__text--JUMXg";function y(e,t){return Math.round(e.getTime()-t.getTime())/1e3}let x={stale:!1,latest_unsynced_push_to_head_ref_at:null};function v({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[a,s]=(0,c.useState)(x),l=(0,h.A)(),o=(0,c.useCallback)(async()=>{try{let t=await (0,r.lS)(e);if(t.ok){let e=await t.json();l()&&s(e)}}catch{l()&&s(x)}},[l,e]);(0,c.useEffect)(()=>{o()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:u}=a;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(m.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(b,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:u})})})}let b=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(6),{pullRequestId:r,repositoryId:c,stale:m,latest_unsynced_push_to_head_ref_at:h}=e,{sendAnalyticsEvent:x}=(0,u.s)();if(!m||!h)return null;if(a[0]!==h||a[1]!==r||a[2]!==c||a[3]!==x){t=Symbol.for("react.early_return_sentinel");e:{let e=y(new Date,new Date(h));if(e<20||e>=86400){t=null;break e}x("pull_requests.processing_indicator","",{repositoryId:c,pullRequestId:r,secondsSinceLastPush:e})}a[0]=h,a[1]=r,a[2]=c,a[3]=x,a[4]=t}else t=a[4];return t!==Symbol.for("react.early_return_sentinel")?t:(a[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}),a[5]=n):n=a[5],n)}:function({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:s}=(0,u.s)();if(!n||!a)return null;let r=y(new Date,new Date(a));return r<20||r>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:r}),(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}))};try{v.displayName||(v.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{b.displayName||(b.displayName="PullRequestsProcessingIndicator")}catch{}},96002:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(21728),s=n(53419),r=n(74753),l=n(73077),o=n(84078),d=n(79184);function c(){let e,t,n,s,c=(0,a.c)(6),{resetDate:m}=(0,d.xR)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.s,{children:(0,i.jsx)("h2",{children:"Limit reached"})}),c[0]=e):e=c[0],c[1]!==m?(t=(0,i.jsxs)(i.Fragment,{children:[e,"You have reached your free plan limit. Limit resets on ",m,"."]}),c[1]=m,c[2]=t):t=c[2];let h=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:u,children:"Upgrade"}),c[3]=n):n=c[3];let f=n;return c[4]!==h?(s=(0,i.jsx)("div",{className:"FreeChatExceededBanner-module__container--yeDGw",children:(0,i.jsx)(o.l,{variant:"upsell",title:"Limit reached",description:h,hideTitle:!0,primaryAction:f})}),c[4]=h,c[5]=s):s=c[5],s}function u(){(0,s.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{c.displayName||(c.displayName="FreeChatExceededBanner")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},97695:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(68273),a=n(21728),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011),u=n(21067);let m=(0,i.Z6)()?function(e,t){let n,i,m,h,f=(0,a.c)(12),p=(0,c.Kp)();f[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.cj)(),f[0]=n):n=f[0];let g=n,y=`${p}/page_data/${r.uT.resolveThread}`,x=(0,l.jE)(),{updateThread:v}=(0,c.an)();return f[1]!==y?(i=async e=>{let{threadId:t}=e,n=await (0,s.q$)(y,{method:"POST",body:{threadId:t}});(0,s.R)(n)},f[1]=y,f[2]=i):i=f[2],f[3]!==p||f[4]!==e||f[5]!==t||f[6]!==x||f[7]!==v?(m=(n,i)=>(v(Number(i.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:g}}),x.invalidateQueries({queryKey:(0,d.XG)(p)})),f[3]=p,f[4]=e,f[5]=t,f[6]=x,f[7]=v,f[8]=m):m=f[8],f[9]!==i||f[10]!==m?(h={mutationFn:i,onSuccess:m},f[9]=i,f[10]=m,f[11]=h):h=f[11],(0,o.n)(h)}:function(e,t){let n=(0,c.Kp)(),i=(0,u.cj)(),a=`${n}/page_data/${r.uT.resolveThread}`,m=(0,l.jE)(),{updateThread:h}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(a,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(a,s)=>(h(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:i}}),m.invalidateQueries({queryKey:(0,d.XG)(n)}))})}},99279:(e,t,n)=>{n.d(t,{G:()=>i});let i=n(12435).$h.create("pull-requests")},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>f,c_:()=>h});var i=n(21728),a=n(97665),s=n(97286),r=n(61526),l=n(99519),o=n(78456),d=n(33026),c=n(50050),u=n(90756);let m="loop";function h(e,t){return[m,e,t]}function f(e,t){let n,f,y,x,v=(0,i.c)(15),{loopID:b}=(0,r.g)(),_=(0,l.EY)(),j=(0,a.jE)(),w=(0,c.Ud)(g),N=t||w||d.kj;v[0]!==b||v[1]!==N?(n=[m,b,N],v[0]=b,v[1]=N,v[2]=n):n=v[2];let C=n;v[3]!==b||v[4]!==j||v[5]!==_||v[6]!==N?(f=async()=>{if(!b)return null;let e=o.Io.find(e=>e.id===b)??null;if(e)return e;let t=await _.getLoop(b,N);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==N&&j.setQueryData(h(t.data.id,t.data.version),t.data),t.data},v[3]=b,v[4]=j,v[5]=_,v[6]=N,v[7]=f):f=v[7];let S=!!b;return v[8]!==e?(y=e&&{select:e},v[8]=e,v[9]=y):y=v[9],v[10]!==C||v[11]!==f||v[12]!==S||v[13]!==y?(x={placeholderData:p,queryKey:C,queryFn:f,enabled:S,...y,staleTime:3e5},v[10]=C,v[11]=f,v[12]=S,v[13]=y,v[14]=x):x=v[14],(0,s.I)(x)}function p(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=50832-3f1ef7b56a01.js.map